"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:no-unused-variable

const assert = require("assert");

const path = require("path");

const vscode = require("vscode");

const common_1 = require("../common");

const initialize_1 = require("../initialize");

const serviceRegistry_1 = require("../unittests/serviceRegistry");

const autoCompPath = path.join(__dirname, '..', '..', '..', 'src', 'test', 'pythonFiles', 'autocomp');
const fileOne = path.join(autoCompPath, 'one.py');
const fileImport = path.join(autoCompPath, 'imp.py');
const fileDoc = path.join(autoCompPath, 'doc.py');
const fileLambda = path.join(autoCompPath, 'lamb.py');
const fileDecorator = path.join(autoCompPath, 'deco.py');
const fileEncoding = path.join(autoCompPath, 'four.py');
const fileEncodingUsed = path.join(autoCompPath, 'five.py');
const fileSuppress = path.join(autoCompPath, 'suppress.py'); // tslint:disable-next-line:max-func-body-length

suite('Autocomplete', function () {
  // Attempt to fix #1301
  // tslint:disable-next-line:no-invalid-this
  this.timeout(60000);
  let isPython2;
  let ioc;
  suiteSetup(function () {
    return __awaiter(this, void 0, void 0, function* () {
      // Attempt to fix #1301
      // tslint:disable-next-line:no-invalid-this
      this.timeout(60000);
      yield initialize_1.initialize();
      initializeDI();
      isPython2 = (yield ioc.getPythonMajorVersion(common_1.rootWorkspaceUri)) === 2;
    });
  });
  setup(initialize_1.initializeTest);
  suiteTeardown(initialize_1.closeActiveWindows);
  teardown(() => __awaiter(this, void 0, void 0, function* () {
    yield initialize_1.closeActiveWindows();
    ioc.dispose();
  }));

  function initializeDI() {
    ioc = new serviceRegistry_1.UnitTestIocContainer();
    ioc.registerCommonTypes();
    ioc.registerVariableTypes();
    ioc.registerProcessTypes();
  }

  test('For "sys."', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileOne).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(3, 10);
      return vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    }).then(list => {
      assert.equal(list.items.filter(item => item.label === 'api_version').length, 1, 'api_version not found');
    }).then(done, done);
  }); // https://github.com/DonJayamanne/pythonVSCode/issues/975

  test('For "import *"', () => __awaiter(this, void 0, void 0, function* () {
    const textDocument = yield vscode.workspace.openTextDocument(fileImport);
    yield vscode.window.showTextDocument(textDocument);
    const position = new vscode.Position(1, 4);
    const list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    assert.equal(list.items.filter(item => item.label === 'fstat').length, 1, 'fstat not found');
  })); // https://github.com/DonJayamanne/pythonVSCode/issues/898

  test('For "f.readlines()"', () => __awaiter(this, void 0, void 0, function* () {
    const textDocument = yield vscode.workspace.openTextDocument(fileDoc);
    yield vscode.window.showTextDocument(textDocument);
    const position = new vscode.Position(5, 27);
    const list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position); // These are not known to work, jedi issue
    // assert.equal(list.items.filter(item => item.label === 'capitalize').length, 1, 'capitalize not found (known not to work, Jedi issue)');
    // assert.notEqual(list.items.filter(item => item.label === 'upper').length, 1, 'upper not found');
    // assert.notEqual(list.items.filter(item => item.label === 'lower').length, 1, 'lower not found');
  })); // https://github.com/DonJayamanne/pythonVSCode/issues/265

  test('For "lambda"', function () {
    return __awaiter(this, void 0, void 0, function* () {
      if (isPython2) {
        // tslint:disable-next-line:no-invalid-this
        this.skip();
        return;
      }

      const textDocument = yield vscode.workspace.openTextDocument(fileLambda);
      yield vscode.window.showTextDocument(textDocument);
      const position = new vscode.Position(1, 19);
      const list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
      assert.notEqual(list.items.filter(item => item.label === 'append').length, 0, 'append not found');
      assert.notEqual(list.items.filter(item => item.label === 'clear').length, 0, 'clear not found');
      assert.notEqual(list.items.filter(item => item.label === 'count').length, 0, 'cound not found');
    });
  }); // https://github.com/DonJayamanne/pythonVSCode/issues/630

  test('For "abc.decorators"', () => __awaiter(this, void 0, void 0, function* () {
    // Disabled for the Language Server, see https://github.com/Microsoft/PTVS/issues/3857
    if (initialize_1.IsLanguageServerTest()) {
      return;
    }

    const textDocument = yield vscode.workspace.openTextDocument(fileDecorator);
    yield vscode.window.showTextDocument(textDocument);
    let position = new vscode.Position(3, 9);
    let list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    assert.notEqual(list.items.filter(item => item.label === 'ABCMeta').length, 0, 'ABCMeta not found');
    assert.notEqual(list.items.filter(item => item.label === 'abstractmethod').length, 0, 'abstractmethod not found');
    position = new vscode.Position(4, 9);
    list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    assert.notEqual(list.items.filter(item => item.label === 'ABCMeta').length, 0, 'ABCMeta not found');
    assert.notEqual(list.items.filter(item => item.label === 'abstractmethod').length, 0, 'abstractmethod not found');
    position = new vscode.Position(2, 30);
    list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    assert.notEqual(list.items.filter(item => item.label === 'ABCMeta').length, 0, 'ABCMeta not found');
    assert.notEqual(list.items.filter(item => item.label === 'abstractmethod').length, 0, 'abstractmethod not found');
  })); // https://github.com/DonJayamanne/pythonVSCode/issues/727
  // https://github.com/DonJayamanne/pythonVSCode/issues/746
  // https://github.com/davidhalter/jedi/issues/859

  test('For "time.slee"', () => __awaiter(this, void 0, void 0, function* () {
    const textDocument = yield vscode.workspace.openTextDocument(fileDoc);
    yield vscode.window.showTextDocument(textDocument);
    const position = new vscode.Position(10, 9);
    const list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    const items = list.items.filter(item => item.label === 'sleep');
    assert.notEqual(items.length, 0, 'sleep not found');
    checkDocumentation(items[0], 'Delay execution for a given number of seconds.  The argument may be');
  }));
  test('For custom class', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileOne).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(30, 4);
      return vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    }).then(list => {
      assert.notEqual(list.items.filter(item => item.label === 'method1').length, 0, 'method1 not found');
      assert.notEqual(list.items.filter(item => item.label === 'method2').length, 0, 'method2 not found');
    }).then(done, done);
  });
  test('With Unicode Characters', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileEncoding).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(25, 4);
      return vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    }).then(list => {
      const items = list.items.filter(item => item.label === 'bar');
      assert.equal(items.length, 1, 'bar not found');
      const expected1 = '说明 - keep this line, it works';
      checkDocumentation(items[0], expected1);
      const expected2 = '如果存在需要等待审批或正在执行的任务，将不刷新页面';
      checkDocumentation(items[0], expected2);
    }).then(done, done);
  });
  test('Across files With Unicode Characters', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileEncodingUsed).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(1, 5);
      return vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, position);
    }).then(list => {
      let items = list.items.filter(item => item.label === 'Foo');
      assert.equal(items.length, 1, 'Foo not found');
      checkDocumentation(items[0], '说明');
      items = list.items.filter(item => item.label === 'showMessage');
      assert.equal(items.length, 1, 'showMessage not found');
      const expected1 = 'Кюм ут жэмпэр пошжим льаборэж, коммюны янтэрэсщэт нам ед, декта игнота ныморэ жят эи.';
      checkDocumentation(items[0], expected1);
      const expected2 = 'Шэа декам экшырки эи, эи зыд эррэм докэндё, векж факэтэ пэрчыквюэрёж ку.';
      checkDocumentation(items[0], expected2);
    }).then(done, done);
  }); // https://github.com/Microsoft/vscode-python/issues/110

  test('Suppress in strings/comments', () => __awaiter(this, void 0, void 0, function* () {
    // Excluded from the Language Server b/c skipping of strings and comments
    // is not yet there. See https://github.com/Microsoft/PTVS/issues/3798
    if (initialize_1.IsLanguageServerTest()) {
      return;
    }

    const positions = [new vscode.Position(0, 1), new vscode.Position(0, 9), new vscode.Position(0, 12), new vscode.Position(1, 1), new vscode.Position(1, 3), new vscode.Position(2, 7), new vscode.Position(3, 0), new vscode.Position(4, 2), new vscode.Position(4, 8), new vscode.Position(5, 4), new vscode.Position(5, 10) // false
    ];
    const expected = [false, true, false, false, false, false, false, false, false, false, false];
    const textDocument = yield vscode.workspace.openTextDocument(fileSuppress);
    yield vscode.window.showTextDocument(textDocument);

    for (let i = 0; i < positions.length; i += 1) {
      const list = yield vscode.commands.executeCommand('vscode.executeCompletionItemProvider', textDocument.uri, positions[i]);
      const result = list.items.filter(item => item.label === 'abs').length;
      assert.equal(result > 0, expected[i], `Expected ${expected[i]} at position ${positions[i].line}:${positions[i].character} but got ${result}`);
    }
  }));
}); // tslint:disable-next-line:no-any

function checkDocumentation(item, expectedContains) {
  let isValidType = false;
  let documentation;

  if (typeof item.documentation === 'string') {
    isValidType = true;
    documentation = item.documentation;
  } else {
    documentation = item.documentation.value;
    isValidType = documentation !== undefined && documentation !== null;
  }

  assert.equal(isValidType, true, 'Documentation is neither string nor vscode.MarkdownString');
  const inDoc = documentation.indexOf(expectedContains) >= 0;
  assert.equal(inDoc, true, 'Documentation incorrect');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UudGVzdC5qcyJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiYXNzZXJ0IiwicmVxdWlyZSIsInBhdGgiLCJ2c2NvZGUiLCJjb21tb25fMSIsImluaXRpYWxpemVfMSIsInNlcnZpY2VSZWdpc3RyeV8xIiwiYXV0b0NvbXBQYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImZpbGVPbmUiLCJmaWxlSW1wb3J0IiwiZmlsZURvYyIsImZpbGVMYW1iZGEiLCJmaWxlRGVjb3JhdG9yIiwiZmlsZUVuY29kaW5nIiwiZmlsZUVuY29kaW5nVXNlZCIsImZpbGVTdXBwcmVzcyIsInN1aXRlIiwidGltZW91dCIsImlzUHl0aG9uMiIsImlvYyIsInN1aXRlU2V0dXAiLCJpbml0aWFsaXplIiwiaW5pdGlhbGl6ZURJIiwiZ2V0UHl0aG9uTWFqb3JWZXJzaW9uIiwicm9vdFdvcmtzcGFjZVVyaSIsInNldHVwIiwiaW5pdGlhbGl6ZVRlc3QiLCJzdWl0ZVRlYXJkb3duIiwiY2xvc2VBY3RpdmVXaW5kb3dzIiwidGVhcmRvd24iLCJkaXNwb3NlIiwiVW5pdFRlc3RJb2NDb250YWluZXIiLCJyZWdpc3RlckNvbW1vblR5cGVzIiwicmVnaXN0ZXJWYXJpYWJsZVR5cGVzIiwicmVnaXN0ZXJQcm9jZXNzVHlwZXMiLCJ0ZXN0IiwidGV4dERvY3VtZW50Iiwid29ya3NwYWNlIiwib3BlblRleHREb2N1bWVudCIsImRvY3VtZW50Iiwid2luZG93Iiwic2hvd1RleHREb2N1bWVudCIsImVkaXRvciIsImFjdGl2ZVRleHRFZGl0b3IiLCJwb3NpdGlvbiIsIlBvc2l0aW9uIiwiY29tbWFuZHMiLCJleGVjdXRlQ29tbWFuZCIsInVyaSIsImxpc3QiLCJlcXVhbCIsIml0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsImxhYmVsIiwibGVuZ3RoIiwic2tpcCIsIm5vdEVxdWFsIiwiSXNMYW5ndWFnZVNlcnZlclRlc3QiLCJjaGVja0RvY3VtZW50YXRpb24iLCJleHBlY3RlZDEiLCJleHBlY3RlZDIiLCJwb3NpdGlvbnMiLCJleHBlY3RlZCIsImkiLCJsaW5lIiwiY2hhcmFjdGVyIiwiZXhwZWN0ZWRDb250YWlucyIsImlzVmFsaWRUeXBlIiwiZG9jdW1lbnRhdGlvbiIsInVuZGVmaW5lZCIsImluRG9jIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6IkFBQUEsYSxDQUNBO0FBQ0E7O0FBQ0EsSUFBSUEsU0FBUyxHQUFJLFVBQVEsU0FBS0EsU0FBZCxJQUE0QixVQUFVQyxPQUFWLEVBQW1CQyxVQUFuQixFQUErQkMsQ0FBL0IsRUFBa0NDLFNBQWxDLEVBQTZDO0FBQ3JGLFNBQU8sS0FBS0QsQ0FBQyxLQUFLQSxDQUFDLEdBQUdFLE9BQVQsQ0FBTixFQUF5QixVQUFVQyxPQUFWLEVBQW1CQyxNQUFuQixFQUEyQjtBQUN2RCxhQUFTQyxTQUFULENBQW1CQyxLQUFuQixFQUEwQjtBQUFFLFVBQUk7QUFBRUMsUUFBQUEsSUFBSSxDQUFDTixTQUFTLENBQUNPLElBQVYsQ0FBZUYsS0FBZixDQUFELENBQUo7QUFBOEIsT0FBcEMsQ0FBcUMsT0FBT0csQ0FBUCxFQUFVO0FBQUVMLFFBQUFBLE1BQU0sQ0FBQ0ssQ0FBRCxDQUFOO0FBQVk7QUFBRTs7QUFDM0YsYUFBU0MsUUFBVCxDQUFrQkosS0FBbEIsRUFBeUI7QUFBRSxVQUFJO0FBQUVDLFFBQUFBLElBQUksQ0FBQ04sU0FBUyxDQUFDLE9BQUQsQ0FBVCxDQUFtQkssS0FBbkIsQ0FBRCxDQUFKO0FBQWtDLE9BQXhDLENBQXlDLE9BQU9HLENBQVAsRUFBVTtBQUFFTCxRQUFBQSxNQUFNLENBQUNLLENBQUQsQ0FBTjtBQUFZO0FBQUU7O0FB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QUksT0FBT2hCLElBQUksQ0FBQ2dCLGFBQVosS0FBOEIsUUFBbEMsRUFBNEM7QUFDeENELElBQUFBLFdBQVcsR0FBRyxJQUFkO0FBQ0FDLElBQUFBLGFBQWEsR0FBR2hCLElBQUksQ0FBQ2dCLGFBQXJCO0FBQ0gsR0FIRCxNQUlLO0FBQ0RBLElBQUFBLGFBQWEsR0FBR2hCLElBQUksQ0FBQ2dCLGFBQUwsQ0FBbUJuRixLQUFuQztBQUNBa0YsSUFBQUEsV0FBVyxHQUFHQyxhQUFhLEtBQUtDLFNBQWxCLElBQStCRCxhQUFhLEtBQUssSUFBL0Q7QUFDSDs7QUFDRHZFLEVBQUFBLE1BQU0sQ0FBQ29ELEtBQVAsQ0FBYWtCLFdBQWIsRUFBMEIsSUFBMUIsRUFBZ0MsMkRBQWhDO0FBQ0EsUUFBTUcsS0FBSyxHQUFHRixhQUFhLENBQUNHLE9BQWQsQ0FBc0JMLGdCQUF0QixLQUEyQyxDQUF6RDtBQUNBckUsRUFBQUEsTUFBTSxDQUFDb0QsS0FBUCxDQUFhcUIsS0FBYixFQUFvQixJQUFwQixFQUEwQix5QkFBMUI7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZVxyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IHZzY29kZSA9IHJlcXVpcmUoXCJ2c2NvZGVcIik7XHJcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4uL2NvbW1vblwiKTtcclxuY29uc3QgaW5pdGlhbGl6ZV8xID0gcmVxdWlyZShcIi4uL2luaXRpYWxpemVcIik7XHJcbmNvbnN0IHNlcnZpY2VSZWdpc3RyeV8xID0gcmVxdWlyZShcIi4uL3VuaXR0ZXN0cy9zZXJ2aWNlUmVnaXN0cnlcIik7XHJcbmNvbnN0IGF1dG9Db21wUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICdzcmMnLCAndGVzdCcsICdweXRob25GaWxlcycsICdhdXRvY29tcCcpO1xyXG5jb25zdCBmaWxlT25lID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ29uZS5weScpO1xyXG5jb25zdCBmaWxlSW1wb3J0ID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ2ltcC5weScpO1xyXG5jb25zdCBmaWxlRG9jID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ2RvYy5weScpO1xyXG5jb25zdCBmaWxlTGFtYmRhID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ2xhbWIucHknKTtcclxuY29uc3QgZmlsZURlY29yYXRvciA9IHBhdGguam9pbihhdXRvQ29tcFBhdGgsICdkZWNvLnB5Jyk7XHJcbmNvbnN0IGZpbGVFbmNvZGluZyA9IHBhdGguam9pbihhdXRvQ29tcFBhdGgsICdmb3VyLnB5Jyk7XHJcbmNvbnN0IGZpbGVFbmNvZGluZ1VzZWQgPSBwYXRoLmpvaW4oYXV0b0NvbXBQYXRoLCAnZml2ZS5weScpO1xyXG5jb25zdCBmaWxlU3VwcHJlc3MgPSBwYXRoLmpvaW4oYXV0b0NvbXBQYXRoLCAnc3VwcHJlc3MucHknKTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1mdW5jLWJvZHktbGVuZ3RoXHJcbnN1aXRlKCdBdXRvY29tcGxldGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBBdHRlbXB0IHRvIGZpeCAjMTMwMVxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xyXG4gICAgdGhpcy50aW1lb3V0KDYwMDAwKTtcclxuICAgIGxldCBpc1B5dGhvbjI7XHJcbiAgICBsZXQgaW9jO1xyXG4gICAgc3VpdGVTZXR1cChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBmaXggIzEzMDFcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQoNjAwMDApO1xyXG4gICAgICAgICAgICB5aWVsZCBpbml0aWFsaXplXzEuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICBpbml0aWFsaXplREkoKTtcclxuICAgICAgICAgICAgaXNQeXRob24yID0gKHlpZWxkIGlvYy5nZXRQeXRob25NYWpvclZlcnNpb24oY29tbW9uXzEucm9vdFdvcmtzcGFjZVVyaSkpID09PSAyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBzZXR1cChpbml0aWFsaXplXzEuaW5pdGlhbGl6ZVRlc3QpO1xyXG4gICAgc3VpdGVUZWFyZG93bihpbml0aWFsaXplXzEuY2xvc2VBY3RpdmVXaW5kb3dzKTtcclxuICAgIHRlYXJkb3duKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICB5aWVsZCBpbml0aWFsaXplXzEuY2xvc2VBY3RpdmVXaW5kb3dzKCk7XHJcbiAgICAgICAgaW9jLmRpc3Bvc2UoKTtcclxuICAgIH0pKTtcclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVESSgpIHtcclxuICAgICAgICBpb2MgPSBuZXcgc2VydmljZVJlZ2lzdHJ5XzEuVW5pdFRlc3RJb2NDb250YWluZXIoKTtcclxuICAgICAgICBpb2MucmVnaXN0ZXJDb21tb25UeXBlcygpO1xyXG4gICAgICAgIGlvYy5yZWdpc3RlclZhcmlhYmxlVHlwZXMoKTtcclxuICAgICAgICBpb2MucmVnaXN0ZXJQcm9jZXNzVHlwZXMoKTtcclxuICAgIH1cclxuICAgIHRlc3QoJ0ZvciBcInN5cy5cIicsIGRvbmUgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0RG9jdW1lbnQ7XHJcbiAgICAgICAgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVPbmUpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDMsIDEwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4obGlzdCA9PiB7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdhcGlfdmVyc2lvbicpLmxlbmd0aCwgMSwgJ2FwaV92ZXJzaW9uIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgIH0pLnRoZW4oZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Eb25KYXlhbWFubmUvcHl0aG9uVlNDb2RlL2lzc3Vlcy85NzVcclxuICAgIHRlc3QoJ0ZvciBcImltcG9ydCAqXCInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dERvY3VtZW50ID0geWllbGQgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVJbXBvcnQpO1xyXG4gICAgICAgIHlpZWxkIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbigxLCA0KTtcclxuICAgICAgICBjb25zdCBsaXN0ID0geWllbGQgdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUNvbXBsZXRpb25JdGVtUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxpc3QuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5sYWJlbCA9PT0gJ2ZzdGF0JykubGVuZ3RoLCAxLCAnZnN0YXQgbm90IGZvdW5kJyk7XHJcbiAgICB9KSk7XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRG9uSmF5YW1hbm5lL3B5dGhvblZTQ29kZS9pc3N1ZXMvODk4XHJcbiAgICB0ZXN0KCdGb3IgXCJmLnJlYWRsaW5lcygpXCInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dERvY3VtZW50ID0geWllbGQgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVEb2MpO1xyXG4gICAgICAgIHlpZWxkIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbig1LCAyNyk7XHJcbiAgICAgICAgY29uc3QgbGlzdCA9IHlpZWxkIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIC8vIFRoZXNlIGFyZSBub3Qga25vd24gdG8gd29yaywgamVkaSBpc3N1ZVxyXG4gICAgICAgIC8vIGFzc2VydC5lcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdjYXBpdGFsaXplJykubGVuZ3RoLCAxLCAnY2FwaXRhbGl6ZSBub3QgZm91bmQgKGtub3duIG5vdCB0byB3b3JrLCBKZWRpIGlzc3VlKScpO1xyXG4gICAgICAgIC8vIGFzc2VydC5ub3RFcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICd1cHBlcicpLmxlbmd0aCwgMSwgJ3VwcGVyIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgIC8vIGFzc2VydC5ub3RFcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdsb3dlcicpLmxlbmd0aCwgMSwgJ2xvd2VyIG5vdCBmb3VuZCcpO1xyXG4gICAgfSkpO1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0RvbkpheWFtYW5uZS9weXRob25WU0NvZGUvaXNzdWVzLzI2NVxyXG4gICAgdGVzdCgnRm9yIFwibGFtYmRhXCInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgaWYgKGlzUHl0aG9uMikge1xyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5za2lwKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdGV4dERvY3VtZW50ID0geWllbGQgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVMYW1iZGEpO1xyXG4gICAgICAgICAgICB5aWVsZCB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDEsIDE5KTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IHlpZWxkIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnYXBwZW5kJykubGVuZ3RoLCAwLCAnYXBwZW5kIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnY2xlYXInKS5sZW5ndGgsIDAsICdjbGVhciBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKGxpc3QuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5sYWJlbCA9PT0gJ2NvdW50JykubGVuZ3RoLCAwLCAnY291bmQgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Eb25KYXlhbWFubmUvcHl0aG9uVlNDb2RlL2lzc3Vlcy82MzBcclxuICAgIHRlc3QoJ0ZvciBcImFiYy5kZWNvcmF0b3JzXCInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gRGlzYWJsZWQgZm9yIHRoZSBMYW5ndWFnZSBTZXJ2ZXIsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1BUVlMvaXNzdWVzLzM4NTdcclxuICAgICAgICBpZiAoaW5pdGlhbGl6ZV8xLklzTGFuZ3VhZ2VTZXJ2ZXJUZXN0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXh0RG9jdW1lbnQgPSB5aWVsZCB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZURlY29yYXRvcik7XHJcbiAgICAgICAgeWllbGQgdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbigzLCA5KTtcclxuICAgICAgICBsZXQgbGlzdCA9IHlpZWxkIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIGFzc2VydC5ub3RFcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdBQkNNZXRhJykubGVuZ3RoLCAwLCAnQUJDTWV0YSBub3QgZm91bmQnKTtcclxuICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnYWJzdHJhY3RtZXRob2QnKS5sZW5ndGgsIDAsICdhYnN0cmFjdG1ldGhvZCBub3QgZm91bmQnKTtcclxuICAgICAgICBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oNCwgOSk7XHJcbiAgICAgICAgbGlzdCA9IHlpZWxkIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIGFzc2VydC5ub3RFcXVhbChsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdBQkNNZXRhJykubGVuZ3RoLCAwLCAnQUJDTWV0YSBub3QgZm91bmQnKTtcclxuICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnYWJzdHJhY3RtZXRob2QnKS5sZW5ndGgsIDAsICdhYnN0cmFjdG1ldGhvZCBub3QgZm91bmQnKTtcclxuICAgICAgICBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oMiwgMzApO1xyXG4gICAgICAgIGxpc3QgPSB5aWVsZCB2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoJ3ZzY29kZS5leGVjdXRlQ29tcGxldGlvbkl0ZW1Qcm92aWRlcicsIHRleHREb2N1bWVudC51cmksIHBvc2l0aW9uKTtcclxuICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnQUJDTWV0YScpLmxlbmd0aCwgMCwgJ0FCQ01ldGEgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKGxpc3QuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5sYWJlbCA9PT0gJ2Fic3RyYWN0bWV0aG9kJykubGVuZ3RoLCAwLCAnYWJzdHJhY3RtZXRob2Qgbm90IGZvdW5kJyk7XHJcbiAgICB9KSk7XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRG9uSmF5YW1hbm5lL3B5dGhvblZTQ29kZS9pc3N1ZXMvNzI3XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRG9uSmF5YW1hbm5lL3B5dGhvblZTQ29kZS9pc3N1ZXMvNzQ2XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRoYWx0ZXIvamVkaS9pc3N1ZXMvODU5XHJcbiAgICB0ZXN0KCdGb3IgXCJ0aW1lLnNsZWVcIicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCB0ZXh0RG9jdW1lbnQgPSB5aWVsZCB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZURvYyk7XHJcbiAgICAgICAgeWllbGQgdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDEwLCA5KTtcclxuICAgICAgICBjb25zdCBsaXN0ID0geWllbGQgdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUNvbXBsZXRpb25JdGVtUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSBsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdzbGVlcCcpO1xyXG4gICAgICAgIGFzc2VydC5ub3RFcXVhbChpdGVtcy5sZW5ndGgsIDAsICdzbGVlcCBub3QgZm91bmQnKTtcclxuICAgICAgICBjaGVja0RvY3VtZW50YXRpb24oaXRlbXNbMF0sICdEZWxheSBleGVjdXRpb24gZm9yIGEgZ2l2ZW4gbnVtYmVyIG9mIHNlY29uZHMuICBUaGUgYXJndW1lbnQgbWF5IGJlJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdGb3IgY3VzdG9tIGNsYXNzJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZU9uZSkudGhlbihkb2N1bWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRleHREb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgfSkudGhlbihlZGl0b3IgPT4ge1xyXG4gICAgICAgICAgICBhc3NlcnQodnNjb2RlLndpbmRvdy5hY3RpdmVUZXh0RWRpdG9yLCAnTm8gYWN0aXZlIGVkaXRvcicpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oMzAsIDQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUNvbXBsZXRpb25JdGVtUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSkudGhlbihsaXN0ID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKGxpc3QuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5sYWJlbCA9PT0gJ21ldGhvZDEnKS5sZW5ndGgsIDAsICdtZXRob2QxIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwobGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnbWV0aG9kMicpLmxlbmd0aCwgMCwgJ21ldGhvZDIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnV2l0aCBVbmljb2RlIENoYXJhY3RlcnMnLCBkb25lID0+IHtcclxuICAgICAgICBsZXQgdGV4dERvY3VtZW50O1xyXG4gICAgICAgIHZzY29kZS53b3Jrc3BhY2Uub3BlblRleHREb2N1bWVudChmaWxlRW5jb2RpbmcpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDI1LCA0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVDb21wbGV0aW9uSXRlbVByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4obGlzdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnYmFyJyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChpdGVtcy5sZW5ndGgsIDEsICdiYXIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkMSA9ICfor7TmmI4gLSBrZWVwIHRoaXMgbGluZSwgaXQgd29ya3MnO1xyXG4gICAgICAgICAgICBjaGVja0RvY3VtZW50YXRpb24oaXRlbXNbMF0sIGV4cGVjdGVkMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkMiA9ICflpoLmnpzlrZjlnKjpnIDopoHnrYnlvoXlrqHmibnmiJbmraPlnKjmiafooYznmoTku7vliqHvvIzlsIbkuI3liLfmlrDpobXpnaInO1xyXG4gICAgICAgICAgICBjaGVja0RvY3VtZW50YXRpb24oaXRlbXNbMF0sIGV4cGVjdGVkMik7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnQWNyb3NzIGZpbGVzIFdpdGggVW5pY29kZSBDaGFyYWN0ZXJzJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZUVuY29kaW5nVXNlZCkudGhlbihkb2N1bWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRleHREb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgfSkudGhlbihlZGl0b3IgPT4ge1xyXG4gICAgICAgICAgICBhc3NlcnQodnNjb2RlLndpbmRvdy5hY3RpdmVUZXh0RWRpdG9yLCAnTm8gYWN0aXZlIGVkaXRvcicpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oMSwgNSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoJ3ZzY29kZS5leGVjdXRlQ29tcGxldGlvbkl0ZW1Qcm92aWRlcicsIHRleHREb2N1bWVudC51cmksIHBvc2l0aW9uKTtcclxuICAgICAgICB9KS50aGVuKGxpc3QgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaXRlbXMgPSBsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdGb28nKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGl0ZW1zLmxlbmd0aCwgMSwgJ0ZvbyBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgY2hlY2tEb2N1bWVudGF0aW9uKGl0ZW1zWzBdLCAn6K+05piOJyk7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gbGlzdC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxhYmVsID09PSAnc2hvd01lc3NhZ2UnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGl0ZW1zLmxlbmd0aCwgMSwgJ3Nob3dNZXNzYWdlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZDEgPSAn0JrRjtC8INGD0YIg0LbRjdC80L/RjdGAINC/0L7RiNC20LjQvCDQu9GM0LDQsdC+0YDRjdC2LCDQutC+0LzQvNGO0L3RiyDRj9C90YLRjdGA0Y3RgdGJ0Y3RgiDQvdCw0Lwg0LXQtCwg0LTQtdC60YLQsCDQuNCz0L3QvtGC0LAg0L3Ri9C80L7RgNGNINC20Y/RgiDRjdC4Lic7XHJcbiAgICAgICAgICAgIGNoZWNrRG9jdW1lbnRhdGlvbihpdGVtc1swXSwgZXhwZWN0ZWQxKTtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQyID0gJ9Co0Y3QsCDQtNC10LrQsNC8INGN0LrRiNGL0YDQutC4INGN0LgsINGN0Lgg0LfRi9C0INGN0YDRgNGN0Lwg0LTQvtC60Y3QvdC00ZEsINCy0LXQutC2INGE0LDQutGN0YLRjSDQv9GN0YDRh9GL0LrQstGO0Y3RgNGR0LYg0LrRgy4nO1xyXG4gICAgICAgICAgICBjaGVja0RvY3VtZW50YXRpb24oaXRlbXNbMF0sIGV4cGVjdGVkMik7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC92c2NvZGUtcHl0aG9uL2lzc3Vlcy8xMTBcclxuICAgIHRlc3QoJ1N1cHByZXNzIGluIHN0cmluZ3MvY29tbWVudHMnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gRXhjbHVkZWQgZnJvbSB0aGUgTGFuZ3VhZ2UgU2VydmVyIGIvYyBza2lwcGluZyBvZiBzdHJpbmdzIGFuZCBjb21tZW50c1xyXG4gICAgICAgIC8vIGlzIG5vdCB5ZXQgdGhlcmUuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1BUVlMvaXNzdWVzLzM3OThcclxuICAgICAgICBpZiAoaW5pdGlhbGl6ZV8xLklzTGFuZ3VhZ2VTZXJ2ZXJUZXN0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyB2c2NvZGUuUG9zaXRpb24oMCwgMSksXHJcbiAgICAgICAgICAgIG5ldyB2c2NvZGUuUG9zaXRpb24oMCwgOSksXHJcbiAgICAgICAgICAgIG5ldyB2c2NvZGUuUG9zaXRpb24oMCwgMTIpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDEsIDEpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDEsIDMpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDIsIDcpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDMsIDApLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDQsIDIpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDQsIDgpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDUsIDQpLFxyXG4gICAgICAgICAgICBuZXcgdnNjb2RlLlBvc2l0aW9uKDUsIDEwKSAvLyBmYWxzZVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBbXHJcbiAgICAgICAgICAgIGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCB0ZXh0RG9jdW1lbnQgPSB5aWVsZCB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZVN1cHByZXNzKTtcclxuICAgICAgICB5aWVsZCB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0geWllbGQgdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUNvbXBsZXRpb25JdGVtUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBsaXN0Lml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdhYnMnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHQgPiAwLCBleHBlY3RlZFtpXSwgYEV4cGVjdGVkICR7ZXhwZWN0ZWRbaV19IGF0IHBvc2l0aW9uICR7cG9zaXRpb25zW2ldLmxpbmV9OiR7cG9zaXRpb25zW2ldLmNoYXJhY3Rlcn0gYnV0IGdvdCAke3Jlc3VsdH1gKTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn0pO1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbmZ1bmN0aW9uIGNoZWNrRG9jdW1lbnRhdGlvbihpdGVtLCBleHBlY3RlZENvbnRhaW5zKSB7XHJcbiAgICBsZXQgaXNWYWxpZFR5cGUgPSBmYWxzZTtcclxuICAgIGxldCBkb2N1bWVudGF0aW9uO1xyXG4gICAgaWYgKHR5cGVvZiBpdGVtLmRvY3VtZW50YXRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaXNWYWxpZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgIGRvY3VtZW50YXRpb24gPSBpdGVtLmRvY3VtZW50YXRpb247XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudGF0aW9uID0gaXRlbS5kb2N1bWVudGF0aW9uLnZhbHVlO1xyXG4gICAgICAgIGlzVmFsaWRUeXBlID0gZG9jdW1lbnRhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGRvY3VtZW50YXRpb24gIT09IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3NlcnQuZXF1YWwoaXNWYWxpZFR5cGUsIHRydWUsICdEb2N1bWVudGF0aW9uIGlzIG5laXRoZXIgc3RyaW5nIG5vciB2c2NvZGUuTWFya2Rvd25TdHJpbmcnKTtcclxuICAgIGNvbnN0IGluRG9jID0gZG9jdW1lbnRhdGlvbi5pbmRleE9mKGV4cGVjdGVkQ29udGFpbnMpID49IDA7XHJcbiAgICBhc3NlcnQuZXF1YWwoaW5Eb2MsIHRydWUsICdEb2N1bWVudGF0aW9uIGluY29ycmVjdCcpO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UudGVzdC5qcy5tYXAiXX0=