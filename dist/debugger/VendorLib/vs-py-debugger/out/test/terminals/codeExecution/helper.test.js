// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const fs = require("fs-extra");

const os_1 = require("os");

const path = require("path");

const TypeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../../client/common/application/types");

const constants_1 = require("../../../client/common/constants");

require("../../../client/common/extensions");

const decoder_1 = require("../../../client/common/process/decoder");

const proc_1 = require("../../../client/common/process/proc");

const types_2 = require("../../../client/common/process/types");

const types_3 = require("../../../client/common/types");

const platform_1 = require("../../../client/common/utils/platform");

const types_4 = require("../../../client/common/variables/types");

const helper_1 = require("../../../client/terminals/codeExecution/helper");

const common_1 = require("../../common");

const TEST_FILES_PATH = path.join(constants_1.EXTENSION_ROOT_DIR, 'src', 'test', 'pythonFiles', 'terminalExec'); // tslint:disable-next-line:max-func-body-length

suite('Terminal - Code Execution Helper', () => {
  let documentManager;
  let applicationShell;
  let helper;
  let document;
  let editor;
  let processService;
  let configService;
  setup(() => {
    const serviceContainer = TypeMoq.Mock.ofType();
    documentManager = TypeMoq.Mock.ofType();
    applicationShell = TypeMoq.Mock.ofType();
    const envVariablesProvider = TypeMoq.Mock.ofType();
    processService = TypeMoq.Mock.ofType();
    configService = TypeMoq.Mock.ofType();
    const pythonSettings = TypeMoq.Mock.ofType();
    pythonSettings.setup(p => p.pythonPath).returns(() => common_1.PYTHON_PATH); // tslint:disable-next-line:no-any

    processService.setup(x => x.then).returns(() => undefined);
    configService.setup(c => c.getSettings(TypeMoq.It.isAny())).returns(() => pythonSettings.object);
    envVariablesProvider.setup(e => e.getEnvironmentVariables(TypeMoq.It.isAny())).returns(() => Promise.resolve({}));
    const processServiceFactory = TypeMoq.Mock.ofType();
    processServiceFactory.setup(p => p.create(TypeMoq.It.isAny())).returns(() => Promise.resolve(processService.object));
    serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_2.IProcessServiceFactory), TypeMoq.It.isAny())).returns(() => processServiceFactory.object);
    serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_1.IDocumentManager), TypeMoq.It.isAny())).returns(() => documentManager.object);
    serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_1.IApplicationShell), TypeMoq.It.isAny())).returns(() => applicationShell.object);
    serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_4.IEnvironmentVariablesProvider), TypeMoq.It.isAny())).returns(() => envVariablesProvider.object);
    serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_3.IConfigurationService), TypeMoq.It.isAny())).returns(() => configService.object);
    helper = new helper_1.CodeExecutionHelper(serviceContainer.object);
    document = TypeMoq.Mock.ofType();
    editor = TypeMoq.Mock.ofType();
    editor.setup(e => e.document).returns(() => document.object);
  });

  function ensureBlankLinesAreRemoved(source, expectedSource) {
    return __awaiter(this, void 0, void 0, function* () {
      const actualProcessService = new proc_1.ProcessService(new decoder_1.BufferDecoder());
      processService.setup(p => p.exec(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns((file, args, options) => {
        return actualProcessService.exec.apply(actualProcessService, [file, args, options]);
      });
      const normalizedZCode = yield helper.normalizeLines(source); // In case file has been saved with different line endings.

      expectedSource = expectedSource.splitLines({
        removeEmptyEntries: false,
        trim: false
      }).join(os_1.EOL);
      chai_1.expect(normalizedZCode).to.be.equal(expectedSource);
    });
  }

  test('Ensure blank lines are NOT removed when code is not indented (simple)', function () {
    return __awaiter(this, void 0, void 0, function* () {
      // This test has not been working for many months in Python 2.7 under
      // Windows.Tracked by #2544.
      if (common_1.isOs(platform_1.OSType.Windows) && (yield common_1.isPythonVersion('2.7'))) {
        // tslint:disable-next-line:no-invalid-this
        return this.skip();
      }

      const code = ['import sys', '', '', '', 'print(sys.executable)', '', 'print("1234")', '', '', 'print(1)', 'print(2)'];
      const expectedCode = code.filter(line => line.trim().length > 0).join(os_1.EOL);
      yield ensureBlankLinesAreRemoved(code.join(os_1.EOL), expectedCode);
    });
  });
  test('Ensure there are no multiple-CR elements in the normalized code.', () => __awaiter(void 0, void 0, void 0, function* () {
    const code = ['import sys', '', '', '', 'print(sys.executable)', '', 'print("1234")', '', '', 'print(1)', 'print(2)'];
    const actualProcessService = new proc_1.ProcessService(new decoder_1.BufferDecoder());
    processService.setup(p => p.exec(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns((file, args, options) => {
      return actualProcessService.exec.apply(actualProcessService, [file, args, options]);
    });
    const normalizedCode = yield helper.normalizeLines(code.join(os_1.EOL));
    const doubleCrIndex = normalizedCode.indexOf('\r\r');
    chai_1.expect(doubleCrIndex).to.be.equal(-1, 'Double CR (CRCRLF) line endings detected in normalized code snippet.');
  }));
  ['', '1', '2', '3', '4', '5', '6', '7'].forEach(fileNameSuffix => {
    test(`Ensure blank lines are removed (Sample${fileNameSuffix})`, function () {
      return __awaiter(this, void 0, void 0, function* () {
        // This test has not been working for many months in Python 2.7 under
        // Windows.Tracked by #2544.
        if (common_1.isOs(platform_1.OSType.Windows) && (yield common_1.isPythonVersion('2.7'))) {
          // tslint:disable-next-line:no-invalid-this
          return this.skip();
        }

        const code = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_raw.py`), 'utf8');
        const expectedCode = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_normalized.py`), 'utf8');
        yield ensureBlankLinesAreRemoved(code, expectedCode);
      });
    });
    test(`Ensure last two blank lines are preserved (Sample${fileNameSuffix})`, function () {
      return __awaiter(this, void 0, void 0, function* () {
        // This test has not been working for many months in Python 2.7 under
        // Windows.Tracked by #2544.
        if (common_1.isOs(platform_1.OSType.Windows) && (yield common_1.isPythonVersion('2.7'))) {
          // tslint:disable-next-line:no-invalid-this
          return this.skip();
        }

        const code = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_raw.py`), 'utf8');
        const expectedCode = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_normalized.py`), 'utf8');
        yield ensureBlankLinesAreRemoved(code + os_1.EOL, expectedCode + os_1.EOL);
      });
    });
    test(`Ensure last two blank lines are preserved even if we have more than 2 trailing blank lines (Sample${fileNameSuffix})`, function () {
      return __awaiter(this, void 0, void 0, function* () {
        // This test has not been working for many months in Python 2.7 under
        // Windows.Tracked by #2544.
        if (common_1.isOs(platform_1.OSType.Windows) && (yield common_1.isPythonVersion('2.7'))) {
          // tslint:disable-next-line:no-invalid-this
          return this.skip();
        }

        const code = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_raw.py`), 'utf8');
        const expectedCode = yield fs.readFile(path.join(TEST_FILES_PATH, `sample${fileNameSuffix}_normalized.py`), 'utf8');
        yield ensureBlankLinesAreRemoved(code + os_1.EOL + os_1.EOL + os_1.EOL + os_1.EOL, expectedCode + os_1.EOL);
      });
    });
  });
  test('Display message if there\s no active file', () => __awaiter(void 0, void 0, void 0, function* () {
    documentManager.setup(doc => doc.activeTextEditor).returns(() => undefined);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.an('undefined');
    applicationShell.verify(a => a.showErrorMessage(TypeMoq.It.isAnyString()), TypeMoq.Times.once());
  }));
  test('Display message if active file is unsaved', () => __awaiter(void 0, void 0, void 0, function* () {
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    document.setup(doc => doc.isUntitled).returns(() => true);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.an('undefined');
    applicationShell.verify(a => a.showErrorMessage(TypeMoq.It.isAnyString()), TypeMoq.Times.once());
  }));
  test('Display message if active file is non-python', () => __awaiter(void 0, void 0, void 0, function* () {
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.languageId).returns(() => 'html');
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.an('undefined');
    applicationShell.verify(a => a.showErrorMessage(TypeMoq.It.isAnyString()), TypeMoq.Times.once());
  }));
  test('Returns file uri', () => __awaiter(void 0, void 0, void 0, function* () {
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.deep.equal(expectedUri);
  }));
  test('Returns file uri even if saving fails', () => __awaiter(void 0, void 0, void 0, function* () {
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.isDirty).returns(() => true);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    document.setup(doc => doc.save()).returns(() => Promise.resolve(false));
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.deep.equal(expectedUri);
  }));
  test('Dirty files are saved', () => __awaiter(void 0, void 0, void 0, function* () {
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.isDirty).returns(() => true);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.deep.equal(expectedUri);
    document.verify(doc => doc.save(), TypeMoq.Times.once());
  }));
  test('Non-Dirty files are not-saved', () => __awaiter(void 0, void 0, void 0, function* () {
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.isDirty).returns(() => false);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    documentManager.setup(doc => doc.activeTextEditor).returns(() => editor.object);
    const uri = yield helper.getFileToExecute();
    chai_1.expect(uri).to.be.deep.equal(expectedUri);
    document.verify(doc => doc.save(), TypeMoq.Times.never());
  }));
  test('Returns current line if nothing is selected', () => __awaiter(void 0, void 0, void 0, function* () {
    const lineContents = 'Line Contents';
    editor.setup(e => e.selection).returns(() => new vscode_1.Selection(3, 0, 3, 0));
    const textLine = TypeMoq.Mock.ofType();
    textLine.setup(t => t.text).returns(() => lineContents);
    document.setup(d => d.lineAt(TypeMoq.It.isAny())).returns(() => textLine.object);
    const content = yield helper.getSelectedTextToExecute(editor.object);
    chai_1.expect(content).to.be.equal(lineContents);
  }));
  test('Returns selected text', () => __awaiter(void 0, void 0, void 0, function* () {
    const lineContents = 'Line Contents';
    editor.setup(e => e.selection).returns(() => new vscode_1.Selection(3, 0, 10, 5));
    const textLine = TypeMoq.Mock.ofType();
    textLine.setup(t => t.text).returns(() => lineContents);
    document.setup(d => d.getText(TypeMoq.It.isAny())).returns(r => `${r.start.line}.${r.start.character}.${r.end.line}.${r.end.character}`);
    const content = yield helper.getSelectedTextToExecute(editor.object);
    chai_1.expect(content).to.be.equal('3.0.10.5');
  }));
  test('saveFileIfDirty will not fail if file is not opened', () => __awaiter(void 0, void 0, void 0, function* () {
    documentManager.setup(d => d.textDocuments).returns(() => []).verifiable(TypeMoq.Times.once());
    yield helper.saveFileIfDirty(vscode_1.Uri.file(`${__filename}.py`));
    documentManager.verifyAll();
  }));
  test('File will be saved if file is dirty', () => __awaiter(void 0, void 0, void 0, function* () {
    documentManager.setup(d => d.textDocuments).returns(() => [document.object]).verifiable(TypeMoq.Times.once());
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.isDirty).returns(() => true);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    yield helper.saveFileIfDirty(expectedUri);
    documentManager.verifyAll();
    document.verify(doc => doc.save(), TypeMoq.Times.once());
  }));
  test('File will be not saved if file is not dirty', () => __awaiter(void 0, void 0, void 0, function* () {
    documentManager.setup(d => d.textDocuments).returns(() => [document.object]).verifiable(TypeMoq.Times.once());
    document.setup(doc => doc.isUntitled).returns(() => false);
    document.setup(doc => doc.isDirty).returns(() => false);
    document.setup(doc => doc.languageId).returns(() => constants_1.PYTHON_LANGUAGE);
    const expectedUri = vscode_1.Uri.file('one.py');
    document.setup(doc => doc.uri).returns(() => expectedUri);
    yield helper.saveFileIfDirty(expectedUri);
    documentManager.verifyAll();
    document.verify(doc => doc.save(), TypeMoq.Times.never());
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlci50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwiZnMiLCJvc18xIiwicGF0aCIsIlR5cGVNb3EiLCJ2c2NvZGVfMSIsInR5cGVzXzEiLCJjb25zdGFudHNfMSIsImRlY29kZXJfMSIsInByb2NfMSIsInR5cGVzXzIiLCJ0eXBlc18zIiwicGxhdGZvcm1fMSIsInR5cGVzXzQiLCJoZWxwZXJfMSIsImNvbW1vbl8xIiwiVEVTVF9GSUxFU19QQVRIIiwiam9pbiIsIkVYVEVOU0lPTl9ST09UX0RJUiIsInN1aXRlIiwiZG9jdW1lbnRNYW5hZ2VyIiwiYXBwbGljYXRpb25TaGVsbCIsImhlbHBlciIsImRvY3VtZW50IiwiZWRpdG9yIiwicHJvY2Vzc1NlcnZpY2UiLCJjb25maWdTZXJ2aWNlIiwic2V0dXAiLCJzZXJ2aWNlQ29udGFpbmVyIiwiTW9jayIsIm9mVHlwZSIsImVudlZhcmlhYmxlc1Byb3ZpZGVyIiwicHl0aG9uU2V0dGluZ3MiLCJwIiwicHl0aG9uUGF0aCIsInJldHVybnMiLCJQWVRIT05fUEFUSCIsIngiLCJ1bmRlZmluZWQiLCJjIiwiZ2V0U2V0dGluZ3MiLCJJdCIsImlzQW55Iiwib2JqZWN0IiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZXMiLCJwcm9jZXNzU2VydmljZUZhY3RvcnkiLCJjcmVhdGUiLCJnZXQiLCJpc1ZhbHVlIiwiSVByb2Nlc3NTZXJ2aWNlRmFjdG9yeSIsIklEb2N1bWVudE1hbmFnZXIiLCJJQXBwbGljYXRpb25TaGVsbCIsIklFbnZpcm9ubWVudFZhcmlhYmxlc1Byb3ZpZGVyIiwiSUNvbmZpZ3VyYXRpb25TZXJ2aWNlIiwiQ29kZUV4ZWN1dGlvbkhlbHBlciIsImVuc3VyZUJsYW5rTGluZXNBcmVSZW1vdmVkIiwic291cmNlIiwiZXhwZWN0ZWRTb3VyY2UiLCJhY3R1YWxQcm9jZXNzU2VydmljZSIsIlByb2Nlc3NTZXJ2aWNlIiwiQnVmZmVyRGVjb2RlciIsImV4ZWMiLCJmaWxlIiwiYXJncyIsIm9wdGlvbnMiLCJub3JtYWxpemVkWkNvZGUiLCJub3JtYWxpemVMaW5lcyIsInNwbGl0TGluZXMiLCJyZW1vdmVFbXB0eUVudHJpZXMiLCJ0cmltIiwiRU9MIiwiZXhwZWN0IiwidG8iLCJiZSIsImVxdWFsIiwidGVzdCIsImlzT3MiLCJPU1R5cGUiLCJXaW5kb3dzIiwiaXNQeXRob25WZXJzaW9uIiwic2tpcCIsImNvZGUiLCJleHBlY3RlZENvZGUiLCJmaWx0ZXIiLCJsaW5lIiwibGVuZ3RoIiwibm9ybWFsaXplZENvZGUiLCJkb3VibGVDckluZGV4IiwiaW5kZXhPZiIsImZvckVhY2giLCJmaWxlTmFtZVN1ZmZpeCIsInJlYWRGaWxlIiwiZG9jIiwiYWN0aXZlVGV4dEVkaXRvciIsInVyaSIsImdldEZpbGVUb0V4ZWN1dGUiLCJhbiIsInZlcmlmeSIsImEiLCJzaG93RXJyb3JNZXNzYWdlIiwiaXNBbnlTdHJpbmciLCJUaW1lcyIsIm9uY2UiLCJpc1VudGl0bGVkIiwibGFuZ3VhZ2VJZCIsIlBZVEhPTl9MQU5HVUFHRSIsImV4cGVjdGVkVXJpIiwiVXJpIiwiZGVlcCIsImlzRGlydHkiLCJzYXZlIiwibmV2ZXIiLCJsaW5lQ29udGVudHMiLCJzZWxlY3Rpb24iLCJTZWxlY3Rpb24iLCJ0ZXh0TGluZSIsInQiLCJ0ZXh0IiwiZCIsImxpbmVBdCIsImNvbnRlbnQiLCJnZXRTZWxlY3RlZFRleHRUb0V4ZWN1dGUiLCJnZXRUZXh0IiwiciIsInN0YXJ0IiwiY2hhcmFjdGVyIiwiZW5kIiwidGV4dERvY3VtZW50cyIsInZlcmlmaWFibGUiLCJzYXZl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Q0FBdUMsTUFBTXVFLFdBQTdDO0FBQ0EsVUFBTXBGLE1BQU0sQ0FBQzJHLGVBQVAsQ0FBdUJ2QixXQUF2QixDQUFOO0FBQ0F0RixJQUFBQSxlQUFlLENBQUMrRyxTQUFoQjtBQUNBNUcsSUFBQUEsUUFBUSxDQUFDMEUsTUFBVCxDQUFnQkwsR0FBRyxJQUFJQSxHQUFHLENBQUNrQixJQUFKLEVBQXZCLEVBQW1DMUcsT0FBTyxDQUFDaUcsS0FBUixDQUFjVSxLQUFkLEVBQW5DO0FBQ0gsR0FWa0UsQ0FBL0QsQ0FBSjtBQVdILENBM05JLENBQUwiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgY2hhaV8xID0gcmVxdWlyZShcImNoYWlcIik7XHJcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzLWV4dHJhXCIpO1xyXG5jb25zdCBvc18xID0gcmVxdWlyZShcIm9zXCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IFR5cGVNb3EgPSByZXF1aXJlKFwidHlwZW1vcVwiKTtcclxuY29uc3QgdnNjb2RlXzEgPSByZXF1aXJlKFwidnNjb2RlXCIpO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL2NsaWVudC9jb21tb24vYXBwbGljYXRpb24vdHlwZXNcIik7XHJcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uLy4uLy4uL2NsaWVudC9jb21tb24vY29uc3RhbnRzXCIpO1xyXG5yZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi9leHRlbnNpb25zXCIpO1xyXG5jb25zdCBkZWNvZGVyXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi9wcm9jZXNzL2RlY29kZXJcIik7XHJcbmNvbnN0IHByb2NfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvY29tbW9uL3Byb2Nlc3MvcHJvY1wiKTtcclxuY29uc3QgdHlwZXNfMiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvY29tbW9uL3Byb2Nlc3MvdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi90eXBlc1wiKTtcclxuY29uc3QgcGxhdGZvcm1fMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvY29tbW9uL3V0aWxzL3BsYXRmb3JtXCIpO1xyXG5jb25zdCB0eXBlc180ID0gcmVxdWlyZShcIi4uLy4uLy4uL2NsaWVudC9jb21tb24vdmFyaWFibGVzL3R5cGVzXCIpO1xyXG5jb25zdCBoZWxwZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvdGVybWluYWxzL2NvZGVFeGVjdXRpb24vaGVscGVyXCIpO1xyXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9jb21tb25cIik7XHJcbmNvbnN0IFRFU1RfRklMRVNfUEFUSCA9IHBhdGguam9pbihjb25zdGFudHNfMS5FWFRFTlNJT05fUk9PVF9ESVIsICdzcmMnLCAndGVzdCcsICdweXRob25GaWxlcycsICd0ZXJtaW5hbEV4ZWMnKTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1mdW5jLWJvZHktbGVuZ3RoXHJcbnN1aXRlKCdUZXJtaW5hbCAtIENvZGUgRXhlY3V0aW9uIEhlbHBlcicsICgpID0+IHtcclxuICAgIGxldCBkb2N1bWVudE1hbmFnZXI7XHJcbiAgICBsZXQgYXBwbGljYXRpb25TaGVsbDtcclxuICAgIGxldCBoZWxwZXI7XHJcbiAgICBsZXQgZG9jdW1lbnQ7XHJcbiAgICBsZXQgZWRpdG9yO1xyXG4gICAgbGV0IHByb2Nlc3NTZXJ2aWNlO1xyXG4gICAgbGV0IGNvbmZpZ1NlcnZpY2U7XHJcbiAgICBzZXR1cCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZUNvbnRhaW5lciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBkb2N1bWVudE1hbmFnZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgYXBwbGljYXRpb25TaGVsbCA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBjb25zdCBlbnZWYXJpYWJsZXNQcm92aWRlciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBwcm9jZXNzU2VydmljZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBjb25maWdTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGNvbnN0IHB5dGhvblNldHRpbmdzID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHB5dGhvblNldHRpbmdzLnNldHVwKHAgPT4gcC5weXRob25QYXRoKS5yZXR1cm5zKCgpID0+IGNvbW1vbl8xLlBZVEhPTl9QQVRIKTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbiAgICAgICAgcHJvY2Vzc1NlcnZpY2Uuc2V0dXAoKHgpID0+IHgudGhlbikucmV0dXJucygoKSA9PiB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbmZpZ1NlcnZpY2Uuc2V0dXAoYyA9PiBjLmdldFNldHRpbmdzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gcHl0aG9uU2V0dGluZ3Mub2JqZWN0KTtcclxuICAgICAgICBlbnZWYXJpYWJsZXNQcm92aWRlci5zZXR1cChlID0+IGUuZ2V0RW52aXJvbm1lbnRWYXJpYWJsZXMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pKTtcclxuICAgICAgICBjb25zdCBwcm9jZXNzU2VydmljZUZhY3RvcnkgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgcHJvY2Vzc1NlcnZpY2VGYWN0b3J5LnNldHVwKHAgPT4gcC5jcmVhdGUoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUocHJvY2Vzc1NlcnZpY2Uub2JqZWN0KSk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KFR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18yLklQcm9jZXNzU2VydmljZUZhY3RvcnkpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHByb2Nlc3NTZXJ2aWNlRmFjdG9yeS5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfMS5JRG9jdW1lbnRNYW5hZ2VyKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBkb2N1bWVudE1hbmFnZXIub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzEuSUFwcGxpY2F0aW9uU2hlbGwpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IGFwcGxpY2F0aW9uU2hlbGwub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzQuSUVudmlyb25tZW50VmFyaWFibGVzUHJvdmlkZXIpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IGVudlZhcmlhYmxlc1Byb3ZpZGVyLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KFR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18zLklDb25maWd1cmF0aW9uU2VydmljZSksIFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gY29uZmlnU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIGhlbHBlciA9IG5ldyBoZWxwZXJfMS5Db2RlRXhlY3V0aW9uSGVscGVyKHNlcnZpY2VDb250YWluZXIub2JqZWN0KTtcclxuICAgICAgICBkb2N1bWVudCA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBlZGl0b3IgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgZWRpdG9yLnNldHVwKGUgPT4gZS5kb2N1bWVudCkucmV0dXJucygoKSA9PiBkb2N1bWVudC5vYmplY3QpO1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBlbnN1cmVCbGFua0xpbmVzQXJlUmVtb3ZlZChzb3VyY2UsIGV4cGVjdGVkU291cmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgYWN0dWFsUHJvY2Vzc1NlcnZpY2UgPSBuZXcgcHJvY18xLlByb2Nlc3NTZXJ2aWNlKG5ldyBkZWNvZGVyXzEuQnVmZmVyRGVjb2RlcigpKTtcclxuICAgICAgICAgICAgcHJvY2Vzc1NlcnZpY2Uuc2V0dXAocCA9PiBwLmV4ZWMoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoZmlsZSwgYXJncywgb3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdHVhbFByb2Nlc3NTZXJ2aWNlLmV4ZWMuYXBwbHkoYWN0dWFsUHJvY2Vzc1NlcnZpY2UsIFtmaWxlLCBhcmdzLCBvcHRpb25zXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkWkNvZGUgPSB5aWVsZCBoZWxwZXIubm9ybWFsaXplTGluZXMoc291cmNlKTtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBmaWxlIGhhcyBiZWVuIHNhdmVkIHdpdGggZGlmZmVyZW50IGxpbmUgZW5kaW5ncy5cclxuICAgICAgICAgICAgZXhwZWN0ZWRTb3VyY2UgPSBleHBlY3RlZFNvdXJjZS5zcGxpdExpbmVzKHsgcmVtb3ZlRW1wdHlFbnRyaWVzOiBmYWxzZSwgdHJpbTogZmFsc2UgfSkuam9pbihvc18xLkVPTCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3Qobm9ybWFsaXplZFpDb2RlKS50by5iZS5lcXVhbChleHBlY3RlZFNvdXJjZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0ZXN0KCdFbnN1cmUgYmxhbmsgbGluZXMgYXJlIE5PVCByZW1vdmVkIHdoZW4gY29kZSBpcyBub3QgaW5kZW50ZWQgKHNpbXBsZSknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyB0ZXN0IGhhcyBub3QgYmVlbiB3b3JraW5nIGZvciBtYW55IG1vbnRocyBpbiBQeXRob24gMi43IHVuZGVyXHJcbiAgICAgICAgICAgIC8vIFdpbmRvd3MuVHJhY2tlZCBieSAjMjU0NC5cclxuICAgICAgICAgICAgaWYgKGNvbW1vbl8xLmlzT3MocGxhdGZvcm1fMS5PU1R5cGUuV2luZG93cykgJiYgKHlpZWxkIGNvbW1vbl8xLmlzUHl0aG9uVmVyc2lvbignMi43JykpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW52YWxpZC10aGlzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5za2lwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29kZSA9IFsnaW1wb3J0IHN5cycsICcnLCAnJywgJycsICdwcmludChzeXMuZXhlY3V0YWJsZSknLCAnJywgJ3ByaW50KFwiMTIzNFwiKScsICcnLCAnJywgJ3ByaW50KDEpJywgJ3ByaW50KDIpJ107XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ29kZSA9IGNvZGUuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCkuam9pbihvc18xLkVPTCk7XHJcbiAgICAgICAgICAgIHlpZWxkIGVuc3VyZUJsYW5rTGluZXNBcmVSZW1vdmVkKGNvZGUuam9pbihvc18xLkVPTCksIGV4cGVjdGVkQ29kZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ0Vuc3VyZSB0aGVyZSBhcmUgbm8gbXVsdGlwbGUtQ1IgZWxlbWVudHMgaW4gdGhlIG5vcm1hbGl6ZWQgY29kZS4nLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IFsnaW1wb3J0IHN5cycsICcnLCAnJywgJycsICdwcmludChzeXMuZXhlY3V0YWJsZSknLCAnJywgJ3ByaW50KFwiMTIzNFwiKScsICcnLCAnJywgJ3ByaW50KDEpJywgJ3ByaW50KDIpJ107XHJcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvY2Vzc1NlcnZpY2UgPSBuZXcgcHJvY18xLlByb2Nlc3NTZXJ2aWNlKG5ldyBkZWNvZGVyXzEuQnVmZmVyRGVjb2RlcigpKTtcclxuICAgICAgICBwcm9jZXNzU2VydmljZS5zZXR1cChwID0+IHAuZXhlYyhUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKGZpbGUsIGFyZ3MsIG9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdHVhbFByb2Nlc3NTZXJ2aWNlLmV4ZWMuYXBwbHkoYWN0dWFsUHJvY2Vzc1NlcnZpY2UsIFtmaWxlLCBhcmdzLCBvcHRpb25zXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZENvZGUgPSB5aWVsZCBoZWxwZXIubm9ybWFsaXplTGluZXMoY29kZS5qb2luKG9zXzEuRU9MKSk7XHJcbiAgICAgICAgY29uc3QgZG91YmxlQ3JJbmRleCA9IG5vcm1hbGl6ZWRDb2RlLmluZGV4T2YoJ1xcclxccicpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoZG91YmxlQ3JJbmRleCkudG8uYmUuZXF1YWwoLTEsICdEb3VibGUgQ1IgKENSQ1JMRikgbGluZSBlbmRpbmdzIGRldGVjdGVkIGluIG5vcm1hbGl6ZWQgY29kZSBzbmlwcGV0LicpO1xyXG4gICAgfSkpO1xyXG4gICAgWycnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNyddLmZvckVhY2goZmlsZU5hbWVTdWZmaXggPT4ge1xyXG4gICAgICAgIHRlc3QoYEVuc3VyZSBibGFuayBsaW5lcyBhcmUgcmVtb3ZlZCAoU2FtcGxlJHtmaWxlTmFtZVN1ZmZpeH0pYCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB0ZXN0IGhhcyBub3QgYmVlbiB3b3JraW5nIGZvciBtYW55IG1vbnRocyBpbiBQeXRob24gMi43IHVuZGVyXHJcbiAgICAgICAgICAgICAgICAvLyBXaW5kb3dzLlRyYWNrZWQgYnkgIzI1NDQuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbW9uXzEuaXNPcyhwbGF0Zm9ybV8xLk9TVHlwZS5XaW5kb3dzKSAmJiAoeWllbGQgY29tbW9uXzEuaXNQeXRob25WZXJzaW9uKCcyLjcnKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW52YWxpZC10aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2tpcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IHlpZWxkIGZzLnJlYWRGaWxlKHBhdGguam9pbihURVNUX0ZJTEVTX1BBVEgsIGBzYW1wbGUke2ZpbGVOYW1lU3VmZml4fV9yYXcucHlgKSwgJ3V0ZjgnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ29kZSA9IHlpZWxkIGZzLnJlYWRGaWxlKHBhdGguam9pbihURVNUX0ZJTEVTX1BBVEgsIGBzYW1wbGUke2ZpbGVOYW1lU3VmZml4fV9ub3JtYWxpemVkLnB5YCksICd1dGY4Jyk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBlbnN1cmVCbGFua0xpbmVzQXJlUmVtb3ZlZChjb2RlLCBleHBlY3RlZENvZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXN0KGBFbnN1cmUgbGFzdCB0d28gYmxhbmsgbGluZXMgYXJlIHByZXNlcnZlZCAoU2FtcGxlJHtmaWxlTmFtZVN1ZmZpeH0pYCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB0ZXN0IGhhcyBub3QgYmVlbiB3b3JraW5nIGZvciBtYW55IG1vbnRocyBpbiBQeXRob24gMi43IHVuZGVyXHJcbiAgICAgICAgICAgICAgICAvLyBXaW5kb3dzLlRyYWNrZWQgYnkgIzI1NDQuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbW9uXzEuaXNPcyhwbGF0Zm9ybV8xLk9TVHlwZS5XaW5kb3dzKSAmJiAoeWllbGQgY29tbW9uXzEuaXNQeXRob25WZXJzaW9uKCcyLjcnKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW52YWxpZC10aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2tpcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IHlpZWxkIGZzLnJlYWRGaWxlKHBhdGguam9pbihURVNUX0ZJTEVTX1BBVEgsIGBzYW1wbGUke2ZpbGVOYW1lU3VmZml4fV9yYXcucHlgKSwgJ3V0ZjgnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ29kZSA9IHlpZWxkIGZzLnJlYWRGaWxlKHBhdGguam9pbihURVNUX0ZJTEVTX1BBVEgsIGBzYW1wbGUke2ZpbGVOYW1lU3VmZml4fV9ub3JtYWxpemVkLnB5YCksICd1dGY4Jyk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBlbnN1cmVCbGFua0xpbmVzQXJlUmVtb3ZlZChjb2RlICsgb3NfMS5FT0wsIGV4cGVjdGVkQ29kZSArIG9zXzEuRU9MKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGVzdChgRW5zdXJlIGxhc3QgdHdvIGJsYW5rIGxpbmVzIGFyZSBwcmVzZXJ2ZWQgZXZlbiBpZiB3ZSBoYXZlIG1vcmUgdGhhbiAyIHRyYWlsaW5nIGJsYW5rIGxpbmVzIChTYW1wbGUke2ZpbGVOYW1lU3VmZml4fSlgLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHRlc3QgaGFzIG5vdCBiZWVuIHdvcmtpbmcgZm9yIG1hbnkgbW9udGhzIGluIFB5dGhvbiAyLjcgdW5kZXJcclxuICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MuVHJhY2tlZCBieSAjMjU0NC5cclxuICAgICAgICAgICAgICAgIGlmIChjb21tb25fMS5pc09zKHBsYXRmb3JtXzEuT1NUeXBlLldpbmRvd3MpICYmICh5aWVsZCBjb21tb25fMS5pc1B5dGhvblZlcnNpb24oJzIuNycpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnZhbGlkLXRoaXNcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5za2lwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0geWllbGQgZnMucmVhZEZpbGUocGF0aC5qb2luKFRFU1RfRklMRVNfUEFUSCwgYHNhbXBsZSR7ZmlsZU5hbWVTdWZmaXh9X3Jhdy5weWApLCAndXRmOCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRDb2RlID0geWllbGQgZnMucmVhZEZpbGUocGF0aC5qb2luKFRFU1RfRklMRVNfUEFUSCwgYHNhbXBsZSR7ZmlsZU5hbWVTdWZmaXh9X25vcm1hbGl6ZWQucHlgKSwgJ3V0ZjgnKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIGVuc3VyZUJsYW5rTGluZXNBcmVSZW1vdmVkKGNvZGUgKyBvc18xLkVPTCArIG9zXzEuRU9MICsgb3NfMS5FT0wgKyBvc18xLkVPTCwgZXhwZWN0ZWRDb2RlICsgb3NfMS5FT0wpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnRGlzcGxheSBtZXNzYWdlIGlmIHRoZXJlXFxzIG5vIGFjdGl2ZSBmaWxlJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlci5zZXR1cChkb2MgPT4gZG9jLmFjdGl2ZVRleHRFZGl0b3IpLnJldHVybnMoKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCB1cmkgPSB5aWVsZCBoZWxwZXIuZ2V0RmlsZVRvRXhlY3V0ZSgpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodXJpKS50by5iZS5hbigndW5kZWZpbmVkJyk7XHJcbiAgICAgICAgYXBwbGljYXRpb25TaGVsbC52ZXJpZnkoYSA9PiBhLnNob3dFcnJvck1lc3NhZ2UoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpKSwgVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRGlzcGxheSBtZXNzYWdlIGlmIGFjdGl2ZSBmaWxlIGlzIHVuc2F2ZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGRvYyA9PiBkb2MuYWN0aXZlVGV4dEVkaXRvcikucmV0dXJucygoKSA9PiBlZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzVW50aXRsZWQpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgdXJpID0geWllbGQgaGVscGVyLmdldEZpbGVUb0V4ZWN1dGUoKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHVyaSkudG8uYmUuYW4oJ3VuZGVmaW5lZCcpO1xyXG4gICAgICAgIGFwcGxpY2F0aW9uU2hlbGwudmVyaWZ5KGEgPT4gYS5zaG93RXJyb3JNZXNzYWdlKFR5cGVNb3EuSXQuaXNBbnlTdHJpbmcoKSksIFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0Rpc3BsYXkgbWVzc2FnZSBpZiBhY3RpdmUgZmlsZSBpcyBub24tcHl0aG9uJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MuaXNVbnRpdGxlZCkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy5sYW5ndWFnZUlkKS5yZXR1cm5zKCgpID0+ICdodG1sJyk7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGRvYyA9PiBkb2MuYWN0aXZlVGV4dEVkaXRvcikucmV0dXJucygoKSA9PiBlZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICBjb25zdCB1cmkgPSB5aWVsZCBoZWxwZXIuZ2V0RmlsZVRvRXhlY3V0ZSgpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodXJpKS50by5iZS5hbigndW5kZWZpbmVkJyk7XHJcbiAgICAgICAgYXBwbGljYXRpb25TaGVsbC52ZXJpZnkoYSA9PiBhLnNob3dFcnJvck1lc3NhZ2UoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpKSwgVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnUmV0dXJucyBmaWxlIHVyaScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzVW50aXRsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MubGFuZ3VhZ2VJZCkucmV0dXJucygoKSA9PiBjb25zdGFudHNfMS5QWVRIT05fTEFOR1VBR0UpO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVXJpID0gdnNjb2RlXzEuVXJpLmZpbGUoJ29uZS5weScpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MudXJpKS5yZXR1cm5zKCgpID0+IGV4cGVjdGVkVXJpKTtcclxuICAgICAgICBkb2N1bWVudE1hbmFnZXIuc2V0dXAoZG9jID0+IGRvYy5hY3RpdmVUZXh0RWRpdG9yKS5yZXR1cm5zKCgpID0+IGVkaXRvci5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IHVyaSA9IHlpZWxkIGhlbHBlci5nZXRGaWxlVG9FeGVjdXRlKCk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh1cmkpLnRvLmJlLmRlZXAuZXF1YWwoZXhwZWN0ZWRVcmkpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnUmV0dXJucyBmaWxlIHVyaSBldmVuIGlmIHNhdmluZyBmYWlscycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzVW50aXRsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MuaXNEaXJ0eSkucmV0dXJucygoKSA9PiB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmxhbmd1YWdlSWQpLnJldHVybnMoKCkgPT4gY29uc3RhbnRzXzEuUFlUSE9OX0xBTkdVQUdFKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLnNhdmUoKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoZmFsc2UpKTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFVyaSA9IHZzY29kZV8xLlVyaS5maWxlKCdvbmUucHknKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLnVyaSkucmV0dXJucygoKSA9PiBleHBlY3RlZFVyaSk7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGRvYyA9PiBkb2MuYWN0aXZlVGV4dEVkaXRvcikucmV0dXJucygoKSA9PiBlZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICBjb25zdCB1cmkgPSB5aWVsZCBoZWxwZXIuZ2V0RmlsZVRvRXhlY3V0ZSgpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodXJpKS50by5iZS5kZWVwLmVxdWFsKGV4cGVjdGVkVXJpKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0RpcnR5IGZpbGVzIGFyZSBzYXZlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzVW50aXRsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MuaXNEaXJ0eSkucmV0dXJucygoKSA9PiB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmxhbmd1YWdlSWQpLnJldHVybnMoKCkgPT4gY29uc3RhbnRzXzEuUFlUSE9OX0xBTkdVQUdFKTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFVyaSA9IHZzY29kZV8xLlVyaS5maWxlKCdvbmUucHknKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLnVyaSkucmV0dXJucygoKSA9PiBleHBlY3RlZFVyaSk7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGRvYyA9PiBkb2MuYWN0aXZlVGV4dEVkaXRvcikucmV0dXJucygoKSA9PiBlZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICBjb25zdCB1cmkgPSB5aWVsZCBoZWxwZXIuZ2V0RmlsZVRvRXhlY3V0ZSgpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodXJpKS50by5iZS5kZWVwLmVxdWFsKGV4cGVjdGVkVXJpKTtcclxuICAgICAgICBkb2N1bWVudC52ZXJpZnkoZG9jID0+IGRvYy5zYXZlKCksIFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ05vbi1EaXJ0eSBmaWxlcyBhcmUgbm90LXNhdmVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MuaXNVbnRpdGxlZCkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy5pc0RpcnR5KS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmxhbmd1YWdlSWQpLnJldHVybnMoKCkgPT4gY29uc3RhbnRzXzEuUFlUSE9OX0xBTkdVQUdFKTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFVyaSA9IHZzY29kZV8xLlVyaS5maWxlKCdvbmUucHknKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLnVyaSkucmV0dXJucygoKSA9PiBleHBlY3RlZFVyaSk7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGRvYyA9PiBkb2MuYWN0aXZlVGV4dEVkaXRvcikucmV0dXJucygoKSA9PiBlZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICBjb25zdCB1cmkgPSB5aWVsZCBoZWxwZXIuZ2V0RmlsZVRvRXhlY3V0ZSgpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodXJpKS50by5iZS5kZWVwLmVxdWFsKGV4cGVjdGVkVXJpKTtcclxuICAgICAgICBkb2N1bWVudC52ZXJpZnkoZG9jID0+IGRvYy5zYXZlKCksIFR5cGVNb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdSZXR1cm5zIGN1cnJlbnQgbGluZSBpZiBub3RoaW5nIGlzIHNlbGVjdGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IGxpbmVDb250ZW50cyA9ICdMaW5lIENvbnRlbnRzJztcclxuICAgICAgICBlZGl0b3Iuc2V0dXAoZSA9PiBlLnNlbGVjdGlvbikucmV0dXJucygoKSA9PiBuZXcgdnNjb2RlXzEuU2VsZWN0aW9uKDMsIDAsIDMsIDApKTtcclxuICAgICAgICBjb25zdCB0ZXh0TGluZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICB0ZXh0TGluZS5zZXR1cCh0ID0+IHQudGV4dCkucmV0dXJucygoKSA9PiBsaW5lQ29udGVudHMpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGQgPT4gZC5saW5lQXQoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiB0ZXh0TGluZS5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB5aWVsZCBoZWxwZXIuZ2V0U2VsZWN0ZWRUZXh0VG9FeGVjdXRlKGVkaXRvci5vYmplY3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoY29udGVudCkudG8uYmUuZXF1YWwobGluZUNvbnRlbnRzKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ1JldHVybnMgc2VsZWN0ZWQgdGV4dCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCBsaW5lQ29udGVudHMgPSAnTGluZSBDb250ZW50cyc7XHJcbiAgICAgICAgZWRpdG9yLnNldHVwKGUgPT4gZS5zZWxlY3Rpb24pLnJldHVybnMoKCkgPT4gbmV3IHZzY29kZV8xLlNlbGVjdGlvbigzLCAwLCAxMCwgNSkpO1xyXG4gICAgICAgIGNvbnN0IHRleHRMaW5lID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHRleHRMaW5lLnNldHVwKHQgPT4gdC50ZXh0KS5yZXR1cm5zKCgpID0+IGxpbmVDb250ZW50cyk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZCA9PiBkLmdldFRleHQoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygocikgPT4gYCR7ci5zdGFydC5saW5lfS4ke3Iuc3RhcnQuY2hhcmFjdGVyfS4ke3IuZW5kLmxpbmV9LiR7ci5lbmQuY2hhcmFjdGVyfWApO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB5aWVsZCBoZWxwZXIuZ2V0U2VsZWN0ZWRUZXh0VG9FeGVjdXRlKGVkaXRvci5vYmplY3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoY29udGVudCkudG8uYmUuZXF1YWwoJzMuMC4xMC41Jyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdzYXZlRmlsZUlmRGlydHkgd2lsbCBub3QgZmFpbCBpZiBmaWxlIGlzIG5vdCBvcGVuZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGQgPT4gZC50ZXh0RG9jdW1lbnRzKS5yZXR1cm5zKCgpID0+IFtdKS52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICB5aWVsZCBoZWxwZXIuc2F2ZUZpbGVJZkRpcnR5KHZzY29kZV8xLlVyaS5maWxlKGAke19fZmlsZW5hbWV9LnB5YCkpO1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlci52ZXJpZnlBbGwoKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0ZpbGUgd2lsbCBiZSBzYXZlZCBpZiBmaWxlIGlzIGRpcnR5JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlci5zZXR1cChkID0+IGQudGV4dERvY3VtZW50cykucmV0dXJucygoKSA9PiBbZG9jdW1lbnQub2JqZWN0XSkudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy5pc1VudGl0bGVkKS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzRGlydHkpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy5sYW5ndWFnZUlkKS5yZXR1cm5zKCgpID0+IGNvbnN0YW50c18xLlBZVEhPTl9MQU5HVUFHRSk7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRVcmkgPSB2c2NvZGVfMS5VcmkuZmlsZSgnb25lLnB5Jyk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy51cmkpLnJldHVybnMoKCkgPT4gZXhwZWN0ZWRVcmkpO1xyXG4gICAgICAgIHlpZWxkIGhlbHBlci5zYXZlRmlsZUlmRGlydHkoZXhwZWN0ZWRVcmkpO1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICBkb2N1bWVudC52ZXJpZnkoZG9jID0+IGRvYy5zYXZlKCksIFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0ZpbGUgd2lsbCBiZSBub3Qgc2F2ZWQgaWYgZmlsZSBpcyBub3QgZGlydHknLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGQgPT4gZC50ZXh0RG9jdW1lbnRzKS5yZXR1cm5zKCgpID0+IFtkb2N1bWVudC5vYmplY3RdKS52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBkb2N1bWVudC5zZXR1cChkb2MgPT4gZG9jLmlzVW50aXRsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKGRvYyA9PiBkb2MuaXNEaXJ0eSkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy5sYW5ndWFnZUlkKS5yZXR1cm5zKCgpID0+IGNvbnN0YW50c18xLlBZVEhPTl9MQU5HVUFHRSk7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRVcmkgPSB2c2NvZGVfMS5VcmkuZmlsZSgnb25lLnB5Jyk7XHJcbiAgICAgICAgZG9jdW1lbnQuc2V0dXAoZG9jID0+IGRvYy51cmkpLnJldHVybnMoKCkgPT4gZXhwZWN0ZWRVcmkpO1xyXG4gICAgICAgIHlpZWxkIGhlbHBlci5zYXZlRmlsZUlmRGlydHkoZXhwZWN0ZWRVcmkpO1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICBkb2N1bWVudC52ZXJpZnkoZG9jID0+IGRvYy5zYXZlKCksIFR5cGVNb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICB9KSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXIudGVzdC5qcy5tYXAiXX0=