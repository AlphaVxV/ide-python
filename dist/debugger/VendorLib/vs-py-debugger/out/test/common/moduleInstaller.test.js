"use strict"; // tslint:disable:max-func-body-length

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const path = require("path");

const TypeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../client/common/application/types");

const configSettings_1 = require("../../client/common/configSettings");

const service_1 = require("../../client/common/configuration/service");

const condaInstaller_1 = require("../../client/common/installer/condaInstaller");

const pipEnvInstaller_1 = require("../../client/common/installer/pipEnvInstaller");

const pipInstaller_1 = require("../../client/common/installer/pipInstaller");

const productInstaller_1 = require("../../client/common/installer/productInstaller");

const types_2 = require("../../client/common/installer/types");

const logger_1 = require("../../client/common/logger");

const persistentState_1 = require("../../client/common/persistentState");

const fileSystem_1 = require("../../client/common/platform/fileSystem");

const pathUtils_1 = require("../../client/common/platform/pathUtils");

const platformService_1 = require("../../client/common/platform/platformService");

const types_3 = require("../../client/common/platform/types");

const currentProcess_1 = require("../../client/common/process/currentProcess");

const types_4 = require("../../client/common/process/types");

const types_5 = require("../../client/common/terminal/types");

const types_6 = require("../../client/common/types");

const platform_1 = require("../../client/common/utils/platform");

const contracts_1 = require("../../client/interpreter/contracts");

const common_1 = require("../common");

const moduleInstaller_1 = require("../mocks/moduleInstaller");

const serviceRegistry_1 = require("../unittests/serviceRegistry");

const initialize_1 = require("./../initialize");

const info = {
  architecture: platform_1.Architecture.Unknown,
  companyDisplayName: '',
  displayName: '',
  envName: '',
  path: '',
  type: contracts_1.InterpreterType.Unknown,
  version: '',
  version_info: [0, 0, 0, 'alpha'],
  sysPrefix: '',
  sysVersion: ''
};
suite('Module Installer', () => {
  [undefined, vscode_1.Uri.file(__filename)].forEach(resource => {
    let ioc;
    let mockTerminalService;
    let condaService;
    let interpreterService;
    let mockTerminalFactory;
    const workspaceUri = vscode_1.Uri.file(path.join(__dirname, '..', '..', '..', 'src', 'test'));
    suiteSetup(initialize_1.initializeTest);
    setup(() => __awaiter(void 0, void 0, void 0, function* () {
      initializeDI();
      yield initialize_1.initializeTest();
      yield resetSettings();
    }));
    suiteTeardown(() => __awaiter(void 0, void 0, void 0, function* () {
      yield initialize_1.closeActiveWindows();
      yield resetSettings();
    }));
    teardown(() => __awaiter(void 0, void 0, void 0, function* () {
      ioc.dispose();
      yield initialize_1.closeActiveWindows();
    }));

    function initializeDI() {
      ioc = new serviceRegistry_1.UnitTestIocContainer();
      ioc.registerUnitTestTypes();
      ioc.registerVariableTypes();
      ioc.registerLinterTypes();
      ioc.registerFormatterTypes();
      ioc.serviceManager.addSingleton(types_6.IPersistentStateFactory, persistentState_1.PersistentStateFactory);
      ioc.serviceManager.addSingleton(types_6.ILogger, logger_1.Logger);
      ioc.serviceManager.addSingleton(types_6.IInstaller, productInstaller_1.ProductInstaller);
      mockTerminalService = TypeMoq.Mock.ofType();
      mockTerminalFactory = TypeMoq.Mock.ofType();
      mockTerminalFactory.setup(t => t.getTerminalService(TypeMoq.It.isValue(resource))).returns(() => mockTerminalService.object).verifiable(TypeMoq.Times.atLeastOnce()); // If resource is provided, then ensure we do not invoke without the resource.

      mockTerminalFactory.setup(t => t.getTerminalService(TypeMoq.It.isAny())).callback(passedInResource => chai_1.expect(passedInResource).to.be.equal(resource)).returns(() => mockTerminalService.object);
      ioc.serviceManager.addSingletonInstance(types_5.ITerminalServiceFactory, mockTerminalFactory.object);
      ioc.serviceManager.addSingleton(types_2.IModuleInstaller, pipInstaller_1.PipInstaller);
      ioc.serviceManager.addSingleton(types_2.IModuleInstaller, condaInstaller_1.CondaInstaller);
      ioc.serviceManager.addSingleton(types_2.IModuleInstaller, pipEnvInstaller_1.PipEnvInstaller);
      condaService = TypeMoq.Mock.ofType();
      ioc.serviceManager.addSingletonInstance(contracts_1.ICondaService, condaService.object);
      interpreterService = TypeMoq.Mock.ofType();
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterService, interpreterService.object);
      ioc.serviceManager.addSingleton(types_6.IPathUtils, pathUtils_1.PathUtils);
      ioc.serviceManager.addSingleton(types_6.ICurrentProcess, currentProcess_1.CurrentProcess);
      ioc.serviceManager.addSingleton(types_3.IFileSystem, fileSystem_1.FileSystem);
      ioc.serviceManager.addSingleton(types_3.IPlatformService, platformService_1.PlatformService);
      ioc.serviceManager.addSingleton(types_6.IConfigurationService, service_1.ConfigurationService);
      const workspaceService = TypeMoq.Mock.ofType();
      ioc.serviceManager.addSingletonInstance(types_1.IWorkspaceService, workspaceService.object);
      const http = TypeMoq.Mock.ofType();
      http.setup(h => h.get(TypeMoq.It.isValue('proxy'), TypeMoq.It.isAny())).returns(() => '');
      workspaceService.setup(w => w.getConfiguration(TypeMoq.It.isValue('http'))).returns(() => http.object);
      ioc.registerMockProcessTypes();
      ioc.serviceManager.addSingletonInstance(types_6.IsWindows, false);
    }

    function resetSettings() {
      return __awaiter(this, void 0, void 0, function* () {
        const configService = ioc.serviceManager.get(types_6.IConfigurationService);
        yield configService.updateSetting('linting.pylintEnabled', true, common_1.rootWorkspaceUri, vscode_1.ConfigurationTarget.Workspace);
      });
    }

    function getCurrentPythonPath() {
      return __awaiter(this, void 0, void 0, function* () {
        const pythonPath = configSettings_1.PythonSettings.getInstance(workspaceUri).pythonPath;

        if (path.basename(pythonPath) === pythonPath) {
          const pythonProc = yield ioc.serviceContainer.get(types_4.IPythonExecutionFactory).create({
            resource: workspaceUri
          });
          return pythonProc.getExecutablePath().catch(() => pythonPath);
        } else {
          return pythonPath;
        }
      });
    }

    test('Ensure pip is supported and conda is not', () => __awaiter(void 0, void 0, void 0, function* () {
      ioc.serviceManager.addSingletonInstance(types_2.IModuleInstaller, new moduleInstaller_1.MockModuleInstaller('mock', true));
      const mockInterpreterLocator = TypeMoq.Mock.ofType();
      mockInterpreterLocator.setup(p => p.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve([]));
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, mockInterpreterLocator.object, contracts_1.INTERPRETER_LOCATOR_SERVICE);
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, TypeMoq.Mock.ofType().object, contracts_1.PIPENV_SERVICE);
      const processService = yield ioc.serviceContainer.get(types_4.IProcessServiceFactory).create();
      processService.onExec((file, args, options, callback) => {
        if (args.length > 1 && args[0] === '-c' && args[1] === 'import pip') {
          callback({
            stdout: ''
          });
        }

        if (args.length > 0 && args[0] === '--version' && file === 'conda') {
          callback({
            stdout: '',
            stderr: 'not available'
          });
        }
      });
      const moduleInstallers = ioc.serviceContainer.getAll(types_2.IModuleInstaller);
      chai_1.expect(moduleInstallers).length(4, 'Incorrect number of installers');
      const pipInstaller = moduleInstallers.find(item => item.displayName === 'Pip');
      chai_1.expect(pipInstaller).not.to.be.an('undefined', 'Pip installer not found');
      yield chai_1.expect(pipInstaller.isSupported()).to.eventually.equal(true, 'Pip is not supported');
      const condaInstaller = moduleInstallers.find(item => item.displayName === 'Conda');
      chai_1.expect(condaInstaller).not.to.be.an('undefined', 'Conda installer not found');
      yield chai_1.expect(condaInstaller.isSupported()).to.eventually.equal(false, 'Conda is supported');
      const mockInstaller = moduleInstallers.find(item => item.displayName === 'mock');
      chai_1.expect(mockInstaller).not.to.be.an('undefined', 'mock installer not found');
      yield chai_1.expect(mockInstaller.isSupported()).to.eventually.equal(true, 'mock is not supported');
    }));
    test('Ensure pip is supported', () => __awaiter(void 0, void 0, void 0, function* () {
      ioc.serviceManager.addSingletonInstance(types_2.IModuleInstaller, new moduleInstaller_1.MockModuleInstaller('mock', true));
      const pythonPath = yield getCurrentPythonPath();
      const mockInterpreterLocator = TypeMoq.Mock.ofType();
      mockInterpreterLocator.setup(p => p.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve([Object.assign({}, info, {
        architecture: platform_1.Architecture.Unknown,
        companyDisplayName: '',
        displayName: '',
        envName: '',
        path: pythonPath,
        type: contracts_1.InterpreterType.Conda,
        version: ''
      })]));
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, mockInterpreterLocator.object, contracts_1.INTERPRETER_LOCATOR_SERVICE);
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, TypeMoq.Mock.ofType().object, contracts_1.PIPENV_SERVICE);
      const processService = yield ioc.serviceContainer.get(types_4.IProcessServiceFactory).create();
      processService.onExec((file, args, options, callback) => {
        if (args.length > 1 && args[0] === '-c' && args[1] === 'import pip') {
          callback({
            stdout: ''
          });
        }

        if (args.length > 0 && args[0] === '--version' && file === 'conda') {
          callback({
            stdout: ''
          });
        }
      });
      const moduleInstallers = ioc.serviceContainer.getAll(types_2.IModuleInstaller);
      chai_1.expect(moduleInstallers).length(4, 'Incorrect number of installers');
      const pipInstaller = moduleInstallers.find(item => item.displayName === 'Pip');
      chai_1.expect(pipInstaller).not.to.be.an('undefined', 'Pip installer not found');
      yield chai_1.expect(pipInstaller.isSupported()).to.eventually.equal(true, 'Pip is not supported');
    }));
    test('Ensure conda is supported', () => __awaiter(void 0, void 0, void 0, function* () {
      const serviceContainer = TypeMoq.Mock.ofType();
      const configService = TypeMoq.Mock.ofType();
      serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_6.IConfigurationService))).returns(() => configService.object);
      const settings = TypeMoq.Mock.ofType();
      const pythonPath = 'pythonABC';
      settings.setup(s => s.pythonPath).returns(() => pythonPath);
      configService.setup(c => c.getSettings(TypeMoq.It.isAny())).returns(() => settings.object);
      serviceContainer.setup(c => c.get(TypeMoq.It.isValue(contracts_1.ICondaService))).returns(() => condaService.object);
      condaService.setup(c => c.isCondaAvailable()).returns(() => Promise.resolve(true));
      condaService.setup(c => c.isCondaEnvironment(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(true));
      const condaInstaller = new condaInstaller_1.CondaInstaller(serviceContainer.object);
      yield chai_1.expect(condaInstaller.isSupported()).to.eventually.equal(true, 'Conda is not supported');
    }));
    test('Ensure conda is not supported even if conda is available', () => __awaiter(void 0, void 0, void 0, function* () {
      const serviceContainer = TypeMoq.Mock.ofType();
      const configService = TypeMoq.Mock.ofType();
      serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_6.IConfigurationService))).returns(() => configService.object);
      const settings = TypeMoq.Mock.ofType();
      const pythonPath = 'pythonABC';
      settings.setup(s => s.pythonPath).returns(() => pythonPath);
      configService.setup(c => c.getSettings(TypeMoq.It.isAny())).returns(() => settings.object);
      serviceContainer.setup(c => c.get(TypeMoq.It.isValue(contracts_1.ICondaService))).returns(() => condaService.object);
      condaService.setup(c => c.isCondaAvailable()).returns(() => Promise.resolve(true));
      condaService.setup(c => c.isCondaEnvironment(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(false));
      const condaInstaller = new condaInstaller_1.CondaInstaller(serviceContainer.object);
      yield chai_1.expect(condaInstaller.isSupported()).to.eventually.equal(false, 'Conda should not be supported');
    }));
    const resourceTestNameSuffix = resource ? ' with a resource' : ' without a resource';
    test(`Validate pip install arguments ${resourceTestNameSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
      const interpreterPath = yield getCurrentPythonPath();
      const mockInterpreterLocator = TypeMoq.Mock.ofType();
      mockInterpreterLocator.setup(p => p.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve([Object.assign({}, info, {
        path: interpreterPath,
        type: contracts_1.InterpreterType.Unknown
      })]));
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, mockInterpreterLocator.object, contracts_1.INTERPRETER_LOCATOR_SERVICE);
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, TypeMoq.Mock.ofType().object, contracts_1.PIPENV_SERVICE);
      const interpreter = Object.assign({}, info, {
        type: contracts_1.InterpreterType.Unknown,
        path: common_1.PYTHON_PATH
      });
      interpreterService.setup(x => x.getActiveInterpreter(TypeMoq.It.isAny())).returns(() => Promise.resolve(interpreter));
      const moduleName = 'xyz';
      const moduleInstallers = ioc.serviceContainer.getAll(types_2.IModuleInstaller);
      const pipInstaller = moduleInstallers.find(item => item.displayName === 'Pip');
      chai_1.expect(pipInstaller).not.to.be.an('undefined', 'Pip installer not found');
      let argsSent = [];
      mockTerminalService.setup(t => t.sendCommand(TypeMoq.It.isAnyString(), TypeMoq.It.isAny())).returns((cmd, args) => {
        argsSent = args;
        return Promise.resolve(void 0);
      }); // tslint:disable-next-line:no-any

      interpreterService.setup(i => i.getActiveInterpreter(TypeMoq.It.isAny())).returns(() => Promise.resolve({
        type: contracts_1.InterpreterType.Unknown
      }));
      yield pipInstaller.installModule(moduleName, resource);
      mockTerminalFactory.verifyAll();
      chai_1.expect(argsSent.join(' ')).equal(`-m pip install -U ${moduleName} --user`, 'Invalid command sent to terminal for installation.');
    }));
    test(`Validate Conda install arguments ${resourceTestNameSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
      const interpreterPath = yield getCurrentPythonPath();
      const mockInterpreterLocator = TypeMoq.Mock.ofType();
      mockInterpreterLocator.setup(p => p.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve([Object.assign({}, info, {
        path: interpreterPath,
        type: contracts_1.InterpreterType.Conda
      })]));
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, mockInterpreterLocator.object, contracts_1.INTERPRETER_LOCATOR_SERVICE);
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, TypeMoq.Mock.ofType().object, contracts_1.PIPENV_SERVICE);
      const moduleName = 'xyz';
      const moduleInstallers = ioc.serviceContainer.getAll(types_2.IModuleInstaller);
      const pipInstaller = moduleInstallers.find(item => item.displayName === 'Pip');
      chai_1.expect(pipInstaller).not.to.be.an('undefined', 'Pip installer not found');
      let argsSent = [];
      mockTerminalService.setup(t => t.sendCommand(TypeMoq.It.isAnyString(), TypeMoq.It.isAny())).returns((cmd, args) => {
        argsSent = args;
        return Promise.resolve(void 0);
      });
      yield pipInstaller.installModule(moduleName, resource);
      mockTerminalFactory.verifyAll();
      chai_1.expect(argsSent.join(' ')).equal(`-m pip install -U ${moduleName}`, 'Invalid command sent to terminal for installation.');
    }));
    test(`Validate pipenv install arguments ${resourceTestNameSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
      const mockInterpreterLocator = TypeMoq.Mock.ofType();
      mockInterpreterLocator.setup(p => p.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve([Object.assign({}, info, {
        path: 'interpreterPath',
        type: contracts_1.InterpreterType.VirtualEnv
      })]));
      ioc.serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, mockInterpreterLocator.object, contracts_1.PIPENV_SERVICE);
      const moduleName = 'xyz';
      const moduleInstallers = ioc.serviceContainer.getAll(types_2.IModuleInstaller);
      const pipInstaller = moduleInstallers.find(item => item.displayName === 'pipenv');
      chai_1.expect(pipInstaller).not.to.be.an('undefined', 'pipenv installer not found');
      let argsSent = [];
      let command;
      mockTerminalService.setup(t => t.sendCommand(TypeMoq.It.isAnyString(), TypeMoq.It.isAny())).returns((cmd, args) => {
        argsSent = args;
        command = cmd;
        return Promise.resolve(void 0);
      });
      yield pipInstaller.installModule(moduleName, resource);
      mockTerminalFactory.verifyAll();
      chai_1.expect(command).equal('pipenv', 'Invalid command sent to terminal for installation.');
      chai_1.expect(argsSent.join(' ')).equal(`install ${moduleName} --dev`, 'Invalid command arguments sent to terminal for installation.');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZUluc3RhbGxlci50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwicGF0aCIsIlR5cGVNb3EiLCJ2c2NvZGVfMSIsInR5cGVzXzEiLCJjb25maWdTZXR0aW5nc18xIiwic2VydmljZV8xIiwiY29uZGFJbnN0YWxsZXJfMSIsInBpcEVudkluc3RhbGxlcl8xIiwicGlwSW5zdGFsbGVyXzEiLCJwcm9kdWN0SW5zdGFsbGVyXzEiLCJ0eXBlc18yIiwibG9nZ2VyXzEiLCJwZXJzaXN0ZW50U3RhdGVfMSIsImZpbGVTeXN0ZW1fMSIsInBhdGhVdGlsc18xIiwicGxhdGZvcm1TZXJ2aWNlXzEiLCJ0eXBlc18zIiwiY3VycmVudFByb2Nlc3NfMSIsInR5cGVzXzQiLCJ0eXBlc181IiwidHlwZXNfNiIsInBsYXRmb3JtXzEiLCJjb250cmFjdHNfMSIsImNvbW1vbl8xIiwibW9kdWxlSW5zdGFsbGVyXzEiLCJzZXJ2aWNlUmVnaXN0cnlfMSIsImluaXRpYWxpemVfMSIsImluZm8iLCJhcmNoaXRlY3R1cmUiLCJBcmNoaXRlY3R1cmUiLCJVbmtub3duIiwiY29tcGFueURpc3BsYXlOYW1lIiwiZGlzcGxheU5hbWUiLCJlbnZOYW1lIiwidHlwZSIsIkludGVycHJldGVyVHlwZSIsInZlcnNpb24iLCJ2ZXJzaW9uX2luZm8iLCJzeXNQcmVmaXgiLCJzeXNWZXJzaW9uIiwic3VpdGUiLCJ1bmRlZmluZWQiLCJVcmkiLCJmaWxlIiwiX19maWxlbmFtZSIsImZvckVhY2giLCJyZXNvdXJjZSIsImlvYyIsIm1vY2tUZXJtaW5hbFNlcnZpY2UiLCJjb25kYVNlcnZpY2UiLCJpbnRlcnByZXRlclNlcnZpY2UiLCJtb2NrVGVybWluYWxGYWN0b3J5Iiwid29ya3NwYWNlVXJpIiwiam9pbiIsIl9fZGlybmFtZSIsInN1aXRlU2V0dXAiLCJpbml0aWFsaXplVGVzdCIsInNldHVwIiwiaW5pdGlhbGl6ZURJIiwicmVzZXRTZXR0aW5ncyIsInN1aXRlVGVhcmRvd24iLCJjbG9zZUFjdGl2ZVdpbmRvd3MiLCJ0ZWFyZG93biIsImRpc3Bvc2UiLCJVbml0VGVzdElvY0NvbnRhaW5lciIsInJlZ2lzdGVyVW5pdFRlc3RUeXBlcyIsInJlZ2lzdGVyVmFyaWFibGVUeXBlcyIsInJlZ2lzdGVyTGludGVyVHlwZXMiLCJyZWdpc3RlckZvcm1hdHRlclR5cGVzIiwic2VydmljZU1hbmFnZXIiLCJhZGRTaW5nbGV0b24iLCJJUGVyc2lzdGVudFN0YXRlRmFjdG9yeSIsIlBlcnNpc3RlbnRTdGF0ZUZhY3RvcnkiLCJJTG9nZ2VyIiwiTG9nZ2VyIiwiSUluc3RhbGxlciIsIlByb2R1Y3RJbnN0YWxsZXIiLCJNb2NrIiwib2ZUeXBlIiwidCIsImdldFRlcm1pbmFsU2VydmljZSIsIkl0IiwiaXNWYWx1ZSIsInJldHVybnMiLCJvYmplY3QiLCJ2ZXJpZmlhYmxlIiwiVGltZXMiLCJhdExlYXN0T25jZSIsImlzQW55IiwiY2FsbGJhY2siLCJwYXNzZWRJblJlc291cmNlIiwiZXhwZWN0IiwidG8iLCJiZSIsImVxdWFsIiwiYWRkU2luZ2xldG9uSW5zdGFuY2UiLCJJVGVybWluYWxTZXJ2aWNlRmFjdG9yeSIsIklNb2R1bGVJbnN0YWxsZXIiLCJQaXBJbnN0YWxsZXIiLCJDb25kYUluc3RhbGxlciIsIlBpcEVudkluc3RhbGxlciIsIklDb25kYVNlcnZpY2UiLCJJSW50ZXJwcmV0ZXJTZXJ2aWNlIiwiSVBhdGhVdGlscyIsIlBhdGhVdGlscyIsIklDdXJyZW50UHJvY2VzcyIsIkN1cnJlbnRQcm9jZXNzIiwiSUZpbGVTeXN0ZW0iLCJGaWxlU3lzdGVtIiwiSVBsYXRmb3JtU2VydmljZSIsIlBsYXRmb3JtU2VydmljZSIsIklDb25maWd1cmF0aW9uU2VydmljZSIsIkNvbmZpZ3VyYXRpb25TZXJ2aWNlIiwid29ya3NwYWNlU2VydmljZSIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwiaHR0cCIsImgiLCJnZXQiLCJ3IiwiZ2V0Q29uZmlndXJhdGlvbiIsInJlZ2lzdGVyTW9ja1Byb2Nlc3NUeXBlcyIsIklzV2luZG93cyIsImNvbmZpZ1NlcnZpY2UiLCJ1cGRhdGVTZXR0aW5nIiwicm9vdFdvcmtzcGFjZVVyaSIsIkNvbmZpZ3VyYXRpb25UYXJnZXQiLCJXb3Jrc3BhY2UiLCJnZXRDdXJyZW50UHl0aG9uUGF0aCIsInB5dGhvblBhdGgiLCJQeXRob25TZXR0aW5ncyIsImdldEluc3RhbmNlIiwiYmFzZW5hbWUiLCJweXRob25Qcm9jIiwic2VydmljZUNvbnRhaW5lciIsIklQeXRob25FeGVjdXRpb25GYWN0b3J5IiwiY3JlYXRlIiwiZ2V0RXhlY3V0YWJsZVBhdGgiLCJjYXRjaCIsInRlc3QiLCJNb2NrTW9kdWxlSW5zdGFsbGVyIiwibW9ja0ludGVycHJldGVyTG9jYXRvciIsInAiLCJnZXRJbnRlcnByZXRlcnMiLCJJSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSIsIklOVEVSUFJFVEVSX0xPQ0FUT1JfU0VSVklDRSIsIlBJUEVOVl9TRVJWSUNFIiwicHJvY2Vzc1NlcnZpY2UiLCJJUHJvY2Vzc1NlcnZpY2VGYWN0b3J5Iiwib25FeGVjIiwiYXJncyIsIm9wdGlvbnMiLCJsZW5ndGgiLCJzdGRvdXQiLCJzdGRlcnIiLCJtb2R1bGVJbnN0YWxsZXJzIiwiZ2V0QWxsIiwicGlwSW5zdGFsbGVyIiwiZmluZCIsIml0ZW0iLCJub3QiLCJhbiIsImlzU3VwcG9ydGVkIiwiZXZlbnR1YWxseSIsImNvbmRhSW5zdGFsbGVyIiwibW9ja0luc3RhbGxlciIsImFzc2lnbiIsIkNvbmRhIiwiYyIsInNldHRpbmdzIiwicyIsImdldFNldHRpbmdzIiwiaXNDb25kYUF2YWlsYWJsZSIsImlzQ29uZGFFbnZpcm9ubWVudCIsInJlc291cmNlVGVzdE5hbWVTdWZmaXgiLCJpbnRlcnByZXRlclBhdGgiLCJpbnRlcnByZXRlciIsIlBZVEhPTl9QQVRIIiwieCIsImdldEFjdGl2ZUludGVycHJldGVyIiwibW9kdWxlTmFtZSIsImFyZ3NTZW50Iiwic2VuZENvbW1hbmQiLCJpc0FueVN0cmluZyIsImNtZCIsImkiLCJpbnN0YWxsTW9kdWxlIiwidmVyaWZ5QWxsIiwiVmlydHVhbEVudiIsImNvbW1hbmQiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTs7QUFDQSxJQUFJQSxTQUFTLEdBQUksVUFBUSxTQUFLQSxTQUFkLElBQTRCLFVBQVVDLE9BQVYsRUFBbUJDLFVBQW5CLEVBQStCQyxDQUEvQixFQUFrQ0MsU0FBbEMsRUFBNkM7QUFDckYsU0FBTyxLQUFLRCxDQUFDLEtBQUtBLENBQUMsR0FBR0UsT0FBVCxDQUFOLEVBQXlCLFVBQVVDLE9BQVYsRUFBbUJDLE1BQW5CLEVBQTJCO0FBQ3ZELGFBQVNDLFNBQVQsQ0FBbUJDLEtBQW5CLEVBQTBCO0FBQUUsVUFBSTtBQUFFQyxRQUFBQSxJQUFJLENBQUNOLFNBQVMsQ0FBQ08sSUFBVixDQUFlRixLQUFmLENBQUQsQ0FBSjtBQUE4QixPQUFwQyxDQUFxQyxPQUFPRyxDQUFQLEVBQVU7QUFBRUwsUUFBQUEsTUFBTSxDQUFDSyxDQUFELENBQU47QUFBWTtBQUFFOztBQUMzRixhQUFTQyxRQUFULENBQWtCSixLQUFsQixFQUF5QjtBQUFFLFVBQUk7QUFBRUMsUUFBQUEsSUFBSSxDQUFDTixTQUFTLENBQUMsT0FBRCxDQUFULENBQW1CSyxLQUFuQixDQUFELENBQUo7QUFBa0MsT0FBeEMsQ0FBeUMsT0FBT0csQ0FBUCxFQUFVO0FBQUVMLFFBQUFBLE1BQU0sQ0FBQ0ssQ0FBRCxDQUFOO0FBQVk7QUFBRTs7QUFDOUYsYUFBU0YsSUFBVCxDQUFjSSxNQUFkLEVBQXNCO0FBQUVBLE1BQUFBLE1BQU0sQ0FBQ0MsSUFBUCxHQUFj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LENBRWEsQ0FBQ29HLEdBQUQsRUFBTWxDLElBQU4sS0FBZTtBQUN4QitCLFFBQUFBLFFBQVEsR0FBRy9CLElBQVg7QUFDQXVDLFFBQUFBLE9BQU8sR0FBR0wsR0FBVjtBQUNBLGVBQU96TSxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsS0FBSyxDQUFyQixDQUFQO0FBQ0gsT0FORDtBQU9BLFlBQU02SyxZQUFZLENBQUM2QixhQUFiLENBQTJCTixVQUEzQixFQUF1Q3JJLFFBQXZDLENBQU47QUFDQUssTUFBQUEsbUJBQW1CLENBQUN1SSxTQUFwQjtBQUNBNUwsTUFBQUEsTUFBTSxDQUFDNkYsTUFBUCxDQUFjaUcsT0FBZCxFQUF1QjlGLEtBQXZCLENBQTZCLFFBQTdCLEVBQXVDLG9EQUF2QztBQUNBaEcsTUFBQUEsTUFBTSxDQUFDNkYsTUFBUCxDQUFjeUYsUUFBUSxDQUFDL0gsSUFBVCxDQUFjLEdBQWQsQ0FBZCxFQUFrQ3lDLEtBQWxDLENBQXlDLFdBQVVxRixVQUFXLFFBQTlELEVBQXVFLDhEQUF2RTtBQUNILEtBckJrRixDQUEvRSxDQUFKO0FBc0JILEdBMU5EO0FBMk5ILENBNU5JLENBQUwiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuLy8gdHNsaW50OmRpc2FibGU6bWF4LWZ1bmMtYm9keS1sZW5ndGhcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG5jb25zdCBUeXBlTW9xID0gcmVxdWlyZShcInR5cGVtb3FcIik7XHJcbmNvbnN0IHZzY29kZV8xID0gcmVxdWlyZShcInZzY29kZVwiKTtcclxuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2FwcGxpY2F0aW9uL3R5cGVzXCIpO1xyXG5jb25zdCBjb25maWdTZXR0aW5nc18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vY29uZmlnU2V0dGluZ3NcIik7XHJcbmNvbnN0IHNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2NvbmZpZ3VyYXRpb24vc2VydmljZVwiKTtcclxuY29uc3QgY29uZGFJbnN0YWxsZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2luc3RhbGxlci9jb25kYUluc3RhbGxlclwiKTtcclxuY29uc3QgcGlwRW52SW5zdGFsbGVyXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9pbnN0YWxsZXIvcGlwRW52SW5zdGFsbGVyXCIpO1xyXG5jb25zdCBwaXBJbnN0YWxsZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2luc3RhbGxlci9waXBJbnN0YWxsZXJcIik7XHJcbmNvbnN0IHByb2R1Y3RJbnN0YWxsZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2luc3RhbGxlci9wcm9kdWN0SW5zdGFsbGVyXCIpO1xyXG5jb25zdCB0eXBlc18yID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vaW5zdGFsbGVyL3R5cGVzXCIpO1xyXG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2xvZ2dlclwiKTtcclxuY29uc3QgcGVyc2lzdGVudFN0YXRlXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wZXJzaXN0ZW50U3RhdGVcIik7XHJcbmNvbnN0IGZpbGVTeXN0ZW1fMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3BsYXRmb3JtL2ZpbGVTeXN0ZW1cIik7XHJcbmNvbnN0IHBhdGhVdGlsc18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vcGxhdGZvcm0vcGF0aFV0aWxzXCIpO1xyXG5jb25zdCBwbGF0Zm9ybVNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3BsYXRmb3JtL3BsYXRmb3JtU2VydmljZVwiKTtcclxuY29uc3QgdHlwZXNfMyA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3BsYXRmb3JtL3R5cGVzXCIpO1xyXG5jb25zdCBjdXJyZW50UHJvY2Vzc18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vcHJvY2Vzcy9jdXJyZW50UHJvY2Vzc1wiKTtcclxuY29uc3QgdHlwZXNfNCA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3Byb2Nlc3MvdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzUgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi90ZXJtaW5hbC90eXBlc1wiKTtcclxuY29uc3QgdHlwZXNfNiA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3R5cGVzXCIpO1xyXG5jb25zdCBwbGF0Zm9ybV8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vdXRpbHMvcGxhdGZvcm1cIik7XHJcbmNvbnN0IGNvbnRyYWN0c18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9pbnRlcnByZXRlci9jb250cmFjdHNcIik7XHJcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4uL2NvbW1vblwiKTtcclxuY29uc3QgbW9kdWxlSW5zdGFsbGVyXzEgPSByZXF1aXJlKFwiLi4vbW9ja3MvbW9kdWxlSW5zdGFsbGVyXCIpO1xyXG5jb25zdCBzZXJ2aWNlUmVnaXN0cnlfMSA9IHJlcXVpcmUoXCIuLi91bml0dGVzdHMvc2VydmljZVJlZ2lzdHJ5XCIpO1xyXG5jb25zdCBpbml0aWFsaXplXzEgPSByZXF1aXJlKFwiLi8uLi9pbml0aWFsaXplXCIpO1xyXG5jb25zdCBpbmZvID0ge1xyXG4gICAgYXJjaGl0ZWN0dXJlOiBwbGF0Zm9ybV8xLkFyY2hpdGVjdHVyZS5Vbmtub3duLFxyXG4gICAgY29tcGFueURpc3BsYXlOYW1lOiAnJyxcclxuICAgIGRpc3BsYXlOYW1lOiAnJyxcclxuICAgIGVudk5hbWU6ICcnLFxyXG4gICAgcGF0aDogJycsXHJcbiAgICB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93bixcclxuICAgIHZlcnNpb246ICcnLFxyXG4gICAgdmVyc2lvbl9pbmZvOiBbMCwgMCwgMCwgJ2FscGhhJ10sXHJcbiAgICBzeXNQcmVmaXg6ICcnLFxyXG4gICAgc3lzVmVyc2lvbjogJydcclxufTtcclxuc3VpdGUoJ01vZHVsZSBJbnN0YWxsZXInLCAoKSA9PiB7XHJcbiAgICBbdW5kZWZpbmVkLCB2c2NvZGVfMS5VcmkuZmlsZShfX2ZpbGVuYW1lKV0uZm9yRWFjaChyZXNvdXJjZSA9PiB7XHJcbiAgICAgICAgbGV0IGlvYztcclxuICAgICAgICBsZXQgbW9ja1Rlcm1pbmFsU2VydmljZTtcclxuICAgICAgICBsZXQgY29uZGFTZXJ2aWNlO1xyXG4gICAgICAgIGxldCBpbnRlcnByZXRlclNlcnZpY2U7XHJcbiAgICAgICAgbGV0IG1vY2tUZXJtaW5hbEZhY3Rvcnk7XHJcbiAgICAgICAgY29uc3Qgd29ya3NwYWNlVXJpID0gdnNjb2RlXzEuVXJpLmZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJy4uJywgJy4uJywgJ3NyYycsICd0ZXN0JykpO1xyXG4gICAgICAgIHN1aXRlU2V0dXAoaW5pdGlhbGl6ZV8xLmluaXRpYWxpemVUZXN0KTtcclxuICAgICAgICBzZXR1cCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemVESSgpO1xyXG4gICAgICAgICAgICB5aWVsZCBpbml0aWFsaXplXzEuaW5pdGlhbGl6ZVRlc3QoKTtcclxuICAgICAgICAgICAgeWllbGQgcmVzZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBzdWl0ZVRlYXJkb3duKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgaW5pdGlhbGl6ZV8xLmNsb3NlQWN0aXZlV2luZG93cygpO1xyXG4gICAgICAgICAgICB5aWVsZCByZXNldFNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlYXJkb3duKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgaW9jLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgeWllbGQgaW5pdGlhbGl6ZV8xLmNsb3NlQWN0aXZlV2luZG93cygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplREkoKSB7XHJcbiAgICAgICAgICAgIGlvYyA9IG5ldyBzZXJ2aWNlUmVnaXN0cnlfMS5Vbml0VGVzdElvY0NvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICBpb2MucmVnaXN0ZXJVbml0VGVzdFR5cGVzKCk7XHJcbiAgICAgICAgICAgIGlvYy5yZWdpc3RlclZhcmlhYmxlVHlwZXMoKTtcclxuICAgICAgICAgICAgaW9jLnJlZ2lzdGVyTGludGVyVHlwZXMoKTtcclxuICAgICAgICAgICAgaW9jLnJlZ2lzdGVyRm9ybWF0dGVyVHlwZXMoKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc182LklQZXJzaXN0ZW50U3RhdGVGYWN0b3J5LCBwZXJzaXN0ZW50U3RhdGVfMS5QZXJzaXN0ZW50U3RhdGVGYWN0b3J5KTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc182LklMb2dnZXIsIGxvZ2dlcl8xLkxvZ2dlcik7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfNi5JSW5zdGFsbGVyLCBwcm9kdWN0SW5zdGFsbGVyXzEuUHJvZHVjdEluc3RhbGxlcik7XHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbFNlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbEZhY3RvcnkgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbEZhY3Rvcnkuc2V0dXAodCA9PiB0LmdldFRlcm1pbmFsU2VydmljZShUeXBlTW9xLkl0LmlzVmFsdWUocmVzb3VyY2UpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IG1vY2tUZXJtaW5hbFNlcnZpY2Uub2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgLy8gSWYgcmVzb3VyY2UgaXMgcHJvdmlkZWQsIHRoZW4gZW5zdXJlIHdlIGRvIG5vdCBpbnZva2Ugd2l0aG91dCB0aGUgcmVzb3VyY2UuXHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbEZhY3Rvcnkuc2V0dXAodCA9PiB0LmdldFRlcm1pbmFsU2VydmljZShUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLmNhbGxiYWNrKHBhc3NlZEluUmVzb3VyY2UgPT4gY2hhaV8xLmV4cGVjdChwYXNzZWRJblJlc291cmNlKS50by5iZS5lcXVhbChyZXNvdXJjZSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBtb2NrVGVybWluYWxTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc181LklUZXJtaW5hbFNlcnZpY2VGYWN0b3J5LCBtb2NrVGVybWluYWxGYWN0b3J5Lm9iamVjdCk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMi5JTW9kdWxlSW5zdGFsbGVyLCBwaXBJbnN0YWxsZXJfMS5QaXBJbnN0YWxsZXIpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzIuSU1vZHVsZUluc3RhbGxlciwgY29uZGFJbnN0YWxsZXJfMS5Db25kYUluc3RhbGxlcik7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMi5JTW9kdWxlSW5zdGFsbGVyLCBwaXBFbnZJbnN0YWxsZXJfMS5QaXBFbnZJbnN0YWxsZXIpO1xyXG4gICAgICAgICAgICBjb25kYVNlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JQ29uZGFTZXJ2aWNlLCBjb25kYVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UoY29udHJhY3RzXzEuSUludGVycHJldGVyU2VydmljZSwgaW50ZXJwcmV0ZXJTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfNi5JUGF0aFV0aWxzLCBwYXRoVXRpbHNfMS5QYXRoVXRpbHMpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzYuSUN1cnJlbnRQcm9jZXNzLCBjdXJyZW50UHJvY2Vzc18xLkN1cnJlbnRQcm9jZXNzKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc18zLklGaWxlU3lzdGVtLCBmaWxlU3lzdGVtXzEuRmlsZVN5c3RlbSk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMy5JUGxhdGZvcm1TZXJ2aWNlLCBwbGF0Zm9ybVNlcnZpY2VfMS5QbGF0Zm9ybVNlcnZpY2UpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzYuSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBzZXJ2aWNlXzEuQ29uZmlndXJhdGlvblNlcnZpY2UpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3Jrc3BhY2VTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMS5JV29ya3NwYWNlU2VydmljZSwgd29ya3NwYWNlU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb25zdCBodHRwID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBodHRwLnNldHVwKGggPT4gaC5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKCdwcm94eScpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+ICcnKTtcclxuICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS5zZXR1cCh3ID0+IHcuZ2V0Q29uZmlndXJhdGlvbihUeXBlTW9xLkl0LmlzVmFsdWUoJ2h0dHAnKSkpLnJldHVybnMoKCkgPT4gaHR0cC5vYmplY3QpO1xyXG4gICAgICAgICAgICBpb2MucmVnaXN0ZXJNb2NrUHJvY2Vzc1R5cGVzKCk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc182LklzV2luZG93cywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiByZXNldFNldHRpbmdzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlnU2VydmljZSA9IGlvYy5zZXJ2aWNlTWFuYWdlci5nZXQodHlwZXNfNi5JQ29uZmlndXJhdGlvblNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgY29uZmlnU2VydmljZS51cGRhdGVTZXR0aW5nKCdsaW50aW5nLnB5bGludEVuYWJsZWQnLCB0cnVlLCBjb21tb25fMS5yb290V29ya3NwYWNlVXJpLCB2c2NvZGVfMS5Db25maWd1cmF0aW9uVGFyZ2V0LldvcmtzcGFjZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHl0aG9uUGF0aCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB5dGhvblBhdGggPSBjb25maWdTZXR0aW5nc18xLlB5dGhvblNldHRpbmdzLmdldEluc3RhbmNlKHdvcmtzcGFjZVVyaSkucHl0aG9uUGF0aDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoLmJhc2VuYW1lKHB5dGhvblBhdGgpID09PSBweXRob25QYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHl0aG9uUHJvYyA9IHlpZWxkIGlvYy5zZXJ2aWNlQ29udGFpbmVyLmdldCh0eXBlc180LklQeXRob25FeGVjdXRpb25GYWN0b3J5KS5jcmVhdGUoeyByZXNvdXJjZTogd29ya3NwYWNlVXJpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBweXRob25Qcm9jLmdldEV4ZWN1dGFibGVQYXRoKCkuY2F0Y2goKCkgPT4gcHl0aG9uUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHl0aG9uUGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlc3QoJ0Vuc3VyZSBwaXAgaXMgc3VwcG9ydGVkIGFuZCBjb25kYSBpcyBub3QnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc18yLklNb2R1bGVJbnN0YWxsZXIsIG5ldyBtb2R1bGVJbnN0YWxsZXJfMS5Nb2NrTW9kdWxlSW5zdGFsbGVyKCdtb2NrJywgdHJ1ZSkpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLnNldHVwKHAgPT4gcC5nZXRJbnRlcnByZXRlcnMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlLCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLm9iamVjdCwgY29udHJhY3RzXzEuSU5URVJQUkVURVJfTE9DQVRPUl9TRVJWSUNFKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlLCBUeXBlTW9xLk1vY2sub2ZUeXBlKCkub2JqZWN0LCBjb250cmFjdHNfMS5QSVBFTlZfU0VSVklDRSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NTZXJ2aWNlID0geWllbGQgaW9jLnNlcnZpY2VDb250YWluZXIuZ2V0KHR5cGVzXzQuSVByb2Nlc3NTZXJ2aWNlRmFjdG9yeSkuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlLm9uRXhlYygoZmlsZSwgYXJncywgb3B0aW9ucywgY2FsbGJhY2spID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEgJiYgYXJnc1swXSA9PT0gJy1jJyAmJiBhcmdzWzFdID09PSAnaW1wb3J0IHBpcCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7IHN0ZG91dDogJycgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAwICYmIGFyZ3NbMF0gPT09ICctLXZlcnNpb24nICYmIGZpbGUgPT09ICdjb25kYScpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7IHN0ZG91dDogJycsIHN0ZGVycjogJ25vdCBhdmFpbGFibGUnIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlSW5zdGFsbGVycyA9IGlvYy5zZXJ2aWNlQ29udGFpbmVyLmdldEFsbCh0eXBlc18yLklNb2R1bGVJbnN0YWxsZXIpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KG1vZHVsZUluc3RhbGxlcnMpLmxlbmd0aCg0LCAnSW5jb3JyZWN0IG51bWJlciBvZiBpbnN0YWxsZXJzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpcEluc3RhbGxlciA9IG1vZHVsZUluc3RhbGxlcnMuZmluZChpdGVtID0+IGl0ZW0uZGlzcGxheU5hbWUgPT09ICdQaXAnKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChwaXBJbnN0YWxsZXIpLm5vdC50by5iZS5hbigndW5kZWZpbmVkJywgJ1BpcCBpbnN0YWxsZXIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgIHlpZWxkIGNoYWlfMS5leHBlY3QocGlwSW5zdGFsbGVyLmlzU3VwcG9ydGVkKCkpLnRvLmV2ZW50dWFsbHkuZXF1YWwodHJ1ZSwgJ1BpcCBpcyBub3Qgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmRhSW5zdGFsbGVyID0gbW9kdWxlSW5zdGFsbGVycy5maW5kKGl0ZW0gPT4gaXRlbS5kaXNwbGF5TmFtZSA9PT0gJ0NvbmRhJyk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoY29uZGFJbnN0YWxsZXIpLm5vdC50by5iZS5hbigndW5kZWZpbmVkJywgJ0NvbmRhIGluc3RhbGxlciBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgeWllbGQgY2hhaV8xLmV4cGVjdChjb25kYUluc3RhbGxlci5pc1N1cHBvcnRlZCgpKS50by5ldmVudHVhbGx5LmVxdWFsKGZhbHNlLCAnQ29uZGEgaXMgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tJbnN0YWxsZXIgPSBtb2R1bGVJbnN0YWxsZXJzLmZpbmQoaXRlbSA9PiBpdGVtLmRpc3BsYXlOYW1lID09PSAnbW9jaycpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KG1vY2tJbnN0YWxsZXIpLm5vdC50by5iZS5hbigndW5kZWZpbmVkJywgJ21vY2sgaW5zdGFsbGVyIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICB5aWVsZCBjaGFpXzEuZXhwZWN0KG1vY2tJbnN0YWxsZXIuaXNTdXBwb3J0ZWQoKSkudG8uZXZlbnR1YWxseS5lcXVhbCh0cnVlLCAnbW9jayBpcyBub3Qgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ0Vuc3VyZSBwaXAgaXMgc3VwcG9ydGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMi5JTW9kdWxlSW5zdGFsbGVyLCBuZXcgbW9kdWxlSW5zdGFsbGVyXzEuTW9ja01vZHVsZUluc3RhbGxlcignbW9jaycsIHRydWUpKTtcclxuICAgICAgICAgICAgY29uc3QgcHl0aG9uUGF0aCA9IHlpZWxkIGdldEN1cnJlbnRQeXRob25QYXRoKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tJbnRlcnByZXRlckxvY2F0b3IgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIG1vY2tJbnRlcnByZXRlckxvY2F0b3Iuc2V0dXAocCA9PiBwLmdldEludGVycHJldGVycyhUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShbT2JqZWN0LmFzc2lnbih7fSwgaW5mbywgeyBhcmNoaXRlY3R1cmU6IHBsYXRmb3JtXzEuQXJjaGl0ZWN0dXJlLlVua25vd24sIGNvbXBhbnlEaXNwbGF5TmFtZTogJycsIGRpc3BsYXlOYW1lOiAnJywgZW52TmFtZTogJycsIHBhdGg6IHB5dGhvblBhdGgsIHR5cGU6IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5Db25kYSwgdmVyc2lvbjogJycgfSldKSk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgbW9ja0ludGVycHJldGVyTG9jYXRvci5vYmplY3QsIGNvbnRyYWN0c18xLklOVEVSUFJFVEVSX0xPQ0FUT1JfU0VSVklDRSk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgVHlwZU1vcS5Nb2NrLm9mVHlwZSgpLm9iamVjdCwgY29udHJhY3RzXzEuUElQRU5WX1NFUlZJQ0UpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzU2VydmljZSA9IHlpZWxkIGlvYy5zZXJ2aWNlQ29udGFpbmVyLmdldCh0eXBlc180LklQcm9jZXNzU2VydmljZUZhY3RvcnkpLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICBwcm9jZXNzU2VydmljZS5vbkV4ZWMoKGZpbGUsIGFyZ3MsIG9wdGlvbnMsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxICYmIGFyZ3NbMF0gPT09ICctYycgJiYgYXJnc1sxXSA9PT0gJ2ltcG9ydCBwaXAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeyBzdGRvdXQ6ICcnIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCAmJiBhcmdzWzBdID09PSAnLS12ZXJzaW9uJyAmJiBmaWxlID09PSAnY29uZGEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeyBzdGRvdXQ6ICcnIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlSW5zdGFsbGVycyA9IGlvYy5zZXJ2aWNlQ29udGFpbmVyLmdldEFsbCh0eXBlc18yLklNb2R1bGVJbnN0YWxsZXIpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KG1vZHVsZUluc3RhbGxlcnMpLmxlbmd0aCg0LCAnSW5jb3JyZWN0IG51bWJlciBvZiBpbnN0YWxsZXJzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpcEluc3RhbGxlciA9IG1vZHVsZUluc3RhbGxlcnMuZmluZChpdGVtID0+IGl0ZW0uZGlzcGxheU5hbWUgPT09ICdQaXAnKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChwaXBJbnN0YWxsZXIpLm5vdC50by5iZS5hbigndW5kZWZpbmVkJywgJ1BpcCBpbnN0YWxsZXIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgIHlpZWxkIGNoYWlfMS5leHBlY3QocGlwSW5zdGFsbGVyLmlzU3VwcG9ydGVkKCkpLnRvLmV2ZW50dWFsbHkuZXF1YWwodHJ1ZSwgJ1BpcCBpcyBub3Qgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ0Vuc3VyZSBjb25kYSBpcyBzdXBwb3J0ZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VDb250YWluZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZ1NlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfNi5JQ29uZmlndXJhdGlvblNlcnZpY2UpKSkucmV0dXJucygoKSA9PiBjb25maWdTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBweXRob25QYXRoID0gJ3B5dGhvbkFCQyc7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLnNldHVwKHMgPT4gcy5weXRob25QYXRoKS5yZXR1cm5zKCgpID0+IHB5dGhvblBhdGgpO1xyXG4gICAgICAgICAgICBjb25maWdTZXJ2aWNlLnNldHVwKGMgPT4gYy5nZXRTZXR0aW5ncyhUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHNldHRpbmdzLm9iamVjdCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUoY29udHJhY3RzXzEuSUNvbmRhU2VydmljZSkpKS5yZXR1cm5zKCgpID0+IGNvbmRhU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb25kYVNlcnZpY2Uuc2V0dXAoYyA9PiBjLmlzQ29uZGFBdmFpbGFibGUoKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgICAgICBjb25kYVNlcnZpY2Uuc2V0dXAoYyA9PiBjLmlzQ29uZGFFbnZpcm9ubWVudChUeXBlTW9xLkl0LmlzVmFsdWUocHl0aG9uUGF0aCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmRhSW5zdGFsbGVyID0gbmV3IGNvbmRhSW5zdGFsbGVyXzEuQ29uZGFJbnN0YWxsZXIoc2VydmljZUNvbnRhaW5lci5vYmplY3QpO1xyXG4gICAgICAgICAgICB5aWVsZCBjaGFpXzEuZXhwZWN0KGNvbmRhSW5zdGFsbGVyLmlzU3VwcG9ydGVkKCkpLnRvLmV2ZW50dWFsbHkuZXF1YWwodHJ1ZSwgJ0NvbmRhIGlzIG5vdCBzdXBwb3J0ZWQnKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnRW5zdXJlIGNvbmRhIGlzIG5vdCBzdXBwb3J0ZWQgZXZlbiBpZiBjb25kYSBpcyBhdmFpbGFibGUnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VDb250YWluZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZ1NlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfNi5JQ29uZmlndXJhdGlvblNlcnZpY2UpKSkucmV0dXJucygoKSA9PiBjb25maWdTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBweXRob25QYXRoID0gJ3B5dGhvbkFCQyc7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLnNldHVwKHMgPT4gcy5weXRob25QYXRoKS5yZXR1cm5zKCgpID0+IHB5dGhvblBhdGgpO1xyXG4gICAgICAgICAgICBjb25maWdTZXJ2aWNlLnNldHVwKGMgPT4gYy5nZXRTZXR0aW5ncyhUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHNldHRpbmdzLm9iamVjdCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUoY29udHJhY3RzXzEuSUNvbmRhU2VydmljZSkpKS5yZXR1cm5zKCgpID0+IGNvbmRhU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb25kYVNlcnZpY2Uuc2V0dXAoYyA9PiBjLmlzQ29uZGFBdmFpbGFibGUoKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgICAgICBjb25kYVNlcnZpY2Uuc2V0dXAoYyA9PiBjLmlzQ29uZGFFbnZpcm9ubWVudChUeXBlTW9xLkl0LmlzVmFsdWUocHl0aG9uUGF0aCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShmYWxzZSkpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25kYUluc3RhbGxlciA9IG5ldyBjb25kYUluc3RhbGxlcl8xLkNvbmRhSW5zdGFsbGVyKHNlcnZpY2VDb250YWluZXIub2JqZWN0KTtcclxuICAgICAgICAgICAgeWllbGQgY2hhaV8xLmV4cGVjdChjb25kYUluc3RhbGxlci5pc1N1cHBvcnRlZCgpKS50by5ldmVudHVhbGx5LmVxdWFsKGZhbHNlLCAnQ29uZGEgc2hvdWxkIG5vdCBiZSBzdXBwb3J0ZWQnKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgY29uc3QgcmVzb3VyY2VUZXN0TmFtZVN1ZmZpeCA9IHJlc291cmNlID8gJyB3aXRoIGEgcmVzb3VyY2UnIDogJyB3aXRob3V0IGEgcmVzb3VyY2UnO1xyXG4gICAgICAgIHRlc3QoYFZhbGlkYXRlIHBpcCBpbnN0YWxsIGFyZ3VtZW50cyAke3Jlc291cmNlVGVzdE5hbWVTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnByZXRlclBhdGggPSB5aWVsZCBnZXRDdXJyZW50UHl0aG9uUGF0aCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLnNldHVwKHAgPT4gcC5nZXRJbnRlcnByZXRlcnMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW09iamVjdC5hc3NpZ24oe30sIGluZm8sIHsgcGF0aDogaW50ZXJwcmV0ZXJQYXRoLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9KV0pKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlLCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLm9iamVjdCwgY29udHJhY3RzXzEuSU5URVJQUkVURVJfTE9DQVRPUl9TRVJWSUNFKTtcclxuICAgICAgICAgICAgaW9jLnNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlLCBUeXBlTW9xLk1vY2sub2ZUeXBlKCkub2JqZWN0LCBjb250cmFjdHNfMS5QSVBFTlZfU0VSVklDRSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVycHJldGVyID0gT2JqZWN0LmFzc2lnbih7fSwgaW5mbywgeyB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biwgcGF0aDogY29tbW9uXzEuUFlUSE9OX1BBVEggfSk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZS5zZXR1cCh4ID0+IHguZ2V0QWN0aXZlSW50ZXJwcmV0ZXIoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoaW50ZXJwcmV0ZXIpKTtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlTmFtZSA9ICd4eXonO1xyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGVJbnN0YWxsZXJzID0gaW9jLnNlcnZpY2VDb250YWluZXIuZ2V0QWxsKHR5cGVzXzIuSU1vZHVsZUluc3RhbGxlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpcEluc3RhbGxlciA9IG1vZHVsZUluc3RhbGxlcnMuZmluZChpdGVtID0+IGl0ZW0uZGlzcGxheU5hbWUgPT09ICdQaXAnKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChwaXBJbnN0YWxsZXIpLm5vdC50by5iZS5hbigndW5kZWZpbmVkJywgJ1BpcCBpbnN0YWxsZXIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgIGxldCBhcmdzU2VudCA9IFtdO1xyXG4gICAgICAgICAgICBtb2NrVGVybWluYWxTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAodCA9PiB0LnNlbmRDb21tYW5kKFR5cGVNb3EuSXQuaXNBbnlTdHJpbmcoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKChjbWQsIGFyZ3MpID0+IHsgYXJnc1NlbnQgPSBhcmdzOyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7IH0pO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZS5zZXR1cChpID0+IGkuZ2V0QWN0aXZlSW50ZXJwcmV0ZXIoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9KSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHBpcEluc3RhbGxlci5pbnN0YWxsTW9kdWxlKG1vZHVsZU5hbWUsIHJlc291cmNlKTtcclxuICAgICAgICAgICAgbW9ja1Rlcm1pbmFsRmFjdG9yeS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChhcmdzU2VudC5qb2luKCcgJykpLmVxdWFsKGAtbSBwaXAgaW5zdGFsbCAtVSAke21vZHVsZU5hbWV9IC0tdXNlcmAsICdJbnZhbGlkIGNvbW1hbmQgc2VudCB0byB0ZXJtaW5hbCBmb3IgaW5zdGFsbGF0aW9uLicpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0ZXN0KGBWYWxpZGF0ZSBDb25kYSBpbnN0YWxsIGFyZ3VtZW50cyAke3Jlc291cmNlVGVzdE5hbWVTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnByZXRlclBhdGggPSB5aWVsZCBnZXRDdXJyZW50UHl0aG9uUGF0aCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLnNldHVwKHAgPT4gcC5nZXRJbnRlcnByZXRlcnMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW09iamVjdC5hc3NpZ24oe30sIGluZm8sIHsgcGF0aDogaW50ZXJwcmV0ZXJQYXRoLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuQ29uZGEgfSldKSk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgbW9ja0ludGVycHJldGVyTG9jYXRvci5vYmplY3QsIGNvbnRyYWN0c18xLklOVEVSUFJFVEVSX0xPQ0FUT1JfU0VSVklDRSk7XHJcbiAgICAgICAgICAgIGlvYy5zZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgVHlwZU1vcS5Nb2NrLm9mVHlwZSgpLm9iamVjdCwgY29udHJhY3RzXzEuUElQRU5WX1NFUlZJQ0UpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGVOYW1lID0gJ3h5eic7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZUluc3RhbGxlcnMgPSBpb2Muc2VydmljZUNvbnRhaW5lci5nZXRBbGwodHlwZXNfMi5JTW9kdWxlSW5zdGFsbGVyKTtcclxuICAgICAgICAgICAgY29uc3QgcGlwSW5zdGFsbGVyID0gbW9kdWxlSW5zdGFsbGVycy5maW5kKGl0ZW0gPT4gaXRlbS5kaXNwbGF5TmFtZSA9PT0gJ1BpcCcpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHBpcEluc3RhbGxlcikubm90LnRvLmJlLmFuKCd1bmRlZmluZWQnLCAnUGlwIGluc3RhbGxlciBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgbGV0IGFyZ3NTZW50ID0gW107XHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbFNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh0ID0+IHQuc2VuZENvbW1hbmQoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpLCBUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKGNtZCwgYXJncykgPT4geyBhcmdzU2VudCA9IGFyZ3M7IHJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTsgfSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHBpcEluc3RhbGxlci5pbnN0YWxsTW9kdWxlKG1vZHVsZU5hbWUsIHJlc291cmNlKTtcclxuICAgICAgICAgICAgbW9ja1Rlcm1pbmFsRmFjdG9yeS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChhcmdzU2VudC5qb2luKCcgJykpLmVxdWFsKGAtbSBwaXAgaW5zdGFsbCAtVSAke21vZHVsZU5hbWV9YCwgJ0ludmFsaWQgY29tbWFuZCBzZW50IHRvIHRlcm1pbmFsIGZvciBpbnN0YWxsYXRpb24uJyk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoYFZhbGlkYXRlIHBpcGVudiBpbnN0YWxsIGFyZ3VtZW50cyAke3Jlc291cmNlVGVzdE5hbWVTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBtb2NrSW50ZXJwcmV0ZXJMb2NhdG9yLnNldHVwKHAgPT4gcC5nZXRJbnRlcnByZXRlcnMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW09iamVjdC5hc3NpZ24oe30sIGluZm8sIHsgcGF0aDogJ2ludGVycHJldGVyUGF0aCcsIHR5cGU6IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5WaXJ0dWFsRW52IH0pXSkpO1xyXG4gICAgICAgICAgICBpb2Muc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UoY29udHJhY3RzXzEuSUludGVycHJldGVyTG9jYXRvclNlcnZpY2UsIG1vY2tJbnRlcnByZXRlckxvY2F0b3Iub2JqZWN0LCBjb250cmFjdHNfMS5QSVBFTlZfU0VSVklDRSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZU5hbWUgPSAneHl6JztcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlSW5zdGFsbGVycyA9IGlvYy5zZXJ2aWNlQ29udGFpbmVyLmdldEFsbCh0eXBlc18yLklNb2R1bGVJbnN0YWxsZXIpO1xyXG4gICAgICAgICAgICBjb25zdCBwaXBJbnN0YWxsZXIgPSBtb2R1bGVJbnN0YWxsZXJzLmZpbmQoaXRlbSA9PiBpdGVtLmRpc3BsYXlOYW1lID09PSAncGlwZW52Jyk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QocGlwSW5zdGFsbGVyKS5ub3QudG8uYmUuYW4oJ3VuZGVmaW5lZCcsICdwaXBlbnYgaW5zdGFsbGVyIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICBsZXQgYXJnc1NlbnQgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGNvbW1hbmQ7XHJcbiAgICAgICAgICAgIG1vY2tUZXJtaW5hbFNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh0ID0+IHQuc2VuZENvbW1hbmQoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpLCBUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKGNtZCwgYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXJnc1NlbnQgPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZCA9IGNtZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHBpcEluc3RhbGxlci5pbnN0YWxsTW9kdWxlKG1vZHVsZU5hbWUsIHJlc291cmNlKTtcclxuICAgICAgICAgICAgbW9ja1Rlcm1pbmFsRmFjdG9yeS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChjb21tYW5kKS5lcXVhbCgncGlwZW52JywgJ0ludmFsaWQgY29tbWFuZCBzZW50IHRvIHRlcm1pbmFsIGZvciBpbnN0YWxsYXRpb24uJyk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoYXJnc1NlbnQuam9pbignICcpKS5lcXVhbChgaW5zdGFsbCAke21vZHVsZU5hbWV9IC0tZGV2YCwgJ0ludmFsaWQgY29tbWFuZCBhcmd1bWVudHMgc2VudCB0byB0ZXJtaW5hbCBmb3IgaW5zdGFsbGF0aW9uLicpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH0pO1xyXG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kdWxlSW5zdGFsbGVyLnRlc3QuanMubWFwIl19