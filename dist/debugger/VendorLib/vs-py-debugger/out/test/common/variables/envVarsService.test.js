"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const chaiAsPromised = require("chai-as-promised");

const path = require("path");

const pathUtils_1 = require("../../../client/common/platform/pathUtils");

const platform_1 = require("../../../client/common/utils/platform");

const environment_1 = require("../../../client/common/variables/environment");

chai_1.use(chaiAsPromised);
const envFilesFolderPath = path.join(__dirname, '..', '..', '..', '..', 'src', 'testMultiRootWkspc', 'workspace4'); // tslint:disable-next-line:max-func-body-length

suite('Environment Variables Service', () => {
  let pathUtils;
  let variablesService;
  setup(() => {
    pathUtils = new pathUtils_1.PathUtils(platform_1.isWindows());
    variablesService = new environment_1.EnvironmentVariablesService(pathUtils);
  });
  test('Custom variables should be undefined with non-existent files', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = yield variablesService.parseFile(path.join(envFilesFolderPath, 'abcd'));
    chai_1.expect(vars).to.equal(undefined, 'Variables should be undefined');
  }));
  test('Custom variables should be undefined when folder name is passed instead of a file name', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = yield variablesService.parseFile(envFilesFolderPath);
    chai_1.expect(vars).to.equal(undefined, 'Variables should be undefined');
  }));
  test('Custom variables should be not undefined with a valid environment file', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = yield variablesService.parseFile(path.join(envFilesFolderPath, '.env'));
    chai_1.expect(vars).to.not.equal(undefined, 'Variables should be undefined');
  }));
  test('Custom variables should be parsed from env file', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = yield variablesService.parseFile(path.join(envFilesFolderPath, '.env'));
    chai_1.expect(vars).to.not.equal(undefined, 'Variables is is undefiend');
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('X1234PYEXTUNITTESTVAR', '1234', 'X1234PYEXTUNITTESTVAR value is invalid');
    chai_1.expect(vars).to.have.property('PYTHONPATH', '../workspace5', 'PYTHONPATH value is invalid');
  }));
  test('PATH and PYTHONPATH from env file should be returned as is', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = yield variablesService.parseFile(path.join(envFilesFolderPath, '.env5'));
    const expectedPythonPath = '/usr/one/three:/usr/one/four';
    const expectedPath = '/usr/x:/usr/y';
    chai_1.expect(vars).to.not.equal(undefined, 'Variables is is undefiend');
    chai_1.expect(Object.keys(vars)).lengthOf(5, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('X', '1', 'X value is invalid');
    chai_1.expect(vars).to.have.property('Y', '2', 'Y value is invalid');
    chai_1.expect(vars).to.have.property('PYTHONPATH', expectedPythonPath, 'PYTHONPATH value is invalid');
    chai_1.expect(vars).to.have.property('PATH', expectedPath, 'PATH value is invalid');
  }));
  test('Ensure variables are merged', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars1 = {
      ONE: '1',
      TWO: 'TWO'
    };
    const vars2 = {
      ONE: 'ONE',
      THREE: '3'
    };
    variablesService.mergeVariables(vars1, vars2);
    chai_1.expect(Object.keys(vars1)).lengthOf(2, 'Source variables modified');
    chai_1.expect(Object.keys(vars2)).lengthOf(3, 'Variables not merged');
    chai_1.expect(vars2).to.have.property('ONE', 'ONE', 'Variable overwritten');
    chai_1.expect(vars2).to.have.property('TWO', 'TWO', 'Incorrect value');
    chai_1.expect(vars2).to.have.property('THREE', '3', 'Variable not merged');
  }));
  test('Ensure path variabnles variables are not merged into target', () => __awaiter(void 0, void 0, void 0, function* () {
    const pathVariable = pathUtils.getPathVariableName();
    const vars1 = {
      ONE: '1',
      TWO: 'TWO',
      PYTHONPATH: 'PYTHONPATH'
    };
    vars1[pathVariable] = 'PATH';
    const vars2 = {
      ONE: 'ONE',
      THREE: '3'
    };
    variablesService.mergeVariables(vars1, vars2);
    chai_1.expect(Object.keys(vars1)).lengthOf(4, 'Source variables modified');
    chai_1.expect(Object.keys(vars2)).lengthOf(3, 'Variables not merged');
    chai_1.expect(vars2).to.have.property('ONE', 'ONE', 'Variable overwritten');
    chai_1.expect(vars2).to.have.property('TWO', 'TWO', 'Incorrect value');
    chai_1.expect(vars2).to.have.property('THREE', '3', 'Variable not merged');
  }));
  test('Ensure path variabnles variables in target are left untouched', () => __awaiter(void 0, void 0, void 0, function* () {
    const pathVariable = pathUtils.getPathVariableName();
    const vars1 = {
      ONE: '1',
      TWO: 'TWO'
    };
    const vars2 = {
      ONE: 'ONE',
      THREE: '3',
      PYTHONPATH: 'PYTHONPATH'
    };
    vars2[pathVariable] = 'PATH';
    variablesService.mergeVariables(vars1, vars2);
    chai_1.expect(Object.keys(vars1)).lengthOf(2, 'Source variables modified');
    chai_1.expect(Object.keys(vars2)).lengthOf(5, 'Variables not merged');
    chai_1.expect(vars2).to.have.property('ONE', 'ONE', 'Variable overwritten');
    chai_1.expect(vars2).to.have.property('TWO', 'TWO', 'Incorrect value');
    chai_1.expect(vars2).to.have.property('THREE', '3', 'Variable not merged');
    chai_1.expect(vars2).to.have.property('PYTHONPATH', 'PYTHONPATH', 'Incorrect value');
    chai_1.expect(vars2).to.have.property(pathVariable, 'PATH', 'Incorrect value');
  }));
  test('Ensure appending PATH has no effect if an undefined value or empty string is provided and PATH does not exist in vars object', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = {
      ONE: '1'
    };
    variablesService.appendPath(vars);
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    variablesService.appendPath(vars, '');
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    variablesService.appendPath(vars, ' ', '');
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
  }));
  test('Ensure appending PYTHONPATH has no effect if an undefined value or empty string is provided and PYTHONPATH does not exist in vars object', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = {
      ONE: '1'
    };
    variablesService.appendPythonPath(vars);
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    variablesService.appendPythonPath(vars, '');
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    variablesService.appendPythonPath(vars, ' ', '');
    chai_1.expect(Object.keys(vars)).lengthOf(1, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
  }));
  test('Ensure appending PATH has no effect if an empty string is provided and path does not exist in vars object', () => __awaiter(void 0, void 0, void 0, function* () {
    const pathVariable = pathUtils.getPathVariableName();
    const vars = {
      ONE: '1'
    };
    vars[pathVariable] = 'PATH';
    variablesService.appendPath(vars);
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property(pathVariable, 'PATH', 'Incorrect value');
    variablesService.appendPath(vars, '');
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property(pathVariable, 'PATH', 'Incorrect value');
    variablesService.appendPath(vars, ' ', '');
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property(pathVariable, 'PATH', 'Incorrect value');
  }));
  test('Ensure appending PYTHONPATH has no effect if an empty string is provided and PYTHONPATH does not exist in vars object', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = {
      ONE: '1',
      PYTHONPATH: 'PYTHONPATH'
    };
    variablesService.appendPythonPath(vars);
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property('PYTHONPATH', 'PYTHONPATH', 'Incorrect value');
    variablesService.appendPythonPath(vars, '');
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property('PYTHONPATH', 'PYTHONPATH', 'Incorrect value');
    variablesService.appendPythonPath(vars, ' ', '');
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property('PYTHONPATH', 'PYTHONPATH', 'Incorrect value');
  }));
  test('Ensure PATH is appeneded', () => __awaiter(void 0, void 0, void 0, function* () {
    const pathVariable = pathUtils.getPathVariableName();
    const vars = {
      ONE: '1'
    };
    vars[pathVariable] = 'PATH';
    const pathToAppend = `/usr/one${path.delimiter}/usr/three`;
    variablesService.appendPath(vars, pathToAppend);
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property(pathVariable, `PATH${path.delimiter}${pathToAppend}`, 'Incorrect value');
  }));
  test('Ensure appending PYTHONPATH has no effect if an empty string is provided and PYTHONPATH does not exist in vars object', () => __awaiter(void 0, void 0, void 0, function* () {
    const vars = {
      ONE: '1',
      PYTHONPATH: 'PYTHONPATH'
    };
    const pathToAppend = `/usr/one${path.delimiter}/usr/three`;
    variablesService.appendPythonPath(vars, pathToAppend);
    chai_1.expect(Object.keys(vars)).lengthOf(2, 'Incorrect number of variables');
    chai_1.expect(vars).to.have.property('ONE', '1', 'Incorrect value');
    chai_1.expect(vars).to.have.property('PYTHONPATH', `PYTHONPATH${path.delimiter}${pathToAppend}`, 'Incorrect value');
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudlZhcnNTZXJ2aWNlLnRlc3QuanMiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsImNoYWlfMSIsInJlcXVpcmUiLCJjaGFpQXNQcm9taXNlZCIsInBhdGgiLCJwYXRoVXRpbHNfMSIsInBsYXRmb3JtXzEiLCJlbnZpcm9ubWVudF8xIiwidXNlIiwiZW52RmlsZXNGb2xkZXJQYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsInN1aXRlIiwicGF0aFV0aWxzIiwidmFyaWFibGVzU2VydmljZSIsInNldHVwIiwiUGF0aFV0aWxzIiwiaXNXaW5kb3dzIiwiRW52aXJvbm1lbnRWYXJpYWJsZXNTZXJ2aWNlIiwidGVzdCIsInZhcnMiLCJwYXJzZUZpbGUiLCJleHBlY3QiLCJ0byIsImVxdWFsIiwidW5kZWZpbmVkIiwibm90Iiwia2V5cyIsImxlbmd0aE9mIiwiaGF2ZSIsInByb3BlcnR5IiwiZXhwZWN0ZWRQeXRob25QYXRoIiwiZXhwZWN0ZWRQYXRoIiwidmFyczEiLCJPTkUiLCJUV08iLCJ2YXJzMiIsIlRIUkVFIiwibWVyZ2VWYXJpYWJsZXMiLCJwYXRoVmFyaWFibGUiLCJnZXRQYXRoVmFyaWFibGVOYW1lIiwiUFlUSE9OUEFUSCIsImFwcGVuZFBhdGgiLCJhcHBlbmRQeXRob25QYXRoIiwicGF0aFRvQXBwZW5kIiwiZGVsaW1pdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0E7QUFDQTs7QUFDQSxJQUFJQSxTQUFTLEdBQUksVUFBUSxTQUFLQSxTQUFkLElBQTRCLFVBQVVDLE9BQVYsRUFBbUJDLFVBQW5CLEVBQStCQyxDQUEvQixF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QUFxQyxLQUFyQyxFQUE0QyxHQUE1QyxFQUFpRCxpQkFBakQ7QUFDQTdCLElBQUFBLE1BQU0sQ0FBQ3FCLE1BQVAsQ0FBY0YsSUFBZCxFQUFvQkcsRUFBcEIsQ0FBdUJNLElBQXZCLENBQTRCQyxRQUE1QixDQUFxQyxZQUFyQyxFQUFvRCxhQUFZMUIsSUFBSSxDQUFDeUMsU0FBVSxHQUFFRCxZQUFhLEVBQTlGLEVBQWlHLGlCQUFqRztBQUNILEdBUDRJLENBQXpJLENBQUo7QUFRSCxDQW5KSSxDQUFMIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgY2hhaV8xID0gcmVxdWlyZShcImNoYWlcIik7XHJcbmNvbnN0IGNoYWlBc1Byb21pc2VkID0gcmVxdWlyZShcImNoYWktYXMtcHJvbWlzZWRcIik7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuY29uc3QgcGF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi9wbGF0Zm9ybS9wYXRoVXRpbHNcIik7XHJcbmNvbnN0IHBsYXRmb3JtXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi91dGlscy9wbGF0Zm9ybVwiKTtcclxuY29uc3QgZW52aXJvbm1lbnRfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvY29tbW9uL3ZhcmlhYmxlcy9lbnZpcm9ubWVudFwiKTtcclxuY2hhaV8xLnVzZShjaGFpQXNQcm9taXNlZCk7XHJcbmNvbnN0IGVudkZpbGVzRm9sZGVyUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICcuLicsICdzcmMnLCAndGVzdE11bHRpUm9vdFdrc3BjJywgJ3dvcmtzcGFjZTQnKTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1mdW5jLWJvZHktbGVuZ3RoXHJcbnN1aXRlKCdFbnZpcm9ubWVudCBWYXJpYWJsZXMgU2VydmljZScsICgpID0+IHtcclxuICAgIGxldCBwYXRoVXRpbHM7XHJcbiAgICBsZXQgdmFyaWFibGVzU2VydmljZTtcclxuICAgIHNldHVwKCgpID0+IHtcclxuICAgICAgICBwYXRoVXRpbHMgPSBuZXcgcGF0aFV0aWxzXzEuUGF0aFV0aWxzKHBsYXRmb3JtXzEuaXNXaW5kb3dzKCkpO1xyXG4gICAgICAgIHZhcmlhYmxlc1NlcnZpY2UgPSBuZXcgZW52aXJvbm1lbnRfMS5FbnZpcm9ubWVudFZhcmlhYmxlc1NlcnZpY2UocGF0aFV0aWxzKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnQ3VzdG9tIHZhcmlhYmxlcyBzaG91bGQgYmUgdW5kZWZpbmVkIHdpdGggbm9uLWV4aXN0ZW50IGZpbGVzJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHZhcnMgPSB5aWVsZCB2YXJpYWJsZXNTZXJ2aWNlLnBhcnNlRmlsZShwYXRoLmpvaW4oZW52RmlsZXNGb2xkZXJQYXRoLCAnYWJjZCcpKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmVxdWFsKHVuZGVmaW5lZCwgJ1ZhcmlhYmxlcyBzaG91bGQgYmUgdW5kZWZpbmVkJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdDdXN0b20gdmFyaWFibGVzIHNob3VsZCBiZSB1bmRlZmluZWQgd2hlbiBmb2xkZXIgbmFtZSBpcyBwYXNzZWQgaW5zdGVhZCBvZiBhIGZpbGUgbmFtZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCB2YXJzID0geWllbGQgdmFyaWFibGVzU2VydmljZS5wYXJzZUZpbGUoZW52RmlsZXNGb2xkZXJQYXRoKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmVxdWFsKHVuZGVmaW5lZCwgJ1ZhcmlhYmxlcyBzaG91bGQgYmUgdW5kZWZpbmVkJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdDdXN0b20gdmFyaWFibGVzIHNob3VsZCBiZSBub3QgdW5kZWZpbmVkIHdpdGggYSB2YWxpZCBlbnZpcm9ubWVudCBmaWxlJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHZhcnMgPSB5aWVsZCB2YXJpYWJsZXNTZXJ2aWNlLnBhcnNlRmlsZShwYXRoLmpvaW4oZW52RmlsZXNGb2xkZXJQYXRoLCAnLmVudicpKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLm5vdC5lcXVhbCh1bmRlZmluZWQsICdWYXJpYWJsZXMgc2hvdWxkIGJlIHVuZGVmaW5lZCcpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnQ3VzdG9tIHZhcmlhYmxlcyBzaG91bGQgYmUgcGFyc2VkIGZyb20gZW52IGZpbGUnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgdmFycyA9IHlpZWxkIHZhcmlhYmxlc1NlcnZpY2UucGFyc2VGaWxlKHBhdGguam9pbihlbnZGaWxlc0ZvbGRlclBhdGgsICcuZW52JykpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8ubm90LmVxdWFsKHVuZGVmaW5lZCwgJ1ZhcmlhYmxlcyBpcyBpcyB1bmRlZmllbmQnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigyLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ1gxMjM0UFlFWFRVTklUVEVTVFZBUicsICcxMjM0JywgJ1gxMjM0UFlFWFRVTklUVEVTVFZBUiB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdQWVRIT05QQVRIJywgJy4uL3dvcmtzcGFjZTUnLCAnUFlUSE9OUEFUSCB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdQQVRIIGFuZCBQWVRIT05QQVRIIGZyb20gZW52IGZpbGUgc2hvdWxkIGJlIHJldHVybmVkIGFzIGlzJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHZhcnMgPSB5aWVsZCB2YXJpYWJsZXNTZXJ2aWNlLnBhcnNlRmlsZShwYXRoLmpvaW4oZW52RmlsZXNGb2xkZXJQYXRoLCAnLmVudjUnKSk7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRQeXRob25QYXRoID0gJy91c3Ivb25lL3RocmVlOi91c3Ivb25lL2ZvdXInO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9ICcvdXNyL3g6L3Vzci95JztcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLm5vdC5lcXVhbCh1bmRlZmluZWQsICdWYXJpYWJsZXMgaXMgaXMgdW5kZWZpZW5kJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzKSkubGVuZ3RoT2YoNSwgJ0luY29ycmVjdCBudW1iZXIgb2YgdmFyaWFibGVzJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdYJywgJzEnLCAnWCB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdZJywgJzInLCAnWSB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdQWVRIT05QQVRIJywgZXhwZWN0ZWRQeXRob25QYXRoLCAnUFlUSE9OUEFUSCB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdQQVRIJywgZXhwZWN0ZWRQYXRoLCAnUEFUSCB2YWx1ZSBpcyBpbnZhbGlkJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdFbnN1cmUgdmFyaWFibGVzIGFyZSBtZXJnZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgdmFyczEgPSB7IE9ORTogJzEnLCBUV086ICdUV08nIH07XHJcbiAgICAgICAgY29uc3QgdmFyczIgPSB7IE9ORTogJ09ORScsIFRIUkVFOiAnMycgfTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLm1lcmdlVmFyaWFibGVzKHZhcnMxLCB2YXJzMik7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzMSkpLmxlbmd0aE9mKDIsICdTb3VyY2UgdmFyaWFibGVzIG1vZGlmaWVkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzMikpLmxlbmd0aE9mKDMsICdWYXJpYWJsZXMgbm90IG1lcmdlZCcpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICdPTkUnLCAnVmFyaWFibGUgb3ZlcndyaXR0ZW4nKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMyKS50by5oYXZlLnByb3BlcnR5KCdUV08nLCAnVFdPJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkoJ1RIUkVFJywgJzMnLCAnVmFyaWFibGUgbm90IG1lcmdlZCcpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRW5zdXJlIHBhdGggdmFyaWFibmxlcyB2YXJpYWJsZXMgYXJlIG5vdCBtZXJnZWQgaW50byB0YXJnZXQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aFZhcmlhYmxlID0gcGF0aFV0aWxzLmdldFBhdGhWYXJpYWJsZU5hbWUoKTtcclxuICAgICAgICBjb25zdCB2YXJzMSA9IHsgT05FOiAnMScsIFRXTzogJ1RXTycsIFBZVEhPTlBBVEg6ICdQWVRIT05QQVRIJyB9O1xyXG4gICAgICAgIHZhcnMxW3BhdGhWYXJpYWJsZV0gPSAnUEFUSCc7XHJcbiAgICAgICAgY29uc3QgdmFyczIgPSB7IE9ORTogJ09ORScsIFRIUkVFOiAnMycgfTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLm1lcmdlVmFyaWFibGVzKHZhcnMxLCB2YXJzMik7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzMSkpLmxlbmd0aE9mKDQsICdTb3VyY2UgdmFyaWFibGVzIG1vZGlmaWVkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzMikpLmxlbmd0aE9mKDMsICdWYXJpYWJsZXMgbm90IG1lcmdlZCcpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICdPTkUnLCAnVmFyaWFibGUgb3ZlcndyaXR0ZW4nKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMyKS50by5oYXZlLnByb3BlcnR5KCdUV08nLCAnVFdPJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkoJ1RIUkVFJywgJzMnLCAnVmFyaWFibGUgbm90IG1lcmdlZCcpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRW5zdXJlIHBhdGggdmFyaWFibmxlcyB2YXJpYWJsZXMgaW4gdGFyZ2V0IGFyZSBsZWZ0IHVudG91Y2hlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCBwYXRoVmFyaWFibGUgPSBwYXRoVXRpbHMuZ2V0UGF0aFZhcmlhYmxlTmFtZSgpO1xyXG4gICAgICAgIGNvbnN0IHZhcnMxID0geyBPTkU6ICcxJywgVFdPOiAnVFdPJyB9O1xyXG4gICAgICAgIGNvbnN0IHZhcnMyID0geyBPTkU6ICdPTkUnLCBUSFJFRTogJzMnLCBQWVRIT05QQVRIOiAnUFlUSE9OUEFUSCcgfTtcclxuICAgICAgICB2YXJzMltwYXRoVmFyaWFibGVdID0gJ1BBVEgnO1xyXG4gICAgICAgIHZhcmlhYmxlc1NlcnZpY2UubWVyZ2VWYXJpYWJsZXModmFyczEsIHZhcnMyKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMxKSkubGVuZ3RoT2YoMiwgJ1NvdXJjZSB2YXJpYWJsZXMgbW9kaWZpZWQnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMyKSkubGVuZ3RoT2YoNSwgJ1ZhcmlhYmxlcyBub3QgbWVyZ2VkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzMikudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJ09ORScsICdWYXJpYWJsZSBvdmVyd3JpdHRlbicpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkoJ1RXTycsICdUV08nLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzMikudG8uaGF2ZS5wcm9wZXJ0eSgnVEhSRUUnLCAnMycsICdWYXJpYWJsZSBub3QgbWVyZ2VkJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzMikudG8uaGF2ZS5wcm9wZXJ0eSgnUFlUSE9OUEFUSCcsICdQWVRIT05QQVRIJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFyczIpLnRvLmhhdmUucHJvcGVydHkocGF0aFZhcmlhYmxlLCAnUEFUSCcsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0Vuc3VyZSBhcHBlbmRpbmcgUEFUSCBoYXMgbm8gZWZmZWN0IGlmIGFuIHVuZGVmaW5lZCB2YWx1ZSBvciBlbXB0eSBzdHJpbmcgaXMgcHJvdmlkZWQgYW5kIFBBVEggZG9lcyBub3QgZXhpc3QgaW4gdmFycyBvYmplY3QnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgdmFycyA9IHsgT05FOiAnMScgfTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLmFwcGVuZFBhdGgodmFycyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzKSkubGVuZ3RoT2YoMSwgJ0luY29ycmVjdCBudW1iZXIgb2YgdmFyaWFibGVzJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdPTkUnLCAnMScsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLmFwcGVuZFBhdGgodmFycywgJycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDEsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQYXRoKHZhcnMsICcgJywgJycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDEsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdFbnN1cmUgYXBwZW5kaW5nIFBZVEhPTlBBVEggaGFzIG5vIGVmZmVjdCBpZiBhbiB1bmRlZmluZWQgdmFsdWUgb3IgZW1wdHkgc3RyaW5nIGlzIHByb3ZpZGVkIGFuZCBQWVRIT05QQVRIIGRvZXMgbm90IGV4aXN0IGluIHZhcnMgb2JqZWN0JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHZhcnMgPSB7IE9ORTogJzEnIH07XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQeXRob25QYXRoKHZhcnMpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDEsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQeXRob25QYXRoKHZhcnMsICcnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigxLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICcxJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIHZhcmlhYmxlc1NlcnZpY2UuYXBwZW5kUHl0aG9uUGF0aCh2YXJzLCAnICcsICcnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigxLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICcxJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRW5zdXJlIGFwcGVuZGluZyBQQVRIIGhhcyBubyBlZmZlY3QgaWYgYW4gZW1wdHkgc3RyaW5nIGlzIHByb3ZpZGVkIGFuZCBwYXRoIGRvZXMgbm90IGV4aXN0IGluIHZhcnMgb2JqZWN0JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGhWYXJpYWJsZSA9IHBhdGhVdGlscy5nZXRQYXRoVmFyaWFibGVOYW1lKCk7XHJcbiAgICAgICAgY29uc3QgdmFycyA9IHsgT05FOiAnMScgfTtcclxuICAgICAgICB2YXJzW3BhdGhWYXJpYWJsZV0gPSAnUEFUSCc7XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQYXRoKHZhcnMpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDIsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KHBhdGhWYXJpYWJsZSwgJ1BBVEgnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQYXRoKHZhcnMsICcnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigyLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICcxJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eShwYXRoVmFyaWFibGUsICdQQVRIJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIHZhcmlhYmxlc1NlcnZpY2UuYXBwZW5kUGF0aCh2YXJzLCAnICcsICcnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigyLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICcxJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eShwYXRoVmFyaWFibGUsICdQQVRIJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRW5zdXJlIGFwcGVuZGluZyBQWVRIT05QQVRIIGhhcyBubyBlZmZlY3QgaWYgYW4gZW1wdHkgc3RyaW5nIGlzIHByb3ZpZGVkIGFuZCBQWVRIT05QQVRIIGRvZXMgbm90IGV4aXN0IGluIHZhcnMgb2JqZWN0JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHZhcnMgPSB7IE9ORTogJzEnLCBQWVRIT05QQVRIOiAnUFlUSE9OUEFUSCcgfTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLmFwcGVuZFB5dGhvblBhdGgodmFycyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChPYmplY3Qua2V5cyh2YXJzKSkubGVuZ3RoT2YoMiwgJ0luY29ycmVjdCBudW1iZXIgb2YgdmFyaWFibGVzJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdPTkUnLCAnMScsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ1BZVEhPTlBBVEgnLCAnUFlUSE9OUEFUSCcsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLmFwcGVuZFB5dGhvblBhdGgodmFycywgJycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDIsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdQWVRIT05QQVRIJywgJ1BZVEhPTlBBVEgnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgdmFyaWFibGVzU2VydmljZS5hcHBlbmRQeXRob25QYXRoKHZhcnMsICcgJywgJycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDIsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KCdQWVRIT05QQVRIJywgJ1BZVEhPTlBBVEgnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdFbnN1cmUgUEFUSCBpcyBhcHBlbmVkZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aFZhcmlhYmxlID0gcGF0aFV0aWxzLmdldFBhdGhWYXJpYWJsZU5hbWUoKTtcclxuICAgICAgICBjb25zdCB2YXJzID0geyBPTkU6ICcxJyB9O1xyXG4gICAgICAgIHZhcnNbcGF0aFZhcmlhYmxlXSA9ICdQQVRIJztcclxuICAgICAgICBjb25zdCBwYXRoVG9BcHBlbmQgPSBgL3Vzci9vbmUke3BhdGguZGVsaW1pdGVyfS91c3IvdGhyZWVgO1xyXG4gICAgICAgIHZhcmlhYmxlc1NlcnZpY2UuYXBwZW5kUGF0aCh2YXJzLCBwYXRoVG9BcHBlbmQpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoT2JqZWN0LmtleXModmFycykpLmxlbmd0aE9mKDIsICdJbmNvcnJlY3QgbnVtYmVyIG9mIHZhcmlhYmxlcycpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnT05FJywgJzEnLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdCh2YXJzKS50by5oYXZlLnByb3BlcnR5KHBhdGhWYXJpYWJsZSwgYFBBVEgke3BhdGguZGVsaW1pdGVyfSR7cGF0aFRvQXBwZW5kfWAsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0Vuc3VyZSBhcHBlbmRpbmcgUFlUSE9OUEFUSCBoYXMgbm8gZWZmZWN0IGlmIGFuIGVtcHR5IHN0cmluZyBpcyBwcm92aWRlZCBhbmQgUFlUSE9OUEFUSCBkb2VzIG5vdCBleGlzdCBpbiB2YXJzIG9iamVjdCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCB2YXJzID0geyBPTkU6ICcxJywgUFlUSE9OUEFUSDogJ1BZVEhPTlBBVEgnIH07XHJcbiAgICAgICAgY29uc3QgcGF0aFRvQXBwZW5kID0gYC91c3Ivb25lJHtwYXRoLmRlbGltaXRlcn0vdXNyL3RocmVlYDtcclxuICAgICAgICB2YXJpYWJsZXNTZXJ2aWNlLmFwcGVuZFB5dGhvblBhdGgodmFycywgcGF0aFRvQXBwZW5kKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KE9iamVjdC5rZXlzKHZhcnMpKS5sZW5ndGhPZigyLCAnSW5jb3JyZWN0IG51bWJlciBvZiB2YXJpYWJsZXMnKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHZhcnMpLnRvLmhhdmUucHJvcGVydHkoJ09ORScsICcxJywgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QodmFycykudG8uaGF2ZS5wcm9wZXJ0eSgnUFlUSE9OUEFUSCcsIGBQWVRIT05QQVRIJHtwYXRoLmRlbGltaXRlcn0ke3BhdGhUb0FwcGVuZH1gLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICB9KSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnZWYXJzU2VydmljZS50ZXN0LmpzLm1hcCJdfQ==