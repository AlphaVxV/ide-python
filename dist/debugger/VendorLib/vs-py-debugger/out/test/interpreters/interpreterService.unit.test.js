// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:max-func-body-length no-any

const chai_1 = require("chai");

const chaiAsPromised = require("chai-as-promised");

const events_1 = require("events");

const inversify_1 = require("inversify");

const path = require("path");

const TypeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../client/common/application/types");

const registry_1 = require("../../client/common/platform/registry");

const types_2 = require("../../client/common/platform/types");

const types_3 = require("../../client/common/process/types");

const types_4 = require("../../client/common/types");

const EnumEx = require("../../client/common/utils/enum");

const misc_1 = require("../../client/common/utils/misc");

const platform_1 = require("../../client/common/utils/platform");

const types_5 = require("../../client/interpreter/configuration/types");

const contracts_1 = require("../../client/interpreter/contracts");

const interpreterService_1 = require("../../client/interpreter/interpreterService");

const types_6 = require("../../client/interpreter/virtualEnvs/types");

const container_1 = require("../../client/ioc/container");

const serviceManager_1 = require("../../client/ioc/serviceManager");

chai_1.use(chaiAsPromised);
const info = {
  architecture: platform_1.Architecture.Unknown,
  companyDisplayName: '',
  displayName: '',
  envName: '',
  path: '',
  type: contracts_1.InterpreterType.Unknown,
  version: '',
  version_info: [0, 0, 0, 'alpha'],
  sysPrefix: '',
  sysVersion: ''
};
suite('Interpreters service', () => {
  let serviceManager;
  let serviceContainer;
  let updater;
  let helper;
  let locator;
  let workspace;
  let config;
  let pipenvLocator;
  let wksLocator;
  let fileSystem;
  let interpreterDisplay;
  let workspacePythonPath;
  let virtualEnvMgr;
  let persistentStateFactory;
  let pythonExecutionFactory;
  let pythonExecutionService;

  function setupSuite() {
    const cont = new inversify_1.Container();
    serviceManager = new serviceManager_1.ServiceManager(cont);
    serviceContainer = new container_1.ServiceContainer(cont);
    updater = TypeMoq.Mock.ofType();
    helper = TypeMoq.Mock.ofType();
    locator = TypeMoq.Mock.ofType();
    workspace = TypeMoq.Mock.ofType();
    config = TypeMoq.Mock.ofType();
    fileSystem = TypeMoq.Mock.ofType();
    interpreterDisplay = TypeMoq.Mock.ofType();
    workspacePythonPath = TypeMoq.Mock.ofType();
    virtualEnvMgr = TypeMoq.Mock.ofType();
    persistentStateFactory = TypeMoq.Mock.ofType();
    pythonExecutionFactory = TypeMoq.Mock.ofType();
    pythonExecutionService = TypeMoq.Mock.ofType();
    pythonExecutionService.setup(p => p.then).returns(() => undefined);
    workspace.setup(x => x.getConfiguration('python', TypeMoq.It.isAny())).returns(() => config.object);
    pythonExecutionFactory.setup(f => f.create(TypeMoq.It.isAny())).returns(() => Promise.resolve(pythonExecutionService.object));
    fileSystem.setup(fs => fs.getFileHash(TypeMoq.It.isAny())).returns(() => Promise.resolve(''));
    persistentStateFactory.setup(p => p.createGlobalPersistentState(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => {
      const state = {
        updateValue: () => Promise.resolve()
      };
      return state;
    });
    serviceManager.addSingletonInstance(types_4.IDisposableRegistry, []);
    serviceManager.addSingletonInstance(contracts_1.IInterpreterHelper, helper.object);
    serviceManager.addSingletonInstance(types_5.IPythonPathUpdaterServiceManager, updater.object);
    serviceManager.addSingletonInstance(types_1.IWorkspaceService, workspace.object);
    serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, locator.object, contracts_1.INTERPRETER_LOCATOR_SERVICE);
    serviceManager.addSingletonInstance(types_2.IFileSystem, fileSystem.object);
    serviceManager.addSingletonInstance(contracts_1.IInterpreterDisplay, interpreterDisplay.object);
    serviceManager.addSingletonInstance(types_6.IVirtualEnvironmentManager, virtualEnvMgr.object);
    serviceManager.addSingletonInstance(types_4.IPersistentStateFactory, persistentStateFactory.object);
    serviceManager.addSingletonInstance(types_3.IPythonExecutionFactory, pythonExecutionFactory.object);
    serviceManager.addSingletonInstance(types_3.IPythonExecutionService, pythonExecutionService.object);
    pipenvLocator = TypeMoq.Mock.ofType();
    wksLocator = TypeMoq.Mock.ofType();
  }

  suite('Misc', () => {
    setup(setupSuite);
    [undefined, vscode_1.Uri.file('xyz')].forEach(resource => {
      const resourceTestSuffix = `(${resource ? 'with' : 'without'} a resource)`;
      test(`Refresh invokes refresh of display ${resourceTestSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        interpreterDisplay.setup(i => i.refresh(TypeMoq.It.isValue(resource))).returns(() => Promise.resolve(undefined)).verifiable(TypeMoq.Times.once());
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        yield service.refresh(resource);
        interpreterDisplay.verifyAll();
      }));
      test(`get Interpreters uses interpreter locactors to get interpreters ${resourceTestSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        locator.setup(l => l.getInterpreters(TypeMoq.It.isValue(resource))).returns(() => Promise.resolve([])).verifiable(TypeMoq.Times.once());
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        yield service.getInterpreters(resource);
        locator.verifyAll();
      }));
    });
    test('Changes to active document should invoke intrepreter.refresh method', () => __awaiter(void 0, void 0, void 0, function* () {
      const service = new interpreterService_1.InterpreterService(serviceContainer);
      const configService = TypeMoq.Mock.ofType();
      const documentManager = TypeMoq.Mock.ofType();
      let activeTextEditorChangeHandler;
      documentManager.setup(d => d.onDidChangeActiveTextEditor(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(handler => {
        activeTextEditorChangeHandler = handler;
        return {
          dispose: misc_1.noop
        };
      });
      serviceManager.addSingletonInstance(types_4.IConfigurationService, configService.object);
      serviceManager.addSingletonInstance(types_1.IDocumentManager, documentManager.object); // tslint:disable-next-line:no-any

      configService.setup(c => c.getSettings(TypeMoq.It.isAny())).returns(() => new events_1.EventEmitter());
      service.initialize();
      const textEditor = TypeMoq.Mock.ofType();
      const uri = vscode_1.Uri.file(path.join('usr', 'file.py'));
      const document = TypeMoq.Mock.ofType();
      textEditor.setup(t => t.document).returns(() => document.object);
      document.setup(d => d.uri).returns(() => uri);
      activeTextEditorChangeHandler(textEditor.object);
      interpreterDisplay.verify(i => i.refresh(TypeMoq.It.isValue(uri)), TypeMoq.Times.once());
    }));
    test('If there is no active document then intrepreter.refresh should not be invoked', () => __awaiter(void 0, void 0, void 0, function* () {
      const service = new interpreterService_1.InterpreterService(serviceContainer);
      const configService = TypeMoq.Mock.ofType();
      const documentManager = TypeMoq.Mock.ofType();
      let activeTextEditorChangeHandler;
      documentManager.setup(d => d.onDidChangeActiveTextEditor(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(handler => {
        activeTextEditorChangeHandler = handler;
        return {
          dispose: misc_1.noop
        };
      });
      serviceManager.addSingletonInstance(types_4.IConfigurationService, configService.object);
      serviceManager.addSingletonInstance(types_1.IDocumentManager, documentManager.object); // tslint:disable-next-line:no-any

      configService.setup(c => c.getSettings(TypeMoq.It.isAny())).returns(() => new events_1.EventEmitter());
      service.initialize();
      activeTextEditorChangeHandler();
      interpreterDisplay.verify(i => i.refresh(TypeMoq.It.isValue(undefined)), TypeMoq.Times.never());
    }));
  });
  suite('Get Interpreter Details', () => {
    setup(setupSuite);
    [undefined, vscode_1.Uri.file('some workspace')].forEach(resource => {
      test(`Ensure undefined is returned if we're unable to retrieve interpreter info (Resource is ${resource})`, () => __awaiter(void 0, void 0, void 0, function* () {
        const pythonPath = 'SOME VALUE';
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        locator.setup(l => l.getInterpreters(TypeMoq.It.isValue(resource))).returns(() => Promise.resolve([])).verifiable(TypeMoq.Times.once());
        helper.setup(h => h.getInterpreterInformation(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(undefined)).verifiable(TypeMoq.Times.once());
        virtualEnvMgr.setup(v => v.getEnvironmentName(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve('')).verifiable(TypeMoq.Times.once());
        virtualEnvMgr.setup(v => v.getEnvironmentType(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(contracts_1.InterpreterType.Unknown)).verifiable(TypeMoq.Times.once());
        pythonExecutionService.setup(p => p.getExecutablePath()).returns(() => Promise.resolve(pythonPath)).verifiable(TypeMoq.Times.once());
        const details = yield service.getInterpreterDetails(pythonPath, resource);
        locator.verifyAll();
        pythonExecutionService.verifyAll();
        helper.verifyAll();
        chai_1.expect(details).to.be.equal(undefined, 'Not undefined');
      }));
    });
  });
  suite('Should Auto Set Interpreter', () => {
    setup(setupSuite);
    test('Should not auto set interpreter if there is no workspace', () => __awaiter(void 0, void 0, void 0, function* () {
      const service = new interpreterService_1.InterpreterService(serviceContainer);
      helper.setup(h => h.getActiveWorkspaceUri()).returns(() => undefined).verifiable(TypeMoq.Times.once());
      yield chai_1.expect(service.shouldAutoSetInterpreter()).to.eventually.equal(false, 'not false');
      helper.verifyAll();
    }));
    test('Should not auto set interpreter if there is a value in global user settings (global value is not \'python\')', () => __awaiter(void 0, void 0, void 0, function* () {
      const service = new interpreterService_1.InterpreterService(serviceContainer);
      workspacePythonPath.setup(w => w.folderUri).returns(() => vscode_1.Uri.file('w')).verifiable(TypeMoq.Times.once());
      helper.setup(h => h.getActiveWorkspaceUri()).returns(() => workspacePythonPath.object).verifiable(TypeMoq.Times.once());
      const pythonPathConfigValue = TypeMoq.Mock.ofType();
      config.setup(w => w.inspect(TypeMoq.It.isAny())).returns(() => pythonPathConfigValue.object).verifiable(TypeMoq.Times.once());
      pythonPathConfigValue.setup(p => p.globalValue).returns(() => path.join('a', 'bin', 'python')).verifiable(TypeMoq.Times.atLeastOnce());
      yield chai_1.expect(service.shouldAutoSetInterpreter()).to.eventually.equal(false, 'not false');
      helper.verifyAll();
      workspace.verifyAll();
      config.verifyAll();
      pythonPathConfigValue.verifyAll();
    }));
    test('Should not auto set interpreter if there is a value in workspace settings (& value is not \'python\')', () => __awaiter(void 0, void 0, void 0, function* () {
      const service = new interpreterService_1.InterpreterService(serviceContainer);
      workspacePythonPath.setup(w => w.configTarget).returns(() => vscode_1.ConfigurationTarget.Workspace).verifiable(TypeMoq.Times.once());
      helper.setup(h => h.getActiveWorkspaceUri()).returns(() => workspacePythonPath.object).verifiable(TypeMoq.Times.once());
      const pythonPathConfigValue = TypeMoq.Mock.ofType();
      config.setup(w => w.inspect(TypeMoq.It.isValue('pythonPath'))).returns(() => pythonPathConfigValue.object).verifiable(TypeMoq.Times.once());
      pythonPathConfigValue.setup(p => p.globalValue).returns(() => undefined).verifiable(TypeMoq.Times.atLeastOnce());
      pythonPathConfigValue.setup(p => p.workspaceValue).returns(() => path.join('a', 'bin', 'python')).verifiable(TypeMoq.Times.atLeastOnce());
      yield chai_1.expect(service.shouldAutoSetInterpreter()).to.eventually.equal(false, 'not false');
      helper.verifyAll();
      workspace.verifyAll();
      config.verifyAll();
      pythonPathConfigValue.verifyAll();
    }));
    [{
      configTarget: vscode_1.ConfigurationTarget.Workspace,
      label: 'Workspace'
    }, {
      configTarget: vscode_1.ConfigurationTarget.WorkspaceFolder,
      label: 'Workspace Folder'
    }].forEach(item => {
      const testSuffix = `(${item.label})`;
      const cfgTarget = item.configTarget;
      test(`Should auto set interpreter if there is no value in workspace settings ${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        workspacePythonPath.setup(w => w.configTarget).returns(() => cfgTarget).verifiable(TypeMoq.Times.once());
        helper.setup(h => h.getActiveWorkspaceUri()).returns(() => workspacePythonPath.object).verifiable(TypeMoq.Times.once());
        const pythonPathConfigValue = TypeMoq.Mock.ofType();
        config.setup(w => w.inspect(TypeMoq.It.isValue('pythonPath'))).returns(() => pythonPathConfigValue.object).verifiable(TypeMoq.Times.once());
        pythonPathConfigValue.setup(p => p.globalValue).returns(() => undefined).verifiable(TypeMoq.Times.atLeastOnce());

        if (cfgTarget === vscode_1.ConfigurationTarget.Workspace) {
          pythonPathConfigValue.setup(p => p.workspaceValue).returns(() => undefined).verifiable(TypeMoq.Times.atLeastOnce());
        } else {
          pythonPathConfigValue.setup(p => p.workspaceFolderValue).returns(() => undefined).verifiable(TypeMoq.Times.atLeastOnce());
        }

        yield chai_1.expect(service.shouldAutoSetInterpreter()).to.eventually.equal(true, 'not true');
        helper.verifyAll();
        workspace.verifyAll();
        config.verifyAll();
        pythonPathConfigValue.verifyAll();
      }));
      test(`Should auto set interpreter if there is no value in workspace settings and value is \'python\' ${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        workspacePythonPath.setup(w => w.configTarget).returns(() => vscode_1.ConfigurationTarget.Workspace).verifiable(TypeMoq.Times.once());
        helper.setup(h => h.getActiveWorkspaceUri()).returns(() => workspacePythonPath.object).verifiable(TypeMoq.Times.once());
        const pythonPathConfigValue = TypeMoq.Mock.ofType();
        config.setup(w => w.inspect(TypeMoq.It.isValue('pythonPath'))).returns(() => pythonPathConfigValue.object).verifiable(TypeMoq.Times.once());
        pythonPathConfigValue.setup(p => p.globalValue).returns(() => undefined).verifiable(TypeMoq.Times.atLeastOnce());
        pythonPathConfigValue.setup(p => p.workspaceValue).returns(() => 'python').verifiable(TypeMoq.Times.atLeastOnce());
        yield chai_1.expect(service.shouldAutoSetInterpreter()).to.eventually.equal(true, 'not true');
        helper.verifyAll();
        workspace.verifyAll();
        config.verifyAll();
        pythonPathConfigValue.verifyAll();
      }));
    });
  });
  suite('Auto Set Interpreter', () => {
    setup(setupSuite);
    test('autoset interpreter - no workspace', () => __awaiter(void 0, void 0, void 0, function* () {
      yield verifyUpdateCalled(TypeMoq.Times.never());
    }));
    test('autoset interpreter - global pythonPath in config', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('folder');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python',
          globalValue: 'global'
        };
      });
      yield verifyUpdateCalled(TypeMoq.Times.never());
    }));
    test('autoset interpreter - workspace has no pythonPath in config', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('folder');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python'
        };
      });
      const interpreter = Object.assign({}, info, {
        path: path.join('folder', 'py1', 'bin', 'python.exe'),
        type: contracts_1.InterpreterType.Unknown
      });
      setupLocators([interpreter], []);
      yield verifyUpdateCalled(TypeMoq.Times.once());
    }));
    test('autoset interpreter - workspace has default pythonPath in config', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('folder');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python',
          workspaceValue: 'python'
        };
      });
      setupLocators([], []);
      yield verifyUpdateCalled(TypeMoq.Times.never());
    }));
    test('autoset interpreter - pipenv workspace', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('folder');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python',
          workspaceValue: 'python'
        };
      });
      const interpreter = Object.assign({}, info, {
        path: 'python',
        type: contracts_1.InterpreterType.VirtualEnv
      });
      setupLocators([], [interpreter]);
      yield verifyUpdateCallData('python', vscode_1.ConfigurationTarget.Workspace, 'folder');
    }));
    test('autoset interpreter - workspace without interpreter', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('root');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python',
          workspaceValue: 'elsewhere'
        };
      });
      const interpreter = Object.assign({}, info, {
        path: 'elsewhere',
        type: contracts_1.InterpreterType.Unknown
      });
      setupLocators([interpreter], []);
      yield verifyUpdateCalled(TypeMoq.Times.never());
    }));
    test('autoset interpreter - workspace with interpreter', () => __awaiter(void 0, void 0, void 0, function* () {
      setupWorkspace('root');
      config.setup(x => x.inspect('pythonPath')).returns(() => {
        return {
          key: 'python'
        };
      });
      const intPath = path.join('root', 'under', 'bin', 'python.exe');
      const interpreter = Object.assign({}, info, {
        path: intPath,
        type: contracts_1.InterpreterType.Unknown
      });
      setupLocators([interpreter], []);
      yield verifyUpdateCallData(intPath, vscode_1.ConfigurationTarget.Workspace, 'root');
    }));

    function verifyUpdateCalled(times) {
      return __awaiter(this, void 0, void 0, function* () {
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        yield service.autoSetInterpreter();
        updater.verify(x => x.updatePythonPath(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny()), times);
      });
    }

    function verifyUpdateCallData(pythonPath, target, wksFolder) {
      return __awaiter(this, void 0, void 0, function* () {
        let pp;
        let confTarget;
        let trigger;
        let wks;
        updater.setup(x => x.updatePythonPath(TypeMoq.It.isAnyString(), TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())) // tslint:disable-next-line:no-any
        .callback((p, c, t, w) => {
          pp = p;
          confTarget = c;
          trigger = t;
          wks = w;
        }).returns(() => Promise.resolve());
        const service = new interpreterService_1.InterpreterService(serviceContainer);
        yield service.autoSetInterpreter();
        chai_1.expect(pp).not.to.be.equal(undefined, 'updatePythonPath not called');
        chai_1.expect(pp).to.be.equal(pythonPath, 'invalid Python path');
        chai_1.expect(confTarget).to.be.equal(target, 'invalid configuration target');
        chai_1.expect(trigger).to.be.equal('load', 'invalid trigger');
        chai_1.expect(wks.fsPath).to.be.equal(vscode_1.Uri.file(wksFolder).fsPath, 'invalid workspace Uri');
      });
    }

    function setupWorkspace(folder) {
      const wsPath = {
        folderUri: vscode_1.Uri.file(folder),
        configTarget: vscode_1.ConfigurationTarget.Workspace
      };
      helper.setup(x => x.getActiveWorkspaceUri()).returns(() => wsPath);
    }

    function setupLocators(wks, pipenv) {
      pipenvLocator.setup(x => x.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve(pipenv));
      serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, pipenvLocator.object, contracts_1.PIPENV_SERVICE);
      wksLocator.setup(x => x.getInterpreters(TypeMoq.It.isAny())).returns(() => Promise.resolve(wks));
      serviceManager.addSingletonInstance(contracts_1.IInterpreterLocatorService, wksLocator.object, contracts_1.WORKSPACE_VIRTUAL_ENV_SERVICE);
    }
  }); // This is kind of a verbose test, but we need to ensure we have covered all permutations.
  // Also we have special handling for certain types of interpreters.

  suite('Display Format (with all permutations)', () => {
    setup(setupSuite);
    [undefined, vscode_1.Uri.file('xyz')].forEach(resource => {
      [undefined, [1, 2, 3, 'alpha']].forEach(versionInfo => {
        // Forced cast to ignore TS warnings.
        EnumEx.getNamesAndValues(platform_1.Architecture).concat(undefined).forEach(arch => {
          [undefined, path.join('a', 'b', 'c', 'd', 'bin', 'python')].forEach(pythonPath => {
            // Forced cast to ignore TS warnings.
            EnumEx.getNamesAndValues(contracts_1.InterpreterType).concat(undefined).forEach(interpreterType => {
              [undefined, 'my env name'].forEach(envName => {
                ['', 'my pipenv name'].forEach(pipEnvName => {
                  const testName = [`${resource ? 'With' : 'Without'} a workspace`, `${versionInfo ? 'with' : 'without'} version information`, `${arch ? arch.name : 'without'} architecture`, `${pythonPath ? 'with' : 'without'} python Path`, `${interpreterType ? `${interpreterType.name} interpreter type` : 'without interpreter type'}`, `${envName ? 'with' : 'without'} environment name`, `${pipEnvName ? 'with' : 'without'} pip environment`].join(', ');
                  test(testName, () => __awaiter(void 0, void 0, void 0, function* () {
                    const interpreterInfo = {
                      version_info: versionInfo,
                      architecture: arch ? arch.value : undefined,
                      envName,
                      type: interpreterType ? interpreterType.value : undefined,
                      path: pythonPath
                    };

                    if (interpreterInfo.path && interpreterType && interpreterType.value === contracts_1.InterpreterType.PipEnv) {
                      virtualEnvMgr.setup(v => v.getEnvironmentName(TypeMoq.It.isValue(interpreterInfo.path), TypeMoq.It.isAny())).returns(() => Promise.resolve(pipEnvName));
                    }

                    if (interpreterType) {
                      helper.setup(h => h.getInterpreterTypeDisplayName(TypeMoq.It.isValue(interpreterType.value))).returns(() => `${interpreterType.name}_display`);
                    }

                    const service = new interpreterService_1.InterpreterService(serviceContainer);
                    const expectedDisplayName = buildDisplayName(interpreterInfo);
                    const displayName = yield service.getDisplayName(interpreterInfo, resource);
                    chai_1.expect(displayName).to.equal(expectedDisplayName);
                  }));

                  function buildDisplayName(interpreterInfo) {
                    const displayNameParts = ['Python'];
                    const envSuffixParts = [];

                    if (interpreterInfo.version_info && interpreterInfo.version_info.length > 0) {
                      displayNameParts.push(interpreterInfo.version_info.slice(0, 3).join('.'));
                    }

                    if (interpreterInfo.architecture) {
                      displayNameParts.push(registry_1.getArchitectureDisplayName(interpreterInfo.architecture));
                    }

                    if (!interpreterInfo.envName && interpreterInfo.path && interpreterInfo.type && interpreterInfo.type === contracts_1.InterpreterType.PipEnv && pipEnvName) {
                      // If we do not have the name of the environment, then try to get it again.
                      // This can happen based on the context (i.e. resource).
                      // I.e. we can determine if an environment is PipEnv only when giving it the right workspacec path (i.e. resource).
                      interpreterInfo.envName = pipEnvName;
                    }

                    if (interpreterInfo.envName && interpreterInfo.envName.length > 0) {
                      envSuffixParts.push(`'${interpreterInfo.envName}'`);
                    }

                    if (interpreterInfo.type) {
                      envSuffixParts.push(`${interpreterType.name}_display`);
                    }

                    const envSuffix = envSuffixParts.length === 0 ? '' : `(${envSuffixParts.join(': ')})`;
                    return `${displayNameParts.join(' ')} ${envSuffix}`.trim();
                  }
                });
              });
            });
          });
        });
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVycHJldGVyU2VydmljZS51bml0LnRlc3QuanMiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsImNoYWlfMSIsInJlcXVpcmUiLCJjaGFpQXNQcm9taXNlZCIsImV2ZW50c18xIiwiaW52ZXJzaWZ5XzEiLCJwYXRoIiwiVHlwZU1vcSIsInZzY29kZV8xIiwidHlwZXNfMSIsInJlZ2lzdHJ5XzEiLCJ0eXBlc18yIiwidHlwZXNfMyIsInR5cGVzXzQiLCJFbnVtRXgiLCJtaXNjXzEiLCJwbGF0Zm9ybV8xIiwidHlwZXNfNSIsImNvbnRyYWN0c18xIiwiaW50ZXJwcmV0ZXJTZXJ2aWNlXzEiLCJ0eXBlc182IiwiY29udGFpbmVyXzEiLCJzZXJ2aWNlTWFuYWdlcl8xIiwidXNlIiwiaW5mbyIsImFyY2hpdGVjdHVyZSIsIkFyY2hpdGVjdHVyZSIsIlVua25vd24iLCJjb21wYW55RGlzcGxheU5hbWUiLCJkaXNwbGF5TmFtZSIsImVudk5hbWUiLCJ0eXBlIiwiSW50ZXJwcmV0ZXJUeXBlIiwidmVyc2lvbiIsInZlcnNpb25faW5mbyIsInN5c1ByZWZpeCIsInN5c1ZlcnNpb24iLCJzdWl0ZSIsInNlcnZpY2VNYW5hZ2VyIiwic2VydmljZUNvbnRhaW5lciIsInVwZGF0ZXIiLCJoZWxwZXIiLCJsb2NhdG9yIiwid29ya3NwYWNlIiwiY29uZmlnIiwicGlwZW52TG9jYXRvciIsIndrc0xvY2F0b3IiLCJmaWxlU3lzdGVtIiwiaW50ZXJwcmV0ZXJEaXNwbGF5Iiwid29ya3NwYWNlUHl0aG9uUGF0aCIsInZpcnR1YWxFbnZNZ3IiLCJwZXJzaXN0ZW50U3RhdGVGYWN0b3J5IiwicHl0aG9uRXhlY3V0aW9uRmFjdG9yeSIsInB5dGhvbkV4ZWN1dGlvblNlcnZpY2UiLCJzZXR1cFN1aXRlIiwiY29udCIsIkNvbnRhaW5lciIsIlNlcnZpY2VNYW5hZ2VyIiwiU2VydmljZUNvbnRhaW5lciIsIk1vY2siLCJvZlR5cGUiLCJzZXR1cCIsInAiLCJyZXR1cm5zIiwidW5kZWZpbmVkIiwieCIsImdldENvbmZpZ3VyYXRpb24iLCJJdCIsImlzQW55Iiwib2JqZWN0IiwiZiIsImNyZWF0ZSIsImZzIiwiZ2V0RmlsZUhhc2giLCJjcmVhdGVHbG9iYWxQZXJzaXN0ZW50U3RhdGUiLCJzdGF0ZSIsInVwZGF0ZVZhbHVlIiwiYWRkU2luZ2xldG9uSW5zdGFuY2UiLCJJRGlzcG9zYWJsZVJlZ2lzdHJ5IiwiSUludGVycHJldGVySGVscGVyIiwiSVB5dGhvblBhdGhVcGRhdGVyU2VydmljZU1hbmFnZXIiLCJJV29ya3NwYWNlU2VydmljZSIsIklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlIiwiSU5URVJQUkVURVJfTE9DQVRPUl9TRVJWSUNFIiwiSUZpbGVTeXN0ZW0iLCJJSW50ZXJwcmV0ZXJEaXNwbGF5IiwiSVZpcnR1YWxFbnZpcm9ubWVudE1hbmFnZXIiLCJJUGVyc2lzdGVudFN0YXRlRmFjdG9yeSIsIklQeXRob25FeGVjdXRpb25GYWN0b3J5IiwiSVB5dGhvbkV4ZWN1dGlvblNlcnZpY2UiLCJVcmkiLCJmaWxlIiwiZm9yRWFjaCIsInJlc291cmNlIiwicmVzb3VyY2VUZXN0U3VmZml4IiwidGVzdCIsImkiLCJyZWZyZXNoIiwiaXNWYWx1ZSIsInZlcmlmaWFibGUiLCJUaW1lcyIsIm9uY2UiLCJzZXJ2aWNlIiwiSW50ZXJwcmV0ZXJTZXJ2aWNlIiwidmVyaWZ5QWxsIiwibCIsImdldEludGVycHJldGVycyIsImNvbmZpZ1NlcnZpY2UiLCJkb2N1bWVudE1hbmFnZXIiLCJhY3RpdmVUZXh0RWRpdG9yQ2hhbmdlSGFuZGxlciIsImQiLCJvbkRpZENoYW5nZUFjdGl2ZVRleHRFZGl0b3IiLCJoYW5kbGVyIiwiZGlzcG9zZSIsIm5vb3AiLCJJQ29uZmlndXJhdGlvblNlcnZpY2UiLCJJRG9jdW1lbnRNYW5hZ2VyIiwiYyIsImdldFNldHRpbmdzIiwiRXZlbnRFbWl0dGVyIiwiaW5pdGlhbGl6ZSIsInRleHRFZGl0b3IiLCJ1cmkiLCJqb2luIiwiZG9jdW1lbnQiLCJ0IiwidmVyaWZ5IiwibmV2ZXIiLCJweXRob25QYXRoIiwiaCIsImdldEludGVycHJldGVySW5mb3JtYXRpb24iLCJ2IiwiZ2V0RW52aXJvbm1lbnROYW1lIiwiZ2V0RW52aXJvbm1lbnRUeXBlIiwiZ2V0RXhlY3V0YWJsZVBhdGgiLCJkZXRhaWxzIiwiZ2V0SW50ZXJwcmV0ZXJEZXRhaWxzIiwiZXhwZWN0IiwidG8iLCJiZSIsImVxdWFsIiwiZ2V0QWN0aXZlV29ya3NwYWNlVXJpIiwic2hvdWxkQXV0b1NldEludGVycHJldGVyIiwiZXZlbnR1YWxseSIsInciLCJmb2xkZXJVcmkiLCJweXRob25QYXRoQ29uZmlnVmFsdWUiLCJpbnNwZWN0IiwiZ2xvYmFsVmFsdWUiLCJhdExlYXN0T25jZSIsImNvbmZpZ1RhcmdldCIsIkNvbmZpZ3VyYXRpb25UYXJnZXQiLCJXb3Jrc3BhY2UiLCJ3b3Jrc3BhY2VWYWx1ZSIsImxhYmVsIiwiV29ya3NwYWNlRm9sZGVyIiwiaXRlbSIsInRlc3RTdWZmaXgiLCJjZmdUYXJnZXQiLCJ3b3Jrc3BhY2VGb2xkZXJWYWx1ZSIsInZlcmlmeVVwZGF0ZUNhbGxlZCIsInNldHVwV29ya3NwYWNlIiwia2V5IiwiaW50ZXJwcmV0ZXIiLCJhc3NpZ24iLCJzZXR1cExvY2F0b3JzIiwiVmlydHVhbEVudiIsInZlcmlmeVVwZGF0ZUNhbGxEYXRhIiwiaW50UGF0aCIsInRpbWVzIiwiYXV0b1NldEludGVycHJldGVyIiwidXBkYXRlUHl0aG9uUGF0aCIsInRhcmdldCIsIndrc0ZvbGRlciIsInBwIiwiY29uZlRhcmdldCIsInRyaWdnZXIiLCJ3a3MiLCJpc0FueVN0cmluZyIsImNhbGxiYWNrIiwibm90IiwiZnNQYXRoIiwiZm9sZGVyIiwid3NQYXRoIiwicGlwZW52IiwiUElQRU5WX1NFUlZJQ0UiLCJXT1JLU1BBQ0VfVklSVFVBTF9FTlZfU0VSVklDRSIsInZlcnNpb25JbmZvIiwiZ2V0TmFtZXNBbmRWYWx1ZXMiLCJjb25jYXQiLCJhcmNoIiwiaW50ZXJwcmV0ZXJUeXBlIiwicGlwRW52TmFtZSIsInRlc3ROYW1lIiwibmFtZSIsImludGVycHJldGVySW5mbyIsIlBpcEVudiIsImdldEludGVycHJldGVyVHlwZURpc3BsYXlOYW1lIiwiZXhwZWN0ZWREaXNwbGF5TmFtZSIsImJ1aWxkRGlzcGxheU5hbWUiLCJnZXREaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lUGFydHMiLCJlbnZTdWZmaXhQYXJ0cyIsImxlbmd0aCIsInB1c2giLCJzbGljZSIsImdldEFyY2hpdGVjdHVyZURpc3BsYXlOYW1lIiwiZW52U3VmZml4IiwidHJpbSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUNBLElBQUlBLFNBQVMsR0FBSSxVQUFRLFNBQUtBLFNBQWQsSUFBNEIsVUFBVUMsT0FBVixFQUFtQkMsVUFBbkIsRUFBK0JDLENBQS9CLEVBQWtDQyxTQUFsQyxFQUE2QztBQUNyRixTQUFPLEtBQUtELENBQUMsS0FBS0EsQ0FBQyxHQUFHRSxPQUFULENBQU4sRUFBeUIsVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDdkQsYUFBU0MsU0FBVCxDQUFtQkMsS0FBbkIsRUFBMEI7QUFBRSxVQUFJO0FBQUVDLFFBQUFBLElBQUksQ0FBQ04sU0FBUyxDQUFDTyxJQUFWLENBQWVGLEtBQWYsQ0FBRCxDQUFKO0FBQThCLE9BQXBDLENBQXFDLE9BQU9HLENBQVAsRUFBVTtBQUFFTCxRQUFBQSxNQUFNLENBQUNLLENBQUQsQ0FBTjtBQUFZO0FBQUU7O0FBQzNGLGFBQVNDLFFBQVQsQ0FBa0JKLEtBQWxCLEVBQXlCO0FBQUUsVUFBSTtBQUFFQyxRQUFBQSxJQUFJLENBQUNOLFNBQVMsQ0FB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REQ7QUEwREgsZUEzREQ7QUE0REgsYUE3REQ7QUE4REgsV0FoRUQ7QUFpRUgsU0FsRUQ7QUFtRUgsT0FyRUQ7QUFzRUgsS0F2RUQ7QUF3RUgsR0ExRUksQ0FBTDtBQTJFSCxDQTlkSSxDQUFMIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlOm1heC1mdW5jLWJvZHktbGVuZ3RoIG5vLWFueVxyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgY2hhaUFzUHJvbWlzZWQgPSByZXF1aXJlKFwiY2hhaS1hcy1wcm9taXNlZFwiKTtcclxuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xyXG5jb25zdCBpbnZlcnNpZnlfMSA9IHJlcXVpcmUoXCJpbnZlcnNpZnlcIik7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuY29uc3QgVHlwZU1vcSA9IHJlcXVpcmUoXCJ0eXBlbW9xXCIpO1xyXG5jb25zdCB2c2NvZGVfMSA9IHJlcXVpcmUoXCJ2c2NvZGVcIik7XHJcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9hcHBsaWNhdGlvbi90eXBlc1wiKTtcclxuY29uc3QgcmVnaXN0cnlfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3BsYXRmb3JtL3JlZ2lzdHJ5XCIpO1xyXG5jb25zdCB0eXBlc18yID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vcGxhdGZvcm0vdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzMgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wcm9jZXNzL3R5cGVzXCIpO1xyXG5jb25zdCB0eXBlc180ID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vdHlwZXNcIik7XHJcbmNvbnN0IEVudW1FeCA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3V0aWxzL2VudW1cIik7XHJcbmNvbnN0IG1pc2NfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3V0aWxzL21pc2NcIik7XHJcbmNvbnN0IHBsYXRmb3JtXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi91dGlscy9wbGF0Zm9ybVwiKTtcclxuY29uc3QgdHlwZXNfNSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvaW50ZXJwcmV0ZXIvY29uZmlndXJhdGlvbi90eXBlc1wiKTtcclxuY29uc3QgY29udHJhY3RzXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2ludGVycHJldGVyL2NvbnRyYWN0c1wiKTtcclxuY29uc3QgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2ludGVycHJldGVyL2ludGVycHJldGVyU2VydmljZVwiKTtcclxuY29uc3QgdHlwZXNfNiA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvaW50ZXJwcmV0ZXIvdmlydHVhbEVudnMvdHlwZXNcIik7XHJcbmNvbnN0IGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9pb2MvY29udGFpbmVyXCIpO1xyXG5jb25zdCBzZXJ2aWNlTWFuYWdlcl8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9pb2Mvc2VydmljZU1hbmFnZXJcIik7XHJcbmNoYWlfMS51c2UoY2hhaUFzUHJvbWlzZWQpO1xyXG5jb25zdCBpbmZvID0ge1xyXG4gICAgYXJjaGl0ZWN0dXJlOiBwbGF0Zm9ybV8xLkFyY2hpdGVjdHVyZS5Vbmtub3duLFxyXG4gICAgY29tcGFueURpc3BsYXlOYW1lOiAnJyxcclxuICAgIGRpc3BsYXlOYW1lOiAnJyxcclxuICAgIGVudk5hbWU6ICcnLFxyXG4gICAgcGF0aDogJycsXHJcbiAgICB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93bixcclxuICAgIHZlcnNpb246ICcnLFxyXG4gICAgdmVyc2lvbl9pbmZvOiBbMCwgMCwgMCwgJ2FscGhhJ10sXHJcbiAgICBzeXNQcmVmaXg6ICcnLFxyXG4gICAgc3lzVmVyc2lvbjogJydcclxufTtcclxuc3VpdGUoJ0ludGVycHJldGVycyBzZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgbGV0IHNlcnZpY2VNYW5hZ2VyO1xyXG4gICAgbGV0IHNlcnZpY2VDb250YWluZXI7XHJcbiAgICBsZXQgdXBkYXRlcjtcclxuICAgIGxldCBoZWxwZXI7XHJcbiAgICBsZXQgbG9jYXRvcjtcclxuICAgIGxldCB3b3Jrc3BhY2U7XHJcbiAgICBsZXQgY29uZmlnO1xyXG4gICAgbGV0IHBpcGVudkxvY2F0b3I7XHJcbiAgICBsZXQgd2tzTG9jYXRvcjtcclxuICAgIGxldCBmaWxlU3lzdGVtO1xyXG4gICAgbGV0IGludGVycHJldGVyRGlzcGxheTtcclxuICAgIGxldCB3b3Jrc3BhY2VQeXRob25QYXRoO1xyXG4gICAgbGV0IHZpcnR1YWxFbnZNZ3I7XHJcbiAgICBsZXQgcGVyc2lzdGVudFN0YXRlRmFjdG9yeTtcclxuICAgIGxldCBweXRob25FeGVjdXRpb25GYWN0b3J5O1xyXG4gICAgbGV0IHB5dGhvbkV4ZWN1dGlvblNlcnZpY2U7XHJcbiAgICBmdW5jdGlvbiBzZXR1cFN1aXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnQgPSBuZXcgaW52ZXJzaWZ5XzEuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIgPSBuZXcgc2VydmljZU1hbmFnZXJfMS5TZXJ2aWNlTWFuYWdlcihjb250KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyID0gbmV3IGNvbnRhaW5lcl8xLlNlcnZpY2VDb250YWluZXIoY29udCk7XHJcbiAgICAgICAgdXBkYXRlciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBoZWxwZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgbG9jYXRvciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICB3b3Jrc3BhY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgY29uZmlnID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGZpbGVTeXN0ZW0gPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgaW50ZXJwcmV0ZXJEaXNwbGF5ID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHdvcmtzcGFjZVB5dGhvblBhdGggPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgdmlydHVhbEVudk1nciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBwZXJzaXN0ZW50U3RhdGVGYWN0b3J5ID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHB5dGhvbkV4ZWN1dGlvbkZhY3RvcnkgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgcHl0aG9uRXhlY3V0aW9uU2VydmljZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBweXRob25FeGVjdXRpb25TZXJ2aWNlLnNldHVwKChwKSA9PiBwLnRoZW4pLnJldHVybnMoKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICB3b3Jrc3BhY2Uuc2V0dXAoeCA9PiB4LmdldENvbmZpZ3VyYXRpb24oJ3B5dGhvbicsIFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gY29uZmlnLm9iamVjdCk7XHJcbiAgICAgICAgcHl0aG9uRXhlY3V0aW9uRmFjdG9yeS5zZXR1cChmID0+IGYuY3JlYXRlKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHB5dGhvbkV4ZWN1dGlvblNlcnZpY2Uub2JqZWN0KSk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cChmcyA9PiBmcy5nZXRGaWxlSGFzaChUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgnJykpO1xyXG4gICAgICAgIHBlcnNpc3RlbnRTdGF0ZUZhY3RvcnlcclxuICAgICAgICAgICAgLnNldHVwKHAgPT4gcC5jcmVhdGVHbG9iYWxQZXJzaXN0ZW50U3RhdGUoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzQuSURpc3Bvc2FibGVSZWdpc3RyeSwgW10pO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckhlbHBlciwgaGVscGVyLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfNS5JUHl0aG9uUGF0aFVwZGF0ZXJTZXJ2aWNlTWFuYWdlciwgdXBkYXRlci5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzEuSVdvcmtzcGFjZVNlcnZpY2UsIHdvcmtzcGFjZS5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckxvY2F0b3JTZXJ2aWNlLCBsb2NhdG9yLm9iamVjdCwgY29udHJhY3RzXzEuSU5URVJQUkVURVJfTE9DQVRPUl9TRVJWSUNFKTtcclxuICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc18yLklGaWxlU3lzdGVtLCBmaWxlU3lzdGVtLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UoY29udHJhY3RzXzEuSUludGVycHJldGVyRGlzcGxheSwgaW50ZXJwcmV0ZXJEaXNwbGF5Lm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfNi5JVmlydHVhbEVudmlyb25tZW50TWFuYWdlciwgdmlydHVhbEVudk1nci5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzQuSVBlcnNpc3RlbnRTdGF0ZUZhY3RvcnksIHBlcnNpc3RlbnRTdGF0ZUZhY3Rvcnkub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc18zLklQeXRob25FeGVjdXRpb25GYWN0b3J5LCBweXRob25FeGVjdXRpb25GYWN0b3J5Lm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMy5JUHl0aG9uRXhlY3V0aW9uU2VydmljZSwgcHl0aG9uRXhlY3V0aW9uU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIHBpcGVudkxvY2F0b3IgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgd2tzTG9jYXRvciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgIH1cclxuICAgIHN1aXRlKCdNaXNjJywgKCkgPT4ge1xyXG4gICAgICAgIHNldHVwKHNldHVwU3VpdGUpO1xyXG4gICAgICAgIFt1bmRlZmluZWQsIHZzY29kZV8xLlVyaS5maWxlKCd4eXonKV1cclxuICAgICAgICAgICAgLmZvckVhY2gocmVzb3VyY2UgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZVRlc3RTdWZmaXggPSBgKCR7cmVzb3VyY2UgPyAnd2l0aCcgOiAnd2l0aG91dCd9IGEgcmVzb3VyY2UpYDtcclxuICAgICAgICAgICAgdGVzdChgUmVmcmVzaCBpbnZva2VzIHJlZnJlc2ggb2YgZGlzcGxheSAke3Jlc291cmNlVGVzdFN1ZmZpeH1gLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnByZXRlckRpc3BsYXlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0dXAoaSA9PiBpLnJlZnJlc2goVHlwZU1vcS5JdC5pc1ZhbHVlKHJlc291cmNlKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBpbnRlcnByZXRlclNlcnZpY2VfMS5JbnRlcnByZXRlclNlcnZpY2Uoc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBzZXJ2aWNlLnJlZnJlc2gocmVzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJwcmV0ZXJEaXNwbGF5LnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHRlc3QoYGdldCBJbnRlcnByZXRlcnMgdXNlcyBpbnRlcnByZXRlciBsb2NhY3RvcnMgdG8gZ2V0IGludGVycHJldGVycyAke3Jlc291cmNlVGVzdFN1ZmZpeH1gLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKGwgPT4gbC5nZXRJbnRlcnByZXRlcnMoVHlwZU1vcS5JdC5pc1ZhbHVlKHJlc291cmNlKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IGludGVycHJldGVyU2VydmljZV8xLkludGVycHJldGVyU2VydmljZShzZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHNlcnZpY2UuZ2V0SW50ZXJwcmV0ZXJzKHJlc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGxvY2F0b3IudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXN0KCdDaGFuZ2VzIHRvIGFjdGl2ZSBkb2N1bWVudCBzaG91bGQgaW52b2tlIGludHJlcHJldGVyLnJlZnJlc2ggbWV0aG9kJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IGludGVycHJldGVyU2VydmljZV8xLkludGVycHJldGVyU2VydmljZShzZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnU2VydmljZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRNYW5hZ2VyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlVGV4dEVkaXRvckNoYW5nZUhhbmRsZXI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50TWFuYWdlci5zZXR1cChkID0+IGQub25EaWRDaGFuZ2VBY3RpdmVUZXh0RWRpdG9yKFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucyhoYW5kbGVyID0+IHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRleHRFZGl0b3JDaGFuZ2VIYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRpc3Bvc2U6IG1pc2NfMS5ub29wIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc180LklDb25maWd1cmF0aW9uU2VydmljZSwgY29uZmlnU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc18xLklEb2N1bWVudE1hbmFnZXIsIGRvY3VtZW50TWFuYWdlci5vYmplY3QpO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbiAgICAgICAgICAgIGNvbmZpZ1NlcnZpY2Uuc2V0dXAoYyA9PiBjLmdldFNldHRpbmdzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpKTtcclxuICAgICAgICAgICAgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRFZGl0b3IgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVyaSA9IHZzY29kZV8xLlVyaS5maWxlKHBhdGguam9pbigndXNyJywgJ2ZpbGUucHknKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICB0ZXh0RWRpdG9yLnNldHVwKHQgPT4gdC5kb2N1bWVudCkucmV0dXJucygoKSA9PiBkb2N1bWVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5zZXR1cChkID0+IGQudXJpKS5yZXR1cm5zKCgpID0+IHVyaSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRleHRFZGl0b3JDaGFuZ2VIYW5kbGVyKHRleHRFZGl0b3Iub2JqZWN0KTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJEaXNwbGF5LnZlcmlmeShpID0+IGkucmVmcmVzaChUeXBlTW9xLkl0LmlzVmFsdWUodXJpKSksIFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnSWYgdGhlcmUgaXMgbm8gYWN0aXZlIGRvY3VtZW50IHRoZW4gaW50cmVwcmV0ZXIucmVmcmVzaCBzaG91bGQgbm90IGJlIGludm9rZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWdTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudE1hbmFnZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGxldCBhY3RpdmVUZXh0RWRpdG9yQ2hhbmdlSGFuZGxlcjtcclxuICAgICAgICAgICAgZG9jdW1lbnRNYW5hZ2VyLnNldHVwKGQgPT4gZC5vbkRpZENoYW5nZUFjdGl2ZVRleHRFZGl0b3IoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKGhhbmRsZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlVGV4dEVkaXRvckNoYW5nZUhhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGlzcG9zZTogbWlzY18xLm5vb3AgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzQuSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBjb25maWdTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzEuSURvY3VtZW50TWFuYWdlciwgZG9jdW1lbnRNYW5hZ2VyLm9iamVjdCk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcclxuICAgICAgICAgICAgY29uZmlnU2VydmljZS5zZXR1cChjID0+IGMuZ2V0U2V0dGluZ3MoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCkpO1xyXG4gICAgICAgICAgICBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgYWN0aXZlVGV4dEVkaXRvckNoYW5nZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJEaXNwbGF5LnZlcmlmeShpID0+IGkucmVmcmVzaChUeXBlTW9xLkl0LmlzVmFsdWUodW5kZWZpbmVkKSksIFR5cGVNb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfSk7XHJcbiAgICBzdWl0ZSgnR2V0IEludGVycHJldGVyIERldGFpbHMnLCAoKSA9PiB7XHJcbiAgICAgICAgc2V0dXAoc2V0dXBTdWl0ZSk7XHJcbiAgICAgICAgW3VuZGVmaW5lZCwgdnNjb2RlXzEuVXJpLmZpbGUoJ3NvbWUgd29ya3NwYWNlJyldXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKHJlc291cmNlID0+IHtcclxuICAgICAgICAgICAgdGVzdChgRW5zdXJlIHVuZGVmaW5lZCBpcyByZXR1cm5lZCBpZiB3ZSdyZSB1bmFibGUgdG8gcmV0cmlldmUgaW50ZXJwcmV0ZXIgaW5mbyAoUmVzb3VyY2UgaXMgJHtyZXNvdXJjZX0pYCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHl0aG9uUGF0aCA9ICdTT01FIFZBTFVFJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRvclxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXR1cChsID0+IGwuZ2V0SW50ZXJwcmV0ZXJzKFR5cGVNb3EuSXQuaXNWYWx1ZShyZXNvdXJjZSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShbXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKGggPT4gaC5nZXRJbnRlcnByZXRlckluZm9ybWF0aW9uKFR5cGVNb3EuSXQuaXNWYWx1ZShweXRob25QYXRoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgdmlydHVhbEVudk1nclxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXR1cCh2ID0+IHYuZ2V0RW52aXJvbm1lbnROYW1lKFR5cGVNb3EuSXQuaXNWYWx1ZShweXRob25QYXRoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCcnKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB2aXJ0dWFsRW52TWdyXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKHYgPT4gdi5nZXRFbnZpcm9ubWVudFR5cGUoVHlwZU1vcS5JdC5pc1ZhbHVlKHB5dGhvblBhdGgpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoY29udHJhY3RzXzEuSW50ZXJwcmV0ZXJUeXBlLlVua25vd24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIHB5dGhvbkV4ZWN1dGlvblNlcnZpY2VcclxuICAgICAgICAgICAgICAgICAgICAuc2V0dXAocCA9PiBwLmdldEV4ZWN1dGFibGVQYXRoKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHB5dGhvblBhdGgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSB5aWVsZCBzZXJ2aWNlLmdldEludGVycHJldGVyRGV0YWlscyhweXRob25QYXRoLCByZXNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhdG9yLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgcHl0aG9uRXhlY3V0aW9uU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIGhlbHBlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZGV0YWlscykudG8uYmUuZXF1YWwodW5kZWZpbmVkLCAnTm90IHVuZGVmaW5lZCcpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHN1aXRlKCdTaG91bGQgQXV0byBTZXQgSW50ZXJwcmV0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgc2V0dXAoc2V0dXBTdWl0ZSk7XHJcbiAgICAgICAgdGVzdCgnU2hvdWxkIG5vdCBhdXRvIHNldCBpbnRlcnByZXRlciBpZiB0aGVyZSBpcyBubyB3b3Jrc3BhY2UnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICBoZWxwZXJcclxuICAgICAgICAgICAgICAgIC5zZXR1cChoID0+IGguZ2V0QWN0aXZlV29ya3NwYWNlVXJpKCkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGNoYWlfMS5leHBlY3Qoc2VydmljZS5zaG91bGRBdXRvU2V0SW50ZXJwcmV0ZXIoKSkudG8uZXZlbnR1YWxseS5lcXVhbChmYWxzZSwgJ25vdCBmYWxzZScpO1xyXG4gICAgICAgICAgICBoZWxwZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ1Nob3VsZCBub3QgYXV0byBzZXQgaW50ZXJwcmV0ZXIgaWYgdGhlcmUgaXMgYSB2YWx1ZSBpbiBnbG9iYWwgdXNlciBzZXR0aW5ncyAoZ2xvYmFsIHZhbHVlIGlzIG5vdCBcXCdweXRob25cXCcpJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IGludGVycHJldGVyU2VydmljZV8xLkludGVycHJldGVyU2VydmljZShzZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgd29ya3NwYWNlUHl0aG9uUGF0aFxyXG4gICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy5mb2xkZXJVcmkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB2c2NvZGVfMS5VcmkuZmlsZSgndycpKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBoZWxwZXJcclxuICAgICAgICAgICAgICAgIC5zZXR1cChoID0+IGguZ2V0QWN0aXZlV29ya3NwYWNlVXJpKCkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VQeXRob25QYXRoLm9iamVjdClcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25maWdcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh3ID0+IHcuaW5zcGVjdChUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gcHl0aG9uUGF0aENvbmZpZ1ZhbHVlLm9iamVjdClcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAocCA9PiBwLmdsb2JhbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gcGF0aC5qb2luKCdhJywgJ2JpbicsICdweXRob24nKSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGNoYWlfMS5leHBlY3Qoc2VydmljZS5zaG91bGRBdXRvU2V0SW50ZXJwcmV0ZXIoKSkudG8uZXZlbnR1YWxseS5lcXVhbChmYWxzZSwgJ25vdCBmYWxzZScpO1xyXG4gICAgICAgICAgICBoZWxwZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIHdvcmtzcGFjZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY29uZmlnLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBweXRob25QYXRoQ29uZmlnVmFsdWUudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ1Nob3VsZCBub3QgYXV0byBzZXQgaW50ZXJwcmV0ZXIgaWYgdGhlcmUgaXMgYSB2YWx1ZSBpbiB3b3Jrc3BhY2Ugc2V0dGluZ3MgKCYgdmFsdWUgaXMgbm90IFxcJ3B5dGhvblxcJyknLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICB3b3Jrc3BhY2VQeXRob25QYXRoXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAodyA9PiB3LmNvbmZpZ1RhcmdldClcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHZzY29kZV8xLkNvbmZpZ3VyYXRpb25UYXJnZXQuV29ya3NwYWNlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBoZWxwZXJcclxuICAgICAgICAgICAgICAgIC5zZXR1cChoID0+IGguZ2V0QWN0aXZlV29ya3NwYWNlVXJpKCkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VQeXRob25QYXRoLm9iamVjdClcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25maWdcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh3ID0+IHcuaW5zcGVjdChUeXBlTW9xLkl0LmlzVmFsdWUoJ3B5dGhvblBhdGgnKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBweXRob25QYXRoQ29uZmlnVmFsdWUub2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBweXRob25QYXRoQ29uZmlnVmFsdWVcclxuICAgICAgICAgICAgICAgIC5zZXR1cChwID0+IHAuZ2xvYmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgICAgICBweXRob25QYXRoQ29uZmlnVmFsdWVcclxuICAgICAgICAgICAgICAgIC5zZXR1cChwID0+IHAud29ya3NwYWNlVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBwYXRoLmpvaW4oJ2EnLCAnYmluJywgJ3B5dGhvbicpKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgeWllbGQgY2hhaV8xLmV4cGVjdChzZXJ2aWNlLnNob3VsZEF1dG9TZXRJbnRlcnByZXRlcigpKS50by5ldmVudHVhbGx5LmVxdWFsKGZhbHNlLCAnbm90IGZhbHNlJyk7XHJcbiAgICAgICAgICAgIGhlbHBlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgd29ya3NwYWNlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBjb25maWcudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIHB5dGhvblBhdGhDb25maWdWYWx1ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICB7IGNvbmZpZ1RhcmdldDogdnNjb2RlXzEuQ29uZmlndXJhdGlvblRhcmdldC5Xb3Jrc3BhY2UsIGxhYmVsOiAnV29ya3NwYWNlJyB9LFxyXG4gICAgICAgICAgICB7IGNvbmZpZ1RhcmdldDogdnNjb2RlXzEuQ29uZmlndXJhdGlvblRhcmdldC5Xb3Jrc3BhY2VGb2xkZXIsIGxhYmVsOiAnV29ya3NwYWNlIEZvbGRlcicgfVxyXG4gICAgICAgIF0uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFN1ZmZpeCA9IGAoJHtpdGVtLmxhYmVsfSlgO1xyXG4gICAgICAgICAgICBjb25zdCBjZmdUYXJnZXQgPSBpdGVtLmNvbmZpZ1RhcmdldDtcclxuICAgICAgICAgICAgdGVzdChgU2hvdWxkIGF1dG8gc2V0IGludGVycHJldGVyIGlmIHRoZXJlIGlzIG5vIHZhbHVlIGluIHdvcmtzcGFjZSBzZXR0aW5ncyAke3Rlc3RTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBpbnRlcnByZXRlclNlcnZpY2VfMS5JbnRlcnByZXRlclNlcnZpY2Uoc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VQeXRob25QYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy5jb25maWdUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gY2ZnVGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXR1cChoID0+IGguZ2V0QWN0aXZlV29ya3NwYWNlVXJpKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gd29ya3NwYWNlUHl0aG9uUGF0aC5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy5pbnNwZWN0KFR5cGVNb3EuSXQuaXNWYWx1ZSgncHl0aG9uUGF0aCcpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBweXRob25QYXRoQ29uZmlnVmFsdWUub2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIHB5dGhvblBhdGhDb25maWdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXR1cChwID0+IHAuZ2xvYmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2ZnVGFyZ2V0ID09PSB2c2NvZGVfMS5Db25maWd1cmF0aW9uVGFyZ2V0LldvcmtzcGFjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHB5dGhvblBhdGhDb25maWdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0dXAocCA9PiBwLndvcmtzcGFjZVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBweXRob25QYXRoQ29uZmlnVmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldHVwKHAgPT4gcC53b3Jrc3BhY2VGb2xkZXJWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgeWllbGQgY2hhaV8xLmV4cGVjdChzZXJ2aWNlLnNob3VsZEF1dG9TZXRJbnRlcnByZXRlcigpKS50by5ldmVudHVhbGx5LmVxdWFsKHRydWUsICdub3QgdHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgaGVscGVyLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHRlc3QoYFNob3VsZCBhdXRvIHNldCBpbnRlcnByZXRlciBpZiB0aGVyZSBpcyBubyB2YWx1ZSBpbiB3b3Jrc3BhY2Ugc2V0dGluZ3MgYW5kIHZhbHVlIGlzIFxcJ3B5dGhvblxcJyAke3Rlc3RTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBpbnRlcnByZXRlclNlcnZpY2VfMS5JbnRlcnByZXRlclNlcnZpY2Uoc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VQeXRob25QYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy5jb25maWdUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdnNjb2RlXzEuQ29uZmlndXJhdGlvblRhcmdldC5Xb3Jrc3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKGggPT4gaC5nZXRBY3RpdmVXb3Jrc3BhY2VVcmkoKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VQeXRob25QYXRoLm9iamVjdClcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweXRob25QYXRoQ29uZmlnVmFsdWUgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdcclxuICAgICAgICAgICAgICAgICAgICAuc2V0dXAodyA9PiB3Lmluc3BlY3QoVHlwZU1vcS5JdC5pc1ZhbHVlKCdweXRob25QYXRoJykpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHB5dGhvblBhdGhDb25maWdWYWx1ZS5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgcHl0aG9uUGF0aENvbmZpZ1ZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldHVwKHAgPT4gcC5nbG9iYWxWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgICAgIHB5dGhvblBhdGhDb25maWdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXR1cChwID0+IHAud29ya3NwYWNlVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gJ3B5dGhvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIGNoYWlfMS5leHBlY3Qoc2VydmljZS5zaG91bGRBdXRvU2V0SW50ZXJwcmV0ZXIoKSkudG8uZXZlbnR1YWxseS5lcXVhbCh0cnVlLCAnbm90IHRydWUnKTtcclxuICAgICAgICAgICAgICAgIGhlbHBlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIHB5dGhvblBhdGhDb25maWdWYWx1ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBzdWl0ZSgnQXV0byBTZXQgSW50ZXJwcmV0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgc2V0dXAoc2V0dXBTdWl0ZSk7XHJcbiAgICAgICAgdGVzdCgnYXV0b3NldCBpbnRlcnByZXRlciAtIG5vIHdvcmtzcGFjZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgdmVyaWZ5VXBkYXRlQ2FsbGVkKFR5cGVNb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ2F1dG9zZXQgaW50ZXJwcmV0ZXIgLSBnbG9iYWwgcHl0aG9uUGF0aCBpbiBjb25maWcnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHNldHVwV29ya3NwYWNlKCdmb2xkZXInKTtcclxuICAgICAgICAgICAgY29uZmlnLnNldHVwKHggPT4geC5pbnNwZWN0KCdweXRob25QYXRoJykpLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5OiAncHl0aG9uJywgZ2xvYmFsVmFsdWU6ICdnbG9iYWwnIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB5aWVsZCB2ZXJpZnlVcGRhdGVDYWxsZWQoVHlwZU1vcS5UaW1lcy5uZXZlcigpKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnYXV0b3NldCBpbnRlcnByZXRlciAtIHdvcmtzcGFjZSBoYXMgbm8gcHl0aG9uUGF0aCBpbiBjb25maWcnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHNldHVwV29ya3NwYWNlKCdmb2xkZXInKTtcclxuICAgICAgICAgICAgY29uZmlnLnNldHVwKHggPT4geC5pbnNwZWN0KCdweXRob25QYXRoJykpLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5OiAncHl0aG9uJyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJwcmV0ZXIgPSBPYmplY3QuYXNzaWduKHt9LCBpbmZvLCB7IHBhdGg6IHBhdGguam9pbignZm9sZGVyJywgJ3B5MScsICdiaW4nLCAncHl0aG9uLmV4ZScpLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9KTtcclxuICAgICAgICAgICAgc2V0dXBMb2NhdG9ycyhbaW50ZXJwcmV0ZXJdLCBbXSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHZlcmlmeVVwZGF0ZUNhbGxlZChUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ2F1dG9zZXQgaW50ZXJwcmV0ZXIgLSB3b3Jrc3BhY2UgaGFzIGRlZmF1bHQgcHl0aG9uUGF0aCBpbiBjb25maWcnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHNldHVwV29ya3NwYWNlKCdmb2xkZXInKTtcclxuICAgICAgICAgICAgY29uZmlnLnNldHVwKHggPT4geC5pbnNwZWN0KCdweXRob25QYXRoJykpLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5OiAncHl0aG9uJywgd29ya3NwYWNlVmFsdWU6ICdweXRob24nIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXR1cExvY2F0b3JzKFtdLCBbXSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHZlcmlmeVVwZGF0ZUNhbGxlZChUeXBlTW9xLlRpbWVzLm5ldmVyKCkpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0ZXN0KCdhdXRvc2V0IGludGVycHJldGVyIC0gcGlwZW52IHdvcmtzcGFjZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgc2V0dXBXb3Jrc3BhY2UoJ2ZvbGRlcicpO1xyXG4gICAgICAgICAgICBjb25maWcuc2V0dXAoeCA9PiB4Lmluc3BlY3QoJ3B5dGhvblBhdGgnKSkucmV0dXJucygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBrZXk6ICdweXRob24nLCB3b3Jrc3BhY2VWYWx1ZTogJ3B5dGhvbicgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVycHJldGVyID0gT2JqZWN0LmFzc2lnbih7fSwgaW5mbywgeyBwYXRoOiAncHl0aG9uJywgdHlwZTogY29udHJhY3RzXzEuSW50ZXJwcmV0ZXJUeXBlLlZpcnR1YWxFbnYgfSk7XHJcbiAgICAgICAgICAgIHNldHVwTG9jYXRvcnMoW10sIFtpbnRlcnByZXRlcl0pO1xyXG4gICAgICAgICAgICB5aWVsZCB2ZXJpZnlVcGRhdGVDYWxsRGF0YSgncHl0aG9uJywgdnNjb2RlXzEuQ29uZmlndXJhdGlvblRhcmdldC5Xb3Jrc3BhY2UsICdmb2xkZXInKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnYXV0b3NldCBpbnRlcnByZXRlciAtIHdvcmtzcGFjZSB3aXRob3V0IGludGVycHJldGVyJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBzZXR1cFdvcmtzcGFjZSgncm9vdCcpO1xyXG4gICAgICAgICAgICBjb25maWcuc2V0dXAoeCA9PiB4Lmluc3BlY3QoJ3B5dGhvblBhdGgnKSkucmV0dXJucygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBrZXk6ICdweXRob24nLCB3b3Jrc3BhY2VWYWx1ZTogJ2Vsc2V3aGVyZScgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVycHJldGVyID0gT2JqZWN0LmFzc2lnbih7fSwgaW5mbywgeyBwYXRoOiAnZWxzZXdoZXJlJywgdHlwZTogY29udHJhY3RzXzEuSW50ZXJwcmV0ZXJUeXBlLlVua25vd24gfSk7XHJcbiAgICAgICAgICAgIHNldHVwTG9jYXRvcnMoW2ludGVycHJldGVyXSwgW10pO1xyXG4gICAgICAgICAgICB5aWVsZCB2ZXJpZnlVcGRhdGVDYWxsZWQoVHlwZU1vcS5UaW1lcy5uZXZlcigpKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnYXV0b3NldCBpbnRlcnByZXRlciAtIHdvcmtzcGFjZSB3aXRoIGludGVycHJldGVyJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBzZXR1cFdvcmtzcGFjZSgncm9vdCcpO1xyXG4gICAgICAgICAgICBjb25maWcuc2V0dXAoeCA9PiB4Lmluc3BlY3QoJ3B5dGhvblBhdGgnKSkucmV0dXJucygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBrZXk6ICdweXRob24nIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBpbnRQYXRoID0gcGF0aC5qb2luKCdyb290JywgJ3VuZGVyJywgJ2JpbicsICdweXRob24uZXhlJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVycHJldGVyID0gT2JqZWN0LmFzc2lnbih7fSwgaW5mbywgeyBwYXRoOiBpbnRQYXRoLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9KTtcclxuICAgICAgICAgICAgc2V0dXBMb2NhdG9ycyhbaW50ZXJwcmV0ZXJdLCBbXSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHZlcmlmeVVwZGF0ZUNhbGxEYXRhKGludFBhdGgsIHZzY29kZV8xLkNvbmZpZ3VyYXRpb25UYXJnZXQuV29ya3NwYWNlLCAncm9vdCcpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBmdW5jdGlvbiB2ZXJpZnlVcGRhdGVDYWxsZWQodGltZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgc2VydmljZS5hdXRvU2V0SW50ZXJwcmV0ZXIoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZXJcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZ5KHggPT4geC51cGRhdGVQeXRob25QYXRoKFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSksIHRpbWVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHZlcmlmeVVwZGF0ZUNhbGxEYXRhKHB5dGhvblBhdGgsIHRhcmdldCwgd2tzRm9sZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29uZlRhcmdldDtcclxuICAgICAgICAgICAgICAgIGxldCB0cmlnZ2VyO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdrcztcclxuICAgICAgICAgICAgICAgIHVwZGF0ZXJcclxuICAgICAgICAgICAgICAgICAgICAuc2V0dXAoeCA9PiB4LnVwZGF0ZVB5dGhvblBhdGgoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbiAgICAgICAgICAgICAgICAgICAgLmNhbGxiYWNrKChwLCBjLCB0LCB3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZUYXJnZXQgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIgPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgIHdrcyA9IHc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgaW50ZXJwcmV0ZXJTZXJ2aWNlXzEuSW50ZXJwcmV0ZXJTZXJ2aWNlKHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgc2VydmljZS5hdXRvU2V0SW50ZXJwcmV0ZXIoKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QocHApLm5vdC50by5iZS5lcXVhbCh1bmRlZmluZWQsICd1cGRhdGVQeXRob25QYXRoIG5vdCBjYWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QocHApLnRvLmJlLmVxdWFsKHB5dGhvblBhdGgsICdpbnZhbGlkIFB5dGhvbiBwYXRoJyk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGNvbmZUYXJnZXQpLnRvLmJlLmVxdWFsKHRhcmdldCwgJ2ludmFsaWQgY29uZmlndXJhdGlvbiB0YXJnZXQnKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QodHJpZ2dlcikudG8uYmUuZXF1YWwoJ2xvYWQnLCAnaW52YWxpZCB0cmlnZ2VyJyk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHdrcy5mc1BhdGgpLnRvLmJlLmVxdWFsKHZzY29kZV8xLlVyaS5maWxlKHdrc0ZvbGRlcikuZnNQYXRoLCAnaW52YWxpZCB3b3Jrc3BhY2UgVXJpJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBzZXR1cFdvcmtzcGFjZShmb2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc3Qgd3NQYXRoID0ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyVXJpOiB2c2NvZGVfMS5VcmkuZmlsZShmb2xkZXIpLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnVGFyZ2V0OiB2c2NvZGVfMS5Db25maWd1cmF0aW9uVGFyZ2V0LldvcmtzcGFjZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBoZWxwZXIuc2V0dXAoeCA9PiB4LmdldEFjdGl2ZVdvcmtzcGFjZVVyaSgpKS5yZXR1cm5zKCgpID0+IHdzUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTG9jYXRvcnMod2tzLCBwaXBlbnYpIHtcclxuICAgICAgICAgICAgcGlwZW52TG9jYXRvci5zZXR1cCh4ID0+IHguZ2V0SW50ZXJwcmV0ZXJzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHBpcGVudikpO1xyXG4gICAgICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgcGlwZW52TG9jYXRvci5vYmplY3QsIGNvbnRyYWN0c18xLlBJUEVOVl9TRVJWSUNFKTtcclxuICAgICAgICAgICAgd2tzTG9jYXRvci5zZXR1cCh4ID0+IHguZ2V0SW50ZXJwcmV0ZXJzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHdrcykpO1xyXG4gICAgICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJMb2NhdG9yU2VydmljZSwgd2tzTG9jYXRvci5vYmplY3QsIGNvbnRyYWN0c18xLldPUktTUEFDRV9WSVJUVUFMX0VOVl9TRVJWSUNFKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIHZlcmJvc2UgdGVzdCwgYnV0IHdlIG5lZWQgdG8gZW5zdXJlIHdlIGhhdmUgY292ZXJlZCBhbGwgcGVybXV0YXRpb25zLlxyXG4gICAgLy8gQWxzbyB3ZSBoYXZlIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGNlcnRhaW4gdHlwZXMgb2YgaW50ZXJwcmV0ZXJzLlxyXG4gICAgc3VpdGUoJ0Rpc3BsYXkgRm9ybWF0ICh3aXRoIGFsbCBwZXJtdXRhdGlvbnMpJywgKCkgPT4ge1xyXG4gICAgICAgIHNldHVwKHNldHVwU3VpdGUpO1xyXG4gICAgICAgIFt1bmRlZmluZWQsIHZzY29kZV8xLlVyaS5maWxlKCd4eXonKV0uZm9yRWFjaChyZXNvdXJjZSA9PiB7XHJcbiAgICAgICAgICAgIFt1bmRlZmluZWQsIFsxLCAyLCAzLCAnYWxwaGEnXV0uZm9yRWFjaCh2ZXJzaW9uSW5mbyA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JjZWQgY2FzdCB0byBpZ25vcmUgVFMgd2FybmluZ3MuXHJcbiAgICAgICAgICAgICAgICBFbnVtRXguZ2V0TmFtZXNBbmRWYWx1ZXMocGxhdGZvcm1fMS5BcmNoaXRlY3R1cmUpLmNvbmNhdCh1bmRlZmluZWQpLmZvckVhY2goYXJjaCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgW3VuZGVmaW5lZCwgcGF0aC5qb2luKCdhJywgJ2InLCAnYycsICdkJywgJ2JpbicsICdweXRob24nKV0uZm9yRWFjaChweXRob25QYXRoID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2VkIGNhc3QgdG8gaWdub3JlIFRTIHdhcm5pbmdzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtRXguZ2V0TmFtZXNBbmRWYWx1ZXMoY29udHJhY3RzXzEuSW50ZXJwcmV0ZXJUeXBlKS5jb25jYXQodW5kZWZpbmVkKS5mb3JFYWNoKGludGVycHJldGVyVHlwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdW5kZWZpbmVkLCAnbXkgZW52IG5hbWUnXS5mb3JFYWNoKGVudk5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnJywgJ215IHBpcGVudiBuYW1lJ10uZm9yRWFjaChwaXBFbnZOYW1lID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVzdE5hbWUgPSBbYCR7cmVzb3VyY2UgPyAnV2l0aCcgOiAnV2l0aG91dCd9IGEgd29ya3NwYWNlYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3ZlcnNpb25JbmZvID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSB2ZXJzaW9uIGluZm9ybWF0aW9uYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2FyY2ggPyBhcmNoLm5hbWUgOiAnd2l0aG91dCd9IGFyY2hpdGVjdHVyZWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtweXRob25QYXRoID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSBweXRob24gUGF0aGAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtpbnRlcnByZXRlclR5cGUgPyBgJHtpbnRlcnByZXRlclR5cGUubmFtZX0gaW50ZXJwcmV0ZXIgdHlwZWAgOiAnd2l0aG91dCBpbnRlcnByZXRlciB0eXBlJ31gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZW52TmFtZSA/ICd3aXRoJyA6ICd3aXRob3V0J30gZW52aXJvbm1lbnQgbmFtZWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwaXBFbnZOYW1lID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSBwaXAgZW52aXJvbm1lbnRgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignLCAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdCh0ZXN0TmFtZSwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJwcmV0ZXJJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25faW5mbzogdmVyc2lvbkluZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjaGl0ZWN0dXJlOiBhcmNoID8gYXJjaC52YWx1ZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnZOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVycHJldGVyVHlwZSA/IGludGVycHJldGVyVHlwZS52YWx1ZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBweXRob25QYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVycHJldGVySW5mby5wYXRoICYmIGludGVycHJldGVyVHlwZSAmJiBpbnRlcnByZXRlclR5cGUudmFsdWUgPT09IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5QaXBFbnYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsRW52TWdyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXR1cCh2ID0+IHYuZ2V0RW52aXJvbm1lbnROYW1lKFR5cGVNb3EuSXQuaXNWYWx1ZShpbnRlcnByZXRlckluZm8ucGF0aCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShwaXBFbnZOYW1lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJwcmV0ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXR1cChoID0+IGguZ2V0SW50ZXJwcmV0ZXJUeXBlRGlzcGxheU5hbWUoVHlwZU1vcS5JdC5pc1ZhbHVlKGludGVycHJldGVyVHlwZS52YWx1ZSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBgJHtpbnRlcnByZXRlclR5cGUubmFtZX1fZGlzcGxheWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBpbnRlcnByZXRlclNlcnZpY2VfMS5JbnRlcnByZXRlclNlcnZpY2Uoc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZERpc3BsYXlOYW1lID0gYnVpbGREaXNwbGF5TmFtZShpbnRlcnByZXRlckluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB5aWVsZCBzZXJ2aWNlLmdldERpc3BsYXlOYW1lKGludGVycHJldGVySW5mbywgcmVzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChkaXNwbGF5TmFtZSkudG8uZXF1YWwoZXhwZWN0ZWREaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGREaXNwbGF5TmFtZShpbnRlcnByZXRlckluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lUGFydHMgPSBbJ1B5dGhvbiddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW52U3VmZml4UGFydHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnByZXRlckluZm8udmVyc2lvbl9pbmZvICYmIGludGVycHJldGVySW5mby52ZXJzaW9uX2luZm8ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lUGFydHMucHVzaChpbnRlcnByZXRlckluZm8udmVyc2lvbl9pbmZvLnNsaWNlKDAsIDMpLmpvaW4oJy4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJwcmV0ZXJJbmZvLmFyY2hpdGVjdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lUGFydHMucHVzaChyZWdpc3RyeV8xLmdldEFyY2hpdGVjdHVyZURpc3BsYXlOYW1lKGludGVycHJldGVySW5mby5hcmNoaXRlY3R1cmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJwcmV0ZXJJbmZvLmVudk5hbWUgJiYgaW50ZXJwcmV0ZXJJbmZvLnBhdGggJiYgaW50ZXJwcmV0ZXJJbmZvLnR5cGUgJiYgaW50ZXJwcmV0ZXJJbmZvLnR5cGUgPT09IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5QaXBFbnYgJiYgcGlwRW52TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGRvIG5vdCBoYXZlIHRoZSBuYW1lIG9mIHRoZSBlbnZpcm9ubWVudCwgdGhlbiB0cnkgdG8gZ2V0IGl0IGFnYWluLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBiYXNlZCBvbiB0aGUgY29udGV4dCAoaS5lLiByZXNvdXJjZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSS5lLiB3ZSBjYW4gZGV0ZXJtaW5lIGlmIGFuIGVudmlyb25tZW50IGlzIFBpcEVudiBvbmx5IHdoZW4gZ2l2aW5nIGl0IHRoZSByaWdodCB3b3Jrc3BhY2VjIHBhdGggKGkuZS4gcmVzb3VyY2UpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVycHJldGVySW5mby5lbnZOYW1lID0gcGlwRW52TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnByZXRlckluZm8uZW52TmFtZSAmJiBpbnRlcnByZXRlckluZm8uZW52TmFtZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52U3VmZml4UGFydHMucHVzaChgJyR7aW50ZXJwcmV0ZXJJbmZvLmVudk5hbWV9J2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVycHJldGVySW5mby50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52U3VmZml4UGFydHMucHVzaChgJHtpbnRlcnByZXRlclR5cGUubmFtZX1fZGlzcGxheWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW52U3VmZml4ID0gZW52U3VmZml4UGFydHMubGVuZ3RoID09PSAwID8gJycgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAoJHtlbnZTdWZmaXhQYXJ0cy5qb2luKCc6ICcpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2Rpc3BsYXlOYW1lUGFydHMuam9pbignICcpfSAke2VudlN1ZmZpeH1gLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnByZXRlclNlcnZpY2UudW5pdC50ZXN0LmpzLm1hcCJdfQ==