// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:max-func-body-length no-any

const chai_1 = require("chai");

const path = require("path");

const TypeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../client/common/application/types");

const types_2 = require("../../client/common/platform/types");

const types_3 = require("../../client/common/process/types");

const types_4 = require("../../client/common/types");

const enum_1 = require("../../client/common/utils/enum");

const types_5 = require("../../client/common/variables/types");

const contracts_1 = require("../../client/interpreter/contracts");

const pipEnvService_1 = require("../../client/interpreter/locators/services/pipEnvService");

var OS;

(function (OS) {
  OS[OS["Mac"] = 0] = "Mac";
  OS[OS["Windows"] = 1] = "Windows";
  OS[OS["Linux"] = 2] = "Linux";
})(OS || (OS = {}));

suite('Interpreters - PipEnv', () => {
  const rootWorkspace = vscode_1.Uri.file(path.join('usr', 'desktop', 'wkspc1')).fsPath;
  enum_1.getNamesAndValues(OS).forEach(os => {
    [undefined, vscode_1.Uri.file(path.join(rootWorkspace, 'one.py'))].forEach(resource => {
      const testSuffix = ` (${os.name}, ${resource ? 'with' : 'without'} a workspace)`;
      let pipEnvService;
      let serviceContainer;
      let interpreterHelper;
      let processService;
      let currentProcess;
      let fileSystem;
      let appShell;
      let persistentStateFactory;
      let envVarsProvider;
      let procServiceFactory;
      let logger;
      let platformService;
      setup(() => {
        serviceContainer = TypeMoq.Mock.ofType();
        const workspaceService = TypeMoq.Mock.ofType();
        interpreterHelper = TypeMoq.Mock.ofType();
        fileSystem = TypeMoq.Mock.ofType();
        processService = TypeMoq.Mock.ofType();
        appShell = TypeMoq.Mock.ofType();
        currentProcess = TypeMoq.Mock.ofType();
        persistentStateFactory = TypeMoq.Mock.ofType();
        envVarsProvider = TypeMoq.Mock.ofType();
        procServiceFactory = TypeMoq.Mock.ofType();
        logger = TypeMoq.Mock.ofType();
        platformService = TypeMoq.Mock.ofType();
        processService.setup(x => x.then).returns(() => undefined);
        procServiceFactory.setup(p => p.create(TypeMoq.It.isAny())).returns(() => Promise.resolve(processService.object)); // tslint:disable-next-line:no-any

        const persistentState = TypeMoq.Mock.ofType();
        persistentStateFactory.setup(p => p.createGlobalPersistentState(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => persistentState.object);
        persistentStateFactory.setup(p => p.createWorkspacePersistentState(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => persistentState.object);
        persistentState.setup(p => p.value).returns(() => undefined);
        persistentState.setup(p => p.updateValue(TypeMoq.It.isAny())).returns(() => Promise.resolve());
        const workspaceFolder = TypeMoq.Mock.ofType();
        workspaceFolder.setup(w => w.uri).returns(() => vscode_1.Uri.file(rootWorkspace));
        workspaceService.setup(w => w.getWorkspaceFolder(TypeMoq.It.isAny())).returns(() => workspaceFolder.object);
        workspaceService.setup(w => w.rootPath).returns(() => rootWorkspace);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_3.IProcessServiceFactory), TypeMoq.It.isAny())).returns(() => procServiceFactory.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_1.IWorkspaceService))).returns(() => workspaceService.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(contracts_1.IInterpreterHelper))).returns(() => interpreterHelper.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_4.ICurrentProcess))).returns(() => currentProcess.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_2.IFileSystem))).returns(() => fileSystem.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_1.IApplicationShell))).returns(() => appShell.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_4.IPersistentStateFactory))).returns(() => persistentStateFactory.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_5.IEnvironmentVariablesProvider))).returns(() => envVarsProvider.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_4.ILogger))).returns(() => logger.object);
        serviceContainer.setup(c => c.get(TypeMoq.It.isValue(types_2.IPlatformService))).returns(() => platformService.object);
        pipEnvService = new pipEnvService_1.PipEnvService(serviceContainer.object);
      });
      test(`Should return an empty list'${testSuffix}`, () => {
        const environments = pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.eventually.deep.equal([]);
      });
      test(`Should return an empty list if there is no \'PipFile\'${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const env = {};
        envVarsProvider.setup(e => e.getEnvironmentVariables(TypeMoq.It.isAny())).returns(() => Promise.resolve({})).verifiable(TypeMoq.Times.once());
        currentProcess.setup(c => c.env).returns(() => env);
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, 'Pipfile')))).returns(() => Promise.resolve(false)).verifiable(TypeMoq.Times.once());
        const environments = yield pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.deep.equal([]);
        fileSystem.verifyAll();
      }));
      test(`Should display warning message if there is a \'PipFile\' but \'pipenv --venv\' failes ${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const env = {};
        currentProcess.setup(c => c.env).returns(() => env);
        processService.setup(p => p.exec(TypeMoq.It.isValue('pipenv'), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.reject(''));
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, 'Pipfile')))).returns(() => Promise.resolve(true));
        appShell.setup(a => a.showWarningMessage(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve('')).verifiable(TypeMoq.Times.once());
        logger.setup(l => l.logWarning(TypeMoq.It.isAny(), TypeMoq.It.isAny())).verifiable(TypeMoq.Times.exactly(2));
        const environments = yield pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.deep.equal([]);
        appShell.verifyAll();
        logger.verifyAll();
      }));
      test(`Should display warning message if there is a \'PipFile\' but \'pipenv --venv\' failes with stderr ${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const env = {};
        currentProcess.setup(c => c.env).returns(() => env);
        processService.setup(p => p.exec(TypeMoq.It.isValue('pipenv'), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve({
          stderr: 'PipEnv Failed',
          stdout: ''
        }));
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, 'Pipfile')))).returns(() => Promise.resolve(true));
        appShell.setup(a => a.showWarningMessage(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve('')).verifiable(TypeMoq.Times.once());
        logger.setup(l => l.logWarning(TypeMoq.It.isAny(), TypeMoq.It.isAny())).verifiable(TypeMoq.Times.exactly(2));
        const environments = yield pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.deep.equal([]);
        appShell.verifyAll();
        logger.verifyAll();
      }));
      test(`Should return interpreter information${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const env = {};
        const pythonPath = 'one';
        envVarsProvider.setup(e => e.getEnvironmentVariables(TypeMoq.It.isAny())).returns(() => Promise.resolve({})).verifiable(TypeMoq.Times.once());
        currentProcess.setup(c => c.env).returns(() => env);
        processService.setup(p => p.exec(TypeMoq.It.isValue('pipenv'), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve({
          stdout: pythonPath
        }));
        interpreterHelper.setup(v => v.getInterpreterInformation(TypeMoq.It.isAny())).returns(() => Promise.resolve({
          version: 'xyz'
        }));
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, 'Pipfile')))).returns(() => Promise.resolve(true)).verifiable();
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(true)).verifiable();
        const environments = yield pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.lengthOf(1);
        fileSystem.verifyAll();
      }));
      test(`Should return interpreter information using PipFile defined in Env variable${testSuffix}`, () => __awaiter(void 0, void 0, void 0, function* () {
        const envPipFile = 'XYZ';
        const env = {
          PIPENV_PIPFILE: envPipFile
        };
        const pythonPath = 'one';
        envVarsProvider.setup(e => e.getEnvironmentVariables(TypeMoq.It.isAny())).returns(() => Promise.resolve({})).verifiable(TypeMoq.Times.once());
        currentProcess.setup(c => c.env).returns(() => env);
        processService.setup(p => p.exec(TypeMoq.It.isValue('pipenv'), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve({
          stdout: pythonPath
        }));
        interpreterHelper.setup(v => v.getInterpreterInformation(TypeMoq.It.isAny())).returns(() => Promise.resolve({
          version: 'xyz'
        }));
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, 'Pipfile')))).returns(() => Promise.resolve(false)).verifiable(TypeMoq.Times.never());
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(path.join(rootWorkspace, envPipFile)))).returns(() => Promise.resolve(true)).verifiable(TypeMoq.Times.once());
        fileSystem.setup(fs => fs.fileExists(TypeMoq.It.isValue(pythonPath))).returns(() => Promise.resolve(true)).verifiable();
        const environments = yield pipEnvService.getInterpreters(resource);
        chai_1.expect(environments).to.be.lengthOf(1);
        fileSystem.verifyAll();
      }));
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBpcEVudlNlcnZpY2UudW5pdC50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwicGF0aCIsIlR5cGVNb3EiLCJ2c2NvZGVfMSIsInR5cGVzXzEiLCJ0eXBlc18yIiwidHlwZXNfMyIsInR5cGVzXzQiLCJlbnVtXzEiLCJ0eXBlc181IiwiY29udHJhY3RzXzEiLCJwaXBFbnZTZXJ2aWNlXzEiLCJPUyIsInN1aXRlIiwicm9vdFdvcmtzcGFjZSIsIlVyaSIsImZpbGUiLCJqb2luIiwiZnNQYXRoIiwiZ2V0TmFtZXNBbmRWYWx1ZXMiLCJmb3JFYWNoIiwib3MiLCJ1bmRlZmluZWQiLCJyZXNvdXJjZSIsInRlc3RTdWZmaXgiLCJuYW1lIiwicGlwRW52U2VydmljZSIsInNlcnZpY2VDb250YWluZXIiLCJpbnRlcnByZXRlckhlbHBlciIsInByb2Nlc3NTZXJ2aWNlIiwiY3VycmVudFByb2Nlc3MiLCJmaWxlU3lzdGVtIiwiYXBwU2hlbGwiLCJwZXJzaXN0ZW50U3RhdGVGYWN0b3J5IiwiZW52VmFyc1Byb3ZpZGVyIiwicHJvY1NlcnZpY2VGYWN0b3J5IiwibG9nZ2VyIiwicGxhdGZvcm1TZXJ2aWNlIiwic2V0dXAiLCJNb2NrIiwib2ZUeXBlIiwid29ya3NwYWNlU2VydmljZSIsIngiLCJyZXR1cm5zIiwicCIsImNyZWF0ZSIsIkl0IiwiaXNBbnkiLCJvYmplY3QiLCJwZXJzaXN0ZW50U3RhdGUiLCJjcmVhdGVHbG9iYWxQZXJzaXN0ZW50U3RhdGUiLCJjcmVhdGVXb3Jrc3BhY2VQZXJzaXN0ZW50U3RhdGUiLCJ1cGRhdGVWYWx1ZSIsIndvcmtzcGFjZUZvbGRlciIsInciLCJ1cmkiLCJnZXRXb3Jrc3BhY2VGb2xkZXIiLCJyb290UGF0aCIsImMiLCJnZXQiLCJpc1ZhbHVlIiwiSVByb2Nlc3NTZXJ2aWNlRmFjdG9yeSIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwiSUludGVycHJldGVySGVscGVyIiwiSUN1cnJlbnRQcm9jZXNzIiwiSUZpbGVTeXN0ZW0iLCJJQXBwbGljYXRpb25TaGVsbCIsIklQZXJzaXN0ZW50U3RhdGVGYWN0b3J5IiwiSUVudmlyb25tZW50VmFyaWFibGVzUHJvdmlkZXIiLCJJTG9nZ2VyIiwiSVBsYXRmb3JtU2VydmljZSIsIlBpcEVudlNlcnZpY2UiLCJ0ZXN0IiwiZW52aXJvbm1lbnRzIiwiZ2V0SW50ZXJwcmV0ZXJzIiwiZXhwZWN0IiwidG8iLCJiZSIsImV2ZW50dWFsbHkiLCJkZWVwIiwiZXF1YWwiLCJlbnYiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlcyIsInZlcmlmaWFibGUiLCJUaW1lcyIsIm9uY2UiLCJmcyIsImZpbGVFeGlzdHMiLCJ2ZXJpZnlBbGwiLCJleGVjIiwiYSIsInNob3dXYXJuaW5nTWVzc2FnZSIsImwiLCJsb2dXYXJuaW5nIiwiZXhhY3RseSIsInN0ZGVyciIsInN0ZG91dCIsInB5dGhvblBhdGgiLCJ2IiwiZ2V0SW50ZXJwcmV0ZXJJbmZvcm1hdGlvbiIsInZlcnNpb24iLCJsZW5ndGhPZiIsImVudlBpcEZpbGUiLCJQSVBFTlZfUElQRklMRSIsIm5ldmVyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBQ0EsSUFBSUEsU0FBUyxHQUFJLFVBQVEsU0FBS0EsU0FBZCxJQUE0QixVQUFVQyxPQUFWLEVBQW1CQyxVQUFuQixFQUErQkMsQ0FBL0IsRUFBa0NDLFNBQWxDLEVBQTZDO0FBQ3JGLFNBQU8sS0FBS0QsQ0FBQyxLQUFLQSxDQUFDLEdBQUdFLE9BQVQsQ0FBTixFQUF5QixVQUFVQyxPQUFWLEVBQW1CQyxNQUFuQixFQUEyQjtBQUN2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cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlOm1heC1mdW5jLWJvZHktbGVuZ3RoIG5vLWFueVxyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG5jb25zdCBUeXBlTW9xID0gcmVxdWlyZShcInR5cGVtb3FcIik7XHJcbmNvbnN0IHZzY29kZV8xID0gcmVxdWlyZShcInZzY29kZVwiKTtcclxuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL2FwcGxpY2F0aW9uL3R5cGVzXCIpO1xyXG5jb25zdCB0eXBlc18yID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vcGxhdGZvcm0vdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzMgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wcm9jZXNzL3R5cGVzXCIpO1xyXG5jb25zdCB0eXBlc180ID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vdHlwZXNcIik7XHJcbmNvbnN0IGVudW1fMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3V0aWxzL2VudW1cIik7XHJcbmNvbnN0IHR5cGVzXzUgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi92YXJpYWJsZXMvdHlwZXNcIik7XHJcbmNvbnN0IGNvbnRyYWN0c18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9pbnRlcnByZXRlci9jb250cmFjdHNcIik7XHJcbmNvbnN0IHBpcEVudlNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvaW50ZXJwcmV0ZXIvbG9jYXRvcnMvc2VydmljZXMvcGlwRW52U2VydmljZVwiKTtcclxudmFyIE9TO1xyXG4oZnVuY3Rpb24gKE9TKSB7XHJcbiAgICBPU1tPU1tcIk1hY1wiXSA9IDBdID0gXCJNYWNcIjtcclxuICAgIE9TW09TW1wiV2luZG93c1wiXSA9IDFdID0gXCJXaW5kb3dzXCI7XHJcbiAgICBPU1tPU1tcIkxpbnV4XCJdID0gMl0gPSBcIkxpbnV4XCI7XHJcbn0pKE9TIHx8IChPUyA9IHt9KSk7XHJcbnN1aXRlKCdJbnRlcnByZXRlcnMgLSBQaXBFbnYnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByb290V29ya3NwYWNlID0gdnNjb2RlXzEuVXJpLmZpbGUocGF0aC5qb2luKCd1c3InLCAnZGVza3RvcCcsICd3a3NwYzEnKSkuZnNQYXRoO1xyXG4gICAgZW51bV8xLmdldE5hbWVzQW5kVmFsdWVzKE9TKS5mb3JFYWNoKG9zID0+IHtcclxuICAgICAgICBbdW5kZWZpbmVkLCB2c2NvZGVfMS5VcmkuZmlsZShwYXRoLmpvaW4ocm9vdFdvcmtzcGFjZSwgJ29uZS5weScpKV0uZm9yRWFjaChyZXNvdXJjZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RTdWZmaXggPSBgICgke29zLm5hbWV9LCAke3Jlc291cmNlID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSBhIHdvcmtzcGFjZSlgO1xyXG4gICAgICAgICAgICBsZXQgcGlwRW52U2VydmljZTtcclxuICAgICAgICAgICAgbGV0IHNlcnZpY2VDb250YWluZXI7XHJcbiAgICAgICAgICAgIGxldCBpbnRlcnByZXRlckhlbHBlcjtcclxuICAgICAgICAgICAgbGV0IHByb2Nlc3NTZXJ2aWNlO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFByb2Nlc3M7XHJcbiAgICAgICAgICAgIGxldCBmaWxlU3lzdGVtO1xyXG4gICAgICAgICAgICBsZXQgYXBwU2hlbGw7XHJcbiAgICAgICAgICAgIGxldCBwZXJzaXN0ZW50U3RhdGVGYWN0b3J5O1xyXG4gICAgICAgICAgICBsZXQgZW52VmFyc1Byb3ZpZGVyO1xyXG4gICAgICAgICAgICBsZXQgcHJvY1NlcnZpY2VGYWN0b3J5O1xyXG4gICAgICAgICAgICBsZXQgbG9nZ2VyO1xyXG4gICAgICAgICAgICBsZXQgcGxhdGZvcm1TZXJ2aWNlO1xyXG4gICAgICAgICAgICBzZXR1cCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlU2VydmljZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGludGVycHJldGVySGVscGVyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgZmlsZVN5c3RlbSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvY2VzcyA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbnRTdGF0ZUZhY3RvcnkgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBlbnZWYXJzUHJvdmlkZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9jU2VydmljZUZhY3RvcnkgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybVNlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzU2VydmljZS5zZXR1cCgoeCkgPT4geC50aGVuKS5yZXR1cm5zKCgpID0+IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICBwcm9jU2VydmljZUZhY3Rvcnkuc2V0dXAocCA9PiBwLmNyZWF0ZShUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShwcm9jZXNzU2VydmljZS5vYmplY3QpKTtcclxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RlbnRTdGF0ZSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbnRTdGF0ZUZhY3Rvcnkuc2V0dXAocCA9PiBwLmNyZWF0ZUdsb2JhbFBlcnNpc3RlbnRTdGF0ZShUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gcGVyc2lzdGVudFN0YXRlLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW50U3RhdGVGYWN0b3J5LnNldHVwKHAgPT4gcC5jcmVhdGVXb3Jrc3BhY2VQZXJzaXN0ZW50U3RhdGUoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHBlcnNpc3RlbnRTdGF0ZS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVudFN0YXRlLnNldHVwKHAgPT4gcC52YWx1ZSkucmV0dXJucygoKSA9PiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVudFN0YXRlLnNldHVwKHAgPT4gcC51cGRhdGVWYWx1ZShUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtzcGFjZUZvbGRlciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUZvbGRlci5zZXR1cCh3ID0+IHcudXJpKS5yZXR1cm5zKCgpID0+IHZzY29kZV8xLlVyaS5maWxlKHJvb3RXb3Jrc3BhY2UpKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZVNlcnZpY2Uuc2V0dXAodyA9PiB3LmdldFdvcmtzcGFjZUZvbGRlcihUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHdvcmtzcGFjZUZvbGRlci5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS5zZXR1cCh3ID0+IHcucm9vdFBhdGgpLnJldHVybnMoKCkgPT4gcm9vdFdvcmtzcGFjZSk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzMuSVByb2Nlc3NTZXJ2aWNlRmFjdG9yeSksIFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gcHJvY1NlcnZpY2VGYWN0b3J5Lm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzEuSVdvcmtzcGFjZVNlcnZpY2UpKSkucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKGNvbnRyYWN0c18xLklJbnRlcnByZXRlckhlbHBlcikpKS5yZXR1cm5zKCgpID0+IGludGVycHJldGVySGVscGVyLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzQuSUN1cnJlbnRQcm9jZXNzKSkpLnJldHVybnMoKCkgPT4gY3VycmVudFByb2Nlc3Mub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfMi5JRmlsZVN5c3RlbSkpKS5yZXR1cm5zKCgpID0+IGZpbGVTeXN0ZW0ub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfMS5JQXBwbGljYXRpb25TaGVsbCkpKS5yZXR1cm5zKCgpID0+IGFwcFNoZWxsLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzQuSVBlcnNpc3RlbnRTdGF0ZUZhY3RvcnkpKSkucmV0dXJucygoKSA9PiBwZXJzaXN0ZW50U3RhdGVGYWN0b3J5Lm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzUuSUVudmlyb25tZW50VmFyaWFibGVzUHJvdmlkZXIpKSkucmV0dXJucygoKSA9PiBlbnZWYXJzUHJvdmlkZXIub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldChUeXBlTW9xLkl0LmlzVmFsdWUodHlwZXNfNC5JTG9nZ2VyKSkpLnJldHVybnMoKCkgPT4gbG9nZ2VyLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoVHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzIuSVBsYXRmb3JtU2VydmljZSkpKS5yZXR1cm5zKCgpID0+IHBsYXRmb3JtU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgcGlwRW52U2VydmljZSA9IG5ldyBwaXBFbnZTZXJ2aWNlXzEuUGlwRW52U2VydmljZShzZXJ2aWNlQ29udGFpbmVyLm9iamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0ZXN0KGBTaG91bGQgcmV0dXJuIGFuIGVtcHR5IGxpc3QnJHt0ZXN0U3VmZml4fWAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVudmlyb25tZW50cyA9IHBpcEVudlNlcnZpY2UuZ2V0SW50ZXJwcmV0ZXJzKHJlc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZW52aXJvbm1lbnRzKS50by5iZS5ldmVudHVhbGx5LmRlZXAuZXF1YWwoW10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGVzdChgU2hvdWxkIHJldHVybiBhbiBlbXB0eSBsaXN0IGlmIHRoZXJlIGlzIG5vIFxcJ1BpcEZpbGVcXCcke3Rlc3RTdWZmaXh9YCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW52ID0ge307XHJcbiAgICAgICAgICAgICAgICBlbnZWYXJzUHJvdmlkZXIuc2V0dXAoZSA9PiBlLmdldEVudmlyb25tZW50VmFyaWFibGVzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHt9KSkudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5zZXR1cChjID0+IGMuZW52KS5yZXR1cm5zKCgpID0+IGVudik7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnNldHVwKGZzID0+IGZzLmZpbGVFeGlzdHMoVHlwZU1vcS5JdC5pc1ZhbHVlKHBhdGguam9pbihyb290V29ya3NwYWNlLCAnUGlwZmlsZScpKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKSkudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnZpcm9ubWVudHMgPSB5aWVsZCBwaXBFbnZTZXJ2aWNlLmdldEludGVycHJldGVycyhyZXNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGVudmlyb25tZW50cykudG8uYmUuZGVlcC5lcXVhbChbXSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHRlc3QoYFNob3VsZCBkaXNwbGF5IHdhcm5pbmcgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIFxcJ1BpcEZpbGVcXCcgYnV0IFxcJ3BpcGVudiAtLXZlbnZcXCcgZmFpbGVzICR7dGVzdFN1ZmZpeH1gLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnYgPSB7fTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLnNldHVwKGMgPT4gYy5lbnYpLnJldHVybnMoKCkgPT4gZW52KTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlLnNldHVwKHAgPT4gcC5leGVjKFR5cGVNb3EuSXQuaXNWYWx1ZSgncGlwZW52JyksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlamVjdCgnJykpO1xyXG4gICAgICAgICAgICAgICAgZmlsZVN5c3RlbS5zZXR1cChmcyA9PiBmcy5maWxlRXhpc3RzKFR5cGVNb3EuSXQuaXNWYWx1ZShwYXRoLmpvaW4ocm9vdFdvcmtzcGFjZSwgJ1BpcGZpbGUnKSkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC5zZXR1cChhID0+IGEuc2hvd1dhcm5pbmdNZXNzYWdlKFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoJycpKS52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5zZXR1cChsID0+IGwubG9nV2FybmluZyhUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5leGFjdGx5KDIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVudmlyb25tZW50cyA9IHlpZWxkIHBpcEVudlNlcnZpY2UuZ2V0SW50ZXJwcmV0ZXJzKHJlc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZW52aXJvbm1lbnRzKS50by5iZS5kZWVwLmVxdWFsKFtdKTtcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHRlc3QoYFNob3VsZCBkaXNwbGF5IHdhcm5pbmcgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIFxcJ1BpcEZpbGVcXCcgYnV0IFxcJ3BpcGVudiAtLXZlbnZcXCcgZmFpbGVzIHdpdGggc3RkZXJyICR7dGVzdFN1ZmZpeH1gLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnYgPSB7fTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLnNldHVwKGMgPT4gYy5lbnYpLnJldHVybnMoKCkgPT4gZW52KTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlLnNldHVwKHAgPT4gcC5leGVjKFR5cGVNb3EuSXQuaXNWYWx1ZSgncGlwZW52JyksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdGRlcnI6ICdQaXBFbnYgRmFpbGVkJywgc3Rkb3V0OiAnJyB9KSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnNldHVwKGZzID0+IGZzLmZpbGVFeGlzdHMoVHlwZU1vcS5JdC5pc1ZhbHVlKHBhdGguam9pbihyb290V29ya3NwYWNlLCAnUGlwZmlsZScpKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnNldHVwKGEgPT4gYS5zaG93V2FybmluZ01lc3NhZ2UoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgnJykpLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLnNldHVwKGwgPT4gbC5sb2dXYXJuaW5nKFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLmV4YWN0bHkoMikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW52aXJvbm1lbnRzID0geWllbGQgcGlwRW52U2VydmljZS5nZXRJbnRlcnByZXRlcnMocmVzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChlbnZpcm9ubWVudHMpLnRvLmJlLmRlZXAuZXF1YWwoW10pO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdChgU2hvdWxkIHJldHVybiBpbnRlcnByZXRlciBpbmZvcm1hdGlvbiR7dGVzdFN1ZmZpeH1gLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnYgPSB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB5dGhvblBhdGggPSAnb25lJztcclxuICAgICAgICAgICAgICAgIGVudlZhcnNQcm92aWRlci5zZXR1cChlID0+IGUuZ2V0RW52aXJvbm1lbnRWYXJpYWJsZXMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pKS52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLnNldHVwKGMgPT4gYy5lbnYpLnJldHVybnMoKCkgPT4gZW52KTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlLnNldHVwKHAgPT4gcC5leGVjKFR5cGVNb3EuSXQuaXNWYWx1ZSgncGlwZW52JyksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdGRvdXQ6IHB5dGhvblBhdGggfSkpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJwcmV0ZXJIZWxwZXIuc2V0dXAodiA9PiB2LmdldEludGVycHJldGVySW5mb3JtYXRpb24oVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB2ZXJzaW9uOiAneHl6JyB9KSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnNldHVwKGZzID0+IGZzLmZpbGVFeGlzdHMoVHlwZU1vcS5JdC5pc1ZhbHVlKHBhdGguam9pbihyb290V29ya3NwYWNlLCAnUGlwZmlsZScpKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKS52ZXJpZmlhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnNldHVwKGZzID0+IGZzLmZpbGVFeGlzdHMoVHlwZU1vcS5JdC5pc1ZhbHVlKHB5dGhvblBhdGgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpLnZlcmlmaWFibGUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVudmlyb25tZW50cyA9IHlpZWxkIHBpcEVudlNlcnZpY2UuZ2V0SW50ZXJwcmV0ZXJzKHJlc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZW52aXJvbm1lbnRzKS50by5iZS5sZW5ndGhPZigxKTtcclxuICAgICAgICAgICAgICAgIGZpbGVTeXN0ZW0udmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdChgU2hvdWxkIHJldHVybiBpbnRlcnByZXRlciBpbmZvcm1hdGlvbiB1c2luZyBQaXBGaWxlIGRlZmluZWQgaW4gRW52IHZhcmlhYmxlJHt0ZXN0U3VmZml4fWAsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVudlBpcEZpbGUgPSAnWFlaJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVudiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBQSVBFTlZfUElQRklMRTogZW52UGlwRmlsZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB5dGhvblBhdGggPSAnb25lJztcclxuICAgICAgICAgICAgICAgIGVudlZhcnNQcm92aWRlci5zZXR1cChlID0+IGUuZ2V0RW52aXJvbm1lbnRWYXJpYWJsZXMoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pKS52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLnNldHVwKGMgPT4gYy5lbnYpLnJldHVybnMoKCkgPT4gZW52KTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NTZXJ2aWNlLnNldHVwKHAgPT4gcC5leGVjKFR5cGVNb3EuSXQuaXNWYWx1ZSgncGlwZW52JyksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdGRvdXQ6IHB5dGhvblBhdGggfSkpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJwcmV0ZXJIZWxwZXIuc2V0dXAodiA9PiB2LmdldEludGVycHJldGVySW5mb3JtYXRpb24oVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB2ZXJzaW9uOiAneHl6JyB9KSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnNldHVwKGZzID0+IGZzLmZpbGVFeGlzdHMoVHlwZU1vcS5JdC5pc1ZhbHVlKHBhdGguam9pbihyb290V29ya3NwYWNlLCAnUGlwZmlsZScpKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKSkudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm5ldmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgZmlsZVN5c3RlbS5zZXR1cChmcyA9PiBmcy5maWxlRXhpc3RzKFR5cGVNb3EuSXQuaXNWYWx1ZShwYXRoLmpvaW4ocm9vdFdvcmtzcGFjZSwgZW52UGlwRmlsZSkpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgZmlsZVN5c3RlbS5zZXR1cChmcyA9PiBmcy5maWxlRXhpc3RzKFR5cGVNb3EuSXQuaXNWYWx1ZShweXRob25QYXRoKSkpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKS52ZXJpZmlhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnZpcm9ubWVudHMgPSB5aWVsZCBwaXBFbnZTZXJ2aWNlLmdldEludGVycHJldGVycyhyZXNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGVudmlyb25tZW50cykudG8uYmUubGVuZ3RoT2YoMSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcEVudlNlcnZpY2UudW5pdC50ZXN0LmpzLm1hcCJdfQ==