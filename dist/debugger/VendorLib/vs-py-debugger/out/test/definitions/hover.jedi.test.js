"use strict";

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const assert = require("assert");

const os_1 = require("os");

const path = require("path");

const vscode = require("vscode");

const constants_1 = require("../constants");

const initialize_1 = require("../initialize");

const textUtils_1 = require("../textUtils");

const autoCompPath = path.join(__dirname, '..', '..', '..', 'src', 'test', 'pythonFiles', 'autocomp');
const hoverPath = path.join(__dirname, '..', '..', '..', 'src', 'test', 'pythonFiles', 'hover');
const fileOne = path.join(autoCompPath, 'one.py');
const fileThree = path.join(autoCompPath, 'three.py');
const fileEncoding = path.join(autoCompPath, 'four.py');
const fileEncodingUsed = path.join(autoCompPath, 'five.py');
const fileHover = path.join(autoCompPath, 'hoverTest.py');
const fileStringFormat = path.join(hoverPath, 'functionHover.py'); // tslint:disable-next-line:max-func-body-length

suite('Hover Definition (Jedi)', () => {
  suiteSetup(function () {
    return __awaiter(this, void 0, void 0, function* () {
      if (constants_1.IsLanguageServerTest()) {
        // tslint:disable-next-line:no-invalid-this
        this.skip();
      }

      yield initialize_1.initialize();
    });
  });
  setup(initialize_1.initializeTest);
  suiteTeardown(initialize_1.closeActiveWindows);
  teardown(initialize_1.closeActiveWindows);
  test('Method', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileOne).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(30, 5);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '30,4', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '30,11', 'End position is incorrect');
      assert.equal(def[0].contents.length, 1, 'Invalid content items'); // tslint:disable-next-line:prefer-template

      const expectedContent = '```python' + os_1.EOL + 'def method1()' + os_1.EOL + '```' + os_1.EOL + 'This is method1';
      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), expectedContent, 'function signature incorrect');
    }).then(done, done);
  });
  test('Across files', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileThree).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(1, 12);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '1,9', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '1,12', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'def fun()' + os_1.EOL + '```' + os_1.EOL + 'This is fun', 'Invalid conents');
    }).then(done, done);
  });
  test('With Unicode Characters', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileEncoding).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(25, 6);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '25,4', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '25,7', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'def bar()' + os_1.EOL + '```' + os_1.EOL + '说明 - keep this line, it works' + os_1.EOL + 'delete following line, it works' + os_1.EOL + '如果存在需要等待审批或正在执行的任务，将不刷新页面', 'Invalid conents');
    }).then(done, done);
  });
  test('Across files with Unicode Characters', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileEncodingUsed).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(1, 11);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '1,5', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '1,16', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'def showMessage()' + os_1.EOL + '```' + os_1.EOL + 'Кюм ут жэмпэр пошжим льаборэж, коммюны янтэрэсщэт нам ед, декта игнота ныморэ жят эи. ' + os_1.EOL + 'Шэа декам экшырки эи, эи зыд эррэм докэндё, векж факэтэ пэрчыквюэрёж ку.', 'Invalid conents');
    }).then(done, done);
  });
  test('Nothing for keywords (class)', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileOne).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(5, 1);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(def => {
      assert.equal(def.length, 0, 'Definition length is incorrect');
    }).then(done, done);
  });
  test('Nothing for keywords (for)', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(3, 1);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(def => {
      assert.equal(def.length, 0, 'Definition length is incorrect');
    }).then(done, done);
  });
  test('Highlighting Class', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(11, 15);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '11,12', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '11,18', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      const documentation = '```python' + os_1.EOL + 'class Random(x=None)' + os_1.EOL + '```' + os_1.EOL + 'Random number generator base class used by bound module functions.' + os_1.EOL + '' + os_1.EOL + 'Used to instantiate instances of Random to get generators that don\'t' + os_1.EOL + 'share state.' + os_1.EOL + '' + os_1.EOL + 'Class Random can also be subclassed if you want to use a different basic' + os_1.EOL + 'generator of your own devising: in that case, override the following' + os_1.EOL + 'methods: random(), seed(), getstate(), and setstate().' + os_1.EOL + 'Optionally, implement a getrandbits() method so that randrange()' + os_1.EOL + 'can cover arbitrarily large ranges.';
      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), documentation, 'Invalid conents');
    }).then(done, done);
  });
  test('Highlight Method', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(12, 10);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '12,5', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '12,12', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'def randint(a, b)' + os_1.EOL + '```' + os_1.EOL + 'Return random integer in range [a, b], including both end points.', 'Invalid conents');
    }).then(done, done);
  });
  test('Highlight Function', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(8, 14);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '8,11', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '8,15', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'def acos(x)' + os_1.EOL + '```' + os_1.EOL + 'Return the arc cosine (measured in radians) of x.', 'Invalid conents');
    }).then(done, done);
  });
  test('Highlight Multiline Method Signature', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(14, 14);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(`${def[0].range.start.line},${def[0].range.start.character}`, '14,9', 'Start position is incorrect');
      assert.equal(`${def[0].range.end.line},${def[0].range.end.character}`, '14,15', 'End position is incorrect'); // tslint:disable-next-line:prefer-template

      assert.equal(textUtils_1.normalizeMarkedString(def[0].contents[0]), '```python' + os_1.EOL + 'class Thread(group=None, target=None, name=None, args=(), kwargs=None, verbose=None)' + os_1.EOL + '```' + os_1.EOL + 'A class that represents a thread of control.' + os_1.EOL + '' + os_1.EOL + 'This class can be safely subclassed in a limited fashion.', 'Invalid content items');
    }).then(done, done);
  });
  test('Variable', done => {
    let textDocument;
    vscode.workspace.openTextDocument(fileHover).then(document => {
      textDocument = document;
      return vscode.window.showTextDocument(textDocument);
    }).then(editor => {
      assert(vscode.window.activeTextEditor, 'No active editor');
      const position = new vscode.Position(6, 2);
      return vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    }).then(result => {
      const def = result;
      assert.equal(def.length, 1, 'Definition length is incorrect');
      assert.equal(def[0].contents.length, 1, 'Only expected one result');
      const contents = textUtils_1.normalizeMarkedString(def[0].contents[0]);

      if (contents.indexOf('```python') === -1) {
        assert.fail(contents, '', 'First line is incorrect', 'compare');
      }

      if (contents.indexOf('rnd: Random') === -1) {
        assert.fail(contents, '', 'Variable name or type are missing', 'compare');
      }
    }).then(done, done);
  });
  test('Hover over method shows proper text.', () => __awaiter(void 0, void 0, void 0, function* () {
    const textDocument = yield vscode.workspace.openTextDocument(fileStringFormat);
    yield vscode.window.showTextDocument(textDocument);
    const position = new vscode.Position(8, 4);
    const def = yield vscode.commands.executeCommand('vscode.executeHoverProvider', textDocument.uri, position);
    assert.equal(def.length, 1, 'Definition length is incorrect');
    assert.equal(def[0].contents.length, 1, 'Only expected one result');
    const contents = textUtils_1.normalizeMarkedString(def[0].contents[0]);

    if (contents.indexOf('def my_func') === -1) {
      assert.fail(contents, '', '\'def my_func\' is missing', 'compare');
    }

    if (contents.indexOf('This is a test.') === -1 && contents.indexOf('It also includes this text, too.') === -1) {
      assert.fail(contents, '', 'Expected custom function text missing', 'compare');
    }
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvdmVyLmplZGkudGVzdC5qcyJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiYXNzZXJ0IiwicmVxdWlyZSIsIm9zXzEiLCJwYXRoIiwidnNjb2RlIiwiY29uc3RhbnRzXzEiLCJpbml0aWFsaXplXzEiLCJ0ZXh0VXRpbHNfMSIsImF1dG9Db21wUGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJob3ZlclBhdGgiLCJmaWxlT25lIiwiZmlsZVRocmVlIiwiZmlsZUVuY29kaW5nIiwiZmlsZUVuY29kaW5nVXNlZCIsImZpbGVIb3ZlciIsImZpbGVTdHJpbmdGb3JtYXQiLCJzdWl0ZSIsInN1aXRlU2V0dXAiLCJJc0xhbmd1YWdlU2VydmVyVGVzdCIsInNraXAiLCJpbml0aWFsaXplIiwic2V0dXAiLCJpbml0aWFsaXplVGVzdCIsInN1aXRlVGVhcmRvd24iLCJjbG9zZUFjdGl2ZVdpbmRvd3MiLCJ0ZWFyZG93biIsInRlc3QiLCJ0ZXh0RG9jdW1lbnQiLCJ3b3Jrc3BhY2UiLCJvcGVuVGV4dERvY3VtZW50IiwiZG9jdW1lbnQiLCJ3aW5kb3ciLCJzaG93VGV4dERvY3VtZW50IiwiZWRpdG9yIiwiYWN0aXZlVGV4dEVkaXRvciIsInBvc2l0aW9uIiwiUG9zaXRpb24iLCJjb21tYW5kcyIsImV4ZWN1dGVDb21tYW5kIiwidXJpIiwiZGVmIiwiZXF1YWwiLCJsZW5ndGgiLCJyYW5nZSIsInN0YXJ0IiwibGluZSIsImNoYXJhY3RlciIsImVuZCIsImNvbnRlbnRzIiwiZXhwZWN0ZWRDb250ZW50IiwiRU9MIiwibm9ybWFsaXplTWFya2VkU3Ry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TXRDLE1BQU0sQ0FBQ21DLFFBQVAsQ0FBZ0JDLGNBQWhCLENBQStCLDZCQUEvQixFQUE4RFgsWUFBWSxDQUFDWSxHQUEzRSxFQUFnRkosUUFBaEYsQ0FBbkI7QUFDQXJDLElBQUFBLE1BQU0sQ0FBQzJDLEtBQVAsQ0FBYUQsR0FBRyxDQUFDRSxNQUFqQixFQUF5QixDQUF6QixFQUE0QixnQ0FBNUI7QUFDQTVDLElBQUFBLE1BQU0sQ0FBQzJDLEtBQVAsQ0FBYUQsR0FBRyxDQUFDLENBQUQsQ0FBSCxDQUFPUSxRQUFQLENBQWdCTixNQUE3QixFQUFxQyxDQUFyQyxFQUF3QywwQkFBeEM7QUFDQSxVQUFNTSxRQUFRLEdBQUczQyxXQUFXLENBQUM4QyxxQkFBWixDQUFrQ1gsR0FBRyxDQUFDLENBQUQsQ0FBSCxDQUFPUSxRQUFQLENBQWdCLENBQWhCLENBQWxDLENBQWpCOztBQUNBLFFBQUlBLFFBQVEsQ0FBQ0ssT0FBVCxDQUFpQixhQUFqQixNQUFvQyxDQUFDLENBQXpDLEVBQTRDO0FBQ3hDdkQsTUFBQUEsTUFBTSxDQUFDd0QsSUFBUCxDQUFZTixRQUFaLEVBQXNCLEVBQXRCLEVBQTBCLDRCQUExQixFQUF3RCxTQUF4RDtBQUNIOztBQUNELFFBQUlBLFFBQVEsQ0FBQ0ssT0FBVCxDQUFpQixpQkFBakIsTUFBd0MsQ0FBQyxDQUF6QyxJQUNBTCxRQUFRLENBQUNLLE9BQVQsQ0FBaUIsa0NBQWpCLE1BQXlELENBQUMsQ0FEOUQsRUFDaUU7QUFDN0R2RCxNQUFBQSxNQUFNLENBQUN3RCxJQUFQLENBQVlOLFFBQVosRUFBc0IsRUFBdEIsRUFBMEIsdUNBQTFCLEVBQW1FLFNBQW5FO0FBQ0g7QUFDSixHQWYyRCxDQUF4RCxDQUFKO0FBZ0JILENBN1BJLENBQUwiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xyXG5jb25zdCBvc18xID0gcmVxdWlyZShcIm9zXCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IHZzY29kZSA9IHJlcXVpcmUoXCJ2c2NvZGVcIik7XHJcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcclxuY29uc3QgaW5pdGlhbGl6ZV8xID0gcmVxdWlyZShcIi4uL2luaXRpYWxpemVcIik7XHJcbmNvbnN0IHRleHRVdGlsc18xID0gcmVxdWlyZShcIi4uL3RleHRVdGlsc1wiKTtcclxuY29uc3QgYXV0b0NvbXBQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJy4uJywgJy4uJywgJ3NyYycsICd0ZXN0JywgJ3B5dGhvbkZpbGVzJywgJ2F1dG9jb21wJyk7XHJcbmNvbnN0IGhvdmVyUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICdzcmMnLCAndGVzdCcsICdweXRob25GaWxlcycsICdob3ZlcicpO1xyXG5jb25zdCBmaWxlT25lID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ29uZS5weScpO1xyXG5jb25zdCBmaWxlVGhyZWUgPSBwYXRoLmpvaW4oYXV0b0NvbXBQYXRoLCAndGhyZWUucHknKTtcclxuY29uc3QgZmlsZUVuY29kaW5nID0gcGF0aC5qb2luKGF1dG9Db21wUGF0aCwgJ2ZvdXIucHknKTtcclxuY29uc3QgZmlsZUVuY29kaW5nVXNlZCA9IHBhdGguam9pbihhdXRvQ29tcFBhdGgsICdmaXZlLnB5Jyk7XHJcbmNvbnN0IGZpbGVIb3ZlciA9IHBhdGguam9pbihhdXRvQ29tcFBhdGgsICdob3ZlclRlc3QucHknKTtcclxuY29uc3QgZmlsZVN0cmluZ0Zvcm1hdCA9IHBhdGguam9pbihob3ZlclBhdGgsICdmdW5jdGlvbkhvdmVyLnB5Jyk7XHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtZnVuYy1ib2R5LWxlbmd0aFxyXG5zdWl0ZSgnSG92ZXIgRGVmaW5pdGlvbiAoSmVkaSknLCAoKSA9PiB7XHJcbiAgICBzdWl0ZVNldHVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBpZiAoY29uc3RhbnRzXzEuSXNMYW5ndWFnZVNlcnZlclRlc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5za2lwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeWllbGQgaW5pdGlhbGl6ZV8xLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgc2V0dXAoaW5pdGlhbGl6ZV8xLmluaXRpYWxpemVUZXN0KTtcclxuICAgIHN1aXRlVGVhcmRvd24oaW5pdGlhbGl6ZV8xLmNsb3NlQWN0aXZlV2luZG93cyk7XHJcbiAgICB0ZWFyZG93bihpbml0aWFsaXplXzEuY2xvc2VBY3RpdmVXaW5kb3dzKTtcclxuICAgIHRlc3QoJ01ldGhvZCcsIGRvbmUgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0RG9jdW1lbnQ7XHJcbiAgICAgICAgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVPbmUpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDMwLCA1KTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVIb3ZlclByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVmID0gcmVzdWx0O1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmLmxlbmd0aCwgMSwgJ0RlZmluaXRpb24gbGVuZ3RoIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoYCR7ZGVmWzBdLnJhbmdlLnN0YXJ0LmxpbmV9LCR7ZGVmWzBdLnJhbmdlLnN0YXJ0LmNoYXJhY3Rlcn1gLCAnMzAsNCcsICdTdGFydCBwb3NpdGlvbiBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5lbmQubGluZX0sJHtkZWZbMF0ucmFuZ2UuZW5kLmNoYXJhY3Rlcn1gLCAnMzAsMTEnLCAnRW5kIHBvc2l0aW9uIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmWzBdLmNvbnRlbnRzLmxlbmd0aCwgMSwgJ0ludmFsaWQgY29udGVudCBpdGVtcycpO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLXRlbXBsYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ29udGVudCA9ICdgYGBweXRob24nICsgb3NfMS5FT0wgKyAnZGVmIG1ldGhvZDEoKScgKyBvc18xLkVPTCArICdgYGAnICsgb3NfMS5FT0wgKyAnVGhpcyBpcyBtZXRob2QxJztcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHRleHRVdGlsc18xLm5vcm1hbGl6ZU1hcmtlZFN0cmluZyhkZWZbMF0uY29udGVudHNbMF0pLCBleHBlY3RlZENvbnRlbnQsICdmdW5jdGlvbiBzaWduYXR1cmUgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnQWNyb3NzIGZpbGVzJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZVRocmVlKS50aGVuKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgdGV4dERvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICB9KS50aGVuKGVkaXRvciA9PiB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2c2NvZGUud2luZG93LmFjdGl2ZVRleHRFZGl0b3IsICdObyBhY3RpdmUgZWRpdG9yJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbigxLCAxMik7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoJ3ZzY29kZS5leGVjdXRlSG92ZXJQcm92aWRlcicsIHRleHREb2N1bWVudC51cmksIHBvc2l0aW9uKTtcclxuICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZiA9IHJlc3VsdDtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGRlZi5sZW5ndGgsIDEsICdEZWZpbml0aW9uIGxlbmd0aCBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5zdGFydC5saW5lfSwke2RlZlswXS5yYW5nZS5zdGFydC5jaGFyYWN0ZXJ9YCwgJzEsOScsICdTdGFydCBwb3NpdGlvbiBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5lbmQubGluZX0sJHtkZWZbMF0ucmFuZ2UuZW5kLmNoYXJhY3Rlcn1gLCAnMSwxMicsICdFbmQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItdGVtcGxhdGVcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHRleHRVdGlsc18xLm5vcm1hbGl6ZU1hcmtlZFN0cmluZyhkZWZbMF0uY29udGVudHNbMF0pLCAnYGBgcHl0aG9uJyArIG9zXzEuRU9MICsgJ2RlZiBmdW4oKScgKyBvc18xLkVPTCArICdgYGAnICsgb3NfMS5FT0wgKyAnVGhpcyBpcyBmdW4nLCAnSW52YWxpZCBjb25lbnRzJyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnV2l0aCBVbmljb2RlIENoYXJhY3RlcnMnLCBkb25lID0+IHtcclxuICAgICAgICBsZXQgdGV4dERvY3VtZW50O1xyXG4gICAgICAgIHZzY29kZS53b3Jrc3BhY2Uub3BlblRleHREb2N1bWVudChmaWxlRW5jb2RpbmcpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDI1LCA2KTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVIb3ZlclByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVmID0gcmVzdWx0O1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmLmxlbmd0aCwgMSwgJ0RlZmluaXRpb24gbGVuZ3RoIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoYCR7ZGVmWzBdLnJhbmdlLnN0YXJ0LmxpbmV9LCR7ZGVmWzBdLnJhbmdlLnN0YXJ0LmNoYXJhY3Rlcn1gLCAnMjUsNCcsICdTdGFydCBwb3NpdGlvbiBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5lbmQubGluZX0sJHtkZWZbMF0ucmFuZ2UuZW5kLmNoYXJhY3Rlcn1gLCAnMjUsNycsICdFbmQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItdGVtcGxhdGVcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHRleHRVdGlsc18xLm5vcm1hbGl6ZU1hcmtlZFN0cmluZyhkZWZbMF0uY29udGVudHNbMF0pLCAnYGBgcHl0aG9uJyArIG9zXzEuRU9MICsgJ2RlZiBiYXIoKScgKyBvc18xLkVPTCArICdgYGAnICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ+ivtOaYjiAtIGtlZXAgdGhpcyBsaW5lLCBpdCB3b3JrcycgKyBvc18xLkVPTCArICdkZWxldGUgZm9sbG93aW5nIGxpbmUsIGl0IHdvcmtzJyArXHJcbiAgICAgICAgICAgICAgICBvc18xLkVPTCArICflpoLmnpzlrZjlnKjpnIDopoHnrYnlvoXlrqHmibnmiJbmraPlnKjmiafooYznmoTku7vliqHvvIzlsIbkuI3liLfmlrDpobXpnaInLCAnSW52YWxpZCBjb25lbnRzJyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnQWNyb3NzIGZpbGVzIHdpdGggVW5pY29kZSBDaGFyYWN0ZXJzJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZUVuY29kaW5nVXNlZCkudGhlbihkb2N1bWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRleHREb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgfSkudGhlbihlZGl0b3IgPT4ge1xyXG4gICAgICAgICAgICBhc3NlcnQodnNjb2RlLndpbmRvdy5hY3RpdmVUZXh0RWRpdG9yLCAnTm8gYWN0aXZlIGVkaXRvcicpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oMSwgMTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUhvdmVyUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZWYgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChkZWYubGVuZ3RoLCAxLCAnRGVmaW5pdGlvbiBsZW5ndGggaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChgJHtkZWZbMF0ucmFuZ2Uuc3RhcnQubGluZX0sJHtkZWZbMF0ucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyfWAsICcxLDUnLCAnU3RhcnQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChgJHtkZWZbMF0ucmFuZ2UuZW5kLmxpbmV9LCR7ZGVmWzBdLnJhbmdlLmVuZC5jaGFyYWN0ZXJ9YCwgJzEsMTYnLCAnRW5kIHBvc2l0aW9uIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLXRlbXBsYXRlXHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbCh0ZXh0VXRpbHNfMS5ub3JtYWxpemVNYXJrZWRTdHJpbmcoZGVmWzBdLmNvbnRlbnRzWzBdKSwgJ2BgYHB5dGhvbicgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnZGVmIHNob3dNZXNzYWdlKCknICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ2BgYCcgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAn0JrRjtC8INGD0YIg0LbRjdC80L/RjdGAINC/0L7RiNC20LjQvCDQu9GM0LDQsdC+0YDRjdC2LCDQutC+0LzQvNGO0L3RiyDRj9C90YLRjdGA0Y3RgdGJ0Y3RgiDQvdCw0Lwg0LXQtCwg0LTQtdC60YLQsCDQuNCz0L3QvtGC0LAg0L3Ri9C80L7RgNGNINC20Y/RgiDRjdC4LiAnICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ9Co0Y3QsCDQtNC10LrQsNC8INGN0LrRiNGL0YDQutC4INGN0LgsINGN0Lgg0LfRi9C0INGN0YDRgNGN0Lwg0LTQvtC60Y3QvdC00ZEsINCy0LXQutC2INGE0LDQutGN0YLRjSDQv9GN0YDRh9GL0LrQstGO0Y3RgNGR0LYg0LrRgy4nLCAnSW52YWxpZCBjb25lbnRzJyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnTm90aGluZyBmb3Iga2V5d29yZHMgKGNsYXNzKScsIGRvbmUgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0RG9jdW1lbnQ7XHJcbiAgICAgICAgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVPbmUpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDUsIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUhvdmVyUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSkudGhlbihkZWYgPT4ge1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmLmxlbmd0aCwgMCwgJ0RlZmluaXRpb24gbGVuZ3RoIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgIH0pLnRoZW4oZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ05vdGhpbmcgZm9yIGtleXdvcmRzIChmb3IpJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZUhvdmVyKS50aGVuKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgdGV4dERvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICB9KS50aGVuKGVkaXRvciA9PiB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2c2NvZGUud2luZG93LmFjdGl2ZVRleHRFZGl0b3IsICdObyBhY3RpdmUgZWRpdG9yJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbigzLCAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVIb3ZlclByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4oZGVmID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGRlZi5sZW5ndGgsIDAsICdEZWZpbml0aW9uIGxlbmd0aCBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICB9KS50aGVuKGRvbmUsIGRvbmUpO1xyXG4gICAgfSk7XHJcbiAgICB0ZXN0KCdIaWdobGlnaHRpbmcgQ2xhc3MnLCBkb25lID0+IHtcclxuICAgICAgICBsZXQgdGV4dERvY3VtZW50O1xyXG4gICAgICAgIHZzY29kZS53b3Jrc3BhY2Uub3BlblRleHREb2N1bWVudChmaWxlSG92ZXIpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDExLCAxNSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoJ3ZzY29kZS5leGVjdXRlSG92ZXJQcm92aWRlcicsIHRleHREb2N1bWVudC51cmksIHBvc2l0aW9uKTtcclxuICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZiA9IHJlc3VsdDtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGRlZi5sZW5ndGgsIDEsICdEZWZpbml0aW9uIGxlbmd0aCBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5zdGFydC5saW5lfSwke2RlZlswXS5yYW5nZS5zdGFydC5jaGFyYWN0ZXJ9YCwgJzExLDEyJywgJ1N0YXJ0IHBvc2l0aW9uIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoYCR7ZGVmWzBdLnJhbmdlLmVuZC5saW5lfSwke2RlZlswXS5yYW5nZS5lbmQuY2hhcmFjdGVyfWAsICcxMSwxOCcsICdFbmQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItdGVtcGxhdGVcclxuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRhdGlvbiA9ICdgYGBweXRob24nICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzIFJhbmRvbSh4PU5vbmUpJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdgYGAnICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ1JhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGJhc2UgY2xhc3MgdXNlZCBieSBib3VuZCBtb2R1bGUgZnVuY3Rpb25zLicgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdVc2VkIHRvIGluc3RhbnRpYXRlIGluc3RhbmNlcyBvZiBSYW5kb20gdG8gZ2V0IGdlbmVyYXRvcnMgdGhhdCBkb25cXCd0JyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdzaGFyZSBzdGF0ZS4nICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJycgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnQ2xhc3MgUmFuZG9tIGNhbiBhbHNvIGJlIHN1YmNsYXNzZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgZGlmZmVyZW50IGJhc2ljJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdnZW5lcmF0b3Igb2YgeW91ciBvd24gZGV2aXNpbmc6IGluIHRoYXQgY2FzZSwgb3ZlcnJpZGUgdGhlIGZvbGxvd2luZycgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnbWV0aG9kczogcmFuZG9tKCksIHNlZWQoKSwgZ2V0c3RhdGUoKSwgYW5kIHNldHN0YXRlKCkuJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdPcHRpb25hbGx5LCBpbXBsZW1lbnQgYSBnZXRyYW5kYml0cygpIG1ldGhvZCBzbyB0aGF0IHJhbmRyYW5nZSgpJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdjYW4gY292ZXIgYXJiaXRyYXJpbHkgbGFyZ2UgcmFuZ2VzLic7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbCh0ZXh0VXRpbHNfMS5ub3JtYWxpemVNYXJrZWRTdHJpbmcoZGVmWzBdLmNvbnRlbnRzWzBdKSwgZG9jdW1lbnRhdGlvbiwgJ0ludmFsaWQgY29uZW50cycpO1xyXG4gICAgICAgIH0pLnRoZW4oZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ0hpZ2hsaWdodCBNZXRob2QnLCBkb25lID0+IHtcclxuICAgICAgICBsZXQgdGV4dERvY3VtZW50O1xyXG4gICAgICAgIHZzY29kZS53b3Jrc3BhY2Uub3BlblRleHREb2N1bWVudChmaWxlSG92ZXIpLnRoZW4oZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0RG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS53aW5kb3cuc2hvd1RleHREb2N1bWVudCh0ZXh0RG9jdW1lbnQpO1xyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciwgJ05vIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgdnNjb2RlLlBvc2l0aW9uKDEyLCAxMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoJ3ZzY29kZS5leGVjdXRlSG92ZXJQcm92aWRlcicsIHRleHREb2N1bWVudC51cmksIHBvc2l0aW9uKTtcclxuICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZiA9IHJlc3VsdDtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGRlZi5sZW5ndGgsIDEsICdEZWZpbml0aW9uIGxlbmd0aCBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGAke2RlZlswXS5yYW5nZS5zdGFydC5saW5lfSwke2RlZlswXS5yYW5nZS5zdGFydC5jaGFyYWN0ZXJ9YCwgJzEyLDUnLCAnU3RhcnQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChgJHtkZWZbMF0ucmFuZ2UuZW5kLmxpbmV9LCR7ZGVmWzBdLnJhbmdlLmVuZC5jaGFyYWN0ZXJ9YCwgJzEyLDEyJywgJ0VuZCBwb3NpdGlvbiBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci10ZW1wbGF0ZVxyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwodGV4dFV0aWxzXzEubm9ybWFsaXplTWFya2VkU3RyaW5nKGRlZlswXS5jb250ZW50c1swXSksICdgYGBweXRob24nICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ2RlZiByYW5kaW50KGEsIGIpJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdgYGAnICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ1JldHVybiByYW5kb20gaW50ZWdlciBpbiByYW5nZSBbYSwgYl0sIGluY2x1ZGluZyBib3RoIGVuZCBwb2ludHMuJywgJ0ludmFsaWQgY29uZW50cycpO1xyXG4gICAgICAgIH0pLnRoZW4oZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ0hpZ2hsaWdodCBGdW5jdGlvbicsIGRvbmUgPT4ge1xyXG4gICAgICAgIGxldCB0ZXh0RG9jdW1lbnQ7XHJcbiAgICAgICAgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KGZpbGVIb3ZlcikudGhlbihkb2N1bWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRleHREb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KHRleHREb2N1bWVudCk7XHJcbiAgICAgICAgfSkudGhlbihlZGl0b3IgPT4ge1xyXG4gICAgICAgICAgICBhc3NlcnQodnNjb2RlLndpbmRvdy5hY3RpdmVUZXh0RWRpdG9yLCAnTm8gYWN0aXZlIGVkaXRvcicpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oOCwgMTQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUhvdmVyUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZWYgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChkZWYubGVuZ3RoLCAxLCAnRGVmaW5pdGlvbiBsZW5ndGggaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChgJHtkZWZbMF0ucmFuZ2Uuc3RhcnQubGluZX0sJHtkZWZbMF0ucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyfWAsICc4LDExJywgJ1N0YXJ0IHBvc2l0aW9uIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoYCR7ZGVmWzBdLnJhbmdlLmVuZC5saW5lfSwke2RlZlswXS5yYW5nZS5lbmQuY2hhcmFjdGVyfWAsICc4LDE1JywgJ0VuZCBwb3NpdGlvbiBpcyBpbmNvcnJlY3QnKTtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci10ZW1wbGF0ZVxyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwodGV4dFV0aWxzXzEubm9ybWFsaXplTWFya2VkU3RyaW5nKGRlZlswXS5jb250ZW50c1swXSksICdgYGBweXRob24nICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ2RlZiBhY29zKHgpJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdgYGAnICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ1JldHVybiB0aGUgYXJjIGNvc2luZSAobWVhc3VyZWQgaW4gcmFkaWFucykgb2YgeC4nLCAnSW52YWxpZCBjb25lbnRzJyk7XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnSGlnaGxpZ2h0IE11bHRpbGluZSBNZXRob2QgU2lnbmF0dXJlJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZUhvdmVyKS50aGVuKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgdGV4dERvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICB9KS50aGVuKGVkaXRvciA9PiB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2c2NvZGUud2luZG93LmFjdGl2ZVRleHRFZGl0b3IsICdObyBhY3RpdmUgZWRpdG9yJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbigxNCwgMTQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCd2c2NvZGUuZXhlY3V0ZUhvdmVyUHJvdmlkZXInLCB0ZXh0RG9jdW1lbnQudXJpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZWYgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChkZWYubGVuZ3RoLCAxLCAnRGVmaW5pdGlvbiBsZW5ndGggaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChgJHtkZWZbMF0ucmFuZ2Uuc3RhcnQubGluZX0sJHtkZWZbMF0ucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyfWAsICcxNCw5JywgJ1N0YXJ0IHBvc2l0aW9uIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoYCR7ZGVmWzBdLnJhbmdlLmVuZC5saW5lfSwke2RlZlswXS5yYW5nZS5lbmQuY2hhcmFjdGVyfWAsICcxNCwxNScsICdFbmQgcG9zaXRpb24gaXMgaW5jb3JyZWN0Jyk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItdGVtcGxhdGVcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHRleHRVdGlsc18xLm5vcm1hbGl6ZU1hcmtlZFN0cmluZyhkZWZbMF0uY29udGVudHNbMF0pLCAnYGBgcHl0aG9uJyArIG9zXzEuRU9MICtcclxuICAgICAgICAgICAgICAgICdjbGFzcyBUaHJlYWQoZ3JvdXA9Tm9uZSwgdGFyZ2V0PU5vbmUsIG5hbWU9Tm9uZSwgYXJncz0oKSwga3dhcmdzPU5vbmUsIHZlcmJvc2U9Tm9uZSknICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJ2BgYCcgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnQSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSB0aHJlYWQgb2YgY29udHJvbC4nICsgb3NfMS5FT0wgK1xyXG4gICAgICAgICAgICAgICAgJycgKyBvc18xLkVPTCArXHJcbiAgICAgICAgICAgICAgICAnVGhpcyBjbGFzcyBjYW4gYmUgc2FmZWx5IHN1YmNsYXNzZWQgaW4gYSBsaW1pdGVkIGZhc2hpb24uJywgJ0ludmFsaWQgY29udGVudCBpdGVtcycpO1xyXG4gICAgICAgIH0pLnRoZW4oZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ1ZhcmlhYmxlJywgZG9uZSA9PiB7XHJcbiAgICAgICAgbGV0IHRleHREb2N1bWVudDtcclxuICAgICAgICB2c2NvZGUud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoZmlsZUhvdmVyKS50aGVuKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgdGV4dERvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICB9KS50aGVuKGVkaXRvciA9PiB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2c2NvZGUud2luZG93LmFjdGl2ZVRleHRFZGl0b3IsICdObyBhY3RpdmUgZWRpdG9yJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IHZzY29kZS5Qb3NpdGlvbig2LCAyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVIb3ZlclByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVmID0gcmVzdWx0O1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmLmxlbmd0aCwgMSwgJ0RlZmluaXRpb24gbGVuZ3RoIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZGVmWzBdLmNvbnRlbnRzLmxlbmd0aCwgMSwgJ09ubHkgZXhwZWN0ZWQgb25lIHJlc3VsdCcpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IHRleHRVdGlsc18xLm5vcm1hbGl6ZU1hcmtlZFN0cmluZyhkZWZbMF0uY29udGVudHNbMF0pO1xyXG4gICAgICAgICAgICBpZiAoY29udGVudHMuaW5kZXhPZignYGBgcHl0aG9uJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZmFpbChjb250ZW50cywgJycsICdGaXJzdCBsaW5lIGlzIGluY29ycmVjdCcsICdjb21wYXJlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbnRlbnRzLmluZGV4T2YoJ3JuZDogUmFuZG9tJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZmFpbChjb250ZW50cywgJycsICdWYXJpYWJsZSBuYW1lIG9yIHR5cGUgYXJlIG1pc3NpbmcnLCAnY29tcGFyZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihkb25lLCBkb25lKTtcclxuICAgIH0pO1xyXG4gICAgdGVzdCgnSG92ZXIgb3ZlciBtZXRob2Qgc2hvd3MgcHJvcGVyIHRleHQuJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHREb2N1bWVudCA9IHlpZWxkIHZzY29kZS53b3Jrc3BhY2Uub3BlblRleHREb2N1bWVudChmaWxlU3RyaW5nRm9ybWF0KTtcclxuICAgICAgICB5aWVsZCB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQodGV4dERvY3VtZW50KTtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyB2c2NvZGUuUG9zaXRpb24oOCwgNCk7XHJcbiAgICAgICAgY29uc3QgZGVmID0gKHlpZWxkIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgndnNjb2RlLmV4ZWN1dGVIb3ZlclByb3ZpZGVyJywgdGV4dERvY3VtZW50LnVyaSwgcG9zaXRpb24pKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwoZGVmLmxlbmd0aCwgMSwgJ0RlZmluaXRpb24gbGVuZ3RoIGlzIGluY29ycmVjdCcpO1xyXG4gICAgICAgIGFzc2VydC5lcXVhbChkZWZbMF0uY29udGVudHMubGVuZ3RoLCAxLCAnT25seSBleHBlY3RlZCBvbmUgcmVzdWx0Jyk7XHJcbiAgICAgICAgY29uc3QgY29udGVudHMgPSB0ZXh0VXRpbHNfMS5ub3JtYWxpemVNYXJrZWRTdHJpbmcoZGVmWzBdLmNvbnRlbnRzWzBdKTtcclxuICAgICAgICBpZiAoY29udGVudHMuaW5kZXhPZignZGVmIG15X2Z1bmMnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoY29udGVudHMsICcnLCAnXFwnZGVmIG15X2Z1bmNcXCcgaXMgbWlzc2luZycsICdjb21wYXJlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50cy5pbmRleE9mKCdUaGlzIGlzIGEgdGVzdC4nKSA9PT0gLTEgJiZcclxuICAgICAgICAgICAgY29udGVudHMuaW5kZXhPZignSXQgYWxzbyBpbmNsdWRlcyB0aGlzIHRleHQsIHRvby4nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoY29udGVudHMsICcnLCAnRXhwZWN0ZWQgY3VzdG9tIGZ1bmN0aW9uIHRleHQgbWlzc2luZycsICdjb21wYXJlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkpO1xyXG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG92ZXIuamVkaS50ZXN0LmpzLm1hcCJdfQ==