// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:no-any max-func-body-length

const chai_1 = require("chai");

const typemoq = require("typemoq");

const types_1 = require("../../../client/common/application/types");

const types_2 = require("../../../client/common/types");

const constants_1 = require("../../../client/debugger/constants");

const banner_1 = require("../../../client/debugger/extension/banner");

suite('Debugging - Banner', () => {
  let serviceContainer;
  let browser;
  let launchCounterState;
  let launchThresholdCounterState;
  let showBannerState;
  let userSelected;
  let userSelectedState;
  let debugService;
  let appShell;
  let runtime;
  let banner;
  const message = 'Can you please take 2 minutes to tell us how the debugger is working for you?';
  const yes = 'Yes, take survey now';
  const no = 'No thanks';
  const later = 'Remind me later';
  setup(() => {
    serviceContainer = typemoq.Mock.ofType();
    browser = typemoq.Mock.ofType();
    debugService = typemoq.Mock.ofType();
    const logger = typemoq.Mock.ofType();
    launchCounterState = typemoq.Mock.ofType();
    showBannerState = typemoq.Mock.ofType();
    appShell = typemoq.Mock.ofType();
    runtime = typemoq.Mock.ofType();
    launchThresholdCounterState = typemoq.Mock.ofType();
    userSelected = true;
    userSelectedState = typemoq.Mock.ofType();
    const factory = typemoq.Mock.ofType();
    factory.setup(f => f.createGlobalPersistentState(typemoq.It.isValue(banner_1.PersistentStateKeys.DebuggerLaunchCounter), typemoq.It.isAny())).returns(() => launchCounterState.object);
    factory.setup(f => f.createGlobalPersistentState(typemoq.It.isValue(banner_1.PersistentStateKeys.ShowBanner), typemoq.It.isAny())).returns(() => showBannerState.object);
    factory.setup(f => f.createGlobalPersistentState(typemoq.It.isValue(banner_1.PersistentStateKeys.DebuggerLaunchThresholdCounter), typemoq.It.isAny())).returns(() => launchThresholdCounterState.object);
    factory.setup(f => f.createGlobalPersistentState(typemoq.It.isValue(banner_1.PersistentStateKeys.UserSelected), typemoq.It.isAny())).returns(() => userSelectedState.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.IBrowserService))).returns(() => browser.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.IPersistentStateFactory))).returns(() => factory.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_1.IDebugService))).returns(() => debugService.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.ILogger))).returns(() => logger.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.IDisposableRegistry))).returns(() => []);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_1.IApplicationShell))).returns(() => appShell.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.IRandom))).returns(() => runtime.object);
    userSelectedState.setup(s => s.value).returns(() => userSelected);
    banner = new banner_1.DebuggerBanner(serviceContainer.object);
  });
  test('Browser is displayed when launching service along with debugger launch counter', () => __awaiter(void 0, void 0, void 0, function* () {
    const debuggerLaunchCounter = 1234;
    launchCounterState.setup(l => l.value).returns(() => debuggerLaunchCounter).verifiable(typemoq.Times.once());
    browser.setup(b => b.launch(typemoq.It.isValue(`https://www.research.net/r/N7B25RV?n=${debuggerLaunchCounter}`))).verifiable(typemoq.Times.once());
    appShell.setup(a => a.showInformationMessage(typemoq.It.isValue(message), typemoq.It.isValue(yes), typemoq.It.isValue(no), typemoq.It.isValue(later))).returns(() => Promise.resolve(yes));
    yield banner.show();
    launchCounterState.verifyAll();
    browser.verifyAll();
  }));

  for (let i = 0; i < 100; i = i + 1) {
    const randomSample = i;
    const expected = i < 10;
    test(`users are selected 10% of the time (random: ${i})`, () => __awaiter(void 0, void 0, void 0, function* () {
      showBannerState.setup(s => s.value).returns(() => true);
      launchCounterState.setup(l => l.value).returns(() => 10);
      launchThresholdCounterState.setup(t => t.value).returns(() => 10);
      userSelected = undefined;
      runtime.setup(r => r.getRandomInt(typemoq.It.isValue(0), typemoq.It.isValue(100))).returns(() => randomSample);
      userSelectedState.setup(u => u.updateValue(typemoq.It.isValue(expected))).returns(() => Promise.resolve()).verifiable(typemoq.Times.once());
      const selected = yield banner.shouldShow();
      chai_1.expect(selected).to.be.equal(expected, 'Incorrect value');
      userSelectedState.verifyAll();
    }));
  }

  for (const randomSample of [0, 10]) {
    const expected = randomSample < 10;
    test(`user selection does not change (random: ${randomSample})`, () => __awaiter(void 0, void 0, void 0, function* () {
      showBannerState.setup(s => s.value).returns(() => true);
      launchCounterState.setup(l => l.value).returns(() => 10);
      launchThresholdCounterState.setup(t => t.value).returns(() => 10);
      userSelected = undefined;
      runtime.setup(r => r.getRandomInt(typemoq.It.isValue(0), typemoq.It.isValue(100))).returns(() => randomSample);
      userSelectedState.setup(u => u.updateValue(typemoq.It.isValue(expected))).returns(() => Promise.resolve()).verifiable(typemoq.Times.once());
      const result1 = yield banner.shouldShow();
      userSelected = expected;
      const result2 = yield banner.shouldShow();
      chai_1.expect(result1).to.be.equal(expected, `randomSample ${randomSample}`);
      chai_1.expect(result2).to.be.equal(expected, `randomSample ${randomSample}`);
      userSelectedState.verifyAll();
    }));
  }

  test('Increment Debugger Launch Counter when debug session starts', () => __awaiter(void 0, void 0, void 0, function* () {
    let onDidTerminateDebugSessionCb;
    debugService.setup(d => d.onDidTerminateDebugSession(typemoq.It.isAny())).callback(cb => onDidTerminateDebugSessionCb = cb).verifiable(typemoq.Times.once());
    const debuggerLaunchCounter = 1234;
    launchCounterState.setup(l => l.value).returns(() => debuggerLaunchCounter).verifiable(typemoq.Times.atLeastOnce());
    launchCounterState.setup(l => l.updateValue(typemoq.It.isValue(debuggerLaunchCounter + 1))).verifiable(typemoq.Times.once());
    showBannerState.setup(s => s.value).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
    banner.initialize();
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    launchCounterState.verifyAll();
    browser.verifyAll();
    debugService.verifyAll();
    showBannerState.verifyAll();
  }));
  test('Do not Increment Debugger Launch Counter when debug session starts and Banner is disabled', () => __awaiter(void 0, void 0, void 0, function* () {
    debugService.setup(d => d.onDidTerminateDebugSession(typemoq.It.isAny())).verifiable(typemoq.Times.never());
    const debuggerLaunchCounter = 1234;
    launchCounterState.setup(l => l.value).returns(() => debuggerLaunchCounter).verifiable(typemoq.Times.never());
    launchCounterState.setup(l => l.updateValue(typemoq.It.isValue(debuggerLaunchCounter + 1))).verifiable(typemoq.Times.never());
    showBannerState.setup(s => s.value).returns(() => false).verifiable(typemoq.Times.atLeastOnce());
    banner.initialize();
    launchCounterState.verifyAll();
    browser.verifyAll();
    debugService.verifyAll();
    showBannerState.verifyAll();
  }));
  test('shouldShow must return false when Banner is disabled', () => __awaiter(void 0, void 0, void 0, function* () {
    showBannerState.setup(s => s.value).returns(() => false).verifiable(typemoq.Times.once());
    chai_1.expect(yield banner.shouldShow()).to.be.equal(false, 'Incorrect value');
    showBannerState.verifyAll();
  }));
  test('shouldShow must return false when Banner is enabled and debug counter is not same as threshold', () => __awaiter(void 0, void 0, void 0, function* () {
    showBannerState.setup(s => s.value).returns(() => true).verifiable(typemoq.Times.once());
    launchCounterState.setup(l => l.value).returns(() => 1).verifiable(typemoq.Times.once());
    launchThresholdCounterState.setup(t => t.value).returns(() => 10).verifiable(typemoq.Times.atLeastOnce());
    chai_1.expect(yield banner.shouldShow()).to.be.equal(false, 'Incorrect value');
    showBannerState.verifyAll();
    launchCounterState.verifyAll();
    launchThresholdCounterState.verifyAll();
  }));
  test('shouldShow must return true when Banner is enabled and debug counter is same as threshold', () => __awaiter(void 0, void 0, void 0, function* () {
    showBannerState.setup(s => s.value).returns(() => true).verifiable(typemoq.Times.once());
    launchCounterState.setup(l => l.value).returns(() => 10).verifiable(typemoq.Times.once());
    launchThresholdCounterState.setup(t => t.value).returns(() => 10).verifiable(typemoq.Times.atLeastOnce());
    chai_1.expect(yield banner.shouldShow()).to.be.equal(true, 'Incorrect value');
    showBannerState.verifyAll();
    launchCounterState.verifyAll();
    launchThresholdCounterState.verifyAll();
  }));
  test('show must be invoked when shouldShow returns true', () => __awaiter(void 0, void 0, void 0, function* () {
    let onDidTerminateDebugSessionCb;
    const currentLaunchCounter = 50;
    debugService.setup(d => d.onDidTerminateDebugSession(typemoq.It.isAny())).callback(cb => onDidTerminateDebugSessionCb = cb).verifiable(typemoq.Times.atLeastOnce());
    showBannerState.setup(s => s.value).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
    launchCounterState.setup(l => l.value).returns(() => currentLaunchCounter).verifiable(typemoq.Times.atLeastOnce());
    launchThresholdCounterState.setup(t => t.value).returns(() => 10).verifiable(typemoq.Times.atLeastOnce());
    launchCounterState.setup(l => l.updateValue(typemoq.It.isValue(currentLaunchCounter + 1))).returns(() => Promise.resolve()).verifiable(typemoq.Times.atLeastOnce());
    appShell.setup(a => a.showInformationMessage(typemoq.It.isValue(message), typemoq.It.isValue(yes), typemoq.It.isValue(no), typemoq.It.isValue(later))).verifiable(typemoq.Times.once());
    banner.initialize();
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    appShell.verifyAll();
    showBannerState.verifyAll();
    launchCounterState.verifyAll();
    launchThresholdCounterState.verifyAll();
  }));
  test('show must not be invoked the second time after dismissing the message', () => __awaiter(void 0, void 0, void 0, function* () {
    let onDidTerminateDebugSessionCb;
    let currentLaunchCounter = 50;
    debugService.setup(d => d.onDidTerminateDebugSession(typemoq.It.isAny())).callback(cb => onDidTerminateDebugSessionCb = cb).verifiable(typemoq.Times.atLeastOnce());
    showBannerState.setup(s => s.value).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
    launchCounterState.setup(l => l.value).returns(() => currentLaunchCounter).verifiable(typemoq.Times.atLeastOnce());
    launchThresholdCounterState.setup(t => t.value).returns(() => 10).verifiable(typemoq.Times.atLeastOnce());
    launchCounterState.setup(l => l.updateValue(typemoq.It.isAny())).callback(() => currentLaunchCounter = currentLaunchCounter + 1);
    appShell.setup(a => a.showInformationMessage(typemoq.It.isValue(message), typemoq.It.isValue(yes), typemoq.It.isValue(no), typemoq.It.isValue(later))).returns(() => Promise.resolve(undefined)).verifiable(typemoq.Times.once());
    banner.initialize();
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    yield onDidTerminateDebugSessionCb({
      type: constants_1.DebuggerTypeName
    });
    appShell.verifyAll();
    showBannerState.verifyAll();
    launchCounterState.verifyAll();
    launchThresholdCounterState.verifyAll();
    chai_1.expect(currentLaunchCounter).to.be.equal(54);
  }));
  test('Disabling banner must store value of \'false\' in global store', () => __awaiter(void 0, void 0, void 0, function* () {
    showBannerState.setup(s => s.updateValue(typemoq.It.isValue(false))).verifiable(typemoq.Times.once());
    yield banner.disable();
    showBannerState.verifyAll();
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lci51bml0LnRlc3QuanMiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsImNoYWlfMSIsInJlcXVpcmUiLCJ0eXBlbW9xIiwidHlwZXNfMSIsInR5cGVzXzIiLCJjb25zdGFudHNfMSIsImJhbm5lcl8xIiwic3VpdGUiLCJzZXJ2aWNlQ29udGFpbmVyIiwiYnJvd3NlciIsImxhdW5jaENvdW50ZXJTdGF0ZSIsImxhdW5jaFRocmVzaG9sZENvdW50ZXJTdGF0ZSIsInNob3dCYW5uZXJTdGF0ZSIsInVzZXJTZWxlY3RlZCIsInVzZXJTZWxlY3RlZFN0YXRlIiwiZGVidWdTZXJ2aWNlIiwiYXBwU2hlbGwiLCJydW50aW1lIiwiYmFubmVyIiwibWVzc2FnZSIsInllcyIsIm5vIiwibGF0ZXIiLCJzZXR1cCIsIk1vY2siLCJvZlR5cGUiLCJsb2dnZXIiLCJmYWN0b3J5IiwiZiIsImNyZWF0ZUdsb2JhbFBlcnNpc3RlbnRTdGF0ZSIsIkl0IiwiaXNWYWx1ZSIsIlBlcnNpc3RlbnRTdGF0ZUtleXMiLCJEZWJ1Z2dlckxhdW5jaENvdW50ZXIiLCJpc0FueSIsInJldHVybnMiLCJvYmplY3QiLCJTaG93QmFubmVyIiwiRGVidWdnZXJMYXVuY2hUaHJlc2hvbGRDb3VudGVyIiwiVXNlclNlbGVjdGVkIiwicyIsImdldCIsIklCcm93c2VyU2VydmljZSIsIklQZXJzaXN0ZW50U3RhdGVGYWN0b3J5IiwiSURlYnVnU2VydmljZSIsIklMb2dnZXIiLCJJRGlzcG9zYWJsZVJlZ2lzdHJ5IiwiSUFwcGxpY2F0aW9uU2hlbGwiLCJJUmFuZG9tIiwiRGVidWdnZXJCYW5uZXIiLCJ0ZXN0IiwiZGVidWdnZXJMYXVuY2hDb3VudGVyIiwibCIsInZlcmlmaWFibGUiLCJUaW1lcyIsIm9uY2UiLCJiIiwibGF1bmNoIiwiYSIsInNob3dJbmZvcm1hdGlvbk1lc3NhZ2UiLCJzaG93IiwidmVyaWZ5QWxsIiwiaSIsInJhbmRvbVNhbXBsZSIsImV4cGVjdGVkIiwidCIsInVuZGVmaW5lZCIsInIiLCJnZXRSYW5kb21JbnQiLCJ1IiwidXBkYXRlVmFsdWUiLCJzZWxlY3RlZCIsInNob3VsZFNob3ciLCJleHBlY3QiLCJ0byIsImJlIiwiZXF1YWwiLCJyZXN1bHQxIiwicmVzdWx0MiIsIm9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uQ2IiLCJkIiwib25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb24iLCJjYWxsYmFjayIsImNiIiwiYXRMZWFzdE9uY2UiLCJpbml0aWFsaXplIiwidHlwZSIsIkRlYnVnZ2VyVHlwZU5hbWUiLCJuZXZlciIsImN1cnJlbnRMYXVuY2hDb3VudGVyIiwiZGlzYWJsZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUNBLElBQUlBLFNBQVMsR0FBSSxVQUFRLFNBQUtBLFNBQWQsSUFBNEIsVUFBVUMsT0FBVixFQUFtQkMsVUFBbkIsRUFBK0JDLENBQS9CLEVBQWtDQyxTQUFsQyxFQUE2QztBQUNyRixTQUFPLEtBQUtELENBQUMsS0FBS0EsQ0FBQyxHQUFHRSxPQUFULENBQU4sRUFBeUIsVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDdkQsYUFBU0MsU0FBVCxDQUFtQkMsS0FBbkIsRUFBMEI7QUFBRSxVQUFJO0FBQUVDLFFBQUFBLElBQUksQ0FBQ04sU0FBUyxDQUFDTyxJQUFWLENBQWVGLEtBQWYsQ0FBRCxDQUFKO0FBQThCLE9BQXBDLENBQXFDLE9BQU9HLENBQVAsRUFBVTtBQUFFTCxRQUFBQSxNQUFNLENBQUNLLENBQUQsQ0FBTjtBQUFZO0FBQUU7O0FBQzNGLGFBQVNDLFFBQVQsQ0FBa0JKLEtBQWxCLEVBQXlC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QUFDO0FBQUVPLE1BQUFBLElBQUksRUFBRWpGLFdBQVcsQ0FBQ2tGO0FBQXBCLEtBQUQsQ0FBbEM7QUFDQXZFLElBQUFBLFFBQVEsQ0FBQzZDLFNBQVQ7QUFDQWpELElBQUFBLGVBQWUsQ0FBQ2lELFNBQWhCO0FBQ0FuRCxJQUFBQSxrQkFBa0IsQ0FBQ21ELFNBQW5CO0FBQ0FsRCxJQUFBQSwyQkFBMkIsQ0FBQ2tELFNBQTVCO0FBQ0E3RCxJQUFBQSxNQUFNLENBQUN5RSxNQUFQLENBQWNnQixvQkFBZCxFQUFvQ2YsRUFBcEMsQ0FBdUNDLEVBQXZDLENBQTBDQyxLQUExQyxDQUFnRCxFQUFoRDtBQUNILEdBM0I0RixDQUF6RixDQUFKO0FBNEJBMUIsRUFBQUEsSUFBSSxDQUFDLGdFQUFELEVBQW1FLE1BQU12RSxTQUFTLFNBQU8sS0FBSyxDQUFaLEVBQWUsS0FBSyxDQUFwQixFQUF1QixhQUFhO0FBQ3RIaUMsSUFBQUEsZUFBZSxDQUFDVyxLQUFoQixDQUFzQmlCLENBQUMsSUFBSUEsQ0FBQyxDQUFDOEIsV0FBRixDQUFjcEUsT0FBTyxDQUFDNEIsRUFBUixDQUFXQyxPQUFYLENBQW1CLEtBQW5CLENBQWQsQ0FBM0IsRUFDS3NCLFVBREwsQ0FDZ0JuRCxPQUFPLENBQUNvRCxLQUFSLENBQWNDLElBQWQsRUFEaEI7QUFFQSxVQUFNckMsTUFBTSxDQUFDd0UsT0FBUCxFQUFOO0FBQ0E5RSxJQUFBQSxlQUFlLENBQUNpRCxTQUFoQjtBQUNILEdBTHFGLENBQWxGLENBQUo7QUFNSCxDQWhPSSxDQUFMIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlOm5vLWFueSBtYXgtZnVuYy1ib2R5LWxlbmd0aFxyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgdHlwZW1vcSA9IHJlcXVpcmUoXCJ0eXBlbW9xXCIpO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL2NsaWVudC9jb21tb24vYXBwbGljYXRpb24vdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzIgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2NvbW1vbi90eXBlc1wiKTtcclxuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2RlYnVnZ2VyL2NvbnN0YW50c1wiKTtcclxuY29uc3QgYmFubmVyXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2xpZW50L2RlYnVnZ2VyL2V4dGVuc2lvbi9iYW5uZXJcIik7XHJcbnN1aXRlKCdEZWJ1Z2dpbmcgLSBCYW5uZXInLCAoKSA9PiB7XHJcbiAgICBsZXQgc2VydmljZUNvbnRhaW5lcjtcclxuICAgIGxldCBicm93c2VyO1xyXG4gICAgbGV0IGxhdW5jaENvdW50ZXJTdGF0ZTtcclxuICAgIGxldCBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGU7XHJcbiAgICBsZXQgc2hvd0Jhbm5lclN0YXRlO1xyXG4gICAgbGV0IHVzZXJTZWxlY3RlZDtcclxuICAgIGxldCB1c2VyU2VsZWN0ZWRTdGF0ZTtcclxuICAgIGxldCBkZWJ1Z1NlcnZpY2U7XHJcbiAgICBsZXQgYXBwU2hlbGw7XHJcbiAgICBsZXQgcnVudGltZTtcclxuICAgIGxldCBiYW5uZXI7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gJ0NhbiB5b3UgcGxlYXNlIHRha2UgMiBtaW51dGVzIHRvIHRlbGwgdXMgaG93IHRoZSBkZWJ1Z2dlciBpcyB3b3JraW5nIGZvciB5b3U/JztcclxuICAgIGNvbnN0IHllcyA9ICdZZXMsIHRha2Ugc3VydmV5IG5vdyc7XHJcbiAgICBjb25zdCBubyA9ICdObyB0aGFua3MnO1xyXG4gICAgY29uc3QgbGF0ZXIgPSAnUmVtaW5kIG1lIGxhdGVyJztcclxuICAgIHNldHVwKCgpID0+IHtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGJyb3dzZXIgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgZGVidWdTZXJ2aWNlID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgc2hvd0Jhbm5lclN0YXRlID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGFwcFNoZWxsID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHJ1bnRpbWUgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgbGF1bmNoVGhyZXNob2xkQ291bnRlclN0YXRlID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHVzZXJTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgdXNlclNlbGVjdGVkU3RhdGUgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBmYWN0b3J5XHJcbiAgICAgICAgICAgIC5zZXR1cChmID0+IGYuY3JlYXRlR2xvYmFsUGVyc2lzdGVudFN0YXRlKHR5cGVtb3EuSXQuaXNWYWx1ZShiYW5uZXJfMS5QZXJzaXN0ZW50U3RhdGVLZXlzLkRlYnVnZ2VyTGF1bmNoQ291bnRlciksIHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGxhdW5jaENvdW50ZXJTdGF0ZS5vYmplY3QpO1xyXG4gICAgICAgIGZhY3RvcnlcclxuICAgICAgICAgICAgLnNldHVwKGYgPT4gZi5jcmVhdGVHbG9iYWxQZXJzaXN0ZW50U3RhdGUodHlwZW1vcS5JdC5pc1ZhbHVlKGJhbm5lcl8xLlBlcnNpc3RlbnRTdGF0ZUtleXMuU2hvd0Jhbm5lciksIHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHNob3dCYW5uZXJTdGF0ZS5vYmplY3QpO1xyXG4gICAgICAgIGZhY3RvcnlcclxuICAgICAgICAgICAgLnNldHVwKGYgPT4gZi5jcmVhdGVHbG9iYWxQZXJzaXN0ZW50U3RhdGUodHlwZW1vcS5JdC5pc1ZhbHVlKGJhbm5lcl8xLlBlcnNpc3RlbnRTdGF0ZUtleXMuRGVidWdnZXJMYXVuY2hUaHJlc2hvbGRDb3VudGVyKSwgdHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gbGF1bmNoVGhyZXNob2xkQ291bnRlclN0YXRlLm9iamVjdCk7XHJcbiAgICAgICAgZmFjdG9yeVxyXG4gICAgICAgICAgICAuc2V0dXAoZiA9PiBmLmNyZWF0ZUdsb2JhbFBlcnNpc3RlbnRTdGF0ZSh0eXBlbW9xLkl0LmlzVmFsdWUoYmFubmVyXzEuUGVyc2lzdGVudFN0YXRlS2V5cy5Vc2VyU2VsZWN0ZWQpLCB0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiB1c2VyU2VsZWN0ZWRTdGF0ZS5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMi5JQnJvd3NlclNlcnZpY2UpKSkucmV0dXJucygoKSA9PiBicm93c2VyLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZSh0eXBlc18yLklQZXJzaXN0ZW50U3RhdGVGYWN0b3J5KSkpLnJldHVybnMoKCkgPT4gZmFjdG9yeS5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMS5JRGVidWdTZXJ2aWNlKSkpLnJldHVybnMoKCkgPT4gZGVidWdTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZSh0eXBlc18yLklMb2dnZXIpKSkucmV0dXJucygoKSA9PiBsb2dnZXIub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKHMgPT4gcy5nZXQodHlwZW1vcS5JdC5pc1ZhbHVlKHR5cGVzXzIuSURpc3Bvc2FibGVSZWdpc3RyeSkpKS5yZXR1cm5zKCgpID0+IFtdKTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKHMgPT4gcy5nZXQodHlwZW1vcS5JdC5pc1ZhbHVlKHR5cGVzXzEuSUFwcGxpY2F0aW9uU2hlbGwpKSkucmV0dXJucygoKSA9PiBhcHBTaGVsbC5vYmplY3QpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMi5JUmFuZG9tKSkpLnJldHVybnMoKCkgPT4gcnVudGltZS5vYmplY3QpO1xyXG4gICAgICAgIHVzZXJTZWxlY3RlZFN0YXRlLnNldHVwKHMgPT4gcy52YWx1ZSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdXNlclNlbGVjdGVkKTtcclxuICAgICAgICBiYW5uZXIgPSBuZXcgYmFubmVyXzEuRGVidWdnZXJCYW5uZXIoc2VydmljZUNvbnRhaW5lci5vYmplY3QpO1xyXG4gICAgfSk7XHJcbiAgICB0ZXN0KCdCcm93c2VyIGlzIGRpc3BsYXllZCB3aGVuIGxhdW5jaGluZyBzZXJ2aWNlIGFsb25nIHdpdGggZGVidWdnZXIgbGF1bmNoIGNvdW50ZXInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgZGVidWdnZXJMYXVuY2hDb3VudGVyID0gMTIzNDtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUuc2V0dXAobCA9PiBsLnZhbHVlKS5yZXR1cm5zKCgpID0+IGRlYnVnZ2VyTGF1bmNoQ291bnRlcikudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgYnJvd3Nlci5zZXR1cChiID0+IGIubGF1bmNoKHR5cGVtb3EuSXQuaXNWYWx1ZShgaHR0cHM6Ly93d3cucmVzZWFyY2gubmV0L3IvTjdCMjVSVj9uPSR7ZGVidWdnZXJMYXVuY2hDb3VudGVyfWApKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIGFwcFNoZWxsLnNldHVwKGEgPT4gYS5zaG93SW5mb3JtYXRpb25NZXNzYWdlKHR5cGVtb3EuSXQuaXNWYWx1ZShtZXNzYWdlKSwgdHlwZW1vcS5JdC5pc1ZhbHVlKHllcyksIHR5cGVtb3EuSXQuaXNWYWx1ZShubyksIHR5cGVtb3EuSXQuaXNWYWx1ZShsYXRlcikpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoeWVzKSk7XHJcbiAgICAgICAgeWllbGQgYmFubmVyLnNob3coKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgYnJvd3Nlci52ZXJpZnlBbGwoKTtcclxuICAgIH0pKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpID0gaSArIDEpIHtcclxuICAgICAgICBjb25zdCByYW5kb21TYW1wbGUgPSBpO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkID0gaSA8IDEwO1xyXG4gICAgICAgIHRlc3QoYHVzZXJzIGFyZSBzZWxlY3RlZCAxMCUgb2YgdGhlIHRpbWUgKHJhbmRvbTogJHtpfSlgLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHNob3dCYW5uZXJTdGF0ZS5zZXR1cChzID0+IHMudmFsdWUpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS5zZXR1cChsID0+IGwudmFsdWUpLnJldHVybnMoKCkgPT4gMTApO1xyXG4gICAgICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUuc2V0dXAodCA9PiB0LnZhbHVlKS5yZXR1cm5zKCgpID0+IDEwKTtcclxuICAgICAgICAgICAgdXNlclNlbGVjdGVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBydW50aW1lLnNldHVwKHIgPT4gci5nZXRSYW5kb21JbnQodHlwZW1vcS5JdC5pc1ZhbHVlKDApLCB0eXBlbW9xLkl0LmlzVmFsdWUoMTAwKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiByYW5kb21TYW1wbGUpO1xyXG4gICAgICAgICAgICB1c2VyU2VsZWN0ZWRTdGF0ZS5zZXR1cCh1ID0+IHUudXBkYXRlVmFsdWUodHlwZW1vcS5JdC5pc1ZhbHVlKGV4cGVjdGVkKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoKSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB5aWVsZCBiYW5uZXIuc2hvdWxkU2hvdygpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHNlbGVjdGVkKS50by5iZS5lcXVhbChleHBlY3RlZCwgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgICAgICB1c2VyU2VsZWN0ZWRTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHJhbmRvbVNhbXBsZSBvZiBbMCwgMTBdKSB7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSByYW5kb21TYW1wbGUgPCAxMDtcclxuICAgICAgICB0ZXN0KGB1c2VyIHNlbGVjdGlvbiBkb2VzIG5vdCBjaGFuZ2UgKHJhbmRvbTogJHtyYW5kb21TYW1wbGV9KWAsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgc2hvd0Jhbm5lclN0YXRlLnNldHVwKHMgPT4gcy52YWx1ZSkucmV0dXJucygoKSA9PiB0cnVlKTtcclxuICAgICAgICAgICAgbGF1bmNoQ291bnRlclN0YXRlLnNldHVwKGwgPT4gbC52YWx1ZSkucmV0dXJucygoKSA9PiAxMCk7XHJcbiAgICAgICAgICAgIGxhdW5jaFRocmVzaG9sZENvdW50ZXJTdGF0ZS5zZXR1cCh0ID0+IHQudmFsdWUpLnJldHVybnMoKCkgPT4gMTApO1xyXG4gICAgICAgICAgICB1c2VyU2VsZWN0ZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJ1bnRpbWUuc2V0dXAociA9PiByLmdldFJhbmRvbUludCh0eXBlbW9xLkl0LmlzVmFsdWUoMCksIHR5cGVtb3EuSXQuaXNWYWx1ZSgxMDApKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHJhbmRvbVNhbXBsZSk7XHJcbiAgICAgICAgICAgIHVzZXJTZWxlY3RlZFN0YXRlLnNldHVwKHUgPT4gdS51cGRhdGVWYWx1ZSh0eXBlbW9xLkl0LmlzVmFsdWUoZXhwZWN0ZWQpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0geWllbGQgYmFubmVyLnNob3VsZFNob3coKTtcclxuICAgICAgICAgICAgdXNlclNlbGVjdGVkID0gZXhwZWN0ZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSB5aWVsZCBiYW5uZXIuc2hvdWxkU2hvdygpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdDEpLnRvLmJlLmVxdWFsKGV4cGVjdGVkLCBgcmFuZG9tU2FtcGxlICR7cmFuZG9tU2FtcGxlfWApO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdDIpLnRvLmJlLmVxdWFsKGV4cGVjdGVkLCBgcmFuZG9tU2FtcGxlICR7cmFuZG9tU2FtcGxlfWApO1xyXG4gICAgICAgICAgICB1c2VyU2VsZWN0ZWRTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICB0ZXN0KCdJbmNyZW1lbnQgRGVidWdnZXIgTGF1bmNoIENvdW50ZXIgd2hlbiBkZWJ1ZyBzZXNzaW9uIHN0YXJ0cycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBsZXQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYjtcclxuICAgICAgICBkZWJ1Z1NlcnZpY2Uuc2V0dXAoZCA9PiBkLm9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgIC5jYWxsYmFjayhjYiA9PiBvbkRpZFRlcm1pbmF0ZURlYnVnU2Vzc2lvbkNiID0gY2IpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBjb25zdCBkZWJ1Z2dlckxhdW5jaENvdW50ZXIgPSAxMjM0O1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS5zZXR1cChsID0+IGwudmFsdWUpLnJldHVybnMoKCkgPT4gZGVidWdnZXJMYXVuY2hDb3VudGVyKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS5zZXR1cChsID0+IGwudXBkYXRlVmFsdWUodHlwZW1vcS5JdC5pc1ZhbHVlKGRlYnVnZ2VyTGF1bmNoQ291bnRlciArIDEpKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIHNob3dCYW5uZXJTdGF0ZS5zZXR1cChzID0+IHMudmFsdWUpLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBiYW5uZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIHlpZWxkIG9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uQ2IoeyB0eXBlOiBjb25zdGFudHNfMS5EZWJ1Z2dlclR5cGVOYW1lIH0pO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBicm93c2VyLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgIGRlYnVnU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdEbyBub3QgSW5jcmVtZW50IERlYnVnZ2VyIExhdW5jaCBDb3VudGVyIHdoZW4gZGVidWcgc2Vzc2lvbiBzdGFydHMgYW5kIEJhbm5lciBpcyBkaXNhYmxlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBkZWJ1Z1NlcnZpY2Uuc2V0dXAoZCA9PiBkLm9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICAgICAgY29uc3QgZGVidWdnZXJMYXVuY2hDb3VudGVyID0gMTIzNDtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUuc2V0dXAobCA9PiBsLnZhbHVlKS5yZXR1cm5zKCgpID0+IGRlYnVnZ2VyTGF1bmNoQ291bnRlcilcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5uZXZlcigpKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUuc2V0dXAobCA9PiBsLnVwZGF0ZVZhbHVlKHR5cGVtb3EuSXQuaXNWYWx1ZShkZWJ1Z2dlckxhdW5jaENvdW50ZXIgKyAxKSkpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICAgICAgc2hvd0Jhbm5lclN0YXRlLnNldHVwKHMgPT4gcy52YWx1ZSkucmV0dXJucygoKSA9PiBmYWxzZSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBiYW5uZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBicm93c2VyLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgIGRlYnVnU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdzaG91bGRTaG93IG11c3QgcmV0dXJuIGZhbHNlIHdoZW4gQmFubmVyIGlzIGRpc2FibGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIHNob3dCYW5uZXJTdGF0ZS5zZXR1cChzID0+IHMudmFsdWUpLnJldHVybnMoKCkgPT4gZmFsc2UpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHlpZWxkIGJhbm5lci5zaG91bGRTaG93KCkpLnRvLmJlLmVxdWFsKGZhbHNlLCAnSW5jb3JyZWN0IHZhbHVlJyk7XHJcbiAgICAgICAgc2hvd0Jhbm5lclN0YXRlLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnc2hvdWxkU2hvdyBtdXN0IHJldHVybiBmYWxzZSB3aGVuIEJhbm5lciBpcyBlbmFibGVkIGFuZCBkZWJ1ZyBjb3VudGVyIGlzIG5vdCBzYW1lIGFzIHRocmVzaG9sZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUuc2V0dXAocyA9PiBzLnZhbHVlKS5yZXR1cm5zKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUuc2V0dXAobCA9PiBsLnZhbHVlKS5yZXR1cm5zKCgpID0+IDEpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUuc2V0dXAodCA9PiB0LnZhbHVlKS5yZXR1cm5zKCgpID0+IDEwKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoeWllbGQgYmFubmVyLnNob3VsZFNob3coKSkudG8uYmUuZXF1YWwoZmFsc2UsICdJbmNvcnJlY3QgdmFsdWUnKTtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgbGF1bmNoQ291bnRlclN0YXRlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgIGxhdW5jaFRocmVzaG9sZENvdW50ZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ3Nob3VsZFNob3cgbXVzdCByZXR1cm4gdHJ1ZSB3aGVuIEJhbm5lciBpcyBlbmFibGVkIGFuZCBkZWJ1ZyBjb3VudGVyIGlzIHNhbWUgYXMgdGhyZXNob2xkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIHNob3dCYW5uZXJTdGF0ZS5zZXR1cChzID0+IHMudmFsdWUpLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS5zZXR1cChsID0+IGwudmFsdWUpLnJldHVybnMoKCkgPT4gMTApXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUuc2V0dXAodCA9PiB0LnZhbHVlKS5yZXR1cm5zKCgpID0+IDEwKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoeWllbGQgYmFubmVyLnNob3VsZFNob3coKSkudG8uYmUuZXF1YWwodHJ1ZSwgJ0luY29ycmVjdCB2YWx1ZScpO1xyXG4gICAgICAgIHNob3dCYW5uZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgbGF1bmNoVGhyZXNob2xkQ291bnRlclN0YXRlLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnc2hvdyBtdXN0IGJlIGludm9rZWQgd2hlbiBzaG91bGRTaG93IHJldHVybnMgdHJ1ZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBsZXQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYjtcclxuICAgICAgICBjb25zdCBjdXJyZW50TGF1bmNoQ291bnRlciA9IDUwO1xyXG4gICAgICAgIGRlYnVnU2VydmljZS5zZXR1cChkID0+IGQub25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb24odHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgLmNhbGxiYWNrKGNiID0+IG9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uQ2IgPSBjYilcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUuc2V0dXAocyA9PiBzLnZhbHVlKS5yZXR1cm5zKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgbGF1bmNoQ291bnRlclN0YXRlLnNldHVwKGwgPT4gbC52YWx1ZSkucmV0dXJucygoKSA9PiBjdXJyZW50TGF1bmNoQ291bnRlcilcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUuc2V0dXAodCA9PiB0LnZhbHVlKS5yZXR1cm5zKCgpID0+IDEwKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS5zZXR1cChsID0+IGwudXBkYXRlVmFsdWUodHlwZW1vcS5JdC5pc1ZhbHVlKGN1cnJlbnRMYXVuY2hDb3VudGVyICsgMSkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBhcHBTaGVsbC5zZXR1cChhID0+IGEuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSh0eXBlbW9xLkl0LmlzVmFsdWUobWVzc2FnZSksIHR5cGVtb3EuSXQuaXNWYWx1ZSh5ZXMpLCB0eXBlbW9xLkl0LmlzVmFsdWUobm8pLCB0eXBlbW9xLkl0LmlzVmFsdWUobGF0ZXIpKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIGJhbm5lci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgeWllbGQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYih7IHR5cGU6IGNvbnN0YW50c18xLkRlYnVnZ2VyVHlwZU5hbWUgfSk7XHJcbiAgICAgICAgYXBwU2hlbGwudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgc2hvd0Jhbm5lclN0YXRlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdzaG93IG11c3Qgbm90IGJlIGludm9rZWQgdGhlIHNlY29uZCB0aW1lIGFmdGVyIGRpc21pc3NpbmcgdGhlIG1lc3NhZ2UnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgbGV0IG9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uQ2I7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRMYXVuY2hDb3VudGVyID0gNTA7XHJcbiAgICAgICAgZGVidWdTZXJ2aWNlLnNldHVwKGQgPT4gZC5vbkRpZFRlcm1pbmF0ZURlYnVnU2Vzc2lvbih0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAuY2FsbGJhY2soY2IgPT4gb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYiA9IGNiKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIHNob3dCYW5uZXJTdGF0ZS5zZXR1cChzID0+IHMudmFsdWUpLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICBsYXVuY2hDb3VudGVyU3RhdGUuc2V0dXAobCA9PiBsLnZhbHVlKS5yZXR1cm5zKCgpID0+IGN1cnJlbnRMYXVuY2hDb3VudGVyKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgIGxhdW5jaFRocmVzaG9sZENvdW50ZXJTdGF0ZS5zZXR1cCh0ID0+IHQudmFsdWUpLnJldHVybnMoKCkgPT4gMTApXHJcbiAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgbGF1bmNoQ291bnRlclN0YXRlLnNldHVwKGwgPT4gbC51cGRhdGVWYWx1ZSh0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAuY2FsbGJhY2soKCkgPT4gY3VycmVudExhdW5jaENvdW50ZXIgPSBjdXJyZW50TGF1bmNoQ291bnRlciArIDEpO1xyXG4gICAgICAgIGFwcFNoZWxsLnNldHVwKGEgPT4gYS5zaG93SW5mb3JtYXRpb25NZXNzYWdlKHR5cGVtb3EuSXQuaXNWYWx1ZShtZXNzYWdlKSwgdHlwZW1vcS5JdC5pc1ZhbHVlKHllcyksIHR5cGVtb3EuSXQuaXNWYWx1ZShubyksIHR5cGVtb3EuSXQuaXNWYWx1ZShsYXRlcikpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIGJhbm5lci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgeWllbGQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYih7IHR5cGU6IGNvbnN0YW50c18xLkRlYnVnZ2VyVHlwZU5hbWUgfSk7XHJcbiAgICAgICAgeWllbGQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYih7IHR5cGU6IGNvbnN0YW50c18xLkRlYnVnZ2VyVHlwZU5hbWUgfSk7XHJcbiAgICAgICAgeWllbGQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYih7IHR5cGU6IGNvbnN0YW50c18xLkRlYnVnZ2VyVHlwZU5hbWUgfSk7XHJcbiAgICAgICAgeWllbGQgb25EaWRUZXJtaW5hdGVEZWJ1Z1Nlc3Npb25DYih7IHR5cGU6IGNvbnN0YW50c18xLkRlYnVnZ2VyVHlwZU5hbWUgfSk7XHJcbiAgICAgICAgYXBwU2hlbGwudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgc2hvd0Jhbm5lclN0YXRlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgIGxhdW5jaENvdW50ZXJTdGF0ZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICBsYXVuY2hUaHJlc2hvbGRDb3VudGVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChjdXJyZW50TGF1bmNoQ291bnRlcikudG8uYmUuZXF1YWwoNTQpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRGlzYWJsaW5nIGJhbm5lciBtdXN0IHN0b3JlIHZhbHVlIG9mIFxcJ2ZhbHNlXFwnIGluIGdsb2JhbCBzdG9yZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUuc2V0dXAocyA9PiBzLnVwZGF0ZVZhbHVlKHR5cGVtb3EuSXQuaXNWYWx1ZShmYWxzZSkpKVxyXG4gICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgeWllbGQgYmFubmVyLmRpc2FibGUoKTtcclxuICAgICAgICBzaG93QmFubmVyU3RhdGUudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYW5uZXIudW5pdC50ZXN0LmpzLm1hcCJdfQ==