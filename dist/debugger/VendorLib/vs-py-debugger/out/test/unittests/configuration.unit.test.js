// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:max-func-body-length no-any

const chai_1 = require("chai");

const typeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../client/common/application/types");

const types_2 = require("../../client/common/types");

const enum_1 = require("../../client/common/utils/enum");

const constants_1 = require("../../client/unittests/common/constants");

const configuration_1 = require("../../client/unittests/configuration");

const types_3 = require("../../client/unittests/types");

suite('Unit Tests - ConfigurationService', () => {
  [types_2.Product.pytest, types_2.Product.unittest, types_2.Product.nosetest].forEach(prodItem => {
    const product = prodItem;
    const prods = enum_1.getNamesAndValues(types_2.Product);
    const productName = prods.filter(item => item.value === product)[0];
    const workspaceUri = vscode_1.Uri.file(__filename);
    suite(productName.name, () => {
      let testConfigService;
      let workspaceService;
      let factory;
      let appShell;
      let unitTestSettings;
      setup(() => {
        const serviceContainer = typeMoq.Mock.ofType();
        const configurationService = typeMoq.Mock.ofType();
        appShell = typeMoq.Mock.ofType();
        const outputChannel = typeMoq.Mock.ofType();
        const installer = typeMoq.Mock.ofType();
        workspaceService = typeMoq.Mock.ofType();
        factory = typeMoq.Mock.ofType();
        unitTestSettings = typeMoq.Mock.ofType();
        const pythonSettings = typeMoq.Mock.ofType();
        pythonSettings.setup(p => p.unitTest).returns(() => unitTestSettings.object);
        configurationService.setup(c => c.getSettings(workspaceUri)).returns(() => pythonSettings.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_2.IOutputChannel), typeMoq.It.isValue(constants_1.TEST_OUTPUT_CHANNEL))).returns(() => outputChannel.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_2.IInstaller))).returns(() => installer.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_2.IConfigurationService))).returns(() => configurationService.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_1.IApplicationShell))).returns(() => appShell.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_1.IWorkspaceService))).returns(() => workspaceService.object);
        serviceContainer.setup(c => c.get(typeMoq.It.isValue(types_3.ITestConfigurationManagerFactory))).returns(() => factory.object);
        testConfigService = typeMoq.Mock.ofType(configuration_1.UnitTestConfigurationService, typeMoq.MockBehavior.Loose, true, serviceContainer.object);
      });
      test('Enable Test when setting unitTest.promptToConfigure is enabled', () => __awaiter(void 0, void 0, void 0, function* () {
        const configMgr = typeMoq.Mock.ofType();
        configMgr.setup(c => c.enable()).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
        factory.setup(f => f.create(workspaceUri, product)).returns(() => configMgr.object).verifiable(typeMoq.Times.once());
        const workspaceConfig = typeMoq.Mock.ofType();
        workspaceService.setup(w => w.getConfiguration(typeMoq.It.isValue('python'), workspaceUri)).returns(() => workspaceConfig.object).verifiable(typeMoq.Times.once());
        workspaceConfig.setup(w => w.get(typeMoq.It.isValue('unitTest.promptToConfigure'))).returns(() => true).verifiable(typeMoq.Times.once());
        yield testConfigService.target.enableTest(workspaceUri, product);
        configMgr.verifyAll();
        factory.verifyAll();
        workspaceService.verifyAll();
        workspaceConfig.verifyAll();
      }));
      test('Enable Test when setting unitTest.promptToConfigure is disabled', () => __awaiter(void 0, void 0, void 0, function* () {
        const configMgr = typeMoq.Mock.ofType();
        configMgr.setup(c => c.enable()).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
        factory.setup(f => f.create(workspaceUri, product)).returns(() => configMgr.object).verifiable(typeMoq.Times.once());
        const workspaceConfig = typeMoq.Mock.ofType();
        workspaceService.setup(w => w.getConfiguration(typeMoq.It.isValue('python'), workspaceUri)).returns(() => workspaceConfig.object).verifiable(typeMoq.Times.once());
        workspaceConfig.setup(w => w.get(typeMoq.It.isValue('unitTest.promptToConfigure'))).returns(() => false).verifiable(typeMoq.Times.once());
        workspaceConfig.setup(w => w.update(typeMoq.It.isValue('unitTest.promptToConfigure'), typeMoq.It.isValue(undefined))).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
        yield testConfigService.target.enableTest(workspaceUri, product);
        configMgr.verifyAll();
        factory.verifyAll();
        workspaceService.verifyAll();
        workspaceConfig.verifyAll();
      }));
      test('Enable Test when setting unitTest.promptToConfigure is disabled and fail to update the settings', () => __awaiter(void 0, void 0, void 0, function* () {
        const configMgr = typeMoq.Mock.ofType();
        configMgr.setup(c => c.enable()).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
        factory.setup(f => f.create(workspaceUri, product)).returns(() => configMgr.object).verifiable(typeMoq.Times.once());
        const workspaceConfig = typeMoq.Mock.ofType();
        workspaceService.setup(w => w.getConfiguration(typeMoq.It.isValue('python'), workspaceUri)).returns(() => workspaceConfig.object).verifiable(typeMoq.Times.once());
        workspaceConfig.setup(w => w.get(typeMoq.It.isValue('unitTest.promptToConfigure'))).returns(() => false).verifiable(typeMoq.Times.once());
        const errorMessage = 'Update Failed';
        const updateFailError = new Error(errorMessage);
        workspaceConfig.setup(w => w.update(typeMoq.It.isValue('unitTest.promptToConfigure'), typeMoq.It.isValue(undefined))).returns(() => Promise.reject(updateFailError)).verifiable(typeMoq.Times.once());
        const promise = testConfigService.target.enableTest(workspaceUri, product);
        yield chai_1.expect(promise).to.eventually.be.rejectedWith(errorMessage);
        configMgr.verifyAll();
        factory.verifyAll();
        workspaceService.verifyAll();
        workspaceConfig.verifyAll();
      }));
      test('Select Test runner displays 3 items', () => __awaiter(void 0, void 0, void 0, function* () {
        const placeHolder = 'Some message';
        appShell.setup(s => s.showQuickPick(typeMoq.It.isAny(), typeMoq.It.isObjectWith({
          placeHolder
        }))).callback(items => chai_1.expect(items).be.lengthOf(3)).verifiable(typeMoq.Times.once());
        yield testConfigService.target.selectTestRunner(placeHolder);
        appShell.verifyAll();
      }));
      test('Ensure selected item is returned', () => __awaiter(void 0, void 0, void 0, function* () {
        const placeHolder = 'Some message';
        const indexes = [types_2.Product.unittest, types_2.Product.pytest, types_2.Product.nosetest];
        appShell.setup(s => s.showQuickPick(typeMoq.It.isAny(), typeMoq.It.isObjectWith({
          placeHolder
        }))).callback(items => chai_1.expect(items).be.lengthOf(3)).returns(items => items[indexes.indexOf(product)]).verifiable(typeMoq.Times.once());
        const selectedItem = yield testConfigService.target.selectTestRunner(placeHolder);
        chai_1.expect(selectedItem).to.be.equal(product);
        appShell.verifyAll();
      }));
      test('Ensure undefined is returned when nothing is seleted', () => __awaiter(void 0, void 0, void 0, function* () {
        const placeHolder = 'Some message';
        appShell.setup(s => s.showQuickPick(typeMoq.It.isAny(), typeMoq.It.isObjectWith({
          placeHolder
        }))).returns(() => Promise.resolve(undefined)).verifiable(typeMoq.Times.once());
        const selectedItem = yield testConfigService.target.selectTestRunner(placeHolder);
        chai_1.expect(selectedItem).to.be.equal(undefined, 'invalid value');
        appShell.verifyAll();
      }));
      test('Prompt to enable a test if a test framework is not enabled', () => __awaiter(void 0, void 0, void 0, function* () {
        unitTestSettings.setup(u => u.pyTestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.unittestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.nosetestsEnabled).returns(() => false);
        appShell.setup(s => s.showInformationMessage(typeMoq.It.isAny(), typeMoq.It.isAny())).returns(() => Promise.resolve(undefined)).verifiable(typeMoq.Times.once());
        let exceptionThrown = false;

        try {
          yield testConfigService.target.displayTestFrameworkError(workspaceUri);
        } catch (_a) {
          exceptionThrown = true;
        }

        chai_1.expect(exceptionThrown).to.be.equal(true, 'Exception not thrown');
        appShell.verifyAll();
      }));
      test('Prompt to select a test if a test framework is not enabled', () => __awaiter(void 0, void 0, void 0, function* () {
        unitTestSettings.setup(u => u.pyTestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.unittestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.nosetestsEnabled).returns(() => false);
        appShell.setup(s => s.showInformationMessage(typeMoq.It.isAny(), typeMoq.It.isAny())).returns((_msg, option) => Promise.resolve(option)).verifiable(typeMoq.Times.once());
        let exceptionThrown = false;
        let selectTestRunnerInvoked = false;

        try {
          testConfigService.callBase = false;
          testConfigService.setup(t => t.selectTestRunner(typeMoq.It.isAny())).returns(() => {
            selectTestRunnerInvoked = true;
            return Promise.resolve(undefined);
          });
          yield testConfigService.target.displayTestFrameworkError(workspaceUri);
        } catch (_b) {
          exceptionThrown = true;
        }

        chai_1.expect(selectTestRunnerInvoked).to.be.equal(true, 'Method not invoked');
        chai_1.expect(exceptionThrown).to.be.equal(true, 'Exception not thrown');
        appShell.verifyAll();
      }));
      test('Configure selected test framework and disable others', () => __awaiter(void 0, void 0, void 0, function* () {
        unitTestSettings.setup(u => u.pyTestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.unittestEnabled).returns(() => false);
        unitTestSettings.setup(u => u.nosetestsEnabled).returns(() => false);
        appShell.setup(s => s.showInformationMessage(typeMoq.It.isAny(), typeMoq.It.isAny())).returns((_msg, option) => Promise.resolve(option)).verifiable(typeMoq.Times.once());
        let selectTestRunnerInvoked = false;
        testConfigService.callBase = false;
        testConfigService.setup(t => t.selectTestRunner(typeMoq.It.isAny())).returns(() => {
          selectTestRunnerInvoked = true;
          return Promise.resolve(product);
        });
        let enableTestInvoked = false;
        testConfigService.setup(t => t.enableTest(typeMoq.It.isValue(workspaceUri), typeMoq.It.isValue(product))).returns(() => {
          enableTestInvoked = true;
          return Promise.resolve();
        });
        const configMgr = typeMoq.Mock.ofType();
        factory.setup(f => f.create(typeMoq.It.isValue(workspaceUri), typeMoq.It.isValue(product))).returns(() => configMgr.object).verifiable(typeMoq.Times.once());
        configMgr.setup(c => c.configure(typeMoq.It.isValue(workspaceUri))).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
        yield testConfigService.target.displayTestFrameworkError(workspaceUri);
        chai_1.expect(selectTestRunnerInvoked).to.be.equal(true, 'Select Test Runner not invoked');
        chai_1.expect(enableTestInvoked).to.be.equal(true, 'Enable Test not invoked');
        appShell.verifyAll();
        factory.verifyAll();
        configMgr.verifyAll();
      }));
      test('If more than one test framework is enabled, then prompt to select a test framework', () => __awaiter(void 0, void 0, void 0, function* () {
        unitTestSettings.setup(u => u.pyTestEnabled).returns(() => true);
        unitTestSettings.setup(u => u.unittestEnabled).returns(() => true);
        unitTestSettings.setup(u => u.nosetestsEnabled).returns(() => true);
        appShell.setup(s => s.showInformationMessage(typeMoq.It.isAny(), typeMoq.It.isAny())).returns(() => Promise.resolve(undefined)).verifiable(typeMoq.Times.never());
        let exceptionThrown = false;

        try {
          yield testConfigService.target.displayTestFrameworkError(workspaceUri);
        } catch (_c) {
          exceptionThrown = true;
        }

        chai_1.expect(exceptionThrown).to.be.equal(true, 'Exception not thrown');
        appShell.verifyAll();
      }));
      test('If more than one test framework is enabled, then prompt to select a test framework and enable test, but do not configure', () => __awaiter(void 0, void 0, void 0, function* () {
        unitTestSettings.setup(u => u.pyTestEnabled).returns(() => true);
        unitTestSettings.setup(u => u.unittestEnabled).returns(() => true);
        unitTestSettings.setup(u => u.nosetestsEnabled).returns(() => true);
        appShell.setup(s => s.showInformationMessage(typeMoq.It.isAny(), typeMoq.It.isAny())).returns((_msg, option) => Promise.resolve(option)).verifiable(typeMoq.Times.never());
        let selectTestRunnerInvoked = false;
        testConfigService.callBase = false;
        testConfigService.setup(t => t.selectTestRunner(typeMoq.It.isAny())).returns(() => {
          selectTestRunnerInvoked = true;
          return Promise.resolve(product);
        });
        let enableTestInvoked = false;
        testConfigService.setup(t => t.enableTest(typeMoq.It.isValue(workspaceUri), typeMoq.It.isValue(product))).returns(() => {
          enableTestInvoked = true;
          return Promise.resolve();
        });
        const configMgr = typeMoq.Mock.ofType();
        factory.setup(f => f.create(typeMoq.It.isValue(workspaceUri), typeMoq.It.isValue(product))).returns(() => configMgr.object).verifiable(typeMoq.Times.once());
        configMgr.setup(c => c.configure(typeMoq.It.isValue(workspaceUri))).returns(() => Promise.resolve()).verifiable(typeMoq.Times.never());
        const configManagersToVerify = [configMgr];
        [types_2.Product.unittest, types_2.Product.pytest, types_2.Product.nosetest].filter(prod => product !== prod).forEach(prod => {
          const otherTestConfigMgr = typeMoq.Mock.ofType();
          factory.setup(f => f.create(typeMoq.It.isValue(workspaceUri), typeMoq.It.isValue(prod))).returns(() => otherTestConfigMgr.object).verifiable(typeMoq.Times.once());
          otherTestConfigMgr.setup(c => c.disable()).returns(() => Promise.resolve()).verifiable(typeMoq.Times.once());
          configManagersToVerify.push(otherTestConfigMgr);
        });
        yield testConfigService.target.displayTestFrameworkError(workspaceUri);
        chai_1.expect(selectTestRunnerInvoked).to.be.equal(true, 'Select Test Runner not invoked');
        chai_1.expect(enableTestInvoked).to.be.equal(false, 'Enable Test is invoked');
        factory.verifyAll();
        appShell.verifyAll();

        for (const item of configManagersToVerify) {
          item.verifyAll();
        }
      }));
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZ3VyYXRpb24udW5pdC50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwidHlwZU1vcSIsInZzY29kZV8xIiwidHlwZXNfMSIsInR5cGVzXzIiLCJlbnVtXzEiLCJjb25zdGFudHNfMSIsImNvbmZpZ3VyYXRpb25fMSIsInR5cGVzXzMiLCJzdWl0ZSIsIlByb2R1Y3QiLCJweXRlc3QiLCJ1bml0dGVzdCIsIm5vc2V0ZXN0IiwiZm9yRWFjaCIsInByb2RJdGVtIiwicHJvZHVjdCIsInByb2RzIiwiZ2V0TmFtZXNBbmRWYWx1ZXMiLCJwcm9kdWN0TmFtZSIsImZpbHRlciIsIml0ZW0iLCJ3b3Jrc3BhY2VVcmkiLCJVcmkiLCJmaWxlIiwiX19maWxlbmFtZSIsIm5hbWUiLCJ0ZXN0Q29uZmlnU2VydmljZSIsIndvcmtzcGFjZVNlcnZpY2UiLCJmYWN0b3J5IiwiYXBwU2hlbGwiLCJ1bml0VGVzdFNldHRpbmdzIiwic2V0dXAiLCJzZXJ2aWNlQ29udGFpbmVyIiwiTW9jayIsIm9mVHlwZSIsImNvbmZpZ3VyYXRpb25TZXJ2aWNlIiwib3V0cHV0Q2hhbm5lbCIsImluc3RhbGxlciIsInB5dGhvblNldHRpbmdzIiwicCIsInVuaXRUZXN0IiwicmV0dXJucyIsIm9iamVjdCIsImMiLCJnZXRTZXR0aW5ncyIsImdldCIsIkl0IiwiaXNWYWx1ZSIsIklPdXRwdXRDaGFubmVsIiwiVEVTVF9PVVRQVVRfQ0hBTk5FTCIsIklJbnN0YWxsZXIiLCJJQ29uZmlndXJhdGlvblNlcnZpY2UiLCJJQXBwbGljYXRpb25TaGVsbCIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwiSVRlc3RDb25maWd1cmF0aW9uTWFuYWdlckZhY3RvcnkiLCJVbml0VGVzdENvbmZpZ3VyYXRpb25TZXJ2aWNlIiwiTW9ja0JlaGF2aW9yIiwiTG9vc2UiLCJ0ZXN0IiwiY29uZmlnTWdyIiwiZW5hYmxlIiwidmVyaWZpYWJsZSIsIlRpbWVzIiwib25jZSIsImYiLCJjcmVhdGUiLCJ3b3Jrc3BhY2VDb25maWciLCJ3IiwiZ2V0Q29uZmlndXJhdGlvbiIsInRhcmdldCIsImVuYWJsZVRlc3QiLCJ2ZXJpZnlBbGwiLCJ1cGRhdGUiLCJ1bmRlZmluZWQiLCJlcnJvck1lc3NhZ2UiLCJ1cGRhdGVGYWlsRXJyb3IiLCJFcnJvciIsInByb21pc2UiLCJleHBlY3QiLCJ0byIsImV2ZW50dWFsbHkiLCJiZSIsInJlamVjdGVkV2l0aCIsInBsYWNlSG9sZGVyIiwicyIsInNob3dRdWlja1BpY2siLCJpc0FueSIsImlzT2JqZWN0V2l0aCIsImNhbGxiYWNrIiwiaXRlbXMiLCJsZW5ndGhPZiIsInNlbGVjdFRlc3RSdW5uZXIiLCJpbmRleGVzIiwiaW5kZXhPZiIsInNlbGVjdGVkSXRlbSIsImVxdWFsIiwidSIsInB5VGVzdEVuYWJsZWQiLCJ1bml0dGVzdEVuYWJsZWQiLCJub3NldGVzdHNFbmFibGVkIiwic2hvd0luZm9ybWF0aW9uTWVzc2FnZSIsImV4Y2VwdGlvblRocm93biIsImRpc3BsYXlUZXN0RnJhbWV3b3JrRXJyb3IiLCJfYSIsIl9tc2ciLCJvcHRpb24iLCJzZWxlY3RUZXN0UnVubmVySW52b2tlZCIsImNhbGxCYXNlIiwidCIsIl9iIiwiZW5hYmxlVGVzdEludm9rZWQiLCJjb25maWd1cmUiLCJuZXZlciIsIl9jIiwiY29uZmlnTWFuYWdlcnNUb1ZlcmlmeSIsInByb2QiLCJvdGhlclRlc3RDb25maWdNZ3IiLCJkaXNhYmxlIiwicHVzaCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUNBLElBQUlBLFNBQVMsR0FBSSxVQUFR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RkwsQ0FFZ0I3RCxPQUFPLENBQUM4RCxLQUFSLENBQWNDLElBQWQsRUFGaEI7QUFHQW1ELFVBQUFBLHNCQUFzQixDQUFDSSxJQUF2QixDQUE0QkYsa0JBQTVCO0FBQ0gsU0FYRDtBQVlBLGNBQU0xRixpQkFBaUIsQ0FBQzJDLE1BQWxCLENBQXlCaUMseUJBQXpCLENBQW1EakYsWUFBbkQsQ0FBTjtBQUNBdkIsUUFBQUEsTUFBTSxDQUFDZ0YsTUFBUCxDQUFjNEIsdUJBQWQsRUFBdUMzQixFQUF2QyxDQUEwQ0UsRUFBMUMsQ0FBNkNjLEtBQTdDLENBQW1ELElBQW5ELEVBQXlELGdDQUF6RDtBQUNBakcsUUFBQUEsTUFBTSxDQUFDZ0YsTUFBUCxDQUFjZ0MsaUJBQWQsRUFBaUMvQixFQUFqQyxDQUFvQ0UsRUFBcEMsQ0FBdUNjLEtBQXZDLENBQTZDLEtBQTdDLEVBQW9ELHdCQUFwRDtBQUNBbkUsUUFBQUEsT0FBTyxDQUFDMkMsU0FBUjtBQUNBMUMsUUFBQUEsUUFBUSxDQUFDMEMsU0FBVDs7QUFDQSxhQUFLLE1BQU1uRCxJQUFYLElBQW1COEYsc0JBQW5CLEVBQTJDO0FBQ3ZDOUYsVUFBQUEsSUFBSSxDQUFDbUQsU0FBTDtBQUNIO0FBQ0osT0FoRCtJLENBQTVJLENBQUo7QUFpREgsS0E1UUksQ0FBTDtBQTZRSCxHQWxSRDtBQW1SSCxDQXBSSSxDQUFMIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlOm1heC1mdW5jLWJvZHktbGVuZ3RoIG5vLWFueVxyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgdHlwZU1vcSA9IHJlcXVpcmUoXCJ0eXBlbW9xXCIpO1xyXG5jb25zdCB2c2NvZGVfMSA9IHJlcXVpcmUoXCJ2c2NvZGVcIik7XHJcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9hcHBsaWNhdGlvbi90eXBlc1wiKTtcclxuY29uc3QgdHlwZXNfMiA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3R5cGVzXCIpO1xyXG5jb25zdCBlbnVtXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi91dGlscy9lbnVtXCIpO1xyXG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvdW5pdHRlc3RzL2NvbW1vbi9jb25zdGFudHNcIik7XHJcbmNvbnN0IGNvbmZpZ3VyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvdW5pdHRlc3RzL2NvbmZpZ3VyYXRpb25cIik7XHJcbmNvbnN0IHR5cGVzXzMgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L3VuaXR0ZXN0cy90eXBlc1wiKTtcclxuc3VpdGUoJ1VuaXQgVGVzdHMgLSBDb25maWd1cmF0aW9uU2VydmljZScsICgpID0+IHtcclxuICAgIFt0eXBlc18yLlByb2R1Y3QucHl0ZXN0LCB0eXBlc18yLlByb2R1Y3QudW5pdHRlc3QsIHR5cGVzXzIuUHJvZHVjdC5ub3NldGVzdF0uZm9yRWFjaChwcm9kSXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IHByb2RJdGVtO1xyXG4gICAgICAgIGNvbnN0IHByb2RzID0gZW51bV8xLmdldE5hbWVzQW5kVmFsdWVzKHR5cGVzXzIuUHJvZHVjdCk7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdE5hbWUgPSBwcm9kcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnZhbHVlID09PSBwcm9kdWN0KVswXTtcclxuICAgICAgICBjb25zdCB3b3Jrc3BhY2VVcmkgPSB2c2NvZGVfMS5VcmkuZmlsZShfX2ZpbGVuYW1lKTtcclxuICAgICAgICBzdWl0ZShwcm9kdWN0TmFtZS5uYW1lLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0ZXN0Q29uZmlnU2VydmljZTtcclxuICAgICAgICAgICAgbGV0IHdvcmtzcGFjZVNlcnZpY2U7XHJcbiAgICAgICAgICAgIGxldCBmYWN0b3J5O1xyXG4gICAgICAgICAgICBsZXQgYXBwU2hlbGw7XHJcbiAgICAgICAgICAgIGxldCB1bml0VGVzdFNldHRpbmdzO1xyXG4gICAgICAgICAgICBzZXR1cCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlQ29udGFpbmVyID0gdHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlndXJhdGlvblNlcnZpY2UgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbCA9IHR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dENoYW5uZWwgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YWxsZXIgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VTZXJ2aWNlID0gdHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgZmFjdG9yeSA9IHR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3MgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweXRob25TZXR0aW5ncyA9IHR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIHB5dGhvblNldHRpbmdzLnNldHVwKHAgPT4gcC51bml0VGVzdCkucmV0dXJucygoKSA9PiB1bml0VGVzdFNldHRpbmdzLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uU2VydmljZS5zZXR1cChjID0+IGMuZ2V0U2V0dGluZ3Mod29ya3NwYWNlVXJpKSkucmV0dXJucygoKSA9PiBweXRob25TZXR0aW5ncy5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18yLklPdXRwdXRDaGFubmVsKSwgdHlwZU1vcS5JdC5pc1ZhbHVlKGNvbnN0YW50c18xLlRFU1RfT1VUUFVUX0NIQU5ORUwpKSkucmV0dXJucygoKSA9PiBvdXRwdXRDaGFubmVsLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQodHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzIuSUluc3RhbGxlcikpKS5yZXR1cm5zKCgpID0+IGluc3RhbGxlci5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18yLklDb25maWd1cmF0aW9uU2VydmljZSkpKS5yZXR1cm5zKCgpID0+IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQodHlwZU1vcS5JdC5pc1ZhbHVlKHR5cGVzXzEuSUFwcGxpY2F0aW9uU2hlbGwpKSkucmV0dXJucygoKSA9PiBhcHBTaGVsbC5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18xLklXb3Jrc3BhY2VTZXJ2aWNlKSkpLnJldHVybnMoKCkgPT4gd29ya3NwYWNlU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVNb3EuSXQuaXNWYWx1ZSh0eXBlc18zLklUZXN0Q29uZmlndXJhdGlvbk1hbmFnZXJGYWN0b3J5KSkpLnJldHVybnMoKCkgPT4gZmFjdG9yeS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgdGVzdENvbmZpZ1NlcnZpY2UgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKGNvbmZpZ3VyYXRpb25fMS5Vbml0VGVzdENvbmZpZ3VyYXRpb25TZXJ2aWNlLCB0eXBlTW9xLk1vY2tCZWhhdmlvci5Mb29zZSwgdHJ1ZSwgc2VydmljZUNvbnRhaW5lci5vYmplY3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGVzdCgnRW5hYmxlIFRlc3Qgd2hlbiBzZXR0aW5nIHVuaXRUZXN0LnByb21wdFRvQ29uZmlndXJlIGlzIGVuYWJsZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdNZ3IgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3Iuc2V0dXAoYyA9PiBjLmVuYWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZSh3b3Jrc3BhY2VVcmksIHByb2R1Y3QpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGNvbmZpZ01nci5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlQ29uZmlnID0gdHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS5zZXR1cCh3ID0+IHcuZ2V0Q29uZmlndXJhdGlvbih0eXBlTW9xLkl0LmlzVmFsdWUoJ3B5dGhvbicpLCB3b3Jrc3BhY2VVcmkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHdvcmtzcGFjZUNvbmZpZy5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlQ29uZmlnLnNldHVwKHcgPT4gdy5nZXQodHlwZU1vcS5JdC5pc1ZhbHVlKCd1bml0VGVzdC5wcm9tcHRUb0NvbmZpZ3VyZScpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHRlc3RDb25maWdTZXJ2aWNlLnRhcmdldC5lbmFibGVUZXN0KHdvcmtzcGFjZVVyaSwgcHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3IudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICBmYWN0b3J5LnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbmZpZy52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0ZXN0KCdFbmFibGUgVGVzdCB3aGVuIHNldHRpbmcgdW5pdFRlc3QucHJvbXB0VG9Db25maWd1cmUgaXMgZGlzYWJsZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdNZ3IgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3Iuc2V0dXAoYyA9PiBjLmVuYWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZSh3b3Jrc3BhY2VVcmksIHByb2R1Y3QpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGNvbmZpZ01nci5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlQ29uZmlnID0gdHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS5zZXR1cCh3ID0+IHcuZ2V0Q29uZmlndXJhdGlvbih0eXBlTW9xLkl0LmlzVmFsdWUoJ3B5dGhvbicpLCB3b3Jrc3BhY2VVcmkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHdvcmtzcGFjZUNvbmZpZy5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlQ29uZmlnLnNldHVwKHcgPT4gdy5nZXQodHlwZU1vcS5JdC5pc1ZhbHVlKCd1bml0VGVzdC5wcm9tcHRUb0NvbmZpZ3VyZScpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VDb25maWcuc2V0dXAodyA9PiB3LnVwZGF0ZSh0eXBlTW9xLkl0LmlzVmFsdWUoJ3VuaXRUZXN0LnByb21wdFRvQ29uZmlndXJlJyksIHR5cGVNb3EuSXQuaXNWYWx1ZSh1bmRlZmluZWQpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0Q29uZmlnU2VydmljZS50YXJnZXQuZW5hYmxlVGVzdCh3b3Jrc3BhY2VVcmksIHByb2R1Y3QpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnTWdyLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgZmFjdG9yeS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZVNlcnZpY2UudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VDb25maWcudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdCgnRW5hYmxlIFRlc3Qgd2hlbiBzZXR0aW5nIHVuaXRUZXN0LnByb21wdFRvQ29uZmlndXJlIGlzIGRpc2FibGVkIGFuZCBmYWlsIHRvIHVwZGF0ZSB0aGUgc2V0dGluZ3MnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdNZ3IgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3Iuc2V0dXAoYyA9PiBjLmVuYWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZSh3b3Jrc3BhY2VVcmksIHByb2R1Y3QpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGNvbmZpZ01nci5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlQ29uZmlnID0gdHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS5zZXR1cCh3ID0+IHcuZ2V0Q29uZmlndXJhdGlvbih0eXBlTW9xLkl0LmlzVmFsdWUoJ3B5dGhvbicpLCB3b3Jrc3BhY2VVcmkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHdvcmtzcGFjZUNvbmZpZy5vYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlQ29uZmlnLnNldHVwKHcgPT4gdy5nZXQodHlwZU1vcS5JdC5pc1ZhbHVlKCd1bml0VGVzdC5wcm9tcHRUb0NvbmZpZ3VyZScpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAnVXBkYXRlIEZhaWxlZCc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVGYWlsRXJyb3IgPSBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbmZpZy5zZXR1cCh3ID0+IHcudXBkYXRlKHR5cGVNb3EuSXQuaXNWYWx1ZSgndW5pdFRlc3QucHJvbXB0VG9Db25maWd1cmUnKSwgdHlwZU1vcS5JdC5pc1ZhbHVlKHVuZGVmaW5lZCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVqZWN0KHVwZGF0ZUZhaWxFcnJvcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRlc3RDb25maWdTZXJ2aWNlLnRhcmdldC5lbmFibGVUZXN0KHdvcmtzcGFjZVVyaSwgcHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBjaGFpXzEuZXhwZWN0KHByb21pc2UpLnRvLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3IudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICBmYWN0b3J5LnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbmZpZy52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0ZXN0KCdTZWxlY3QgVGVzdCBydW5uZXIgZGlzcGxheXMgMyBpdGVtcycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlSG9sZGVyID0gJ1NvbWUgbWVzc2FnZSc7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC5zZXR1cChzID0+IHMuc2hvd1F1aWNrUGljayh0eXBlTW9xLkl0LmlzQW55KCksIHR5cGVNb3EuSXQuaXNPYmplY3RXaXRoKHsgcGxhY2VIb2xkZXIgfSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsYmFjayhpdGVtcyA9PiBjaGFpXzEuZXhwZWN0KGl0ZW1zKS5iZS5sZW5ndGhPZigzKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0Q29uZmlnU2VydmljZS50YXJnZXQuc2VsZWN0VGVzdFJ1bm5lcihwbGFjZUhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0ZXN0KCdFbnN1cmUgc2VsZWN0ZWQgaXRlbSBpcyByZXR1cm5lZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlSG9sZGVyID0gJ1NvbWUgbWVzc2FnZSc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleGVzID0gW3R5cGVzXzIuUHJvZHVjdC51bml0dGVzdCwgdHlwZXNfMi5Qcm9kdWN0LnB5dGVzdCwgdHlwZXNfMi5Qcm9kdWN0Lm5vc2V0ZXN0XTtcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnNldHVwKHMgPT4gcy5zaG93UXVpY2tQaWNrKHR5cGVNb3EuSXQuaXNBbnkoKSwgdHlwZU1vcS5JdC5pc09iamVjdFdpdGgoeyBwbGFjZUhvbGRlciB9KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhbGxiYWNrKGl0ZW1zID0+IGNoYWlfMS5leHBlY3QoaXRlbXMpLmJlLmxlbmd0aE9mKDMpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKChpdGVtcykgPT4gaXRlbXNbaW5kZXhlcy5pbmRleE9mKHByb2R1Y3QpXSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB5aWVsZCB0ZXN0Q29uZmlnU2VydmljZS50YXJnZXQuc2VsZWN0VGVzdFJ1bm5lcihwbGFjZUhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHNlbGVjdGVkSXRlbSkudG8uYmUuZXF1YWwocHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0ZXN0KCdFbnN1cmUgdW5kZWZpbmVkIGlzIHJldHVybmVkIHdoZW4gbm90aGluZyBpcyBzZWxldGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2VIb2xkZXIgPSAnU29tZSBtZXNzYWdlJztcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnNldHVwKHMgPT4gcy5zaG93UXVpY2tQaWNrKHR5cGVNb3EuSXQuaXNBbnkoKSwgdHlwZU1vcS5JdC5pc09iamVjdFdpdGgoeyBwbGFjZUhvbGRlciB9KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0geWllbGQgdGVzdENvbmZpZ1NlcnZpY2UudGFyZ2V0LnNlbGVjdFRlc3RSdW5uZXIocGxhY2VIb2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChzZWxlY3RlZEl0ZW0pLnRvLmJlLmVxdWFsKHVuZGVmaW5lZCwgJ2ludmFsaWQgdmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHRlc3QoJ1Byb21wdCB0byBlbmFibGUgYSB0ZXN0IGlmIGEgdGVzdCBmcmFtZXdvcmsgaXMgbm90IGVuYWJsZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICB1bml0VGVzdFNldHRpbmdzLnNldHVwKHUgPT4gdS5weVRlc3RFbmFibGVkKS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1LnVuaXR0ZXN0RW5hYmxlZCkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB1bml0VGVzdFNldHRpbmdzLnNldHVwKHUgPT4gdS5ub3NldGVzdHNFbmFibGVkKS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGFwcFNoZWxsLnNldHVwKHMgPT4gcy5zaG93SW5mb3JtYXRpb25NZXNzYWdlKHR5cGVNb3EuSXQuaXNBbnkoKSwgdHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhjZXB0aW9uVGhyb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRlc3RDb25maWdTZXJ2aWNlLnRhcmdldC5kaXNwbGF5VGVzdEZyYW1ld29ya0Vycm9yKHdvcmtzcGFjZVVyaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHRpb25UaHJvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleGNlcHRpb25UaHJvd24pLnRvLmJlLmVxdWFsKHRydWUsICdFeGNlcHRpb24gbm90IHRocm93bicpO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdCgnUHJvbXB0IHRvIHNlbGVjdCBhIHRlc3QgaWYgYSB0ZXN0IGZyYW1ld29yayBpcyBub3QgZW5hYmxlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1LnB5VGVzdEVuYWJsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdW5pdFRlc3RTZXR0aW5ncy5zZXR1cCh1ID0+IHUudW5pdHRlc3RFbmFibGVkKS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1Lm5vc2V0ZXN0c0VuYWJsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwuc2V0dXAocyA9PiBzLnNob3dJbmZvcm1hdGlvbk1lc3NhZ2UodHlwZU1vcS5JdC5pc0FueSgpLCB0eXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKChfbXNnLCBvcHRpb24pID0+IFByb21pc2UucmVzb2x2ZShvcHRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGxldCBleGNlcHRpb25UaHJvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RUZXN0UnVubmVySW52b2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0Q29uZmlnU2VydmljZS5jYWxsQmFzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlc3RDb25maWdTZXJ2aWNlLnNldHVwKHQgPT4gdC5zZWxlY3RUZXN0UnVubmVyKHR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0VGVzdFJ1bm5lckludm9rZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGVzdENvbmZpZ1NlcnZpY2UudGFyZ2V0LmRpc3BsYXlUZXN0RnJhbWV3b3JrRXJyb3Iod29ya3NwYWNlVXJpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvblRocm93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHNlbGVjdFRlc3RSdW5uZXJJbnZva2VkKS50by5iZS5lcXVhbCh0cnVlLCAnTWV0aG9kIG5vdCBpbnZva2VkJyk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGV4Y2VwdGlvblRocm93bikudG8uYmUuZXF1YWwodHJ1ZSwgJ0V4Y2VwdGlvbiBub3QgdGhyb3duJyk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0ZXN0KCdDb25maWd1cmUgc2VsZWN0ZWQgdGVzdCBmcmFtZXdvcmsgYW5kIGRpc2FibGUgb3RoZXJzJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgdW5pdFRlc3RTZXR0aW5ncy5zZXR1cCh1ID0+IHUucHlUZXN0RW5hYmxlZCkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB1bml0VGVzdFNldHRpbmdzLnNldHVwKHUgPT4gdS51bml0dGVzdEVuYWJsZWQpLnJldHVybnMoKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdW5pdFRlc3RTZXR0aW5ncy5zZXR1cCh1ID0+IHUubm9zZXRlc3RzRW5hYmxlZCkucmV0dXJucygoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC5zZXR1cChzID0+IHMuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSh0eXBlTW9xLkl0LmlzQW55KCksIHR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKF9tc2csIG9wdGlvbikgPT4gUHJvbWlzZS5yZXNvbHZlKG9wdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdFRlc3RSdW5uZXJJbnZva2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXN0Q29uZmlnU2VydmljZS5jYWxsQmFzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGVzdENvbmZpZ1NlcnZpY2Uuc2V0dXAodCA9PiB0LnNlbGVjdFRlc3RSdW5uZXIodHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0VGVzdFJ1bm5lckludm9rZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBlbmFibGVUZXN0SW52b2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGVzdENvbmZpZ1NlcnZpY2Uuc2V0dXAodCA9PiB0LmVuYWJsZVRlc3QodHlwZU1vcS5JdC5pc1ZhbHVlKHdvcmtzcGFjZVVyaSksIHR5cGVNb3EuSXQuaXNWYWx1ZShwcm9kdWN0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVRlc3RJbnZva2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZ01nciA9IHR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZSh0eXBlTW9xLkl0LmlzVmFsdWUod29ya3NwYWNlVXJpKSwgdHlwZU1vcS5JdC5pc1ZhbHVlKHByb2R1Y3QpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBjb25maWdNZ3Iub2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgICAgIGNvbmZpZ01nci5zZXR1cChjID0+IGMuY29uZmlndXJlKHR5cGVNb3EuSXQuaXNWYWx1ZSh3b3Jrc3BhY2VVcmkpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0Q29uZmlnU2VydmljZS50YXJnZXQuZGlzcGxheVRlc3RGcmFtZXdvcmtFcnJvcih3b3Jrc3BhY2VVcmkpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChzZWxlY3RUZXN0UnVubmVySW52b2tlZCkudG8uYmUuZXF1YWwodHJ1ZSwgJ1NlbGVjdCBUZXN0IFJ1bm5lciBub3QgaW52b2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChlbmFibGVUZXN0SW52b2tlZCkudG8uYmUuZXF1YWwodHJ1ZSwgJ0VuYWJsZSBUZXN0IG5vdCBpbnZva2VkJyk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIGZhY3RvcnkudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3IudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdCgnSWYgbW9yZSB0aGFuIG9uZSB0ZXN0IGZyYW1ld29yayBpcyBlbmFibGVkLCB0aGVuIHByb21wdCB0byBzZWxlY3QgYSB0ZXN0IGZyYW1ld29yaycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1LnB5VGVzdEVuYWJsZWQpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB1bml0VGVzdFNldHRpbmdzLnNldHVwKHUgPT4gdS51bml0dGVzdEVuYWJsZWQpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB1bml0VGVzdFNldHRpbmdzLnNldHVwKHUgPT4gdS5ub3NldGVzdHNFbmFibGVkKS5yZXR1cm5zKCgpID0+IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwuc2V0dXAocyA9PiBzLnNob3dJbmZvcm1hdGlvbk1lc3NhZ2UodHlwZU1vcS5JdC5pc0FueSgpLCB0eXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVNb3EuVGltZXMubmV2ZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhjZXB0aW9uVGhyb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRlc3RDb25maWdTZXJ2aWNlLnRhcmdldC5kaXNwbGF5VGVzdEZyYW1ld29ya0Vycm9yKHdvcmtzcGFjZVVyaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHRpb25UaHJvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleGNlcHRpb25UaHJvd24pLnRvLmJlLmVxdWFsKHRydWUsICdFeGNlcHRpb24gbm90IHRocm93bicpO1xyXG4gICAgICAgICAgICAgICAgYXBwU2hlbGwudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGVzdCgnSWYgbW9yZSB0aGFuIG9uZSB0ZXN0IGZyYW1ld29yayBpcyBlbmFibGVkLCB0aGVuIHByb21wdCB0byBzZWxlY3QgYSB0ZXN0IGZyYW1ld29yayBhbmQgZW5hYmxlIHRlc3QsIGJ1dCBkbyBub3QgY29uZmlndXJlJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgdW5pdFRlc3RTZXR0aW5ncy5zZXR1cCh1ID0+IHUucHlUZXN0RW5hYmxlZCkucmV0dXJucygoKSA9PiB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1LnVuaXR0ZXN0RW5hYmxlZCkucmV0dXJucygoKSA9PiB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHVuaXRUZXN0U2V0dGluZ3Muc2V0dXAodSA9PiB1Lm5vc2V0ZXN0c0VuYWJsZWQpLnJldHVybnMoKCkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC5zZXR1cChzID0+IHMuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSh0eXBlTW9xLkl0LmlzQW55KCksIHR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKF9tc2csIG9wdGlvbikgPT4gUHJvbWlzZS5yZXNvbHZlKG9wdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5uZXZlcigpKTtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RUZXN0UnVubmVySW52b2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGVzdENvbmZpZ1NlcnZpY2UuY2FsbEJhc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRlc3RDb25maWdTZXJ2aWNlLnNldHVwKHQgPT4gdC5zZWxlY3RUZXN0UnVubmVyKHR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFRlc3RSdW5uZXJJbnZva2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2R1Y3QpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5hYmxlVGVzdEludm9rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRlc3RDb25maWdTZXJ2aWNlLnNldHVwKHQgPT4gdC5lbmFibGVUZXN0KHR5cGVNb3EuSXQuaXNWYWx1ZSh3b3Jrc3BhY2VVcmkpLCB0eXBlTW9xLkl0LmlzVmFsdWUocHJvZHVjdCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVUZXN0SW52b2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdNZ3IgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBmYWN0b3J5LnNldHVwKGYgPT4gZi5jcmVhdGUodHlwZU1vcS5JdC5pc1ZhbHVlKHdvcmtzcGFjZVVyaSksIHR5cGVNb3EuSXQuaXNWYWx1ZShwcm9kdWN0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gY29uZmlnTWdyLm9iamVjdClcclxuICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdNZ3Iuc2V0dXAoYyA9PiBjLmNvbmZpZ3VyZSh0eXBlTW9xLkl0LmlzVmFsdWUod29ya3NwYWNlVXJpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZU1vcS5UaW1lcy5uZXZlcigpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZ01hbmFnZXJzVG9WZXJpZnkgPSBbY29uZmlnTWdyXTtcclxuICAgICAgICAgICAgICAgIFt0eXBlc18yLlByb2R1Y3QudW5pdHRlc3QsIHR5cGVzXzIuUHJvZHVjdC5weXRlc3QsIHR5cGVzXzIuUHJvZHVjdC5ub3NldGVzdF1cclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHByb2QgPT4gcHJvZHVjdCAhPT0gcHJvZClcclxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChwcm9kID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlclRlc3RDb25maWdNZ3IgPSB0eXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yeS5zZXR1cChmID0+IGYuY3JlYXRlKHR5cGVNb3EuSXQuaXNWYWx1ZSh3b3Jrc3BhY2VVcmkpLCB0eXBlTW9xLkl0LmlzVmFsdWUocHJvZCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBvdGhlclRlc3RDb25maWdNZ3Iub2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJUZXN0Q29uZmlnTWdyLnNldHVwKGMgPT4gYy5kaXNhYmxlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnTWFuYWdlcnNUb1ZlcmlmeS5wdXNoKG90aGVyVGVzdENvbmZpZ01ncik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHRlc3RDb25maWdTZXJ2aWNlLnRhcmdldC5kaXNwbGF5VGVzdEZyYW1ld29ya0Vycm9yKHdvcmtzcGFjZVVyaSk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHNlbGVjdFRlc3RSdW5uZXJJbnZva2VkKS50by5iZS5lcXVhbCh0cnVlLCAnU2VsZWN0IFRlc3QgUnVubmVyIG5vdCBpbnZva2VkJyk7XHJcbiAgICAgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGVuYWJsZVRlc3RJbnZva2VkKS50by5iZS5lcXVhbChmYWxzZSwgJ0VuYWJsZSBUZXN0IGlzIGludm9rZWQnKTtcclxuICAgICAgICAgICAgICAgIGZhY3RvcnkudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgICAgICBhcHBTaGVsbC52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb25maWdNYW5hZ2Vyc1RvVmVyaWZ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWd1cmF0aW9uLnVuaXQudGVzdC5qcy5tYXAiXX0=