/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

const arrays_1 = require("./arrays"); // tslint:disable:all


var vscMockHtmlContent;

(function (vscMockHtmlContent) {
  class MarkdownString {
    constructor(value = '') {
      this.value = value;
    }

    appendText(value) {
      // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash
      this.value += value.replace(/[\\`*_{}[\]()#+\-.!]/g, '\\$&');
      return this;
    }

    appendMarkdown(value) {
      this.value += value;
      return this;
    }

    appendCodeblock(langId, code) {
      this.value += '\n```';
      this.value += langId;
      this.value += '\n';
      this.value += code;
      this.value += '\n```\n';
      return this;
    }

  }

  vscMockHtmlContent.MarkdownString = MarkdownString;

  function isEmptyMarkdownString(oneOrMany) {
    if (isMarkdownString(oneOrMany)) {
      return !oneOrMany.value;
    } else if (Array.isArray(oneOrMany)) {
      return oneOrMany.every(isEmptyMarkdownString);
    } else {
      return true;
    }
  }

  vscMockHtmlContent.isEmptyMarkdownString = isEmptyMarkdownString;

  function isMarkdownString(thing) {
    if (thing instanceof MarkdownString) {
      return true;
    } else if (thing && typeof thing === 'object') {
      return typeof thing.value === 'string' && (typeof thing.isTrusted === 'boolean' || thing.isTrusted === void 0);
    }

    return false;
  }

  vscMockHtmlContent.isMarkdownString = isMarkdownString;

  function markedStringsEquals(a, b) {
    if (!a && !b) {
      return true;
    } else if (!a || !b) {
      return false;
    } else if (Array.isArray(a) && Array.isArray(b)) {
      return arrays_1.vscMockArrays.equals(a, b, markdownStringEqual);
    } else if (isMarkdownString(a) && isMarkdownString(b)) {
      return markdownStringEqual(a, b);
    } else {
      return false;
    }
  }

  vscMockHtmlContent.markedStringsEquals = markedStringsEquals;

  function markdownStringEqual(a, b) {
    if (a === b) {
      return true;
    } else if (!a || !b) {
      return false;
    } else {
      return a.value === b.value && a.isTrusted === b.isTrusted;
    }
  }

  function removeMarkdownEscapes(text) {
    if (!text) {
      return text;
    }

    return text.replace(/\\([\\`*_{}[\]()#+\-.!])/g, '$1');
  }

  vscMockHtmlContent.removeMarkdownEscapes = removeMarkdownEscapes;
})(vscMockHtmlContent = exports.vscMockHtmlContent || (exports.vscMockHtmlContent = {}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0bWxDb250ZW50LmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYXJyYXlzXzEiLCJyZXF1aXJlIiwidnNjTW9ja0h0bWxDb250ZW50IiwiTWFya2Rvd25TdHJpbmciLCJjb25zdHJ1Y3RvciIsImFwcGVuZFRleHQiLCJyZXBsYWNlIiwiYXBwZW5kTWFya2Rvd24iLCJhcHBlbmRDb2RlYmxvY2siLCJsYW5nSWQiLCJjb2RlIiwiaXNFbXB0eU1hcmtkb3duU3RyaW5nIiwib25lT3JNYW55IiwiaXNNYXJrZG93blN0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5IiwidGhpbmciLCJpc1RydXN0ZWQiLCJtYXJrZWRTdHJpbmdzRXF1YWxzIiwiYSIsImIiLCJ2c2NNb2NrQXJyYXlzIiwiZXF1YWxzIiwibWFya2Rvd25TdHJpbmdFcXVhbCIsInJlbW92ZU1hcmtkb3duRXNjYXBlcyIsInRleHQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0FBQ0EsTUFBTUMsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4QixDLENBQ0E7OztBQUNBLElBQUlDLGtCQUFKOztBQUNBLENBQUMsVUFBVUEsa0JBQVYsRUFBOEI7QUFDM0IsUUFBTUMsY0FBTixDQUFxQjtBQUNqQkMsSUFBQUEsV0FBVyxDQUFDTCxLQUFLLEdBQUcsRUFBVCxFQUFhO0FBQ3BCLFdBQUtBLEtBQUwsR0FBYUEsS0FBYjtBQUNIOztBQUNETSxJQUFBQSxVQUFVLENBQUNOLEtBQUQsRUFBUTtBQUNkO0FBQ0EsV0FBS0EsS0FBTCxJQUFjQSxLQUFLLENBQUNPLE9BQU4sQ0FBYyx1QkFBZCxFQUF1QyxNQUF2QyxDQUFkO0FBQ0EsYUFBTyxJQUFQO0FBQ0g7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LElBQXVCcUIsQ0FBQyxDQUFDRixTQUFGLEtBQWdCRyxDQUFDLENBQUNILFNBQWhEO0FBQ0g7QUFDSjs7QUFDRCxXQUFTTyxxQkFBVCxDQUErQkMsSUFBL0IsRUFBcUM7QUFDakMsUUFBSSxDQUFDQSxJQUFMLEVBQVc7QUFDUCxhQUFPQSxJQUFQO0FBQ0g7O0FBQ0QsV0FBT0EsSUFBSSxDQUFDcEIsT0FBTCxDQUFhLDJCQUFiLEVBQTBDLElBQTFDLENBQVA7QUFDSDs7QUFDREosRUFBQUEsa0JBQWtCLENBQUN1QixxQkFBbkIsR0FBMkNBLHFCQUEzQztBQUNILENBbkZELEVBbUZHdkIsa0JBQWtCLEdBQUdKLE9BQU8sQ0FBQ0ksa0JBQVIsS0FBK0JKLE9BQU8sQ0FBQ0ksa0JBQVIsR0FBNkIsRUFBNUQsQ0FuRnhCIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbid1c2Ugc3RyaWN0JztcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBhcnJheXNfMSA9IHJlcXVpcmUoXCIuL2FycmF5c1wiKTtcclxuLy8gdHNsaW50OmRpc2FibGU6YWxsXHJcbnZhciB2c2NNb2NrSHRtbENvbnRlbnQ7XHJcbihmdW5jdGlvbiAodnNjTW9ja0h0bWxDb250ZW50KSB7XHJcbiAgICBjbGFzcyBNYXJrZG93blN0cmluZyB7XHJcbiAgICAgICAgY29uc3RydWN0b3IodmFsdWUgPSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcGVuZFRleHQodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gZXNjYXBlIG1hcmtkb3duIHN5bnRheCB0b2tlbnM6IGh0dHA6Ly9kYXJpbmdmaXJlYmFsbC5uZXQvcHJvamVjdHMvbWFya2Rvd24vc3ludGF4I2JhY2tzbGFzaFxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlICs9IHZhbHVlLnJlcGxhY2UoL1tcXFxcYCpfe31bXFxdKCkjK1xcLS4hXS9nLCAnXFxcXCQmJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcHBlbmRNYXJrZG93bih2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlICs9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBwZW5kQ29kZWJsb2NrKGxhbmdJZCwgY29kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlICs9ICdcXG5gYGAnO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlICs9IGxhbmdJZDtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSArPSAnXFxuJztcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSArPSBjb2RlO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlICs9ICdcXG5gYGBcXG4nO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2c2NNb2NrSHRtbENvbnRlbnQuTWFya2Rvd25TdHJpbmcgPSBNYXJrZG93blN0cmluZztcclxuICAgIGZ1bmN0aW9uIGlzRW1wdHlNYXJrZG93blN0cmluZyhvbmVPck1hbnkpIHtcclxuICAgICAgICBpZiAoaXNNYXJrZG93blN0cmluZyhvbmVPck1hbnkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhb25lT3JNYW55LnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9uZU9yTWFueSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9uZU9yTWFueS5ldmVyeShpc0VtcHR5TWFya2Rvd25TdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdnNjTW9ja0h0bWxDb250ZW50LmlzRW1wdHlNYXJrZG93blN0cmluZyA9IGlzRW1wdHlNYXJrZG93blN0cmluZztcclxuICAgIGZ1bmN0aW9uIGlzTWFya2Rvd25TdHJpbmcodGhpbmcpIHtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBNYXJrZG93blN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpbmcgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaW5nLnZhbHVlID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICAgICAgJiYgKHR5cGVvZiB0aGluZy5pc1RydXN0ZWQgPT09ICdib29sZWFuJyB8fCB0aGluZy5pc1RydXN0ZWQgPT09IHZvaWQgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZzY01vY2tIdG1sQ29udGVudC5pc01hcmtkb3duU3RyaW5nID0gaXNNYXJrZG93blN0cmluZztcclxuICAgIGZ1bmN0aW9uIG1hcmtlZFN0cmluZ3NFcXVhbHMoYSwgYikge1xyXG4gICAgICAgIGlmICghYSAmJiAhYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIWEgfHwgIWIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5c18xLnZzY01vY2tBcnJheXMuZXF1YWxzKGEsIGIsIG1hcmtkb3duU3RyaW5nRXF1YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc01hcmtkb3duU3RyaW5nKGEpICYmIGlzTWFya2Rvd25TdHJpbmcoYikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcmtkb3duU3RyaW5nRXF1YWwoYSwgYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdnNjTW9ja0h0bWxDb250ZW50Lm1hcmtlZFN0cmluZ3NFcXVhbHMgPSBtYXJrZWRTdHJpbmdzRXF1YWxzO1xyXG4gICAgZnVuY3Rpb24gbWFya2Rvd25TdHJpbmdFcXVhbChhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFhIHx8ICFiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLnZhbHVlID09PSBiLnZhbHVlICYmIGEuaXNUcnVzdGVkID09PSBiLmlzVHJ1c3RlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZW1vdmVNYXJrZG93bkVzY2FwZXModGV4dCkge1xyXG4gICAgICAgIGlmICghdGV4dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFxcXChbXFxcXGAqX3t9W1xcXSgpIytcXC0uIV0pL2csICckMScpO1xyXG4gICAgfVxyXG4gICAgdnNjTW9ja0h0bWxDb250ZW50LnJlbW92ZU1hcmtkb3duRXNjYXBlcyA9IHJlbW92ZU1hcmtkb3duRXNjYXBlcztcclxufSkodnNjTW9ja0h0bWxDb250ZW50ID0gZXhwb3J0cy52c2NNb2NrSHRtbENvbnRlbnQgfHwgKGV4cG9ydHMudnNjTW9ja0h0bWxDb250ZW50ID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHRtbENvbnRlbnQuanMubWFwIl19