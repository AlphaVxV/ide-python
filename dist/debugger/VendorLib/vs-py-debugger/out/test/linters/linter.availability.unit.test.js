// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const TypeMoq = require("typemoq");

const types_1 = require("../../client/common/types");

const linterAvailability_1 = require("../../client/linters/linterAvailability");

const linterInfo_1 = require("../../client/linters/linterInfo"); // tslint:disable-next-line:max-func-body-length


suite('Linter Availability Provider tests', () => {
  test('Availability feature is disabled when global default for jediEnabled=true.', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const jediEnabledValue = true;
    const expectedResult = false; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock] = getDependenciesForAvailabilityTests();
    setupConfigurationServiceForJediSettingsTest(jediEnabledValue, configServiceMock); // call

    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object); // check expectaions

    chai_1.expect(availabilityProvider.isFeatureEnabled).is.equal(expectedResult, 'Avaialability feature should be disabled when python.jediEnabled is true');
    workspaceServiceMock.verifyAll();
  }));
  test('Availability feature is enabled when global default for jediEnabled=false.', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const jediEnabledValue = false;
    const expectedResult = true; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock] = getDependenciesForAvailabilityTests();
    setupConfigurationServiceForJediSettingsTest(jediEnabledValue, configServiceMock);
    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    chai_1.expect(availabilityProvider.isFeatureEnabled).is.equal(expectedResult, 'Avaialability feature should be enabled when python.jediEnabled defaults to false');
    workspaceServiceMock.verifyAll();
  }));
  test('Prompt will be performed when linter is not configured at all for the workspace, workspace-folder, or the user', () => __awaiter(void 0, void 0, void 0, function* () {
    // setup expectations
    const pylintUserValue = undefined;
    const pylintWorkspaceValue = undefined;
    const pylintWorkspaceFolderValue = undefined;
    const expectedResult = true;
    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupWorkspaceMockForLinterConfiguredTests(pylintUserValue, pylintWorkspaceValue, pylintWorkspaceFolderValue, workspaceServiceMock);
    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = availabilityProvider.isLinterUsingDefaultConfiguration(linterInfo);
    chai_1.expect(result).to.equal(expectedResult, 'Linter is unconfigured but prompt did not get raised');
    workspaceServiceMock.verifyAll();
  }));
  test('No prompt performed when linter is configured as enabled for the workspace', () => __awaiter(void 0, void 0, void 0, function* () {
    // setup expectations
    const pylintUserValue = undefined;
    const pylintWorkspaceValue = true;
    const pylintWorkspaceFolderValue = undefined;
    const expectedResult = false;
    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupWorkspaceMockForLinterConfiguredTests(pylintUserValue, pylintWorkspaceValue, pylintWorkspaceFolderValue, workspaceServiceMock);
    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = availabilityProvider.isLinterUsingDefaultConfiguration(linterInfo);
    chai_1.expect(result).to.equal(expectedResult, 'Available linter prompt should not be shown when linter is configured for workspace.');
    workspaceServiceMock.verifyAll();
  }));
  test('No prompt performed when linter is configured as enabled for the entire user', () => __awaiter(void 0, void 0, void 0, function* () {
    // setup expectations
    const pylintUserValue = true;
    const pylintWorkspaceValue = undefined;
    const pylintWorkspaceFolderValue = undefined;
    const expectedResult = false; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupWorkspaceMockForLinterConfiguredTests(pylintUserValue, pylintWorkspaceValue, pylintWorkspaceFolderValue, workspaceServiceMock);
    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = availabilityProvider.isLinterUsingDefaultConfiguration(linterInfo);
    chai_1.expect(result).to.equal(expectedResult, 'Available linter prompt should not be shown when linter is configured for user.');
    workspaceServiceMock.verifyAll();
  }));
  test('No prompt performed when linter is configured as enabled for the workspace-folder', () => __awaiter(void 0, void 0, void 0, function* () {
    // setup expectations
    const pylintUserValue = undefined;
    const pylintWorkspaceValue = undefined;
    const pylintWorkspaceFolderValue = true;
    const expectedResult = false; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupWorkspaceMockForLinterConfiguredTests(pylintUserValue, pylintWorkspaceValue, pylintWorkspaceFolderValue, workspaceServiceMock);
    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = availabilityProvider.isLinterUsingDefaultConfiguration(linterInfo);
    chai_1.expect(result).to.equal(expectedResult, 'Available linter prompt should not be shown when linter is configured for workspace-folder.');
    workspaceServiceMock.verifyAll();
  }));

  function testForLinterPromptResponse(promptReply) {
    return __awaiter(this, void 0, void 0, function* () {
      // arrange
      const [appShellMock, installerMock, workspaceServiceMock] = getDependenciesForAvailabilityTests();
      const configServiceMock = TypeMoq.Mock.ofType();
      const linterInfo = new class extends linterInfo_1.LinterInfo {
        constructor() {
          super(...arguments);
          this.testIsEnabled = promptReply ? promptReply.enabled : false;
        }

        enableAsync(enabled, resource) {
          return __awaiter(this, void 0, void 0, function* () {
            this.testIsEnabled = enabled;
            return Promise.resolve();
          });
        }

      }(types_1.Product.pylint, 'pylint', configServiceMock.object, ['.pylintrc', 'pylintrc']);
      appShellMock.setup(ap => ap.showInformationMessage(TypeMoq.It.isValue(`Linter ${linterInfo.id} is available but not enabled.`), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => {
        // tslint:disable-next-line:no-any
        return promptReply;
      }).verifiable(TypeMoq.Times.once()); // perform test

      const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
      const result = yield availabilityProvider.promptToConfigureAvailableLinter(linterInfo);

      if (promptReply) {
        chai_1.expect(linterInfo.testIsEnabled).to.equal(promptReply.enabled, 'LinterInfo test class was not updated as a result of the test.');
      }

      return result;
    });
  }

  test('Linter is enabled after being prompted and "Enable <linter>" is selected', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const expectedResult = true;
    const promptReply = {
      title: 'Enable pylint',
      enabled: true
    }; // run scenario

    const result = yield testForLinterPromptResponse(promptReply); // test results

    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
  }));
  test('Linter is disabled after being prompted and "Disable <linter>" is selected', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectation
    const promptReply = {
      title: 'Disable pylint',
      enabled: false
    };
    const expectedResult = true; // run scenario

    const result = yield testForLinterPromptResponse(promptReply); // test results

    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
  }));
  test('Linter is left unconfigured after being prompted and the prompt is disabled without any selection made', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectation
    const promptReply = undefined;
    const expectedResult = false; // run scenario

    const result = yield testForLinterPromptResponse(promptReply); // test results

    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
  })); // Options to test the implementation of the IAvailableLinterActivator.
  // All options default to values that would otherwise allow the prompt to appear.

  class AvailablityTestOverallOptions {
    constructor() {
      this.jediEnabledValue = false;
      this.linterIsInstalled = true;
    }

  }

  function performTestOfOverallImplementation(options) {
    return __awaiter(this, void 0, void 0, function* () {
      // arrange
      const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
      appShellMock.setup(ap => ap.showInformationMessage(TypeMoq.It.isValue(`Linter ${linterInfo.id} is available but not enabled.`), TypeMoq.It.isAny(), TypeMoq.It.isAny())) // tslint:disable-next-line:no-any
      .returns(() => options.promptReply).verifiable(TypeMoq.Times.once());
      installerMock.setup(im => im.isInstalled(linterInfo.product, TypeMoq.It.isAny())).returns(() => __awaiter(this, void 0, void 0, function* () {
        return options.linterIsInstalled;
      })).verifiable(TypeMoq.Times.once());
      setupConfigurationServiceForJediSettingsTest(options.jediEnabledValue, configServiceMock);
      setupWorkspaceMockForLinterConfiguredTests(options.pylintUserEnabled, options.pylintWorkspaceEnabled, options.pylintWorkspaceFolderEnabled, workspaceServiceMock); // perform test

      const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
      return availabilityProvider.promptIfLinterAvailable(linterInfo);
    });
  }

  test('Overall implementation does not change configuration when feature disabled', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.jediEnabledValue = true;
    const expectedResult = false; // arrange

    const result = yield performTestOfOverallImplementation(testOpts); // perform test

    chai_1.expect(expectedResult).to.equal(result, 'promptIfLinterAvailable should not change any configuration when python.jediEnabled is true.');
  }));
  test('Overall implementation does not change configuration when linter is configured (enabled)', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.pylintWorkspaceEnabled = true;
    const expectedResult = false; // arrange

    const result = yield performTestOfOverallImplementation(testOpts); // perform test

    chai_1.expect(expectedResult).to.equal(result, 'Configuration should not change if the linter is configured in any way.');
  }));
  test('Overall implementation does not change configuration when linter is configured (disabled)', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.pylintWorkspaceEnabled = false;
    const expectedResult = false; // arrange

    const result = yield performTestOfOverallImplementation(testOpts);
    chai_1.expect(expectedResult).to.equal(result, 'Configuration should not change if the linter is disabled in any way.');
  }));
  test('Overall implementation does not change configuration when linter is unavailable in current workspace environment', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.pylintWorkspaceEnabled = true;
    const expectedResult = false; // arrange

    const result = yield performTestOfOverallImplementation(testOpts);
    chai_1.expect(expectedResult).to.equal(result, 'Configuration should not change if the linter is unavailable in the current workspace environment.');
  }));
  test('Overall implementation does not change configuration when user is prompted and prompt is dismissed', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.promptReply = undefined; // just being explicit for test readability - this is the default

    const expectedResult = false; // arrange

    const result = yield performTestOfOverallImplementation(testOpts);
    chai_1.expect(expectedResult).to.equal(result, 'Configuration should not change if the user is prompted and they dismiss the prompt.');
  }));
  test('Overall implementation changes configuration when user is prompted and "Disable <linter>" is selected', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.promptReply = {
      title: 'Disable pylint',
      enabled: false
    };
    const expectedResult = true; // arrange

    const result = yield performTestOfOverallImplementation(testOpts);
    chai_1.expect(expectedResult).to.equal(result, 'Configuration should change if the user is prompted and they choose to update the linter config.');
  }));
  test('Overall implementation changes configuration when user is prompted and "Enable <linter>" is selected', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const testOpts = new AvailablityTestOverallOptions();
    testOpts.promptReply = {
      title: 'Enable pylint',
      enabled: true
    };
    const expectedResult = true; // arrange

    const result = yield performTestOfOverallImplementation(testOpts);
    chai_1.expect(expectedResult).to.equal(result, 'Configuration should change if the user is prompted and they choose to update the linter config.');
  }));
  test('Discovery of linter is available in the environment returns true when it succeeds and is present', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const linterIsInstalled = true;
    const expectedResult = true; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupInstallerForAvailabilityTest(linterInfo, linterIsInstalled, installerMock); // perform test

    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = yield availabilityProvider.isLinterAvailable(linterInfo.product);
    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
    installerMock.verifyAll();
  }));
  test('Discovery of linter is available in the environment returns false when it succeeds and is not present', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const linterIsInstalled = false;
    const expectedResult = false; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    setupInstallerForAvailabilityTest(linterInfo, linterIsInstalled, installerMock); // perform test

    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = yield availabilityProvider.isLinterAvailable(linterInfo.product);
    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
    installerMock.verifyAll();
  }));
  test('Discovery of linter is available in the environment returns false when it fails', () => __awaiter(void 0, void 0, void 0, function* () {
    // set expectations
    const expectedResult = false; // arrange

    const [appShellMock, installerMock, workspaceServiceMock, configServiceMock, linterInfo] = getDependenciesForAvailabilityTests();
    installerMock.setup(im => im.isInstalled(linterInfo.product, TypeMoq.It.isAny())).returns(() => Promise.reject('error testfail')).verifiable(TypeMoq.Times.once()); // perform test

    const availabilityProvider = new linterAvailability_1.AvailableLinterActivator(appShellMock.object, installerMock.object, workspaceServiceMock.object, configServiceMock.object);
    const result = yield availabilityProvider.isLinterAvailable(linterInfo.product);
    chai_1.expect(result).to.equal(expectedResult, 'Expected promptToConfigureAvailableLinter to return true because the configuration was updated.');
    installerMock.verifyAll();
  }));
});

function setupWorkspaceMockForLinterConfiguredTests(enabledForUser, enabeldForWorkspace, enabledForWorkspaceFolder, workspaceServiceMock) {
  if (!workspaceServiceMock) {
    workspaceServiceMock = TypeMoq.Mock.ofType();
  }

  const workspaceConfiguration = TypeMoq.Mock.ofType();
  workspaceConfiguration.setup(wc => wc.inspect(TypeMoq.It.isValue('pylintEnabled'))).returns(() => {
    return {
      key: '',
      globalValue: enabledForUser,
      defaultValue: false,
      workspaceFolderValue: enabeldForWorkspace,
      workspaceValue: enabledForWorkspaceFolder
    };
  }).verifiable(TypeMoq.Times.once());
  workspaceServiceMock.setup(ws => ws.getConfiguration(TypeMoq.It.isValue('python.linting'), TypeMoq.It.isAny())).returns(() => workspaceConfiguration.object).verifiable(TypeMoq.Times.once());
  return workspaceServiceMock;
}

function setupConfigurationServiceForJediSettingsTest(jediEnabledValue, configServiceMock) {
  if (!configServiceMock) {
    configServiceMock = TypeMoq.Mock.ofType();
  }

  const pythonSettings = TypeMoq.Mock.ofType();
  pythonSettings.setup(ps => ps.jediEnabled).returns(() => jediEnabledValue);
  configServiceMock.setup(cs => cs.getSettings()).returns(() => pythonSettings.object);
  return [configServiceMock, pythonSettings];
}

function setupInstallerForAvailabilityTest(linterInfo, linterIsInstalled, installerMock) {
  if (!installerMock) {
    installerMock = TypeMoq.Mock.ofType();
  }

  installerMock.setup(im => im.isInstalled(linterInfo.product, TypeMoq.It.isAny())).returns(() => __awaiter(this, void 0, void 0, function* () {
    return linterIsInstalled;
  })).verifiable(TypeMoq.Times.once());
  return installerMock;
}

function getDependenciesForAvailabilityTests() {
  const configServiceMock = TypeMoq.Mock.ofType();
  return [TypeMoq.Mock.ofType(), TypeMoq.Mock.ofType(), TypeMoq.Mock.ofType(), TypeMoq.Mock.ofType(), new linterInfo_1.LinterInfo(types_1.Product.pylint, 'pylint', configServiceMock.object, ['.pylintrc', 'pylintrc'])];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpbnRlci5hdmFpbGFiaWxpdHkudW5pdC50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwiVHlwZU1vcSIsInR5cGVzXzEiLCJsaW50ZXJBdmFpbGFiaWxpdHlfMSIsImxpbnRlckluZm9fMSIsInN1aXRlIiwidGVzdCIsImplZGlFbmFibGVkVmFsdWUiLCJleHBlY3RlZFJlc3VsdCIsImFwcFNoZWxsTW9jayIsImluc3RhbGxlck1vY2siLCJ3b3Jrc3BhY2VTZXJ2aWNlTW9jayIsImNvbmZpZ1NlcnZpY2VNb2NrIiwiZ2V0RGVwZW5kZW5jaWVzRm9yQXZhaWxhYmlsaXR5VGVzdHMiLCJzZXR1cENvbmZpZ3VyYXRpb25TZXJ2aWNlRm9ySmVkaVNldHRpbmdzVGVzdCIsImF2YWlsYWJpbGl0eVByb3ZpZGVyIiwiQXZhaWxhYmxlTGludGVyQWN0aXZhdG9yIiwib2JqZWN0IiwiZXhwZWN0IiwiaXNGZWF0dXJlRW5hYmxlZCIsImlzIiwiZXF1YWwiLCJ2ZXJpZnlBbGwiLCJweWxpbnRVc2VyVmFsdWUiLCJ1bmRlZmluZWQiLCJweWxpbnRXb3Jrc3BhY2VWYWx1ZSIsInB5bGludFdvcmtzcGFjZUZvbGRlclZhbHVlIiwibGludGVySW5mbyIsInNldHVwV29ya3NwYWNlTW9ja0ZvckxpbnRlckNvbmZpZ3VyZWRUZXN0cyIsImlzTGludGVyVXNpbmdEZWZhdWx0Q29uZmlndXJhdGlvbiIsInRvIiwidGVzdEZvckxpbnRlclByb21wdFJlc3BvbnNlIiwicHJvbXB0UmVwbHkiLCJNb2NrIiwib2ZUeXBlIiwiTGludGVySW5mbyIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwidGVzdElzRW5hYmxlZCIsImVuYWJsZWQiLCJlbmFibGVBc3luYyIsInJlc291cmNlIiwiUHJvZHVjdCIsInB5bGludCIsInNldHVwIiwiYXAiLCJzaG93SW5mb3JtYXRpb25NZXNzYWdlIiwiSXQiLCJpc1ZhbHVlIiwiaWQiLCJpc0FueSIsInJldHVybnMiLCJ2ZXJpZmlhYmxlIiwiVGltZXMiLCJvbmNlIiwicHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIiLCJ0aXRsZSIsIkF2YWlsYWJsaXR5VGVzdE92ZXJhbGxPcHRpb25zIiwibGludGVySXNJbnN0YWxsZWQiLCJwZXJmb3JtVGVzdE9mT3ZlcmFsbEltcGxlbWVudGF0aW9uIiwib3B0aW9ucyIsImltIiwiaXNJbnN0YWxsZWQiLCJwcm9kdWN0IiwicHlsaW50VXNlckVuYWJsZWQiLCJweWxpbnRXb3Jrc3BhY2VFbmFibGVkIiwicHlsaW50V29ya3NwYWNlRm9sZGVyRW5hYmxlZCIsInByb21wdElmTGludGVyQXZhaWxhYmxlIiwidGVzdE9wdHMiLCJzZXR1cEluc3RhbGxlckZvckF2YWlsYWJpbGl0eVRlc3QiLCJpc0xpbnRlckF2YWlsYWJsZSIsImVuYWJsZWRGb3JVc2VyIiwiZW5hYmVsZEZvcldvcmtzcGFjZSIsImVuYWJsZWRGb3JXb3Jrc3BhY2VGb2xkZXIiLCJ3b3Jrc3BhY2VDb25maWd1cmF0aW9uIiwid2MiLCJpbnNwZWN0Iiwia2V5IiwiZ2xvYmFsVmFsdWUiLCJkZWZhdWx0VmFsdWUiLCJ3b3Jrc3BhY2VGb2xkZXJWYWx1ZSIsIndvcmtzcGFjZVZhbHVlIiwid3MiLCJnZXRDb25maWd1cmF0aW9uIiwicHl0aG9uU2V0dGluZ3MiLCJwcyIsImplZGlFbmFibGVkIiwiY3MiLCJnZXRTZXR0aW5ncyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUNBLElBQUlBLFNBQVMsR0FBSSxVQUFRLFNBQUtBLFNBQWQsSUFBNEIsVUFBVUMsT0FB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cnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbid1c2Ugc3RyaWN0JztcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcclxuY29uc3QgVHlwZU1vcSA9IHJlcXVpcmUoXCJ0eXBlbW9xXCIpO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vdHlwZXNcIik7XHJcbmNvbnN0IGxpbnRlckF2YWlsYWJpbGl0eV8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9saW50ZXJzL2xpbnRlckF2YWlsYWJpbGl0eVwiKTtcclxuY29uc3QgbGludGVySW5mb18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9saW50ZXJzL2xpbnRlckluZm9cIik7XHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtZnVuYy1ib2R5LWxlbmd0aFxyXG5zdWl0ZSgnTGludGVyIEF2YWlsYWJpbGl0eSBQcm92aWRlciB0ZXN0cycsICgpID0+IHtcclxuICAgIHRlc3QoJ0F2YWlsYWJpbGl0eSBmZWF0dXJlIGlzIGRpc2FibGVkIHdoZW4gZ2xvYmFsIGRlZmF1bHQgZm9yIGplZGlFbmFibGVkPXRydWUuJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIHNldCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCBqZWRpRW5hYmxlZFZhbHVlID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGFycmFuZ2VcclxuICAgICAgICBjb25zdCBbYXBwU2hlbGxNb2NrLCBpbnN0YWxsZXJNb2NrLCB3b3Jrc3BhY2VTZXJ2aWNlTW9jaywgY29uZmlnU2VydmljZU1vY2tdID0gZ2V0RGVwZW5kZW5jaWVzRm9yQXZhaWxhYmlsaXR5VGVzdHMoKTtcclxuICAgICAgICBzZXR1cENvbmZpZ3VyYXRpb25TZXJ2aWNlRm9ySmVkaVNldHRpbmdzVGVzdChqZWRpRW5hYmxlZFZhbHVlLCBjb25maWdTZXJ2aWNlTW9jayk7XHJcbiAgICAgICAgLy8gY2FsbFxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eVByb3ZpZGVyID0gbmV3IGxpbnRlckF2YWlsYWJpbGl0eV8xLkF2YWlsYWJsZUxpbnRlckFjdGl2YXRvcihhcHBTaGVsbE1vY2sub2JqZWN0LCBpbnN0YWxsZXJNb2NrLm9iamVjdCwgd29ya3NwYWNlU2VydmljZU1vY2sub2JqZWN0LCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QpO1xyXG4gICAgICAgIC8vIGNoZWNrIGV4cGVjdGFpb25zXHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChhdmFpbGFiaWxpdHlQcm92aWRlci5pc0ZlYXR1cmVFbmFibGVkKS5pcy5lcXVhbChleHBlY3RlZFJlc3VsdCwgJ0F2YWlhbGFiaWxpdHkgZmVhdHVyZSBzaG91bGQgYmUgZGlzYWJsZWQgd2hlbiBweXRob24uamVkaUVuYWJsZWQgaXMgdHJ1ZScpO1xyXG4gICAgICAgIHdvcmtzcGFjZVNlcnZpY2VNb2NrLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnQXZhaWxhYmlsaXR5IGZlYXR1cmUgaXMgZW5hYmxlZCB3aGVuIGdsb2JhbCBkZWZhdWx0IGZvciBqZWRpRW5hYmxlZD1mYWxzZS4nLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0IGV4cGVjdGF0aW9uc1xyXG4gICAgICAgIGNvbnN0IGplZGlFbmFibGVkVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IFthcHBTaGVsbE1vY2ssIGluc3RhbGxlck1vY2ssIHdvcmtzcGFjZVNlcnZpY2VNb2NrLCBjb25maWdTZXJ2aWNlTW9ja10gPSBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpO1xyXG4gICAgICAgIHNldHVwQ29uZmlndXJhdGlvblNlcnZpY2VGb3JKZWRpU2V0dGluZ3NUZXN0KGplZGlFbmFibGVkVmFsdWUsIGNvbmZpZ1NlcnZpY2VNb2NrKTtcclxuICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlQcm92aWRlciA9IG5ldyBsaW50ZXJBdmFpbGFiaWxpdHlfMS5BdmFpbGFibGVMaW50ZXJBY3RpdmF0b3IoYXBwU2hlbGxNb2NrLm9iamVjdCwgaW5zdGFsbGVyTW9jay5vYmplY3QsIHdvcmtzcGFjZVNlcnZpY2VNb2NrLm9iamVjdCwgY29uZmlnU2VydmljZU1vY2sub2JqZWN0KTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KGF2YWlsYWJpbGl0eVByb3ZpZGVyLmlzRmVhdHVyZUVuYWJsZWQpLmlzLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnQXZhaWFsYWJpbGl0eSBmZWF0dXJlIHNob3VsZCBiZSBlbmFibGVkIHdoZW4gcHl0aG9uLmplZGlFbmFibGVkIGRlZmF1bHRzIHRvIGZhbHNlJyk7XHJcbiAgICAgICAgd29ya3NwYWNlU2VydmljZU1vY2sudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdQcm9tcHQgd2lsbCBiZSBwZXJmb3JtZWQgd2hlbiBsaW50ZXIgaXMgbm90IGNvbmZpZ3VyZWQgYXQgYWxsIGZvciB0aGUgd29ya3NwYWNlLCB3b3Jrc3BhY2UtZm9sZGVyLCBvciB0aGUgdXNlcicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXR1cCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCBweWxpbnRVc2VyVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcHlsaW50V29ya3NwYWNlVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcHlsaW50V29ya3NwYWNlRm9sZGVyVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IFthcHBTaGVsbE1vY2ssIGluc3RhbGxlck1vY2ssIHdvcmtzcGFjZVNlcnZpY2VNb2NrLCBjb25maWdTZXJ2aWNlTW9jaywgbGludGVySW5mb10gPSBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpO1xyXG4gICAgICAgIHNldHVwV29ya3NwYWNlTW9ja0ZvckxpbnRlckNvbmZpZ3VyZWRUZXN0cyhweWxpbnRVc2VyVmFsdWUsIHB5bGludFdvcmtzcGFjZVZhbHVlLCBweWxpbnRXb3Jrc3BhY2VGb2xkZXJWYWx1ZSwgd29ya3NwYWNlU2VydmljZU1vY2spO1xyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eVByb3ZpZGVyID0gbmV3IGxpbnRlckF2YWlsYWJpbGl0eV8xLkF2YWlsYWJsZUxpbnRlckFjdGl2YXRvcihhcHBTaGVsbE1vY2sub2JqZWN0LCBpbnN0YWxsZXJNb2NrLm9iamVjdCwgd29ya3NwYWNlU2VydmljZU1vY2sub2JqZWN0LCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF2YWlsYWJpbGl0eVByb3ZpZGVyLmlzTGludGVyVXNpbmdEZWZhdWx0Q29uZmlndXJhdGlvbihsaW50ZXJJbmZvKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uZXF1YWwoZXhwZWN0ZWRSZXN1bHQsICdMaW50ZXIgaXMgdW5jb25maWd1cmVkIGJ1dCBwcm9tcHQgZGlkIG5vdCBnZXQgcmFpc2VkJyk7XHJcbiAgICAgICAgd29ya3NwYWNlU2VydmljZU1vY2sudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdObyBwcm9tcHQgcGVyZm9ybWVkIHdoZW4gbGludGVyIGlzIGNvbmZpZ3VyZWQgYXMgZW5hYmxlZCBmb3IgdGhlIHdvcmtzcGFjZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXR1cCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCBweWxpbnRVc2VyVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcHlsaW50V29ya3NwYWNlVmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHB5bGludFdvcmtzcGFjZUZvbGRlclZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgW2FwcFNoZWxsTW9jaywgaW5zdGFsbGVyTW9jaywgd29ya3NwYWNlU2VydmljZU1vY2ssIGNvbmZpZ1NlcnZpY2VNb2NrLCBsaW50ZXJJbmZvXSA9IGdldERlcGVuZGVuY2llc0ZvckF2YWlsYWJpbGl0eVRlc3RzKCk7XHJcbiAgICAgICAgc2V0dXBXb3Jrc3BhY2VNb2NrRm9yTGludGVyQ29uZmlndXJlZFRlc3RzKHB5bGludFVzZXJWYWx1ZSwgcHlsaW50V29ya3NwYWNlVmFsdWUsIHB5bGludFdvcmtzcGFjZUZvbGRlclZhbHVlLCB3b3Jrc3BhY2VTZXJ2aWNlTW9jayk7XHJcbiAgICAgICAgY29uc3QgYXZhaWxhYmlsaXR5UHJvdmlkZXIgPSBuZXcgbGludGVyQXZhaWxhYmlsaXR5XzEuQXZhaWxhYmxlTGludGVyQWN0aXZhdG9yKGFwcFNoZWxsTW9jay5vYmplY3QsIGluc3RhbGxlck1vY2sub2JqZWN0LCB3b3Jrc3BhY2VTZXJ2aWNlTW9jay5vYmplY3QsIGNvbmZpZ1NlcnZpY2VNb2NrLm9iamVjdCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXZhaWxhYmlsaXR5UHJvdmlkZXIuaXNMaW50ZXJVc2luZ0RlZmF1bHRDb25maWd1cmF0aW9uKGxpbnRlckluZm8pO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5lcXVhbChleHBlY3RlZFJlc3VsdCwgJ0F2YWlsYWJsZSBsaW50ZXIgcHJvbXB0IHNob3VsZCBub3QgYmUgc2hvd24gd2hlbiBsaW50ZXIgaXMgY29uZmlndXJlZCBmb3Igd29ya3NwYWNlLicpO1xyXG4gICAgICAgIHdvcmtzcGFjZVNlcnZpY2VNb2NrLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnTm8gcHJvbXB0IHBlcmZvcm1lZCB3aGVuIGxpbnRlciBpcyBjb25maWd1cmVkIGFzIGVuYWJsZWQgZm9yIHRoZSBlbnRpcmUgdXNlcicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXR1cCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCBweWxpbnRVc2VyVmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHB5bGludFdvcmtzcGFjZVZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHB5bGludFdvcmtzcGFjZUZvbGRlclZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IFthcHBTaGVsbE1vY2ssIGluc3RhbGxlck1vY2ssIHdvcmtzcGFjZVNlcnZpY2VNb2NrLCBjb25maWdTZXJ2aWNlTW9jaywgbGludGVySW5mb10gPSBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpO1xyXG4gICAgICAgIHNldHVwV29ya3NwYWNlTW9ja0ZvckxpbnRlckNvbmZpZ3VyZWRUZXN0cyhweWxpbnRVc2VyVmFsdWUsIHB5bGludFdvcmtzcGFjZVZhbHVlLCBweWxpbnRXb3Jrc3BhY2VGb2xkZXJWYWx1ZSwgd29ya3NwYWNlU2VydmljZU1vY2spO1xyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eVByb3ZpZGVyID0gbmV3IGxpbnRlckF2YWlsYWJpbGl0eV8xLkF2YWlsYWJsZUxpbnRlckFjdGl2YXRvcihhcHBTaGVsbE1vY2sub2JqZWN0LCBpbnN0YWxsZXJNb2NrLm9iamVjdCwgd29ya3NwYWNlU2VydmljZU1vY2sub2JqZWN0LCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF2YWlsYWJpbGl0eVByb3ZpZGVyLmlzTGludGVyVXNpbmdEZWZhdWx0Q29uZmlndXJhdGlvbihsaW50ZXJJbmZvKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uZXF1YWwoZXhwZWN0ZWRSZXN1bHQsICdBdmFpbGFibGUgbGludGVyIHByb21wdCBzaG91bGQgbm90IGJlIHNob3duIHdoZW4gbGludGVyIGlzIGNvbmZpZ3VyZWQgZm9yIHVzZXIuJyk7XHJcbiAgICAgICAgd29ya3NwYWNlU2VydmljZU1vY2sudmVyaWZ5QWxsKCk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdObyBwcm9tcHQgcGVyZm9ybWVkIHdoZW4gbGludGVyIGlzIGNvbmZpZ3VyZWQgYXMgZW5hYmxlZCBmb3IgdGhlIHdvcmtzcGFjZS1mb2xkZXInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0dXAgZXhwZWN0YXRpb25zXHJcbiAgICAgICAgY29uc3QgcHlsaW50VXNlclZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHB5bGludFdvcmtzcGFjZVZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHB5bGludFdvcmtzcGFjZUZvbGRlclZhbHVlID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGFycmFuZ2VcclxuICAgICAgICBjb25zdCBbYXBwU2hlbGxNb2NrLCBpbnN0YWxsZXJNb2NrLCB3b3Jrc3BhY2VTZXJ2aWNlTW9jaywgY29uZmlnU2VydmljZU1vY2ssIGxpbnRlckluZm9dID0gZ2V0RGVwZW5kZW5jaWVzRm9yQXZhaWxhYmlsaXR5VGVzdHMoKTtcclxuICAgICAgICBzZXR1cFdvcmtzcGFjZU1vY2tGb3JMaW50ZXJDb25maWd1cmVkVGVzdHMocHlsaW50VXNlclZhbHVlLCBweWxpbnRXb3Jrc3BhY2VWYWx1ZSwgcHlsaW50V29ya3NwYWNlRm9sZGVyVmFsdWUsIHdvcmtzcGFjZVNlcnZpY2VNb2NrKTtcclxuICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlQcm92aWRlciA9IG5ldyBsaW50ZXJBdmFpbGFiaWxpdHlfMS5BdmFpbGFibGVMaW50ZXJBY3RpdmF0b3IoYXBwU2hlbGxNb2NrLm9iamVjdCwgaW5zdGFsbGVyTW9jay5vYmplY3QsIHdvcmtzcGFjZVNlcnZpY2VNb2NrLm9iamVjdCwgY29uZmlnU2VydmljZU1vY2sub2JqZWN0KTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhdmFpbGFiaWxpdHlQcm92aWRlci5pc0xpbnRlclVzaW5nRGVmYXVsdENvbmZpZ3VyYXRpb24obGludGVySW5mbyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnQXZhaWxhYmxlIGxpbnRlciBwcm9tcHQgc2hvdWxkIG5vdCBiZSBzaG93biB3aGVuIGxpbnRlciBpcyBjb25maWd1cmVkIGZvciB3b3Jrc3BhY2UtZm9sZGVyLicpO1xyXG4gICAgICAgIHdvcmtzcGFjZVNlcnZpY2VNb2NrLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgZnVuY3Rpb24gdGVzdEZvckxpbnRlclByb21wdFJlc3BvbnNlKHByb21wdFJlcGx5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBbYXBwU2hlbGxNb2NrLCBpbnN0YWxsZXJNb2NrLCB3b3Jrc3BhY2VTZXJ2aWNlTW9ja10gPSBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWdTZXJ2aWNlTW9jayA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgY29uc3QgbGludGVySW5mbyA9IG5ldyBjbGFzcyBleHRlbmRzIGxpbnRlckluZm9fMS5MaW50ZXJJbmZvIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXN0SXNFbmFibGVkID0gcHJvbXB0UmVwbHkgPyBwcm9tcHRSZXBseS5lbmFibGVkIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbmFibGVBc3luYyhlbmFibGVkLCByZXNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVzdElzRW5hYmxlZCA9IGVuYWJsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSh0eXBlc18xLlByb2R1Y3QucHlsaW50LCAncHlsaW50JywgY29uZmlnU2VydmljZU1vY2sub2JqZWN0LCBbJy5weWxpbnRyYycsICdweWxpbnRyYyddKTtcclxuICAgICAgICAgICAgYXBwU2hlbGxNb2NrLnNldHVwKGFwID0+IGFwLnNob3dJbmZvcm1hdGlvbk1lc3NhZ2UoVHlwZU1vcS5JdC5pc1ZhbHVlKGBMaW50ZXIgJHtsaW50ZXJJbmZvLmlkfSBpcyBhdmFpbGFibGUgYnV0IG5vdCBlbmFibGVkLmApLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbXB0UmVwbHk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIC8vIHBlcmZvcm0gdGVzdFxyXG4gICAgICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlQcm92aWRlciA9IG5ldyBsaW50ZXJBdmFpbGFiaWxpdHlfMS5BdmFpbGFibGVMaW50ZXJBY3RpdmF0b3IoYXBwU2hlbGxNb2NrLm9iamVjdCwgaW5zdGFsbGVyTW9jay5vYmplY3QsIHdvcmtzcGFjZVNlcnZpY2VNb2NrLm9iamVjdCwgY29uZmlnU2VydmljZU1vY2sub2JqZWN0KTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgYXZhaWxhYmlsaXR5UHJvdmlkZXIucHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIobGludGVySW5mbyk7XHJcbiAgICAgICAgICAgIGlmIChwcm9tcHRSZXBseSkge1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChsaW50ZXJJbmZvLnRlc3RJc0VuYWJsZWQpLnRvLmVxdWFsKHByb21wdFJlcGx5LmVuYWJsZWQsICdMaW50ZXJJbmZvIHRlc3QgY2xhc3Mgd2FzIG5vdCB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mIHRoZSB0ZXN0LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0ZXN0KCdMaW50ZXIgaXMgZW5hYmxlZCBhZnRlciBiZWluZyBwcm9tcHRlZCBhbmQgXCJFbmFibGUgPGxpbnRlcj5cIiBpcyBzZWxlY3RlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXQgZXhwZWN0YXRpb25zXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHByb21wdFJlcGx5ID0geyB0aXRsZTogJ0VuYWJsZSBweWxpbnQnLCBlbmFibGVkOiB0cnVlIH07XHJcbiAgICAgICAgLy8gcnVuIHNjZW5hcmlvXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGVzdEZvckxpbnRlclByb21wdFJlc3BvbnNlKHByb21wdFJlcGx5KTtcclxuICAgICAgICAvLyB0ZXN0IHJlc3VsdHNcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uZXF1YWwoZXhwZWN0ZWRSZXN1bHQsICdFeHBlY3RlZCBwcm9tcHRUb0NvbmZpZ3VyZUF2YWlsYWJsZUxpbnRlciB0byByZXR1cm4gdHJ1ZSBiZWNhdXNlIHRoZSBjb25maWd1cmF0aW9uIHdhcyB1cGRhdGVkLicpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnTGludGVyIGlzIGRpc2FibGVkIGFmdGVyIGJlaW5nIHByb21wdGVkIGFuZCBcIkRpc2FibGUgPGxpbnRlcj5cIiBpcyBzZWxlY3RlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXQgZXhwZWN0YXRpb25cclxuICAgICAgICBjb25zdCBwcm9tcHRSZXBseSA9IHsgdGl0bGU6ICdEaXNhYmxlIHB5bGludCcsIGVuYWJsZWQ6IGZhbHNlIH07XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIC8vIHJ1biBzY2VuYXJpb1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRlc3RGb3JMaW50ZXJQcm9tcHRSZXNwb25zZShwcm9tcHRSZXBseSk7XHJcbiAgICAgICAgLy8gdGVzdCByZXN1bHRzXHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnRXhwZWN0ZWQgcHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIgdG8gcmV0dXJuIHRydWUgYmVjYXVzZSB0aGUgY29uZmlndXJhdGlvbiB3YXMgdXBkYXRlZC4nKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0xpbnRlciBpcyBsZWZ0IHVuY29uZmlndXJlZCBhZnRlciBiZWluZyBwcm9tcHRlZCBhbmQgdGhlIHByb21wdCBpcyBkaXNhYmxlZCB3aXRob3V0IGFueSBzZWxlY3Rpb24gbWFkZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXQgZXhwZWN0YXRpb25cclxuICAgICAgICBjb25zdCBwcm9tcHRSZXBseSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHJ1biBzY2VuYXJpb1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRlc3RGb3JMaW50ZXJQcm9tcHRSZXNwb25zZShwcm9tcHRSZXBseSk7XHJcbiAgICAgICAgLy8gdGVzdCByZXN1bHRzXHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnRXhwZWN0ZWQgcHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIgdG8gcmV0dXJuIHRydWUgYmVjYXVzZSB0aGUgY29uZmlndXJhdGlvbiB3YXMgdXBkYXRlZC4nKTtcclxuICAgIH0pKTtcclxuICAgIC8vIE9wdGlvbnMgdG8gdGVzdCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIElBdmFpbGFibGVMaW50ZXJBY3RpdmF0b3IuXHJcbiAgICAvLyBBbGwgb3B0aW9ucyBkZWZhdWx0IHRvIHZhbHVlcyB0aGF0IHdvdWxkIG90aGVyd2lzZSBhbGxvdyB0aGUgcHJvbXB0IHRvIGFwcGVhci5cclxuICAgIGNsYXNzIEF2YWlsYWJsaXR5VGVzdE92ZXJhbGxPcHRpb25zIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5qZWRpRW5hYmxlZFZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMubGludGVySXNJbnN0YWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBlcmZvcm1UZXN0T2ZPdmVyYWxsSW1wbGVtZW50YXRpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGFycmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgW2FwcFNoZWxsTW9jaywgaW5zdGFsbGVyTW9jaywgd29ya3NwYWNlU2VydmljZU1vY2ssIGNvbmZpZ1NlcnZpY2VNb2NrLCBsaW50ZXJJbmZvXSA9IGdldERlcGVuZGVuY2llc0ZvckF2YWlsYWJpbGl0eVRlc3RzKCk7XHJcbiAgICAgICAgICAgIGFwcFNoZWxsTW9jay5zZXR1cChhcCA9PiBhcC5zaG93SW5mb3JtYXRpb25NZXNzYWdlKFR5cGVNb3EuSXQuaXNWYWx1ZShgTGludGVyICR7bGludGVySW5mby5pZH0gaXMgYXZhaWxhYmxlIGJ1dCBub3QgZW5hYmxlZC5gKSwgVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gb3B0aW9ucy5wcm9tcHRSZXBseSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgaW5zdGFsbGVyTW9jay5zZXR1cChpbSA9PiBpbS5pc0luc3RhbGxlZChsaW50ZXJJbmZvLnByb2R1Y3QsIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IHJldHVybiBvcHRpb25zLmxpbnRlcklzSW5zdGFsbGVkOyB9KSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKFR5cGVNb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgc2V0dXBDb25maWd1cmF0aW9uU2VydmljZUZvckplZGlTZXR0aW5nc1Rlc3Qob3B0aW9ucy5qZWRpRW5hYmxlZFZhbHVlLCBjb25maWdTZXJ2aWNlTW9jayk7XHJcbiAgICAgICAgICAgIHNldHVwV29ya3NwYWNlTW9ja0ZvckxpbnRlckNvbmZpZ3VyZWRUZXN0cyhvcHRpb25zLnB5bGludFVzZXJFbmFibGVkLCBvcHRpb25zLnB5bGludFdvcmtzcGFjZUVuYWJsZWQsIG9wdGlvbnMucHlsaW50V29ya3NwYWNlRm9sZGVyRW5hYmxlZCwgd29ya3NwYWNlU2VydmljZU1vY2spO1xyXG4gICAgICAgICAgICAvLyBwZXJmb3JtIHRlc3RcclxuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmlsaXR5UHJvdmlkZXIgPSBuZXcgbGludGVyQXZhaWxhYmlsaXR5XzEuQXZhaWxhYmxlTGludGVyQWN0aXZhdG9yKGFwcFNoZWxsTW9jay5vYmplY3QsIGluc3RhbGxlck1vY2sub2JqZWN0LCB3b3Jrc3BhY2VTZXJ2aWNlTW9jay5vYmplY3QsIGNvbmZpZ1NlcnZpY2VNb2NrLm9iamVjdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhdmFpbGFiaWxpdHlQcm92aWRlci5wcm9tcHRJZkxpbnRlckF2YWlsYWJsZShsaW50ZXJJbmZvKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRlc3QoJ092ZXJhbGwgaW1wbGVtZW50YXRpb24gZG9lcyBub3QgY2hhbmdlIGNvbmZpZ3VyYXRpb24gd2hlbiBmZWF0dXJlIGRpc2FibGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIHNldCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCB0ZXN0T3B0cyA9IG5ldyBBdmFpbGFibGl0eVRlc3RPdmVyYWxsT3B0aW9ucygpO1xyXG4gICAgICAgIHRlc3RPcHRzLmplZGlFbmFibGVkVmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHBlcmZvcm1UZXN0T2ZPdmVyYWxsSW1wbGVtZW50YXRpb24odGVzdE9wdHMpO1xyXG4gICAgICAgIC8vIHBlcmZvcm0gdGVzdFxyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvLmVxdWFsKHJlc3VsdCwgJ3Byb21wdElmTGludGVyQXZhaWxhYmxlIHNob3VsZCBub3QgY2hhbmdlIGFueSBjb25maWd1cmF0aW9uIHdoZW4gcHl0aG9uLmplZGlFbmFibGVkIGlzIHRydWUuJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdPdmVyYWxsIGltcGxlbWVudGF0aW9uIGRvZXMgbm90IGNoYW5nZSBjb25maWd1cmF0aW9uIHdoZW4gbGludGVyIGlzIGNvbmZpZ3VyZWQgKGVuYWJsZWQpJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIHNldCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCB0ZXN0T3B0cyA9IG5ldyBBdmFpbGFibGl0eVRlc3RPdmVyYWxsT3B0aW9ucygpO1xyXG4gICAgICAgIHRlc3RPcHRzLnB5bGludFdvcmtzcGFjZUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHBlcmZvcm1UZXN0T2ZPdmVyYWxsSW1wbGVtZW50YXRpb24odGVzdE9wdHMpO1xyXG4gICAgICAgIC8vIHBlcmZvcm0gdGVzdFxyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvLmVxdWFsKHJlc3VsdCwgJ0NvbmZpZ3VyYXRpb24gc2hvdWxkIG5vdCBjaGFuZ2UgaWYgdGhlIGxpbnRlciBpcyBjb25maWd1cmVkIGluIGFueSB3YXkuJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdPdmVyYWxsIGltcGxlbWVudGF0aW9uIGRvZXMgbm90IGNoYW5nZSBjb25maWd1cmF0aW9uIHdoZW4gbGludGVyIGlzIGNvbmZpZ3VyZWQgKGRpc2FibGVkKScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXQgZXhwZWN0YXRpb25zXHJcbiAgICAgICAgY29uc3QgdGVzdE9wdHMgPSBuZXcgQXZhaWxhYmxpdHlUZXN0T3ZlcmFsbE9wdGlvbnMoKTtcclxuICAgICAgICB0ZXN0T3B0cy5weWxpbnRXb3Jrc3BhY2VFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAvLyBhcnJhbmdlXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgcGVyZm9ybVRlc3RPZk92ZXJhbGxJbXBsZW1lbnRhdGlvbih0ZXN0T3B0cyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChleHBlY3RlZFJlc3VsdCkudG8uZXF1YWwocmVzdWx0LCAnQ29uZmlndXJhdGlvbiBzaG91bGQgbm90IGNoYW5nZSBpZiB0aGUgbGludGVyIGlzIGRpc2FibGVkIGluIGFueSB3YXkuJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdPdmVyYWxsIGltcGxlbWVudGF0aW9uIGRvZXMgbm90IGNoYW5nZSBjb25maWd1cmF0aW9uIHdoZW4gbGludGVyIGlzIHVuYXZhaWxhYmxlIGluIGN1cnJlbnQgd29ya3NwYWNlIGVudmlyb25tZW50JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIHNldCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCB0ZXN0T3B0cyA9IG5ldyBBdmFpbGFibGl0eVRlc3RPdmVyYWxsT3B0aW9ucygpO1xyXG4gICAgICAgIHRlc3RPcHRzLnB5bGludFdvcmtzcGFjZUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHBlcmZvcm1UZXN0T2ZPdmVyYWxsSW1wbGVtZW50YXRpb24odGVzdE9wdHMpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvLmVxdWFsKHJlc3VsdCwgJ0NvbmZpZ3VyYXRpb24gc2hvdWxkIG5vdCBjaGFuZ2UgaWYgdGhlIGxpbnRlciBpcyB1bmF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCB3b3Jrc3BhY2UgZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdPdmVyYWxsIGltcGxlbWVudGF0aW9uIGRvZXMgbm90IGNoYW5nZSBjb25maWd1cmF0aW9uIHdoZW4gdXNlciBpcyBwcm9tcHRlZCBhbmQgcHJvbXB0IGlzIGRpc21pc3NlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBzZXQgZXhwZWN0YXRpb25zXHJcbiAgICAgICAgY29uc3QgdGVzdE9wdHMgPSBuZXcgQXZhaWxhYmxpdHlUZXN0T3ZlcmFsbE9wdGlvbnMoKTtcclxuICAgICAgICB0ZXN0T3B0cy5wcm9tcHRSZXBseSA9IHVuZGVmaW5lZDsgLy8ganVzdCBiZWluZyBleHBsaWNpdCBmb3IgdGVzdCByZWFkYWJpbGl0eSAtIHRoaXMgaXMgdGhlIGRlZmF1bHRcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGFycmFuZ2VcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBwZXJmb3JtVGVzdE9mT3ZlcmFsbEltcGxlbWVudGF0aW9uKHRlc3RPcHRzKTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50by5lcXVhbChyZXN1bHQsICdDb25maWd1cmF0aW9uIHNob3VsZCBub3QgY2hhbmdlIGlmIHRoZSB1c2VyIGlzIHByb21wdGVkIGFuZCB0aGV5IGRpc21pc3MgdGhlIHByb21wdC4nKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ092ZXJhbGwgaW1wbGVtZW50YXRpb24gY2hhbmdlcyBjb25maWd1cmF0aW9uIHdoZW4gdXNlciBpcyBwcm9tcHRlZCBhbmQgXCJEaXNhYmxlIDxsaW50ZXI+XCIgaXMgc2VsZWN0ZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0IGV4cGVjdGF0aW9uc1xyXG4gICAgICAgIGNvbnN0IHRlc3RPcHRzID0gbmV3IEF2YWlsYWJsaXR5VGVzdE92ZXJhbGxPcHRpb25zKCk7XHJcbiAgICAgICAgdGVzdE9wdHMucHJvbXB0UmVwbHkgPSB7IHRpdGxlOiAnRGlzYWJsZSBweWxpbnQnLCBlbmFibGVkOiBmYWxzZSB9O1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAvLyBhcnJhbmdlXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgcGVyZm9ybVRlc3RPZk92ZXJhbGxJbXBsZW1lbnRhdGlvbih0ZXN0T3B0cyk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChleHBlY3RlZFJlc3VsdCkudG8uZXF1YWwocmVzdWx0LCAnQ29uZmlndXJhdGlvbiBzaG91bGQgY2hhbmdlIGlmIHRoZSB1c2VyIGlzIHByb21wdGVkIGFuZCB0aGV5IGNob29zZSB0byB1cGRhdGUgdGhlIGxpbnRlciBjb25maWcuJyk7XHJcbiAgICB9KSk7XHJcbiAgICB0ZXN0KCdPdmVyYWxsIGltcGxlbWVudGF0aW9uIGNoYW5nZXMgY29uZmlndXJhdGlvbiB3aGVuIHVzZXIgaXMgcHJvbXB0ZWQgYW5kIFwiRW5hYmxlIDxsaW50ZXI+XCIgaXMgc2VsZWN0ZWQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0IGV4cGVjdGF0aW9uc1xyXG4gICAgICAgIGNvbnN0IHRlc3RPcHRzID0gbmV3IEF2YWlsYWJsaXR5VGVzdE92ZXJhbGxPcHRpb25zKCk7XHJcbiAgICAgICAgdGVzdE9wdHMucHJvbXB0UmVwbHkgPSB7IHRpdGxlOiAnRW5hYmxlIHB5bGludCcsIGVuYWJsZWQ6IHRydWUgfTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHBlcmZvcm1UZXN0T2ZPdmVyYWxsSW1wbGVtZW50YXRpb24odGVzdE9wdHMpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvLmVxdWFsKHJlc3VsdCwgJ0NvbmZpZ3VyYXRpb24gc2hvdWxkIGNoYW5nZSBpZiB0aGUgdXNlciBpcyBwcm9tcHRlZCBhbmQgdGhleSBjaG9vc2UgdG8gdXBkYXRlIHRoZSBsaW50ZXIgY29uZmlnLicpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRGlzY292ZXJ5IG9mIGxpbnRlciBpcyBhdmFpbGFibGUgaW4gdGhlIGVudmlyb25tZW50IHJldHVybnMgdHJ1ZSB3aGVuIGl0IHN1Y2NlZWRzIGFuZCBpcyBwcmVzZW50JywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIHNldCBleHBlY3RhdGlvbnNcclxuICAgICAgICBjb25zdCBsaW50ZXJJc0luc3RhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIC8vIGFycmFuZ2VcclxuICAgICAgICBjb25zdCBbYXBwU2hlbGxNb2NrLCBpbnN0YWxsZXJNb2NrLCB3b3Jrc3BhY2VTZXJ2aWNlTW9jaywgY29uZmlnU2VydmljZU1vY2ssIGxpbnRlckluZm9dID0gZ2V0RGVwZW5kZW5jaWVzRm9yQXZhaWxhYmlsaXR5VGVzdHMoKTtcclxuICAgICAgICBzZXR1cEluc3RhbGxlckZvckF2YWlsYWJpbGl0eVRlc3QobGludGVySW5mbywgbGludGVySXNJbnN0YWxsZWQsIGluc3RhbGxlck1vY2spO1xyXG4gICAgICAgIC8vIHBlcmZvcm0gdGVzdFxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eVByb3ZpZGVyID0gbmV3IGxpbnRlckF2YWlsYWJpbGl0eV8xLkF2YWlsYWJsZUxpbnRlckFjdGl2YXRvcihhcHBTaGVsbE1vY2sub2JqZWN0LCBpbnN0YWxsZXJNb2NrLm9iamVjdCwgd29ya3NwYWNlU2VydmljZU1vY2sub2JqZWN0LCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIGF2YWlsYWJpbGl0eVByb3ZpZGVyLmlzTGludGVyQXZhaWxhYmxlKGxpbnRlckluZm8ucHJvZHVjdCk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnRXhwZWN0ZWQgcHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIgdG8gcmV0dXJuIHRydWUgYmVjYXVzZSB0aGUgY29uZmlndXJhdGlvbiB3YXMgdXBkYXRlZC4nKTtcclxuICAgICAgICBpbnN0YWxsZXJNb2NrLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnRGlzY292ZXJ5IG9mIGxpbnRlciBpcyBhdmFpbGFibGUgaW4gdGhlIGVudmlyb25tZW50IHJldHVybnMgZmFsc2Ugd2hlbiBpdCBzdWNjZWVkcyBhbmQgaXMgbm90IHByZXNlbnQnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0IGV4cGVjdGF0aW9uc1xyXG4gICAgICAgIGNvbnN0IGxpbnRlcklzSW5zdGFsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAvLyBhcnJhbmdlXHJcbiAgICAgICAgY29uc3QgW2FwcFNoZWxsTW9jaywgaW5zdGFsbGVyTW9jaywgd29ya3NwYWNlU2VydmljZU1vY2ssIGNvbmZpZ1NlcnZpY2VNb2NrLCBsaW50ZXJJbmZvXSA9IGdldERlcGVuZGVuY2llc0ZvckF2YWlsYWJpbGl0eVRlc3RzKCk7XHJcbiAgICAgICAgc2V0dXBJbnN0YWxsZXJGb3JBdmFpbGFiaWxpdHlUZXN0KGxpbnRlckluZm8sIGxpbnRlcklzSW5zdGFsbGVkLCBpbnN0YWxsZXJNb2NrKTtcclxuICAgICAgICAvLyBwZXJmb3JtIHRlc3RcclxuICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlQcm92aWRlciA9IG5ldyBsaW50ZXJBdmFpbGFiaWxpdHlfMS5BdmFpbGFibGVMaW50ZXJBY3RpdmF0b3IoYXBwU2hlbGxNb2NrLm9iamVjdCwgaW5zdGFsbGVyTW9jay5vYmplY3QsIHdvcmtzcGFjZVNlcnZpY2VNb2NrLm9iamVjdCwgY29uZmlnU2VydmljZU1vY2sub2JqZWN0KTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBhdmFpbGFiaWxpdHlQcm92aWRlci5pc0xpbnRlckF2YWlsYWJsZShsaW50ZXJJbmZvLnByb2R1Y3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5lcXVhbChleHBlY3RlZFJlc3VsdCwgJ0V4cGVjdGVkIHByb21wdFRvQ29uZmlndXJlQXZhaWxhYmxlTGludGVyIHRvIHJldHVybiB0cnVlIGJlY2F1c2UgdGhlIGNvbmZpZ3VyYXRpb24gd2FzIHVwZGF0ZWQuJyk7XHJcbiAgICAgICAgaW5zdGFsbGVyTW9jay52ZXJpZnlBbGwoKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ0Rpc2NvdmVyeSBvZiBsaW50ZXIgaXMgYXZhaWxhYmxlIGluIHRoZSBlbnZpcm9ubWVudCByZXR1cm5zIGZhbHNlIHdoZW4gaXQgZmFpbHMnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgLy8gc2V0IGV4cGVjdGF0aW9uc1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gYXJyYW5nZVxyXG4gICAgICAgIGNvbnN0IFthcHBTaGVsbE1vY2ssIGluc3RhbGxlck1vY2ssIHdvcmtzcGFjZVNlcnZpY2VNb2NrLCBjb25maWdTZXJ2aWNlTW9jaywgbGludGVySW5mb10gPSBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpO1xyXG4gICAgICAgIGluc3RhbGxlck1vY2suc2V0dXAoaW0gPT4gaW0uaXNJbnN0YWxsZWQobGludGVySW5mby5wcm9kdWN0LCBUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlamVjdCgnZXJyb3IgdGVzdGZhaWwnKSlcclxuICAgICAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgIC8vIHBlcmZvcm0gdGVzdFxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eVByb3ZpZGVyID0gbmV3IGxpbnRlckF2YWlsYWJpbGl0eV8xLkF2YWlsYWJsZUxpbnRlckFjdGl2YXRvcihhcHBTaGVsbE1vY2sub2JqZWN0LCBpbnN0YWxsZXJNb2NrLm9iamVjdCwgd29ya3NwYWNlU2VydmljZU1vY2sub2JqZWN0LCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIGF2YWlsYWJpbGl0eVByb3ZpZGVyLmlzTGludGVyQXZhaWxhYmxlKGxpbnRlckluZm8ucHJvZHVjdCk7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKGV4cGVjdGVkUmVzdWx0LCAnRXhwZWN0ZWQgcHJvbXB0VG9Db25maWd1cmVBdmFpbGFibGVMaW50ZXIgdG8gcmV0dXJuIHRydWUgYmVjYXVzZSB0aGUgY29uZmlndXJhdGlvbiB3YXMgdXBkYXRlZC4nKTtcclxuICAgICAgICBpbnN0YWxsZXJNb2NrLnZlcmlmeUFsbCgpO1xyXG4gICAgfSkpO1xyXG59KTtcclxuZnVuY3Rpb24gc2V0dXBXb3Jrc3BhY2VNb2NrRm9yTGludGVyQ29uZmlndXJlZFRlc3RzKGVuYWJsZWRGb3JVc2VyLCBlbmFiZWxkRm9yV29ya3NwYWNlLCBlbmFibGVkRm9yV29ya3NwYWNlRm9sZGVyLCB3b3Jrc3BhY2VTZXJ2aWNlTW9jaykge1xyXG4gICAgaWYgKCF3b3Jrc3BhY2VTZXJ2aWNlTW9jaykge1xyXG4gICAgICAgIHdvcmtzcGFjZVNlcnZpY2VNb2NrID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd29ya3NwYWNlQ29uZmlndXJhdGlvbiA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgIHdvcmtzcGFjZUNvbmZpZ3VyYXRpb24uc2V0dXAod2MgPT4gd2MuaW5zcGVjdChUeXBlTW9xLkl0LmlzVmFsdWUoJ3B5bGludEVuYWJsZWQnKSkpXHJcbiAgICAgICAgLnJldHVybnMoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGtleTogJycsXHJcbiAgICAgICAgICAgIGdsb2JhbFZhbHVlOiBlbmFibGVkRm9yVXNlcixcclxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcclxuICAgICAgICAgICAgd29ya3NwYWNlRm9sZGVyVmFsdWU6IGVuYWJlbGRGb3JXb3Jrc3BhY2UsXHJcbiAgICAgICAgICAgIHdvcmtzcGFjZVZhbHVlOiBlbmFibGVkRm9yV29ya3NwYWNlRm9sZGVyXHJcbiAgICAgICAgfTtcclxuICAgIH0pXHJcbiAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgd29ya3NwYWNlU2VydmljZU1vY2suc2V0dXAod3MgPT4gd3MuZ2V0Q29uZmlndXJhdGlvbihUeXBlTW9xLkl0LmlzVmFsdWUoJ3B5dGhvbi5saW50aW5nJyksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgLnJldHVybnMoKCkgPT4gd29ya3NwYWNlQ29uZmlndXJhdGlvbi5vYmplY3QpXHJcbiAgICAgICAgLnZlcmlmaWFibGUoVHlwZU1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgcmV0dXJuIHdvcmtzcGFjZVNlcnZpY2VNb2NrO1xyXG59XHJcbmZ1bmN0aW9uIHNldHVwQ29uZmlndXJhdGlvblNlcnZpY2VGb3JKZWRpU2V0dGluZ3NUZXN0KGplZGlFbmFibGVkVmFsdWUsIGNvbmZpZ1NlcnZpY2VNb2NrKSB7XHJcbiAgICBpZiAoIWNvbmZpZ1NlcnZpY2VNb2NrKSB7XHJcbiAgICAgICAgY29uZmlnU2VydmljZU1vY2sgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBweXRob25TZXR0aW5ncyA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgIHB5dGhvblNldHRpbmdzLnNldHVwKHBzID0+IHBzLmplZGlFbmFibGVkKS5yZXR1cm5zKCgpID0+IGplZGlFbmFibGVkVmFsdWUpO1xyXG4gICAgY29uZmlnU2VydmljZU1vY2suc2V0dXAoY3MgPT4gY3MuZ2V0U2V0dGluZ3MoKSkucmV0dXJucygoKSA9PiBweXRob25TZXR0aW5ncy5vYmplY3QpO1xyXG4gICAgcmV0dXJuIFtjb25maWdTZXJ2aWNlTW9jaywgcHl0aG9uU2V0dGluZ3NdO1xyXG59XHJcbmZ1bmN0aW9uIHNldHVwSW5zdGFsbGVyRm9yQXZhaWxhYmlsaXR5VGVzdChsaW50ZXJJbmZvLCBsaW50ZXJJc0luc3RhbGxlZCwgaW5zdGFsbGVyTW9jaykge1xyXG4gICAgaWYgKCFpbnN0YWxsZXJNb2NrKSB7XHJcbiAgICAgICAgaW5zdGFsbGVyTW9jayA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgIH1cclxuICAgIGluc3RhbGxlck1vY2suc2V0dXAoaW0gPT4gaW0uaXNJbnN0YWxsZWQobGludGVySW5mby5wcm9kdWN0LCBUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgIC5yZXR1cm5zKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsgcmV0dXJuIGxpbnRlcklzSW5zdGFsbGVkOyB9KSlcclxuICAgICAgICAudmVyaWZpYWJsZShUeXBlTW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGVyTW9jaztcclxufVxyXG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXNGb3JBdmFpbGFiaWxpdHlUZXN0cygpIHtcclxuICAgIGNvbnN0IGNvbmZpZ1NlcnZpY2VNb2NrID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBUeXBlTW9xLk1vY2sub2ZUeXBlKCksXHJcbiAgICAgICAgVHlwZU1vcS5Nb2NrLm9mVHlwZSgpLFxyXG4gICAgICAgIFR5cGVNb3EuTW9jay5vZlR5cGUoKSxcclxuICAgICAgICBUeXBlTW9xLk1vY2sub2ZUeXBlKCksXHJcbiAgICAgICAgbmV3IGxpbnRlckluZm9fMS5MaW50ZXJJbmZvKHR5cGVzXzEuUHJvZHVjdC5weWxpbnQsICdweWxpbnQnLCBjb25maWdTZXJ2aWNlTW9jay5vYmplY3QsIFsnLnB5bGludHJjJywgJ3B5bGludHJjJ10pXHJcbiAgICBdO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpbnRlci5hdmFpbGFiaWxpdHkudW5pdC50ZXN0LmpzLm1hcCJdfQ==