"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const inversify_1 = require("inversify");

const os = require("os");

const path = require("path");

const TypeMoq = require("typemoq");

const vscode_1 = require("vscode");

const types_1 = require("../../client/common/application/types");

const types_2 = require("../../client/common/platform/types");

const types_3 = require("../../client/common/process/types");

const types_4 = require("../../client/common/types");

const container_1 = require("../../client/ioc/container");

const serviceManager_1 = require("../../client/ioc/serviceManager");

const linterManager_1 = require("../../client/linters/linterManager");

const pylint_1 = require("../../client/linters/pylint");

const types_5 = require("../../client/linters/types");

const mockClasses_1 = require("../mockClasses"); // tslint:disable-next-line:max-func-body-length


suite('Linting - Pylint', () => {
  const basePath = '/user/a/b/c/d';
  const pylintrc = 'pylintrc';
  const dotPylintrc = '.pylintrc';
  let fileSystem;
  let platformService;
  let workspace;
  let execService;
  let config;
  let serviceContainer;
  setup(() => {
    fileSystem = TypeMoq.Mock.ofType();
    fileSystem.setup(x => x.arePathsSame(TypeMoq.It.isAnyString(), TypeMoq.It.isAnyString())).returns((a, b) => a === b);
    platformService = TypeMoq.Mock.ofType();
    platformService.setup(x => x.isWindows).returns(() => false);
    workspace = TypeMoq.Mock.ofType();
    execService = TypeMoq.Mock.ofType();
    const cont = new inversify_1.Container();
    const serviceManager = new serviceManager_1.ServiceManager(cont);
    serviceContainer = new container_1.ServiceContainer(cont);
    serviceManager.addSingletonInstance(types_2.IFileSystem, fileSystem.object);
    serviceManager.addSingletonInstance(types_1.IWorkspaceService, workspace.object);
    serviceManager.addSingletonInstance(types_3.IPythonToolExecutionService, execService.object);
    serviceManager.addSingletonInstance(types_2.IPlatformService, platformService.object);
    config = TypeMoq.Mock.ofType();
    serviceManager.addSingletonInstance(types_4.IConfigurationService, config.object);
    const linterManager = new linterManager_1.LinterManager(serviceContainer, workspace.object);
    serviceManager.addSingletonInstance(types_5.ILinterManager, linterManager);
    const logger = TypeMoq.Mock.ofType();
    serviceManager.addSingletonInstance(types_4.ILogger, logger.object);
    const installer = TypeMoq.Mock.ofType();
    serviceManager.addSingletonInstance(types_4.IInstaller, installer.object);
  });
  test('pylintrc in the file folder', () => __awaiter(void 0, void 0, void 0, function* () {
    fileSystem.setup(x => x.fileExists(path.join(basePath, pylintrc))).returns(() => Promise.resolve(true));
    let result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${pylintrc}' not detected in the file folder.`);
    fileSystem.setup(x => x.fileExists(path.join(basePath, dotPylintrc))).returns(() => Promise.resolve(true));
    result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${dotPylintrc}' not detected in the file folder.`);
  }));
  test('pylintrc up the module tree', () => __awaiter(void 0, void 0, void 0, function* () {
    const module1 = path.join('/user/a/b/c/d', '__init__.py');
    const module2 = path.join('/user/a/b/c', '__init__.py');
    const module3 = path.join('/user/a/b', '__init__.py');
    const rc = path.join('/user/a/b/c', pylintrc);
    fileSystem.setup(x => x.fileExists(module1)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(module2)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(module3)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(rc)).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${pylintrc}' not detected in the module tree.`);
  }));
  test('.pylintrc up the module tree', () => __awaiter(void 0, void 0, void 0, function* () {
    // Don't use path.join since it will use / on Travis and Mac
    const module1 = path.join('/user/a/b/c/d', '__init__.py');
    const module2 = path.join('/user/a/b/c', '__init__.py');
    const module3 = path.join('/user/a/b', '__init__.py');
    const rc = path.join('/user/a/b/c', pylintrc);
    fileSystem.setup(x => x.fileExists(module1)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(module2)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(module3)).returns(() => Promise.resolve(true));
    fileSystem.setup(x => x.fileExists(rc)).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${dotPylintrc}' not detected in the module tree.`);
  }));
  test('.pylintrc up the ~ folder', () => __awaiter(void 0, void 0, void 0, function* () {
    const home = os.homedir();
    const rc = path.join(home, dotPylintrc);
    fileSystem.setup(x => x.fileExists(rc)).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${dotPylintrc}' not detected in the ~ folder.`);
  }));
  test('pylintrc up the ~/.config folder', () => __awaiter(void 0, void 0, void 0, function* () {
    const home = os.homedir();
    const rc = path.join(home, '.config', pylintrc);
    fileSystem.setup(x => x.fileExists(rc)).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${pylintrc}' not detected in the  ~/.config folder.`);
  }));
  test('pylintrc in the /etc folder', () => __awaiter(void 0, void 0, void 0, function* () {
    const rc = path.join('/etc', pylintrc);
    fileSystem.setup(x => x.fileExists(rc)).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigurationFile(fileSystem.object, basePath, platformService.object);
    chai_1.expect(result).to.be.equal(true, `'${pylintrc}' not detected in the /etc folder.`);
  }));
  test('pylintrc between file and workspace root', () => __awaiter(void 0, void 0, void 0, function* () {
    const root = '/user/a';
    const midFolder = '/user/a/b';
    fileSystem.setup(x => x.fileExists(path.join(midFolder, pylintrc))).returns(() => Promise.resolve(true));
    const result = yield pylint_1.Pylint.hasConfigrationFileInWorkspace(fileSystem.object, basePath, root);
    chai_1.expect(result).to.be.equal(true, `'${pylintrc}' not detected in the workspace tree.`);
  }));
  test('minArgs - pylintrc between the file and the workspace root', () => __awaiter(void 0, void 0, void 0, function* () {
    fileSystem.setup(x => x.fileExists(path.join('/user/a/b', pylintrc))).returns(() => Promise.resolve(true));
    yield testPylintArguments('/user/a/b/c', '/user/a', false);
  }));
  test('minArgs - no pylintrc between the file and the workspace root', () => __awaiter(void 0, void 0, void 0, function* () {
    yield testPylintArguments('/user/a/b/c', '/user/a', true);
  }));
  test('minArgs - pylintrc next to the file', () => __awaiter(void 0, void 0, void 0, function* () {
    const fileFolder = '/user/a/b/c';
    fileSystem.setup(x => x.fileExists(path.join(fileFolder, pylintrc))).returns(() => Promise.resolve(true));
    yield testPylintArguments(fileFolder, '/user/a', false);
  }));
  test('minArgs - pylintrc at the workspace root', () => __awaiter(void 0, void 0, void 0, function* () {
    const root = '/user/a';
    fileSystem.setup(x => x.fileExists(path.join(root, pylintrc))).returns(() => Promise.resolve(true));
    yield testPylintArguments('/user/a/b/c', root, false);
  }));

  function testPylintArguments(fileFolder, wsRoot, expectedMinArgs) {
    return __awaiter(this, void 0, void 0, function* () {
      const outputChannel = TypeMoq.Mock.ofType();
      const pylinter = new pylint_1.Pylint(outputChannel.object, serviceContainer);
      const document = TypeMoq.Mock.ofType();
      document.setup(x => x.uri).returns(() => vscode_1.Uri.file(path.join(fileFolder, 'test.py')));
      const wsf = TypeMoq.Mock.ofType();
      wsf.setup(x => x.uri).returns(() => vscode_1.Uri.file(wsRoot));
      workspace.setup(x => x.getWorkspaceFolder(TypeMoq.It.isAny())).returns(() => wsf.object);
      let execInfo;
      execService.setup(x => x.exec(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())).callback((e, b, c) => {
        execInfo = e;
      }).returns(() => Promise.resolve({
        stdout: '',
        stderr: ''
      }));
      const lintSettings = new mockClasses_1.MockLintingSettings();
      lintSettings.pylintUseMinimalCheckers = true; // tslint:disable-next-line:no-string-literal

      lintSettings['pylintPath'] = 'pyLint'; // tslint:disable-next-line:no-string-literal

      lintSettings['pylintEnabled'] = true;
      const settings = TypeMoq.Mock.ofType();
      settings.setup(x => x.linting).returns(() => lintSettings);
      config.setup(x => x.getSettings(TypeMoq.It.isAny())).returns(() => settings.object);
      yield pylinter.lint(document.object, new vscode_1.CancellationTokenSource().token);
      chai_1.expect(execInfo.args.findIndex(x => x.indexOf('--disable=all') >= 0), 'Minimal args passed to pylint while pylintrc exists.').to.be.eq(expectedMinArgs ? 0 : -1);
    });
  }

  test('Negative column numbers should be treated 0', () => __awaiter(void 0, void 0, void 0, function* () {
    const fileFolder = '/user/a/b/c';
    const outputChannel = TypeMoq.Mock.ofType();
    const pylinter = new pylint_1.Pylint(outputChannel.object, serviceContainer);
    const document = TypeMoq.Mock.ofType();
    document.setup(x => x.uri).returns(() => vscode_1.Uri.file(path.join(fileFolder, 'test.py')));
    const wsf = TypeMoq.Mock.ofType();
    wsf.setup(x => x.uri).returns(() => vscode_1.Uri.file(fileFolder));
    workspace.setup(x => x.getWorkspaceFolder(TypeMoq.It.isAny())).returns(() => wsf.object);
    const linterOutput = ['No config file found, using default configuration', '************* Module test', '1,1,convention,C0111:Missing module docstring', '3,-1,error,E1305:Too many arguments for format string'].join(os.EOL);
    execService.setup(x => x.exec(TypeMoq.It.isAny(), TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => Promise.resolve({
      stdout: linterOutput,
      stderr: ''
    }));
    const lintSettings = new mockClasses_1.MockLintingSettings();
    lintSettings.pylintUseMinimalCheckers = false;
    lintSettings.maxNumberOfProblems = 1000;
    lintSettings.pylintPath = 'pyLint';
    lintSettings.pylintEnabled = true;
    lintSettings.pylintCategorySeverity = {
      convention: vscode_1.DiagnosticSeverity.Hint,
      error: vscode_1.DiagnosticSeverity.Error,
      fatal: vscode_1.DiagnosticSeverity.Error,
      refactor: vscode_1.DiagnosticSeverity.Hint,
      warning: vscode_1.DiagnosticSeverity.Warning
    };
    const settings = TypeMoq.Mock.ofType();
    settings.setup(x => x.linting).returns(() => lintSettings);
    config.setup(x => x.getSettings(TypeMoq.It.isAny())).returns(() => settings.object);
    const messages = yield pylinter.lint(document.object, new vscode_1.CancellationTokenSource().token);
    chai_1.expect(messages).to.be.lengthOf(2);
    chai_1.expect(messages[0].column).to.be.equal(1);
    chai_1.expect(messages[1].column).to.be.equal(0);
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB5bGludC50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwiaW52ZXJzaWZ5XzEiLCJvcyIsInBhdGgiLCJUeXBlTW9xIiwidnNjb2RlXzEiLCJ0eXBlc18xIiwidHlwZXNfMiIsInR5cGVzXzMiLCJ0eXBlc180IiwiY29udGFpbmVyXzEiLCJzZXJ2aWNlTWFuYWdlcl8xIiwibGludGVyTWFuYWdlcl8xIiwicHlsaW50XzEiLCJ0eXBlc181IiwibW9ja0NsYXNzZXNfMSIsInN1aXRlIiwiYmFzZVBhdGgiLCJweWxpbnRyYyIsImRvdFB5bGludHJjIiwiZmlsZVN5c3RlbSIsInBsYXRmb3JtU2VydmljZSIsIndvcmtzcGFjZSIsImV4ZWNTZXJ2aWNlIiwiY29uZmlnIiwic2VydmljZUNvbnRhaW5lciIsInNldHVwIiwiTW9jayIsIm9mVHlwZSIsIngiLCJhcmVQYXRoc1NhbWUiLCJJdCIsImlzQW55U3RyaW5nIiwicmV0dXJucyIsImEiLCJiIiwiaXNXaW5kb3dzIiwiY29udCIsIkNvbnRhaW5lciIsInNlcnZpY2VNYW5hZ2VyIiwiU2VydmljZU1hbmFnZXIiLCJTZXJ2aWNlQ29udGFpbmVyIiwiYWRkU2luZ2xldG9uSW5zdGFuY2UiLCJJRmlsZVN5c3RlbSIsIm9iamVjdCIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwiSVB5dGhvblRvb2xFeGVjdXRpb25TZXJ2aWNlIiwiSVBsYXRmb3JtU2VydmljZSIsIklDb25maWd1cmF0aW9uU2VydmljZSIsImxpbnRlck1hbmFnZXIiLCJMaW50ZXJNYW5hZ2VyIiwiSUxpbnRlck1hbmFnZXIiLCJsb2dnZXIiLCJJTG9nZ2VyIiwiaW5zdGFsbGVyIiwiSUluc3RhbGxlciIsInRlc3QiLCJmaWxlRXhpc3RzIiwiam9pbiIsIlB5bGludCIsImhhc0NvbmZpZ3VyYXRpb25GaWxlIiwiZXhwZWN0IiwidG8iLCJiZSIsImVxdWFsIiwibW9kdWxlMSIsIm1vZHVsZTIiLCJtb2R1bGUzIiwicmMiLCJob21lIiwiaG9tZWRpciIsInJvb3QiLCJtaWRGb2xkZXIiLCJoYXNDb25maWdyYXRpb25GaWxlSW5Xb3Jrc3BhY2UiLCJ0ZXN0UHlsaW50QXJndW1lbnRzIiwiZmlsZUZvbGRlciIsIndzUm9vdCIsImV4cGVjdGVkTWluQXJncyIsIm91dHB1dENoYW5uZWwiLCJweWxpbnRlciIsImRvY3VtZW50IiwidXJpIiwiVXJpIiwiZmlsZSIsIndzZiIsImdldFdvcmtzcGFjZUZvbGRlciIsImlzQW55IiwiZXhlY0luZm8iLCJleGVjIiwiY2FsbGJhY2siLCJjIiwic3Rkb3V0Iiwic3RkZXJyIiwibGludFNldHRpbmdzIiwiTW9ja0xpbnRpbmdTZXR0aW5ncyIsInB5bGludFVzZU1pbmltYWxDaGVja2VycyIsInNldHRpbmdzIiwibGludGluZyIsImdldFNldHRpbmdzIiwibGludCIsIkNhbmNlbGxhdGlvblRva2VuU291cmNlIiwidG9rZW4iLCJhcmdzIiwiZmluZEluZGV4IiwiaW5kZXhPZiIsImVxIiwibGludGVyT3V0cHV0IiwiRU9MIiwibWF4TnVtYmVyT2ZQcm9ibGVtcyIsInB5bGludFBhdGgiLCJweWxpbnRFbmFibGVkIiwicHlsaW50Q2F0ZWdvcnlTZXZlcml0eSIsImNvbnZlbnRpb24iLCJEaWFnbm9zdGljU2V2ZXJpdHkiLCJIaW50IiwiZXJyb3IiLCJFcnJvciIsImZhdGFsIiwicmVmYWN0b3IiLCJ3YXJuaW5nIiwiV2FybmluZyIsIm1lc3NhZ2VzIiwibGVuZ3RoT2YiLCJjb2x1bW4iXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTtBQUNBOztBQUNBLElBQUlB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QWxDLENBQXFDQyxFQUFyQyxDQUF3Q0MsS0FBeEMsQ0FBOEMsQ0FBOUM7QUFDQWpFLElBQUFBLE1BQU0sQ0FBQzhELE1BQVAsQ0FBYzRELFFBQVEsQ0FBQyxDQUFELENBQVIsQ0FBWUUsTUFBMUIsRUFBa0M3RCxFQUFsQyxDQUFxQ0MsRUFBckMsQ0FBd0NDLEtBQXhDLENBQThDLENBQTlDO0FBQ0gsR0FuQ2tFLENBQS9ELENBQUo7QUFvQ0gsQ0F6TEksQ0FBTCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGNoYWlfMSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xyXG5jb25zdCBpbnZlcnNpZnlfMSA9IHJlcXVpcmUoXCJpbnZlcnNpZnlcIik7XHJcbmNvbnN0IG9zID0gcmVxdWlyZShcIm9zXCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IFR5cGVNb3EgPSByZXF1aXJlKFwidHlwZW1vcVwiKTtcclxuY29uc3QgdnNjb2RlXzEgPSByZXF1aXJlKFwidnNjb2RlXCIpO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vYXBwbGljYXRpb24vdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzIgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wbGF0Zm9ybS90eXBlc1wiKTtcclxuY29uc3QgdHlwZXNfMyA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3Byb2Nlc3MvdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzQgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi90eXBlc1wiKTtcclxuY29uc3QgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2lvYy9jb250YWluZXJcIik7XHJcbmNvbnN0IHNlcnZpY2VNYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2lvYy9zZXJ2aWNlTWFuYWdlclwiKTtcclxuY29uc3QgbGludGVyTWFuYWdlcl8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9saW50ZXJzL2xpbnRlck1hbmFnZXJcIik7XHJcbmNvbnN0IHB5bGludF8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9saW50ZXJzL3B5bGludFwiKTtcclxuY29uc3QgdHlwZXNfNSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvbGludGVycy90eXBlc1wiKTtcclxuY29uc3QgbW9ja0NsYXNzZXNfMSA9IHJlcXVpcmUoXCIuLi9tb2NrQ2xhc3Nlc1wiKTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1mdW5jLWJvZHktbGVuZ3RoXHJcbnN1aXRlKCdMaW50aW5nIC0gUHlsaW50JywgKCkgPT4ge1xyXG4gICAgY29uc3QgYmFzZVBhdGggPSAnL3VzZXIvYS9iL2MvZCc7XHJcbiAgICBjb25zdCBweWxpbnRyYyA9ICdweWxpbnRyYyc7XHJcbiAgICBjb25zdCBkb3RQeWxpbnRyYyA9ICcucHlsaW50cmMnO1xyXG4gICAgbGV0IGZpbGVTeXN0ZW07XHJcbiAgICBsZXQgcGxhdGZvcm1TZXJ2aWNlO1xyXG4gICAgbGV0IHdvcmtzcGFjZTtcclxuICAgIGxldCBleGVjU2VydmljZTtcclxuICAgIGxldCBjb25maWc7XHJcbiAgICBsZXQgc2VydmljZUNvbnRhaW5lcjtcclxuICAgIHNldHVwKCgpID0+IHtcclxuICAgICAgICBmaWxlU3lzdGVtID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGZpbGVTeXN0ZW1cclxuICAgICAgICAgICAgLnNldHVwKHggPT4geC5hcmVQYXRoc1NhbWUoVHlwZU1vcS5JdC5pc0FueVN0cmluZygpLCBUeXBlTW9xLkl0LmlzQW55U3RyaW5nKCkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoYSwgYikgPT4gYSA9PT0gYik7XHJcbiAgICAgICAgcGxhdGZvcm1TZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHBsYXRmb3JtU2VydmljZS5zZXR1cCh4ID0+IHguaXNXaW5kb3dzKS5yZXR1cm5zKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB3b3Jrc3BhY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgZXhlY1NlcnZpY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgY29uc3QgY29udCA9IG5ldyBpbnZlcnNpZnlfMS5Db250YWluZXIoKTtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlTWFuYWdlciA9IG5ldyBzZXJ2aWNlTWFuYWdlcl8xLlNlcnZpY2VNYW5hZ2VyKGNvbnQpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIgPSBuZXcgY29udGFpbmVyXzEuU2VydmljZUNvbnRhaW5lcihjb250KTtcclxuICAgICAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b25JbnN0YW5jZSh0eXBlc18yLklGaWxlU3lzdGVtLCBmaWxlU3lzdGVtLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMS5JV29ya3NwYWNlU2VydmljZSwgd29ya3NwYWNlLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMy5JUHl0aG9uVG9vbEV4ZWN1dGlvblNlcnZpY2UsIGV4ZWNTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfMi5JUGxhdGZvcm1TZXJ2aWNlLCBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBjb25maWcgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfNC5JQ29uZmlndXJhdGlvblNlcnZpY2UsIGNvbmZpZy5vYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IGxpbnRlck1hbmFnZXIgPSBuZXcgbGludGVyTWFuYWdlcl8xLkxpbnRlck1hbmFnZXIoc2VydmljZUNvbnRhaW5lciwgd29ya3NwYWNlLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uSW5zdGFuY2UodHlwZXNfNS5JTGludGVyTWFuYWdlciwgbGludGVyTWFuYWdlcik7XHJcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzQuSUxvZ2dlciwgbG9nZ2VyLm9iamVjdCk7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGVyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbkluc3RhbmNlKHR5cGVzXzQuSUluc3RhbGxlciwgaW5zdGFsbGVyLm9iamVjdCk7XHJcbiAgICB9KTtcclxuICAgIHRlc3QoJ3B5bGludHJjIGluIHRoZSBmaWxlIGZvbGRlcicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKHBhdGguam9pbihiYXNlUGF0aCwgcHlsaW50cmMpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSB5aWVsZCBweWxpbnRfMS5QeWxpbnQuaGFzQ29uZmlndXJhdGlvbkZpbGUoZmlsZVN5c3RlbS5vYmplY3QsIGJhc2VQYXRoLCBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uYmUuZXF1YWwodHJ1ZSwgYCcke3B5bGludHJjfScgbm90IGRldGVjdGVkIGluIHRoZSBmaWxlIGZvbGRlci5gKTtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKHBhdGguam9pbihiYXNlUGF0aCwgZG90UHlsaW50cmMpKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIHJlc3VsdCA9IHlpZWxkIHB5bGludF8xLlB5bGludC5oYXNDb25maWd1cmF0aW9uRmlsZShmaWxlU3lzdGVtLm9iamVjdCwgYmFzZVBhdGgsIHBsYXRmb3JtU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5iZS5lcXVhbCh0cnVlLCBgJyR7ZG90UHlsaW50cmN9JyBub3QgZGV0ZWN0ZWQgaW4gdGhlIGZpbGUgZm9sZGVyLmApO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgncHlsaW50cmMgdXAgdGhlIG1vZHVsZSB0cmVlJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZTEgPSBwYXRoLmpvaW4oJy91c2VyL2EvYi9jL2QnLCAnX19pbml0X18ucHknKTtcclxuICAgICAgICBjb25zdCBtb2R1bGUyID0gcGF0aC5qb2luKCcvdXNlci9hL2IvYycsICdfX2luaXRfXy5weScpO1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZTMgPSBwYXRoLmpvaW4oJy91c2VyL2EvYicsICdfX2luaXRfXy5weScpO1xyXG4gICAgICAgIGNvbnN0IHJjID0gcGF0aC5qb2luKCcvdXNlci9hL2IvYycsIHB5bGludHJjKTtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKG1vZHVsZTEpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhtb2R1bGUyKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIGZpbGVTeXN0ZW0uc2V0dXAoeCA9PiB4LmZpbGVFeGlzdHMobW9kdWxlMykpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKHJjKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHB5bGludF8xLlB5bGludC5oYXNDb25maWd1cmF0aW9uRmlsZShmaWxlU3lzdGVtLm9iamVjdCwgYmFzZVBhdGgsIHBsYXRmb3JtU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5iZS5lcXVhbCh0cnVlLCBgJyR7cHlsaW50cmN9JyBub3QgZGV0ZWN0ZWQgaW4gdGhlIG1vZHVsZSB0cmVlLmApO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnLnB5bGludHJjIHVwIHRoZSBtb2R1bGUgdHJlZScsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBEb24ndCB1c2UgcGF0aC5qb2luIHNpbmNlIGl0IHdpbGwgdXNlIC8gb24gVHJhdmlzIGFuZCBNYWNcclxuICAgICAgICBjb25zdCBtb2R1bGUxID0gcGF0aC5qb2luKCcvdXNlci9hL2IvYy9kJywgJ19faW5pdF9fLnB5Jyk7XHJcbiAgICAgICAgY29uc3QgbW9kdWxlMiA9IHBhdGguam9pbignL3VzZXIvYS9iL2MnLCAnX19pbml0X18ucHknKTtcclxuICAgICAgICBjb25zdCBtb2R1bGUzID0gcGF0aC5qb2luKCcvdXNlci9hL2InLCAnX19pbml0X18ucHknKTtcclxuICAgICAgICBjb25zdCByYyA9IHBhdGguam9pbignL3VzZXIvYS9iL2MnLCBweWxpbnRyYyk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhtb2R1bGUxKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIGZpbGVTeXN0ZW0uc2V0dXAoeCA9PiB4LmZpbGVFeGlzdHMobW9kdWxlMikpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKG1vZHVsZTMpKS5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhyYykpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBweWxpbnRfMS5QeWxpbnQuaGFzQ29uZmlndXJhdGlvbkZpbGUoZmlsZVN5c3RlbS5vYmplY3QsIGJhc2VQYXRoLCBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uYmUuZXF1YWwodHJ1ZSwgYCcke2RvdFB5bGludHJjfScgbm90IGRldGVjdGVkIGluIHRoZSBtb2R1bGUgdHJlZS5gKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJy5weWxpbnRyYyB1cCB0aGUgfiBmb2xkZXInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgaG9tZSA9IG9zLmhvbWVkaXIoKTtcclxuICAgICAgICBjb25zdCByYyA9IHBhdGguam9pbihob21lLCBkb3RQeWxpbnRyYyk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhyYykpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBweWxpbnRfMS5QeWxpbnQuaGFzQ29uZmlndXJhdGlvbkZpbGUoZmlsZVN5c3RlbS5vYmplY3QsIGJhc2VQYXRoLCBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uYmUuZXF1YWwodHJ1ZSwgYCcke2RvdFB5bGludHJjfScgbm90IGRldGVjdGVkIGluIHRoZSB+IGZvbGRlci5gKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ3B5bGludHJjIHVwIHRoZSB+Ly5jb25maWcgZm9sZGVyJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IGhvbWUgPSBvcy5ob21lZGlyKCk7XHJcbiAgICAgICAgY29uc3QgcmMgPSBwYXRoLmpvaW4oaG9tZSwgJy5jb25maWcnLCBweWxpbnRyYyk7XHJcbiAgICAgICAgZmlsZVN5c3RlbS5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhyYykpLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBweWxpbnRfMS5QeWxpbnQuaGFzQ29uZmlndXJhdGlvbkZpbGUoZmlsZVN5c3RlbS5vYmplY3QsIGJhc2VQYXRoLCBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBjaGFpXzEuZXhwZWN0KHJlc3VsdCkudG8uYmUuZXF1YWwodHJ1ZSwgYCcke3B5bGludHJjfScgbm90IGRldGVjdGVkIGluIHRoZSAgfi8uY29uZmlnIGZvbGRlci5gKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ3B5bGludHJjIGluIHRoZSAvZXRjIGZvbGRlcicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCByYyA9IHBhdGguam9pbignL2V0YycsIHB5bGludHJjKTtcclxuICAgICAgICBmaWxlU3lzdGVtLnNldHVwKHggPT4geC5maWxlRXhpc3RzKHJjKSkucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHB5bGludF8xLlB5bGludC5oYXNDb25maWd1cmF0aW9uRmlsZShmaWxlU3lzdGVtLm9iamVjdCwgYmFzZVBhdGgsIHBsYXRmb3JtU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5iZS5lcXVhbCh0cnVlLCBgJyR7cHlsaW50cmN9JyBub3QgZGV0ZWN0ZWQgaW4gdGhlIC9ldGMgZm9sZGVyLmApO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgncHlsaW50cmMgYmV0d2VlbiBmaWxlIGFuZCB3b3Jrc3BhY2Ugcm9vdCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCByb290ID0gJy91c2VyL2EnO1xyXG4gICAgICAgIGNvbnN0IG1pZEZvbGRlciA9ICcvdXNlci9hL2InO1xyXG4gICAgICAgIGZpbGVTeXN0ZW1cclxuICAgICAgICAgICAgLnNldHVwKHggPT4geC5maWxlRXhpc3RzKHBhdGguam9pbihtaWRGb2xkZXIsIHB5bGludHJjKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgcHlsaW50XzEuUHlsaW50Lmhhc0NvbmZpZ3JhdGlvbkZpbGVJbldvcmtzcGFjZShmaWxlU3lzdGVtLm9iamVjdCwgYmFzZVBhdGgsIHJvb3QpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QocmVzdWx0KS50by5iZS5lcXVhbCh0cnVlLCBgJyR7cHlsaW50cmN9JyBub3QgZGV0ZWN0ZWQgaW4gdGhlIHdvcmtzcGFjZSB0cmVlLmApO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnbWluQXJncyAtIHB5bGludHJjIGJldHdlZW4gdGhlIGZpbGUgYW5kIHRoZSB3b3Jrc3BhY2Ugcm9vdCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBmaWxlU3lzdGVtXHJcbiAgICAgICAgICAgIC5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhwYXRoLmpvaW4oJy91c2VyL2EvYicsIHB5bGludHJjKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgeWllbGQgdGVzdFB5bGludEFyZ3VtZW50cygnL3VzZXIvYS9iL2MnLCAnL3VzZXIvYScsIGZhbHNlKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ21pbkFyZ3MgLSBubyBweWxpbnRyYyBiZXR3ZWVuIHRoZSBmaWxlIGFuZCB0aGUgd29ya3NwYWNlIHJvb3QnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgeWllbGQgdGVzdFB5bGludEFyZ3VtZW50cygnL3VzZXIvYS9iL2MnLCAnL3VzZXIvYScsIHRydWUpO1xyXG4gICAgfSkpO1xyXG4gICAgdGVzdCgnbWluQXJncyAtIHB5bGludHJjIG5leHQgdG8gdGhlIGZpbGUnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZUZvbGRlciA9ICcvdXNlci9hL2IvYyc7XHJcbiAgICAgICAgZmlsZVN5c3RlbVxyXG4gICAgICAgICAgICAuc2V0dXAoeCA9PiB4LmZpbGVFeGlzdHMocGF0aC5qb2luKGZpbGVGb2xkZXIsIHB5bGludHJjKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKSk7XHJcbiAgICAgICAgeWllbGQgdGVzdFB5bGludEFyZ3VtZW50cyhmaWxlRm9sZGVyLCAnL3VzZXIvYScsIGZhbHNlKTtcclxuICAgIH0pKTtcclxuICAgIHRlc3QoJ21pbkFyZ3MgLSBweWxpbnRyYyBhdCB0aGUgd29ya3NwYWNlIHJvb3QnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdCA9ICcvdXNlci9hJztcclxuICAgICAgICBmaWxlU3lzdGVtXHJcbiAgICAgICAgICAgIC5zZXR1cCh4ID0+IHguZmlsZUV4aXN0cyhwYXRoLmpvaW4ocm9vdCwgcHlsaW50cmMpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKTtcclxuICAgICAgICB5aWVsZCB0ZXN0UHlsaW50QXJndW1lbnRzKCcvdXNlci9hL2IvYycsIHJvb3QsIGZhbHNlKTtcclxuICAgIH0pKTtcclxuICAgIGZ1bmN0aW9uIHRlc3RQeWxpbnRBcmd1bWVudHMoZmlsZUZvbGRlciwgd3NSb290LCBleHBlY3RlZE1pbkFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBvdXRwdXRDaGFubmVsID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBweWxpbnRlciA9IG5ldyBweWxpbnRfMS5QeWxpbnQob3V0cHV0Q2hhbm5lbC5vYmplY3QsIHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuc2V0dXAoeCA9PiB4LnVyaSkucmV0dXJucygoKSA9PiB2c2NvZGVfMS5VcmkuZmlsZShwYXRoLmpvaW4oZmlsZUZvbGRlciwgJ3Rlc3QucHknKSkpO1xyXG4gICAgICAgICAgICBjb25zdCB3c2YgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIHdzZi5zZXR1cCh4ID0+IHgudXJpKS5yZXR1cm5zKCgpID0+IHZzY29kZV8xLlVyaS5maWxlKHdzUm9vdCkpO1xyXG4gICAgICAgICAgICB3b3Jrc3BhY2Uuc2V0dXAoeCA9PiB4LmdldFdvcmtzcGFjZUZvbGRlcihUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IHdzZi5vYmplY3QpO1xyXG4gICAgICAgICAgICBsZXQgZXhlY0luZm87XHJcbiAgICAgICAgICAgIGV4ZWNTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoeCA9PiB4LmV4ZWMoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAuY2FsbGJhY2soKGUsIGIsIGMpID0+IHtcclxuICAgICAgICAgICAgICAgIGV4ZWNJbmZvID0gZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN0ZG91dDogJycsIHN0ZGVycjogJycgfSkpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW50U2V0dGluZ3MgPSBuZXcgbW9ja0NsYXNzZXNfMS5Nb2NrTGludGluZ1NldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIGxpbnRTZXR0aW5ncy5weWxpbnRVc2VNaW5pbWFsQ2hlY2tlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc3RyaW5nLWxpdGVyYWxcclxuICAgICAgICAgICAgbGludFNldHRpbmdzWydweWxpbnRQYXRoJ10gPSAncHlMaW50JztcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgICAgIGxpbnRTZXR0aW5nc1sncHlsaW50RW5hYmxlZCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLnNldHVwKHggPT4geC5saW50aW5nKS5yZXR1cm5zKCgpID0+IGxpbnRTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIGNvbmZpZy5zZXR1cCh4ID0+IHguZ2V0U2V0dGluZ3MoVHlwZU1vcS5JdC5pc0FueSgpKSkucmV0dXJucygoKSA9PiBzZXR0aW5ncy5vYmplY3QpO1xyXG4gICAgICAgICAgICB5aWVsZCBweWxpbnRlci5saW50KGRvY3VtZW50Lm9iamVjdCwgbmV3IHZzY29kZV8xLkNhbmNlbGxhdGlvblRva2VuU291cmNlKCkudG9rZW4pO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGV4ZWNJbmZvLmFyZ3MuZmluZEluZGV4KHggPT4geC5pbmRleE9mKCctLWRpc2FibGU9YWxsJykgPj0gMCksICdNaW5pbWFsIGFyZ3MgcGFzc2VkIHRvIHB5bGludCB3aGlsZSBweWxpbnRyYyBleGlzdHMuJykudG8uYmUuZXEoZXhwZWN0ZWRNaW5BcmdzID8gMCA6IC0xKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRlc3QoJ05lZ2F0aXZlIGNvbHVtbiBudW1iZXJzIHNob3VsZCBiZSB0cmVhdGVkIDAnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZUZvbGRlciA9ICcvdXNlci9hL2IvYyc7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0Q2hhbm5lbCA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBjb25zdCBweWxpbnRlciA9IG5ldyBweWxpbnRfMS5QeWxpbnQob3V0cHV0Q2hhbm5lbC5vYmplY3QsIHNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LnNldHVwKHggPT4geC51cmkpLnJldHVybnMoKCkgPT4gdnNjb2RlXzEuVXJpLmZpbGUocGF0aC5qb2luKGZpbGVGb2xkZXIsICd0ZXN0LnB5JykpKTtcclxuICAgICAgICBjb25zdCB3c2YgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgd3NmLnNldHVwKHggPT4geC51cmkpLnJldHVybnMoKCkgPT4gdnNjb2RlXzEuVXJpLmZpbGUoZmlsZUZvbGRlcikpO1xyXG4gICAgICAgIHdvcmtzcGFjZS5zZXR1cCh4ID0+IHguZ2V0V29ya3NwYWNlRm9sZGVyKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gd3NmLm9iamVjdCk7XHJcbiAgICAgICAgY29uc3QgbGludGVyT3V0cHV0ID0gWydObyBjb25maWcgZmlsZSBmb3VuZCwgdXNpbmcgZGVmYXVsdCBjb25maWd1cmF0aW9uJyxcclxuICAgICAgICAgICAgJyoqKioqKioqKioqKiogTW9kdWxlIHRlc3QnLFxyXG4gICAgICAgICAgICAnMSwxLGNvbnZlbnRpb24sQzAxMTE6TWlzc2luZyBtb2R1bGUgZG9jc3RyaW5nJyxcclxuICAgICAgICAgICAgJzMsLTEsZXJyb3IsRTEzMDU6VG9vIG1hbnkgYXJndW1lbnRzIGZvciBmb3JtYXQgc3RyaW5nJ10uam9pbihvcy5FT0wpO1xyXG4gICAgICAgIGV4ZWNTZXJ2aWNlXHJcbiAgICAgICAgICAgIC5zZXR1cCh4ID0+IHguZXhlYyhUeXBlTW9xLkl0LmlzQW55KCksIFR5cGVNb3EuSXQuaXNBbnkoKSwgVHlwZU1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3Rkb3V0OiBsaW50ZXJPdXRwdXQsIHN0ZGVycjogJycgfSkpO1xyXG4gICAgICAgIGNvbnN0IGxpbnRTZXR0aW5ncyA9IG5ldyBtb2NrQ2xhc3Nlc18xLk1vY2tMaW50aW5nU2V0dGluZ3MoKTtcclxuICAgICAgICBsaW50U2V0dGluZ3MucHlsaW50VXNlTWluaW1hbENoZWNrZXJzID0gZmFsc2U7XHJcbiAgICAgICAgbGludFNldHRpbmdzLm1heE51bWJlck9mUHJvYmxlbXMgPSAxMDAwO1xyXG4gICAgICAgIGxpbnRTZXR0aW5ncy5weWxpbnRQYXRoID0gJ3B5TGludCc7XHJcbiAgICAgICAgbGludFNldHRpbmdzLnB5bGludEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGxpbnRTZXR0aW5ncy5weWxpbnRDYXRlZ29yeVNldmVyaXR5ID0ge1xyXG4gICAgICAgICAgICBjb252ZW50aW9uOiB2c2NvZGVfMS5EaWFnbm9zdGljU2V2ZXJpdHkuSGludCxcclxuICAgICAgICAgICAgZXJyb3I6IHZzY29kZV8xLkRpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcclxuICAgICAgICAgICAgZmF0YWw6IHZzY29kZV8xLkRpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcclxuICAgICAgICAgICAgcmVmYWN0b3I6IHZzY29kZV8xLkRpYWdub3N0aWNTZXZlcml0eS5IaW50LFxyXG4gICAgICAgICAgICB3YXJuaW5nOiB2c2NvZGVfMS5EaWFnbm9zdGljU2V2ZXJpdHkuV2FybmluZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgc2V0dGluZ3Muc2V0dXAoeCA9PiB4LmxpbnRpbmcpLnJldHVybnMoKCkgPT4gbGludFNldHRpbmdzKTtcclxuICAgICAgICBjb25maWcuc2V0dXAoeCA9PiB4LmdldFNldHRpbmdzKFR5cGVNb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gc2V0dGluZ3Mub2JqZWN0KTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHlpZWxkIHB5bGludGVyLmxpbnQoZG9jdW1lbnQub2JqZWN0LCBuZXcgdnNjb2RlXzEuQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKS50b2tlbik7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChtZXNzYWdlcykudG8uYmUubGVuZ3RoT2YoMik7XHJcbiAgICAgICAgY2hhaV8xLmV4cGVjdChtZXNzYWdlc1swXS5jb2x1bW4pLnRvLmJlLmVxdWFsKDEpO1xyXG4gICAgICAgIGNoYWlfMS5leHBlY3QobWVzc2FnZXNbMV0uY29sdW1uKS50by5iZS5lcXVhbCgwKTtcclxuICAgIH0pKTtcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB5bGludC50ZXN0LmpzLm1hcCJdfQ==