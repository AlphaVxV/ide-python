"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const assert = require("assert");

const TypeMoq = require("typemoq");

const types_1 = require("../../client/common/application/types");

const pathUtils_1 = require("../../client/common/platform/pathUtils");

const types_2 = require("../../client/common/platform/types");

const types_3 = require("../../client/common/types");

const platform_1 = require("../../client/common/utils/platform");

const interpreterSelector_1 = require("../../client/interpreter/configuration/interpreterSelector");

const types_4 = require("../../client/interpreter/configuration/types");

const contracts_1 = require("../../client/interpreter/contracts");

const info = {
  architecture: platform_1.Architecture.Unknown,
  companyDisplayName: '',
  displayName: '',
  envName: '',
  path: '',
  type: contracts_1.InterpreterType.Unknown,
  version: '',
  version_info: [0, 0, 0, 'alpha'],
  sysPrefix: '',
  sysVersion: ''
};

class InterpreterQuickPickItem {
  constructor(l, p) {
    this.path = p;
    this.label = l;
  }

} // tslint:disable-next-line:max-func-body-length


suite('Interpreters - selector', () => {
  let serviceContainer;
  let workspace;
  let appShell;
  let interpreterService;
  let documentManager;
  let fileSystem;
  setup(() => {
    const commandManager = TypeMoq.Mock.ofType();
    const comparer = TypeMoq.Mock.ofType();
    serviceContainer = TypeMoq.Mock.ofType();
    appShell = TypeMoq.Mock.ofType();
    interpreterService = TypeMoq.Mock.ofType();
    documentManager = TypeMoq.Mock.ofType();
    workspace = TypeMoq.Mock.ofType();
    fileSystem = TypeMoq.Mock.ofType();
    fileSystem.setup(x => x.arePathsSame(TypeMoq.It.isAnyString(), TypeMoq.It.isAnyString())).returns((a, b) => a === b);
    fileSystem.setup(x => x.getRealPath(TypeMoq.It.isAnyString())).returns(a => new Promise(resolve => resolve(a)));
    comparer.setup(c => c.compare(TypeMoq.It.isAny(), TypeMoq.It.isAny())).returns(() => 0);
    serviceContainer.setup(c => c.get(types_1.IWorkspaceService)).returns(() => workspace.object);
    serviceContainer.setup(c => c.get(types_1.IApplicationShell)).returns(() => appShell.object);
    serviceContainer.setup(c => c.get(contracts_1.IInterpreterService)).returns(() => interpreterService.object);
    serviceContainer.setup(c => c.get(types_1.IDocumentManager)).returns(() => documentManager.object);
    serviceContainer.setup(c => c.get(types_2.IFileSystem)).returns(() => fileSystem.object);
    serviceContainer.setup(c => c.get(types_4.IInterpreterComparer)).returns(() => comparer.object);
    serviceContainer.setup(c => c.get(types_1.ICommandManager)).returns(() => commandManager.object);
  });
  [true, false].forEach(isWindows => {
    test(`Suggestions (${isWindows} ? 'Windows' : 'Non-Windows')`, () => __awaiter(void 0, void 0, void 0, function* () {
      serviceContainer.setup(c => c.get(types_3.IPathUtils)).returns(() => new pathUtils_1.PathUtils(isWindows));
      const initial = [{
        displayName: '1',
        path: 'c:/path1/path1',
        type: contracts_1.InterpreterType.Unknown
      }, {
        displayName: '2',
        path: 'c:/path1/path1',
        type: contracts_1.InterpreterType.Unknown
      }, {
        displayName: '2',
        path: 'c:/path2/path2',
        type: contracts_1.InterpreterType.Unknown
      }, {
        displayName: '2 (virtualenv)',
        path: 'c:/path2/path2',
        type: contracts_1.InterpreterType.VirtualEnv
      }, {
        displayName: '3',
        path: 'c:/path2/path2',
        type: contracts_1.InterpreterType.Unknown
      }, {
        displayName: '4',
        path: 'c:/path4/path4',
        type: contracts_1.InterpreterType.Conda
      }].map(item => {
        return Object.assign({}, info, item);
      });
      interpreterService.setup(x => x.getInterpreters(TypeMoq.It.isAny())).returns(() => new Promise(resolve => resolve(initial)));
      const selector = new interpreterSelector_1.InterpreterSelector(serviceContainer.object);
      const actual = yield selector.getSuggestions();
      const expected = [new InterpreterQuickPickItem('1', 'c:/path1/path1'), new InterpreterQuickPickItem('2', 'c:/path1/path1'), new InterpreterQuickPickItem('2', 'c:/path2/path2'), new InterpreterQuickPickItem('2 (virtualenv)', 'c:/path2/path2'), new InterpreterQuickPickItem('3', 'c:/path2/path2'), new InterpreterQuickPickItem('4', 'c:/path4/path4')];
      assert.equal(actual.length, expected.length, 'Suggestion lengths are different.');

      for (let i = 0; i < expected.length; i += 1) {
        assert.equal(actual[i].label, expected[i].label, `Suggestion label is different at ${i}: exected '${expected[i].label}', found '${actual[i].label}'.`);
        assert.equal(actual[i].path, expected[i].path, `Suggestion path is different at ${i}: exected '${expected[i].path}', found '${actual[i].path}'.`);
      }
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVycHJldGVyU2VsZWN0b3IudW5pdC50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJhc3NlcnQiLCJyZXF1aXJlIiwiVHlwZU1vcSIsInR5cGVzXzEiLCJwYXRoVXRpbHNfMSIsInR5cGVzXzIiLCJ0eXBlc18zIiwicGxhdGZvcm1fMSIsImludGVycHJldGVyU2VsZWN0b3JfMSIsInR5cGVzXzQiLCJjb250cmFjdHNfMSIsImluZm8iLCJhcmNoaXRlY3R1cmUiLCJBcmNoaXRlY3R1cmUiLCJVbmtub3duIiwiY29tcGFueURpc3BsYXlOYW1lIiwiZGlzcGxheU5hbWUiLCJlbnZOYW1lIiwicGF0aCIsInR5cGUiLCJJbnRlcnByZXRlclR5cGUiLCJ2ZXJzaW9uIiwidmVyc2lvbl9pbmZvIiwic3lzUHJlZml4Iiwic3lzVmVyc2lvbiIsIkludGVycHJldGVyUXVpY2tQaWNrSXRlbSIsImNvbnN0cnVjdG9yIiwibCIsInAiLCJsYWJlbCIsInN1aXRlIiwic2VydmljZUNvbnRhaW5lciIsIndvcmtzcGFjZSIsImFwcFNoZWxsIiwiaW50ZXJwcmV0ZXJTZXJ2aWNlIiwiZG9jdW1lbnRNYW5hZ2VyIiwiZmlsZVN5c3RlbSIsInNldHVwIiwiY29tbWFuZE1hbmFnZXIiLCJNb2NrIiwib2ZUeXBlIiwiY29tcGFyZXIiLCJ4IiwiYXJlUGF0aHNTYW1lIiwiSXQiLCJpc0FueVN0cmluZyIsInJldHVybnMiLCJhIiwiYiIsImdldFJlYWxQYXRoIiwiYyIsImNvbXBhcmUiLCJpc0FueSIsImdldCIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwib2JqZWN0IiwiSUFwcGxpY2F0aW9uU2hlbGwiLCJJSW50ZXJwcmV0ZXJTZXJ2aWNlIiwiSURvY3VtZW50TWFuYWdlciIsIklGaWxlU3lzdGVtIiwiSUludGVycHJldGVyQ29tcGFyZXIiLCJJQ29tbWFuZE1hbmFnZXIiLCJmb3JFYWNoIiwiaXNXaW5kb3dzIiwidGVzdCIsIklQYXRoVXRpbHMiLCJQYXRoVXRpbHMiLCJpbml0aWFsIiwiVmlydHVhbEVudiIsIkNvbmRhIiwibWFwIiwiaXRlbSIsImFzc2lnbiIsImdldEludGVycHJldGVycyIsInNlbGVjdG9yIiwiSW50ZXJwcmV0ZXJTZWxlY3RvciIsImFjdHVhbCIsImdldFN1Z2dlc3Rpb25zIiwiZXhwZWN0ZWQiLCJlcXVhbCIsImxlbmd0aCIsImkiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTtBQUNBOztBQUNBLElBQUlBLFNBQVMsR0FBSSxVQUFRLFNBQUtBLFNBQWQsSUFBNEIsVUFBVUMsT0FBVixFQUFtQkMsVUFBbkIsRUFBK0JDLENBQS9CLEVBQWtDQyxTQUFsQyxFQUE2QztBQUNyRixTQUFPLEtBQUtELENBQUMsS0FBS0EsQ0FBQyxHQUFHRSxPQUFULENBQU4sRUFBeUIsVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDdkQsYUFBU0MsU0FBVCxDQUFtQkMsS0FBbkIsRUFBMEI7QUFBRSxVQUFJO0FBQUVDLFFBQUFBLElBQUksQ0FBQ04sU0FBUyxDQUFDTyxJQUFWLENBQWVGLEtBQWYsQ0FBRCxDQUFKO0FBQThCLE9BQXBDLENBQXFDLE9BQU9HLENBQVAsRUFBVTtBQUFFTCxRQUFBQSxNQUFNLENBQUNLLENBQUQsQ0FBTjtBQUFZO0FBQUU7O0FBQzNGLGFBQVNDLFFBQVQsQ0FBa0JKLEtBQWxCLEVBQXlCO0FBQUUsVUFBSTtBQUFFQyxRQUFBQSxJQUFJLENBQUNOLFNBQVMsQ0FBQyxPQUFELENBQVQsQ0FBbUJLLEtBQW5CLENBQUQsQ0FBSjtBQUFrQyxPQUF4QyxDQUF5QyxPQUFPRyxDQUFQLEVBQVU7QUFBRUwsUUFBQUEsTUFBTSxDQUFDSyxDQUFELENBQU47QUFBWTtBQUFFOztBQUM5RixhQUFTRixJQUFULENBQWNJLE1BQWQsRUFBc0I7QUFBRUEsTUFBQUEsTUFBTSxDQUFDQyxJQUFQLEdBQWNULE9BQU8sQ0FBQ1EsTUFBTSxDQUFDTCxLQUFSLENBQXJCLEdBQXNDLElBQUlOLENBQUosQ0FBTSxVQUFVRyxPQUFWLEVBQW1CO0FBQUVBLFFBQUFBLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDTCxLQUFSLENBQVA7QUFBd0IsT0FBbkQsRUFBcURPLElBQXJELENBQTBEUixTQUExRCxFQUFxRUssUUFBckUsQ0FBdEM7QUFBdUg7O0FBQy9JSCxJQUFBQSxJQUFJLENBQUMsQ0FBQ04sU0FBUyxHQUFHQSxTQUFTLENBQUNhLEtBQVYsQ0FBZ0JoQixPQUFoQixFQUF5QkMsVUFBVSxJQUFJLEVBQXZDLENBQWIsRUFBeURTLElBQXpELEVBQUQsQ0FBSjtBQUNILEdBTE0sQ0FBUDtBQU1ILENBUEQ7O0FBUUFPLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRVgsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0FBQ0EsTUFBTVksTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUF0Qjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxTQUFELENBQXZCOztBQUNBLE1BQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDLHVDQUFELENBQXZCOztBQUNBLE1BQU1HLFdBQVcsR0FBR0gsT0FBTyxDQUFDLHdDQUFELENBQTNCOztBQUNBLE1BQU1JLE9BQU8sR0FBR0osT0FBTyxDQUFDLG9DQUFELENBQXZCOztBQUNBLE1BQU1LLE9BQU8sR0FBR0wsT0FBTyxDQUFDLDJCQUFELENBQXZCOztBQUNBLE1BQU1NLFVBQVUsR0FBR04sT0FBTyxDQUFDLG9DQUFELENBQTFCOztBQUNBLE1BQU1PLHFCQUFxQixHQUFHUCxPQUFPLENBQUMsNERBQUQsQ0FBckM7O0FBQ0EsTUFBTVEsT0FBTyxHQUFHUixPQUFPLENBQUMsOENBQUQsQ0FBdkI7O0FBQ0EsTUFBTVMsV0FBVyxHQUFHVCxPQUFPLENBQUMsb0NBQUQsQ0FBM0I7O0FBQ0EsTUFBTVUsSUFBSSxHQUFHO0FBQ1RDLEVBQUFBLFlBQVksRUFBRUwsVUFBVSxDQUFDTSxZQUFYLENBQXdCQyxPQUQ3QjtBQUVUQyxFQUFBQSxrQkFBa0IsRUFBRSxFQUZYO0FBR1RDLEVBQUFBLFdBQVcsRUFBRSxFQUhKO0FBSVRDLEVBQUFBLE9BQU8sRUFBRSxFQUpBO0FBS1RDLEVBQUFBLElBQUksRUFBRSxFQUxHO0FBTVRDLEVBQUFBLElBQUksRUFBRVQsV0FBVyxDQUFDVSxlQUFaLENBQTRCTixPQU56QjtBQU9UTyxFQUFBQSxPQUFPLEVBQUUsRUFQQTtBQVFUQyxFQUFBQSxZQUFZLEVBQUUsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxPQUFWLENBUkw7QUFTVEMsRUFBQUEsU0FBUyxFQUFFLEVBVEY7QUFVVEMsRUFBQUEsVUFBVSxFQUFFO0FBVkgsQ0FBYjs7QUFZQSxNQUFNQyx3QkFBTixDQUErQjtBQUMzQkMsRUFBQUEsV0FBVyxDQUFDQyxDQUFELEVBQUlDLENBQUosRUFBTztBQUNkLFNBQUtWLElBQUwsR0FBWVUsQ0FBWjtBQUNBLFNBQUtDLEtBQUwsR0FBYUYsQ0FBYjtBQUNIOztBQUowQixDLENBTS9COzs7QUFDQUcsS0FBSyxDQUFDLHlCQUFELEVBQTRCLE1BQU07QUFDbkMsTUFBSUMsZ0JBQUo7QUFDQSxNQUFJQyxTQUFKO0FBQ0EsTUFBSUMsUUFBSjtBQUNBLE1BQUlDLGtCQUFKO0FBQ0EsTUFBSUMsZUFBSjtBQUNBLE1BQUlDLFVBQUo7QUFDQUMsRUFBQUEsS0FBSyxDQUFDLE1BQU07QUFDUixVQUFNQyxjQUFjLEdBQUdwQyxPQUFPLENBQUNxQyxJQUFSLENBQWFDLE1BQWIsRUFBdkI7QUFDQSxVQUFNQyxRQUFRLEdBQUd2QyxPQUFPLENBQUNxQyxJQUFSLENBQWFDLE1BQWIsRUFBakI7QUFDQVQsSUFBQUEsZ0JBQWdCLEdBQUc3QixPQUFPLENBQUNxQyxJQUFSLENBQWFDLE1BQWIsRUFBbkI7QUFDQVAsSUFBQUEsUUFBUSxHQUFHL0IsT0FBTyxDQUFDcUMsSUFBUixDQUFhQyxNQUFiLEVBQVg7QUFDQU4sSUFBQUEsa0JBQWtCLEdBQUdoQyxPQUFPLENBQUNxQyxJQUFSLENBQWFDLE1BQWIsRUFBckI7QUFDQUwsSUFBQUEsZUFBZSxHQUFHakMsT0FBTyxDQUFDcUMsSUFBUixDQUFhQyxNQUFiLEVBQWxCO0FBQ0FSLElBQUFBLFNBQVMsR0FBRzlCLE9BQU8sQ0FBQ3FDLElBQVIsQ0FBYUMsTUFBYixFQUFaO0FBQ0FKLElBQUFBLFVBQVUsR0FBR2xDLE9BQU8sQ0FBQ3FDLElBQVIsQ0FBYUMsTUFBYixFQUFiO0FBQ0FKLElBQUFBLFVBQVUsQ0FDTEMsS0FETCxDQUNXSyxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsWUFBRixDQUFlekMsT0FBTyxDQUFDMEMsRUFBUixDQUFXQyxXQUFYLEVBQWYsRUFBeUMzQyxPQUFPLENBQUMwQyxFQUFSLENBQVdDLFdBQVgsRUFBekMsQ0FEaEIsRUFFS0MsT0FGTCxDQUVhLENBQUNDLENBQUQsRUFBSUMsQ0FBSixLQUFVRCxDQUFDLEtBQUtDLENBRjdCO0FBR0FaLElBQUFBLFVBQVUsQ0FDTEMsS0FETCxDQUNXSyxDQUFDLElBQUlBLENBQUMsQ0FBQ08sV0FBRixDQUFjL0MsT0FBTyxDQUFDMEMsRUFBUixDQUFXQyxXQUFYLEVBQWQsQ0FEaEIsRUFFS0MsT0FGTCxDQUVjQyxDQUFELElBQU8sSUFBSS9ELE9BQUosQ0FBWUMsT0FBTyxJQUFJQSxPQUFPLENBQUM4RCxDQUFELENBQTlCLENBRnBCO0FBR0FOLElBQUFBLFFBQVEsQ0FBQ0osS0FBVCxDQUFlYSxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsT0FBRixDQUFVakQsT0FBTyxDQUFDMEMsRUFBUixDQUFXUSxLQUFYLEVBQVYsRUFBOEJsRCxPQUFPLENBQUMwQyxFQUFSLENBQVdRLEtBQVgsRUFBOUIsQ0FBcEIsRUFBdUVOLE9BQXZFLENBQStFLE1BQU0sQ0FBckY7QUFDQWYsSUFBQUEsZ0JBQWdCLENBQUNNLEtBQWpCLENBQXVCYSxDQUFDLElBQUlBLENBQUMsQ0FBQ0csR0FBRixDQUFNbEQsT0FBTyxDQUFDbUQsaUJBQWQsQ0FBNUIsRUFBOERSLE9BQTlELENBQXNFLE1BQU1kLFNBQVMsQ0FBQ3VCLE1BQXRGO0FBQ0F4QixJQUFBQSxnQkFBZ0IsQ0FBQ00sS0FBakIsQ0FBdUJhLENBQUMsSUFBSUEsQ0FBQyxDQUFDRyxHQUFGLENBQU1sRCxPQUFPLENBQUNxRCxpQkFBZCxDQUE1QixFQUE4RFYsT0FBOUQsQ0FBc0UsTUFBTWIsUUFBUSxDQUFDc0IsTUFBckY7QUFDQXhCLElBQUFBLGdCQUFnQixDQUFDTSxLQUFqQixDQUF1QmEsQ0FBQyxJQUFJQSxDQUFDLENBQUNHLEdBQUYsQ0FBTTNDLFdBQVcsQ0FBQytDLG1CQUFsQixDQUE1QixFQUFvRVgsT0FBcEUsQ0FBNEUsTUFBTVosa0JBQWtCLENBQUNxQixNQUFyRztBQUNBeEIsSUFBQUEsZ0JBQWdCLENBQUNNLEtBQWpCLENBQXVCYSxDQUFDLElBQUlBLENBQUMsQ0FBQ0csR0FBRixDQUFNbEQsT0FBTyxDQUFDdUQsZ0JBQWQsQ0FBNUIsRUFBNkRaLE9BQTdELENBQXFFLE1BQU1YLGVBQWUsQ0FBQ29CLE1BQTNGO0FBQ0F4QixJQUFBQSxnQkFBZ0IsQ0FBQ00sS0FBakIsQ0FBdUJhLENBQUMsSUFBSUEsQ0FBQyxDQUFDRyxHQUFGLENBQU1oRCxPQUFPLENBQUNzRCxXQUFkLENBQTVCLEVBQXdEYixPQUF4RCxDQUFnRSxNQUFNVixVQUFVLENBQUNtQixNQUFqRjtBQUNBeEIsSUFBQUEsZ0JBQWdCLENBQUNNLEtBQWpCLENBQXVCYSxDQUFDLElBQUlBLENBQUMsQ0FBQ0csR0FBRixDQUFNNUMsT0FBTyxDQUFDbUQsb0JBQWQsQ0FBNUIsRUFBaUVkLE9BQWpFLENBQXlFLE1BQU1MLFFBQVEsQ0FBQ2MsTUFBeEY7QUFDQXhCLElBQUFBLGdCQUFnQixDQUFDTSxLQUFqQixDQUF1QmEsQ0FBQyxJQUFJQSxDQUFDLENBQUNHLEdBQUYsQ0FBTWxELE9BQU8sQ0FBQzBELGVBQWQsQ0FBNUIsRUFBNERmLE9BQTVELENBQW9FLE1BQU1SLGNBQWMsQ0FBQ2lCLE1BQXpGO0FBQ0gsR0F2QkksQ0FBTDtBQXdCQSxHQUFDLElBQUQsRUFBTyxLQUFQLEVBQWNPLE9BQWQsQ0FBc0JDLFNBQVMsSUFBSTtBQUMvQkMsSUFBQUEsSUFBSSxDQUFFLGdCQUFlRCxTQUFVLCtCQUEzQixFQUEyRCxNQUFNcEYsU0FBUyxTQUFPLEtBQUssQ0FBWixFQUFlLEtBQUssQ0FBcEIsRUFBdUIsYUFBYTtBQUM5R29ELE1BQUFBLGdCQUFnQixDQUNYTSxLQURMLENBQ1dhLENBQUMsSUFBSUEsQ0FBQyxDQUFDRyxHQUFGLENBQU0vQyxPQUFPLENBQUMyRCxVQUFkLENBRGhCLEVBRUtuQixPQUZMLENBRWEsTUFBTSxJQUFJMUMsV0FBVyxDQUFDOEQsU0FBaEIsQ0FBMEJILFNBQTFCLENBRm5CO0FBR0EsWUFBTUksT0FBTyxHQUFHLENBQ1o7QUFBRW5ELFFBQUFBLFdBQVcsRUFBRSxHQUFmO0FBQW9CRSxRQUFBQSxJQUFJLEVBQUUsZ0JBQTFCO0FBQTRDQyxRQUFBQSxJQUFJLEVBQUVULFdBQVcsQ0FBQ1UsZUFBWixDQUE0Qk47QUFBOUUsT0FEWSxFQUVaO0FBQUVFLFFBQUFBLFdBQVcsRUFBRSxHQUFmO0FBQW9CRSxRQUFBQSxJQUFJLEVBQUUsZ0JBQTFCO0FBQTRDQyxRQUFBQSxJQUFJLEVBQUVULFdBQVcsQ0FBQ1UsZUFBWixDQUE0Qk47QUFBOUUsT0FGWSxFQUdaO0FBQUVFLFFBQUFBLFdBQVcsRUFBRSxHQUFmO0FBQW9CRSxRQUFBQSxJQUFJLEVBQUUsZ0JBQTFCO0FBQTRDQyxRQUFBQSxJQUFJLEVBQUVULFdBQVcsQ0FBQ1UsZUFBWixDQUE0Qk47QUFBOUUsT0FIWSxFQUlaO0FBQUVFLFFBQUFBLFdBQVcsRUFBRSxnQkFBZjtBQUFpQ0UsUUFBQUEsSUFBSSxFQUFFLGdCQUF2QztBQUF5REMsUUFBQUEsSUFBSSxFQUFFVCxXQUFXLENBQUNVLGVBQVosQ0FBNEJnRDtBQUEzRixPQUpZLEVBS1o7QUFBRXBELFFBQUFBLFdBQVcsRUFBRSxHQUFmO0FBQW9CRSxRQUFBQSxJQUFJLEVBQUUsZ0JBQTFCO0FBQTRDQyxRQUFBQSxJQUFJLEVBQUVULFdBQVcsQ0FBQ1UsZUFBWixDQUE0Qk47QUFBOUUsT0FMWSxFQU1aO0FBQUVFLFFBQUFBLFdBQVcsRUFBRSxHQUFmO0FBQW9CRSxRQUFBQSxJQUFJLEVBQUUsZ0JBQTFCO0FBQTRDQyxRQUFBQSxJQUFJLEVBQUVULFdBQVcsQ0FBQ1UsZUFBWixDQUE0QmlEO0FBQTlFLE9BTlksRUFPZEMsR0FQYyxDQU9WQyxJQUFJLElBQUk7QUFBRSxlQUFPMUUsTUFBTSxDQUFDMkUsTUFBUCxDQUFjLEVBQWQsRUFBa0I3RCxJQUFsQixFQUF3QjRELElBQXhCLENBQVA7QUFBdUMsT0FQdkMsQ0FBaEI7QUFRQXJDLE1BQUFBLGtCQUFrQixDQUNiRyxLQURMLENBQ1dLLENBQUMsSUFBSUEsQ0FBQyxDQUFDK0IsZUFBRixDQUFrQnZFLE9BQU8sQ0FBQzBDLEVBQVIsQ0FBV1EsS0FBWCxFQUFsQixDQURoQixFQUVLTixPQUZMLENBRWEsTUFBTSxJQUFJOUQsT0FBSixDQUFhQyxPQUFELElBQWFBLE9BQU8sQ0FBQ2tGLE9BQUQsQ0FBaEMsQ0FGbkI7QUFHQSxZQUFNTyxRQUFRLEdBQUcsSUFBSWxFLHFCQUFxQixDQUFDbUUsbUJBQTFCLENBQThDNUMsZ0JBQWdCLENBQUN3QixNQUEvRCxDQUFqQjtBQUNBLFlBQU1xQixNQUFNLEdBQUcsTUFBTUYsUUFBUSxDQUFDRyxjQUFULEVBQXJCO0FBQ0EsWUFBTUMsUUFBUSxHQUFHLENBQ2IsSUFBSXJELHdCQUFKLENBQTZCLEdBQTdCLEVBQWtDLGdCQUFsQyxDQURhLEVBRWIsSUFBSUEsd0JBQUosQ0FBNkIsR0FBN0IsRUFBa0MsZ0JBQWxDLENBRmEsRUFHYixJQUFJQSx3QkFBSixDQUE2QixHQUE3QixFQUFrQyxnQkFBbEMsQ0FIYSxFQUliLElBQUlBLHdCQUFKLENBQTZCLGdCQUE3QixFQUErQyxnQkFBL0MsQ0FKYSxFQUtiLElBQUlBLHdCQUFKLENBQTZCLEdBQTdCLEVBQWtDLGdCQUFsQyxDQUxhLEVBTWIsSUFBSUEsd0JBQUosQ0FBNkIsR0FBN0IsRUFBa0MsZ0JBQWxDLENBTmEsQ0FBakI7QUFRQXpCLE1BQUFBLE1BQU0sQ0FBQytFLEtBQVAsQ0FBYUgsTUFBTSxDQUFDSSxNQUFwQixFQUE0QkYsUUFBUSxDQUFDRSxNQUFyQyxFQUE2QyxtQ0FBN0M7O0FBQ0EsV0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxRQUFRLENBQUNFLE1BQTdCLEVBQXFDQyxDQUFDLElBQUksQ0FBMUMsRUFBNkM7QUFDekNqRixRQUFBQSxNQUFNLENBQUMrRSxLQUFQLENBQWFILE1BQU0sQ0FBQ0ssQ0FBRCxDQUFOLENBQVVwRCxLQUF2QixFQUE4QmlELFFBQVEsQ0FBQ0csQ0FBRCxDQUFSLENBQVlwRCxLQUExQyxFQUFrRCxvQ0FBbUNvRCxDQUFFLGNBQWFILFFBQVEsQ0FBQ0csQ0FBRCxDQUFSLENBQVlwRCxLQUFNLGFBQVkrQyxNQUFNLENBQUNLLENBQUQsQ0FBTixDQUFVcEQsS0FBTSxJQUFsSjtBQUNBN0IsUUFBQUEsTUFBTSxDQUFDK0UsS0FBUCxDQUFhSCxNQUFNLENBQUNLLENBQUQsQ0FBTixDQUFVL0QsSUFBdkIsRUFBNkI0RCxRQUFRLENBQUNHLENBQUQsQ0FBUixDQUFZL0QsSUFBekMsRUFBZ0QsbUNBQWtDK0QsQ0FBRSxjQUFhSCxRQUFRLENBQUNHLENBQUQsQ0FBUixDQUFZL0QsSUFBSyxhQUFZMEQsTUFBTSxDQUFDSyxDQUFELENBQU4sQ0FBVS9ELElBQUssSUFBN0k7QUFDSDtBQUNKLEtBOUI2RSxDQUExRSxDQUFKO0FBK0JILEdBaENEO0FBaUNILENBaEVJLENBQUwiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xyXG5jb25zdCBUeXBlTW9xID0gcmVxdWlyZShcInR5cGVtb3FcIik7XHJcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9hcHBsaWNhdGlvbi90eXBlc1wiKTtcclxuY29uc3QgcGF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wbGF0Zm9ybS9wYXRoVXRpbHNcIik7XHJcbmNvbnN0IHR5cGVzXzIgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbW1vbi9wbGF0Zm9ybS90eXBlc1wiKTtcclxuY29uc3QgdHlwZXNfMyA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tbW9uL3R5cGVzXCIpO1xyXG5jb25zdCBwbGF0Zm9ybV8xID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21tb24vdXRpbHMvcGxhdGZvcm1cIik7XHJcbmNvbnN0IGludGVycHJldGVyU2VsZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvaW50ZXJwcmV0ZXIvY29uZmlndXJhdGlvbi9pbnRlcnByZXRlclNlbGVjdG9yXCIpO1xyXG5jb25zdCB0eXBlc180ID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9pbnRlcnByZXRlci9jb25maWd1cmF0aW9uL3R5cGVzXCIpO1xyXG5jb25zdCBjb250cmFjdHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvaW50ZXJwcmV0ZXIvY29udHJhY3RzXCIpO1xyXG5jb25zdCBpbmZvID0ge1xyXG4gICAgYXJjaGl0ZWN0dXJlOiBwbGF0Zm9ybV8xLkFyY2hpdGVjdHVyZS5Vbmtub3duLFxyXG4gICAgY29tcGFueURpc3BsYXlOYW1lOiAnJyxcclxuICAgIGRpc3BsYXlOYW1lOiAnJyxcclxuICAgIGVudk5hbWU6ICcnLFxyXG4gICAgcGF0aDogJycsXHJcbiAgICB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93bixcclxuICAgIHZlcnNpb246ICcnLFxyXG4gICAgdmVyc2lvbl9pbmZvOiBbMCwgMCwgMCwgJ2FscGhhJ10sXHJcbiAgICBzeXNQcmVmaXg6ICcnLFxyXG4gICAgc3lzVmVyc2lvbjogJydcclxufTtcclxuY2xhc3MgSW50ZXJwcmV0ZXJRdWlja1BpY2tJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGwsIHApIHtcclxuICAgICAgICB0aGlzLnBhdGggPSBwO1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBsO1xyXG4gICAgfVxyXG59XHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtZnVuYy1ib2R5LWxlbmd0aFxyXG5zdWl0ZSgnSW50ZXJwcmV0ZXJzIC0gc2VsZWN0b3InLCAoKSA9PiB7XHJcbiAgICBsZXQgc2VydmljZUNvbnRhaW5lcjtcclxuICAgIGxldCB3b3Jrc3BhY2U7XHJcbiAgICBsZXQgYXBwU2hlbGw7XHJcbiAgICBsZXQgaW50ZXJwcmV0ZXJTZXJ2aWNlO1xyXG4gICAgbGV0IGRvY3VtZW50TWFuYWdlcjtcclxuICAgIGxldCBmaWxlU3lzdGVtO1xyXG4gICAgc2V0dXAoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmRNYW5hZ2VyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBhcmVyID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgYXBwU2hlbGwgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgaW50ZXJwcmV0ZXJTZXJ2aWNlID0gVHlwZU1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGRvY3VtZW50TWFuYWdlciA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICB3b3Jrc3BhY2UgPSBUeXBlTW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgZmlsZVN5c3RlbSA9IFR5cGVNb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBmaWxlU3lzdGVtXHJcbiAgICAgICAgICAgIC5zZXR1cCh4ID0+IHguYXJlUGF0aHNTYW1lKFR5cGVNb3EuSXQuaXNBbnlTdHJpbmcoKSwgVHlwZU1vcS5JdC5pc0FueVN0cmluZygpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKGEsIGIpID0+IGEgPT09IGIpO1xyXG4gICAgICAgIGZpbGVTeXN0ZW1cclxuICAgICAgICAgICAgLnNldHVwKHggPT4geC5nZXRSZWFsUGF0aChUeXBlTW9xLkl0LmlzQW55U3RyaW5nKCkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoYSkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXNvbHZlKGEpKSk7XHJcbiAgICAgICAgY29tcGFyZXIuc2V0dXAoYyA9PiBjLmNvbXBhcmUoVHlwZU1vcS5JdC5pc0FueSgpLCBUeXBlTW9xLkl0LmlzQW55KCkpKS5yZXR1cm5zKCgpID0+IDApO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAoYyA9PiBjLmdldCh0eXBlc18xLklXb3Jrc3BhY2VTZXJ2aWNlKSkucmV0dXJucygoKSA9PiB3b3Jrc3BhY2Uub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQodHlwZXNfMS5JQXBwbGljYXRpb25TaGVsbCkpLnJldHVybnMoKCkgPT4gYXBwU2hlbGwub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQoY29udHJhY3RzXzEuSUludGVycHJldGVyU2VydmljZSkpLnJldHVybnMoKCkgPT4gaW50ZXJwcmV0ZXJTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVzXzEuSURvY3VtZW50TWFuYWdlcikpLnJldHVybnMoKCkgPT4gZG9jdW1lbnRNYW5hZ2VyLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChjID0+IGMuZ2V0KHR5cGVzXzIuSUZpbGVTeXN0ZW0pKS5yZXR1cm5zKCgpID0+IGZpbGVTeXN0ZW0ub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQodHlwZXNfNC5JSW50ZXJwcmV0ZXJDb21wYXJlcikpLnJldHVybnMoKCkgPT4gY29tcGFyZXIub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKGMgPT4gYy5nZXQodHlwZXNfMS5JQ29tbWFuZE1hbmFnZXIpKS5yZXR1cm5zKCgpID0+IGNvbW1hbmRNYW5hZ2VyLm9iamVjdCk7XHJcbiAgICB9KTtcclxuICAgIFt0cnVlLCBmYWxzZV0uZm9yRWFjaChpc1dpbmRvd3MgPT4ge1xyXG4gICAgICAgIHRlc3QoYFN1Z2dlc3Rpb25zICgke2lzV2luZG93c30gPyAnV2luZG93cycgOiAnTm9uLVdpbmRvd3MnKWAsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGMgPT4gYy5nZXQodHlwZXNfMy5JUGF0aFV0aWxzKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IG5ldyBwYXRoVXRpbHNfMS5QYXRoVXRpbHMoaXNXaW5kb3dzKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWwgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGRpc3BsYXlOYW1lOiAnMScsIHBhdGg6ICdjOi9wYXRoMS9wYXRoMScsIHR5cGU6IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5Vbmtub3duIH0sXHJcbiAgICAgICAgICAgICAgICB7IGRpc3BsYXlOYW1lOiAnMicsIHBhdGg6ICdjOi9wYXRoMS9wYXRoMScsIHR5cGU6IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5Vbmtub3duIH0sXHJcbiAgICAgICAgICAgICAgICB7IGRpc3BsYXlOYW1lOiAnMicsIHBhdGg6ICdjOi9wYXRoMi9wYXRoMicsIHR5cGU6IGNvbnRyYWN0c18xLkludGVycHJldGVyVHlwZS5Vbmtub3duIH0sXHJcbiAgICAgICAgICAgICAgICB7IGRpc3BsYXlOYW1lOiAnMiAodmlydHVhbGVudiknLCBwYXRoOiAnYzovcGF0aDIvcGF0aDInLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVmlydHVhbEVudiB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXNwbGF5TmFtZTogJzMnLCBwYXRoOiAnYzovcGF0aDIvcGF0aDInLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXNwbGF5TmFtZTogJzQnLCBwYXRoOiAnYzovcGF0aDQvcGF0aDQnLCB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuQ29uZGEgfVxyXG4gICAgICAgICAgICBdLm1hcChpdGVtID0+IHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGluZm8sIGl0ZW0pOyB9KTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoeCA9PiB4LmdldEludGVycHJldGVycyhUeXBlTW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmUoaW5pdGlhbCkpKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBuZXcgaW50ZXJwcmV0ZXJTZWxlY3Rvcl8xLkludGVycHJldGVyU2VsZWN0b3Ioc2VydmljZUNvbnRhaW5lci5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3R1YWwgPSB5aWVsZCBzZWxlY3Rvci5nZXRTdWdnZXN0aW9ucygpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IFtcclxuICAgICAgICAgICAgICAgIG5ldyBJbnRlcnByZXRlclF1aWNrUGlja0l0ZW0oJzEnLCAnYzovcGF0aDEvcGF0aDEnKSxcclxuICAgICAgICAgICAgICAgIG5ldyBJbnRlcnByZXRlclF1aWNrUGlja0l0ZW0oJzInLCAnYzovcGF0aDEvcGF0aDEnKSxcclxuICAgICAgICAgICAgICAgIG5ldyBJbnRlcnByZXRlclF1aWNrUGlja0l0ZW0oJzInLCAnYzovcGF0aDIvcGF0aDInKSxcclxuICAgICAgICAgICAgICAgIG5ldyBJbnRlcnByZXRlclF1aWNrUGlja0l0ZW0oJzIgKHZpcnR1YWxlbnYpJywgJ2M6L3BhdGgyL3BhdGgyJyksXHJcbiAgICAgICAgICAgICAgICBuZXcgSW50ZXJwcmV0ZXJRdWlja1BpY2tJdGVtKCczJywgJ2M6L3BhdGgyL3BhdGgyJyksXHJcbiAgICAgICAgICAgICAgICBuZXcgSW50ZXJwcmV0ZXJRdWlja1BpY2tJdGVtKCc0JywgJ2M6L3BhdGg0L3BhdGg0JylcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGFjdHVhbC5sZW5ndGgsIGV4cGVjdGVkLmxlbmd0aCwgJ1N1Z2dlc3Rpb24gbGVuZ3RocyBhcmUgZGlmZmVyZW50LicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwoYWN0dWFsW2ldLmxhYmVsLCBleHBlY3RlZFtpXS5sYWJlbCwgYFN1Z2dlc3Rpb24gbGFiZWwgaXMgZGlmZmVyZW50IGF0ICR7aX06IGV4ZWN0ZWQgJyR7ZXhwZWN0ZWRbaV0ubGFiZWx9JywgZm91bmQgJyR7YWN0dWFsW2ldLmxhYmVsfScuYCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwoYWN0dWFsW2ldLnBhdGgsIGV4cGVjdGVkW2ldLnBhdGgsIGBTdWdnZXN0aW9uIHBhdGggaXMgZGlmZmVyZW50IGF0ICR7aX06IGV4ZWN0ZWQgJyR7ZXhwZWN0ZWRbaV0ucGF0aH0nLCBmb3VuZCAnJHthY3R1YWxbaV0ucGF0aH0nLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnByZXRlclNlbGVjdG9yLnVuaXQudGVzdC5qcy5tYXAiXX0=