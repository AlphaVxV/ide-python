// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
}); // tslint:disable:max-func-body-length no-any max-classes-per-file

const chai_1 = require("chai");

const typemoq = require("typemoq");

const pythonInterpreter_1 = require("../../../../client/application/diagnostics/checks/pythonInterpreter");

const types_1 = require("../../../../client/application/diagnostics/commands/types");

const constants_1 = require("../../../../client/application/diagnostics/constants");

const promptHandler_1 = require("../../../../client/application/diagnostics/promptHandler");

const types_2 = require("../../../../client/application/diagnostics/types");

const types_3 = require("../../../../client/common/application/types");

const types_4 = require("../../../../client/common/platform/types");

const types_5 = require("../../../../client/common/types");

const misc_1 = require("../../../../client/common/utils/misc");

const contracts_1 = require("../../../../client/interpreter/contracts");

const core_1 = require("../../../core");

suite('Application Diagnostics - Checks Python Interpreter', () => {
  let diagnosticService;
  let messageHandler;
  let commandFactory;
  let settings;
  let interpreterService;
  let platformService;
  let helper;
  const pythonPath = 'My Python Path in Settings';
  let serviceContainer;

  function createContainer() {
    serviceContainer = typemoq.Mock.ofType();
    messageHandler = typemoq.Mock.ofType();
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_2.IDiagnosticHandlerService), typemoq.It.isValue(promptHandler_1.DiagnosticCommandPromptHandlerServiceId))).returns(() => messageHandler.object);
    commandFactory = typemoq.Mock.ofType();
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_1.IDiagnosticsCommandFactory))).returns(() => commandFactory.object);
    settings = typemoq.Mock.ofType();
    settings.setup(s => s.pythonPath).returns(() => pythonPath);
    const configService = typemoq.Mock.ofType();
    configService.setup(c => c.getSettings(typemoq.It.isAny())).returns(() => settings.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_5.IConfigurationService))).returns(() => configService.object);
    interpreterService = typemoq.Mock.ofType();
    serviceContainer.setup(s => s.get(typemoq.It.isValue(contracts_1.IInterpreterService))).returns(() => interpreterService.object);
    platformService = typemoq.Mock.ofType();
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_4.IPlatformService))).returns(() => platformService.object);
    helper = typemoq.Mock.ofType();
    serviceContainer.setup(s => s.get(typemoq.It.isValue(contracts_1.IInterpreterHelper))).returns(() => helper.object);
    serviceContainer.setup(s => s.get(typemoq.It.isValue(types_5.IDisposableRegistry))).returns(() => []);
    return serviceContainer.object;
  }

  suite('Diagnostics', () => {
    setup(() => {
      diagnosticService = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        addPythonPathChangedHandler() {
          misc_1.noop();
        }

      }(createContainer());
    });
    test('Can handle InvalidPythonPathInterpreter diagnostics', () => __awaiter(void 0, void 0, void 0, function* () {
      for (const code of [constants_1.DiagnosticCodes.NoPythonInterpretersDiagnostic, constants_1.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic, constants_1.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic]) {
        const diagnostic = typemoq.Mock.ofType();
        diagnostic.setup(d => d.code).returns(() => code).verifiable(typemoq.Times.atLeastOnce());
        const canHandle = yield diagnosticService.canHandle(diagnostic.object);
        chai_1.expect(canHandle).to.be.equal(true, `Should be able to handle ${code}`);
        diagnostic.verifyAll();
      }
    }));
    test('Can not handle non-InvalidPythonPathInterpreter diagnostics', () => __awaiter(void 0, void 0, void 0, function* () {
      const diagnostic = typemoq.Mock.ofType();
      diagnostic.setup(d => d.code).returns(() => 'Something Else').verifiable(typemoq.Times.atLeastOnce());
      const canHandle = yield diagnosticService.canHandle(diagnostic.object);
      chai_1.expect(canHandle).to.be.equal(false, 'Invalid value');
      diagnostic.verifyAll();
    }));
    test('Should return empty diagnostics if installer check is disabled', () => __awaiter(void 0, void 0, void 0, function* () {
      settings.setup(s => s.disableInstallationChecks).returns(() => true).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([]);
      settings.verifyAll();
    }));
    test('Should return diagnostics if there are no interpreters', () => __awaiter(void 0, void 0, void 0, function* () {
      settings.setup(s => s.disableInstallationChecks).returns(() => false).verifiable(typemoq.Times.once());
      interpreterService.setup(i => i.getInterpreters(typemoq.It.isAny())).returns(() => Promise.resolve([])).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.NoPythonInterpretersDiagnostic)]);
      settings.verifyAll();
      interpreterService.verifyAll();
    }));
    test('Should return empty diagnostics if there are interpreters and platform is not mac', () => __awaiter(void 0, void 0, void 0, function* () {
      settings.setup(s => s.disableInstallationChecks).returns(() => false).verifiable(typemoq.Times.once());
      interpreterService.setup(i => i.getInterpreters(typemoq.It.isAny())).returns(() => Promise.resolve([{}])).verifiable(typemoq.Times.once());
      platformService.setup(i => i.isMac).returns(() => false).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([]);
      settings.verifyAll();
      interpreterService.verifyAll();
      platformService.verifyAll();
    }));
    test('Should return empty diagnostics if there are interpreters, platform is mac and selected interpreter is not default mac interpreter', () => __awaiter(void 0, void 0, void 0, function* () {
      settings.setup(s => s.disableInstallationChecks).returns(() => false).verifiable(typemoq.Times.once());
      interpreterService.setup(i => i.getInterpreters(typemoq.It.isAny())).returns(() => Promise.resolve([{}])).verifiable(typemoq.Times.once());
      platformService.setup(i => i.isMac).returns(() => true).verifiable(typemoq.Times.once());
      helper.setup(i => i.isMacDefaultPythonPath(typemoq.It.isAny())).returns(() => false).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([]);
      settings.verifyAll();
      interpreterService.verifyAll();
      platformService.verifyAll();
      helper.verifyAll();
    }));
    test('Should return diagnostic if there are no other interpreters, platform is mac and selected interpreter is default mac interpreter', () => __awaiter(void 0, void 0, void 0, function* () {
      settings.setup(s => s.disableInstallationChecks).returns(() => false).verifiable(typemoq.Times.once());
      interpreterService.setup(i => i.getInterpreters(typemoq.It.isAny())).returns(() => Promise.resolve([{
        path: pythonPath
      }, {
        path: pythonPath
      }])).verifiable(typemoq.Times.once());
      platformService.setup(i => i.isMac).returns(() => true).verifiable(typemoq.Times.once());
      helper.setup(i => i.isMacDefaultPythonPath(typemoq.It.isValue(pythonPath))).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
      interpreterService.setup(i => i.getActiveInterpreter(typemoq.It.isAny())).returns(() => {
        return Promise.resolve({
          type: contracts_1.InterpreterType.Unknown
        });
      }).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic)]);
      settings.verifyAll();
      interpreterService.verifyAll();
      platformService.verifyAll();
      helper.verifyAll();
    }));
    test('Should return diagnostic if there are other interpreters, platform is mac and selected interpreter is default mac interpreter', () => __awaiter(void 0, void 0, void 0, function* () {
      const nonMacStandardInterpreter = 'Non Mac Std Interpreter';
      settings.setup(s => s.disableInstallationChecks).returns(() => false).verifiable(typemoq.Times.once());
      interpreterService.setup(i => i.getInterpreters(typemoq.It.isAny())).returns(() => Promise.resolve([{
        path: pythonPath
      }, {
        path: pythonPath
      }, {
        path: nonMacStandardInterpreter
      }])).verifiable(typemoq.Times.once());
      platformService.setup(i => i.isMac).returns(() => true).verifiable(typemoq.Times.once());
      helper.setup(i => i.isMacDefaultPythonPath(typemoq.It.isValue(pythonPath))).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
      helper.setup(i => i.isMacDefaultPythonPath(typemoq.It.isValue(nonMacStandardInterpreter))).returns(() => false).verifiable(typemoq.Times.atLeastOnce());
      interpreterService.setup(i => i.getActiveInterpreter(typemoq.It.isAny())).returns(() => {
        return Promise.resolve({
          type: contracts_1.InterpreterType.Unknown
        });
      }).verifiable(typemoq.Times.once());
      const diagnostics = yield diagnosticService.diagnose();
      chai_1.expect(diagnostics).to.be.deep.equal([new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic)]);
      settings.verifyAll();
      interpreterService.verifyAll();
      platformService.verifyAll();
      helper.verifyAll();
    }));
    test('Handling no interpreters diagnostisc should return download link', () => __awaiter(void 0, void 0, void 0, function* () {
      const diagnostic = new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.NoPythonInterpretersDiagnostic);
      const cmd = {};
      let messagePrompt;
      messageHandler.setup(i => i.handle(typemoq.It.isValue(diagnostic), typemoq.It.isAny())).callback((d, p) => messagePrompt = p).returns(() => Promise.resolve()).verifiable(typemoq.Times.once());
      commandFactory.setup(f => f.createCommand(typemoq.It.isAny(), typemoq.It.isObjectWith({
        type: 'launch'
      }))).returns(() => cmd).verifiable(typemoq.Times.once());
      yield diagnosticService.handle([diagnostic]);
      messageHandler.verifyAll();
      commandFactory.verifyAll();
      chai_1.expect(messagePrompt).not.be.equal(undefined, 'Message prompt not set');
      chai_1.expect(messagePrompt.commandPrompts).to.be.deep.equal([{
        prompt: 'Download',
        command: cmd
      }]);
    }));
    test('Handling no interpreters diagnostisc should return select interpreter cmd', () => __awaiter(void 0, void 0, void 0, function* () {
      const diagnostic = new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic);
      const cmd = {};
      let messagePrompt;
      messageHandler.setup(i => i.handle(typemoq.It.isValue(diagnostic), typemoq.It.isAny())).callback((d, p) => messagePrompt = p).returns(() => Promise.resolve()).verifiable(typemoq.Times.once());
      commandFactory.setup(f => f.createCommand(typemoq.It.isAny(), typemoq.It.isObjectWith({
        type: 'executeVSCCommand'
      }))).returns(() => cmd).verifiable(typemoq.Times.once());
      yield diagnosticService.handle([diagnostic]);
      messageHandler.verifyAll();
      commandFactory.verifyAll();
      chai_1.expect(messagePrompt).not.be.equal(undefined, 'Message prompt not set');
      chai_1.expect(messagePrompt.commandPrompts).to.be.deep.equal([{
        prompt: 'Select Python Interpreter',
        command: cmd
      }]);
    }));
    test('Handling no interpreters diagnostisc should return download and learn links', () => __awaiter(void 0, void 0, void 0, function* () {
      const diagnostic = new pythonInterpreter_1.InvalidPythonInterpreterDiagnostic(constants_1.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic);
      const cmdDownload = {};
      const cmdLearn = {};
      let messagePrompt;
      messageHandler.setup(i => i.handle(typemoq.It.isValue(diagnostic), typemoq.It.isAny())).callback((d, p) => messagePrompt = p).returns(() => Promise.resolve()).verifiable(typemoq.Times.once());
      commandFactory.setup(f => f.createCommand(typemoq.It.isAny(), typemoq.It.isObjectWith({
        type: 'launch',
        options: 'https://code.visualstudio.com/docs/python/python-tutorial#_prerequisites'
      }))).returns(() => cmdLearn).verifiable(typemoq.Times.once());
      commandFactory.setup(f => f.createCommand(typemoq.It.isAny(), typemoq.It.isObjectWith({
        type: 'launch',
        options: 'https://www.python.org/downloads'
      }))).returns(() => cmdDownload).verifiable(typemoq.Times.once());
      yield diagnosticService.handle([diagnostic]);
      messageHandler.verifyAll();
      commandFactory.verifyAll();
      chai_1.expect(messagePrompt).not.be.equal(undefined, 'Message prompt not set');
      chai_1.expect(messagePrompt.commandPrompts).to.be.deep.equal([{
        prompt: 'Learn more',
        command: cmdLearn
      }, {
        prompt: 'Download',
        command: cmdDownload
      }]);
    }));
  });
  suite('Change Handlers.', () => {
    test('Add PythonPath handler is invoked', () => __awaiter(void 0, void 0, void 0, function* () {
      let invoked = false;
      diagnosticService = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        addPythonPathChangedHandler() {
          invoked = true;
        }

      }(createContainer());
      chai_1.expect(invoked).to.be.equal(true, 'Not invoked');
    }));
    test('Event Handler is registered and invoked', () => __awaiter(void 0, void 0, void 0, function* () {
      let invoked = false;
      let callbackHandler;
      const workspaceService = {
        onDidChangeConfiguration: cb => callbackHandler = cb
      };
      const serviceContainerObject = createContainer();
      serviceContainer.setup(s => s.get(typemoq.It.isValue(types_3.IWorkspaceService))).returns(() => workspaceService);
      diagnosticService = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        onDidChangeConfiguration(_event) {
          return __awaiter(this, void 0, void 0, function* () {
            invoked = true;
          });
        }

      }(serviceContainerObject);
      yield callbackHandler({});
      chai_1.expect(invoked).to.be.equal(true, 'Not invoked');
    }));
    test('Event Handler is registered and not invoked', () => __awaiter(void 0, void 0, void 0, function* () {
      let invoked = false;
      const workspaceService = {
        onDidChangeConfiguration: misc_1.noop
      };
      const serviceContainerObject = createContainer();
      serviceContainer.setup(s => s.get(typemoq.It.isValue(types_3.IWorkspaceService))).returns(() => workspaceService);
      diagnosticService = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        onDidChangeConfiguration(_event) {
          return __awaiter(this, void 0, void 0, function* () {
            invoked = true;
          });
        }

      }(serviceContainerObject);
      chai_1.expect(invoked).to.be.equal(false, 'Not invoked');
    }));
    test('Diagnostics are checked when path changes', () => __awaiter(void 0, void 0, void 0, function* () {
      const event = typemoq.Mock.ofType();
      const workspaceService = typemoq.Mock.ofType();
      const serviceContainerObject = createContainer();
      let diagnoseInvocationCount = 0;
      workspaceService.setup(w => w.hasWorkspaceFolders).returns(() => true).verifiable(typemoq.Times.once());
      workspaceService.setup(w => w.workspaceFolders).returns(() => [{
        uri: ''
      }]).verifiable(typemoq.Times.once());
      serviceContainer.setup(s => s.get(typemoq.It.isValue(types_3.IWorkspaceService))).returns(() => workspaceService.object);
      const diagnosticSvc = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        constructor(item) {
          super(item);

          this.onDidChangeConfigurationEx = e => super.onDidChangeConfiguration(e);

          this.changeThrottleTimeout = 1;
        }

        diagnose() {
          diagnoseInvocationCount += 1;
          return Promise.resolve();
        }

      }(serviceContainerObject);
      event.setup(e => e.affectsConfiguration(typemoq.It.isValue('python.pythonPath'), typemoq.It.isAny())).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      event.verifyAll();
      yield core_1.sleep(100);
      chai_1.expect(diagnoseInvocationCount).to.be.equal(1, 'Not invoked');
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield core_1.sleep(100);
      chai_1.expect(diagnoseInvocationCount).to.be.equal(2, 'Not invoked');
    }));
    test('Diagnostics are checked and throttled when path changes', () => __awaiter(void 0, void 0, void 0, function* () {
      const event = typemoq.Mock.ofType();
      const workspaceService = typemoq.Mock.ofType();
      const serviceContainerObject = createContainer();
      let diagnoseInvocationCount = 0;
      workspaceService.setup(w => w.hasWorkspaceFolders).returns(() => true).verifiable(typemoq.Times.once());
      workspaceService.setup(w => w.workspaceFolders).returns(() => [{
        uri: ''
      }]).verifiable(typemoq.Times.once());
      serviceContainer.setup(s => s.get(typemoq.It.isValue(types_3.IWorkspaceService))).returns(() => workspaceService.object);
      const diagnosticSvc = new class extends pythonInterpreter_1.InvalidPythonInterpreterService {
        constructor(item) {
          super(item);

          this.onDidChangeConfigurationEx = e => super.onDidChangeConfiguration(e);

          this.changeThrottleTimeout = 100;
        }

        diagnose() {
          diagnoseInvocationCount += 1;
          return Promise.resolve();
        }

      }(serviceContainerObject);
      event.setup(e => e.affectsConfiguration(typemoq.It.isValue('python.pythonPath'), typemoq.It.isAny())).returns(() => true).verifiable(typemoq.Times.atLeastOnce());
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield diagnosticSvc.onDidChangeConfigurationEx(event.object);
      yield core_1.sleep(500);
      event.verifyAll();
      chai_1.expect(diagnoseInvocationCount).to.be.equal(1, 'Not invoked');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB5dGhvbkludGVycHJldGVyLnVuaXQudGVzdC5qcyJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiY2hhaV8xIiwicmVxdWlyZSIsInR5cGVtb3EiLCJweXRob25JbnRlcnByZXRlcl8xIiwidHlwZXNfMSIsImNvbnN0YW50c18xIiwicHJvbXB0SGFuZGxlcl8xIiwidHlwZXNfMiIsInR5cGVzXzMiLCJ0eXBlc180IiwidHlwZXNfNSIsIm1pc2NfMSIsImNvbnRyYWN0c18xIiwiY29yZV8xIiwic3VpdGUiLCJkaWFnbm9zdGljU2VydmljZSIsIm1lc3NhZ2VIYW5kbGVyIiwiY29tbWFuZEZhY3RvcnkiLCJzZXR0aW5ncyIsImludGVycHJldGVyU2VydmljZSIsInBsYXRmb3JtU2VydmljZSIsImhlbHBlciIsInB5dGhvblBhdGgiLCJzZXJ2aWNlQ29udGFpbmVyIiwiY3JlYXRlQ29udGFpbmVyIiwiTW9jayIsIm9mVHlwZSIsInNldHVwIiwicyIsImdldCIsIkl0IiwiaXNWYWx1ZSIsIklEaWFnbm9zdGljSGFuZGxlclNlcnZpY2UiLCJEaWFnbm9zdGljQ29tbWFuZFByb21wdEhhbmRsZXJTZXJ2aWNlSWQiLCJyZXR1cm5zIiwib2JqZWN0IiwiSURpYWdub3N0aWNzQ29tbWFuZEZhY3RvcnkiLCJjb25maWdTZXJ2aWNlIiwiYyIsImdldFNldHRpbmdzIiwiaXNBbnkiLCJJQ29uZmlndXJhdGlvblNlcnZpY2UiLCJJSW50ZXJwcmV0ZXJTZXJ2aWNlIiwiSVBsYXRmb3JtU2VydmljZSIsIklJbnRlcnByZXRlckhlbHBlciIsIklEaXNwb3NhYmxlUmVnaXN0cnkiLCJJbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJTZXJ2aWNlIiwiYWRkUHl0aG9uUGF0aENoYW5nZWRIYW5kbGVyIiwibm9vcCIsInRlc3QiLCJjb2RlIiwiRGlhZ25vc3RpY0NvZGVzIiwiTm9QeXRob25JbnRlcnByZXRlcnNEaWFnbm9zdGljIiwiTWFjSW50ZXJwcmV0ZXJTZWxlY3RlZEFuZEhhdmVPdGhlckludGVycHJldGVyc0RpYWdub3N0aWMiLCJNYWNJbnRlcnByZXRlclNlbGVjdGVkQW5kTm9PdGhlckludGVycHJldGVyc0RpYWdub3N0aWMiLCJkaWFnbm9zdGljIiwiZCIsInZlcmlmaWFibGUiLCJUaW1lcyIsImF0TGVhc3RPbmNlIiwiY2FuSGFuZGxlIiwiZXhwZWN0IiwidG8iLCJiZSIsImVxdWFsIiwidmVyaWZ5QWxsIiwiZGlzYWJsZUluc3RhbGxhdGlvbkNoZWNrcyIsIm9uY2UiLCJkaWFnbm9zdGljcyIsImRpYWdub3NlIiwiZGVlcCIsImkiLCJnZXRJbnRlcnByZXRlcnMiLCJJbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJEaWFnbm9zdGljIiwiaXNNYWMiLCJpc01hY0RlZmF1bHRQeXRob25QYXRoIiwicGF0aCIsImdldEFjdGl2ZUludGVycHJldGVyIiwidHlwZSIsIkludGVycHJldGVyVHlwZSIsIlVua25vd24iLCJub25NYWNTdGFuZGFyZEludGVycHJldGVyIiwiY21kIiwibWVzc2FnZVByb21wdCIsImhhbmRsZSIsImNhbGxiYWNrIiwicCIsImYiLCJjcmVhdGVDb21tYW5kIiwiaXNPYmplY3RXaXRoIiwibm90IiwidW5kZWZpbmVkIiwiY29tbWFuZFByb21wdHMiLCJwcm9tcHQiLCJjb21tYW5kIiwiY21kRG93bmxvYWQiLCJjbWRMZWFybiIsIm9wdGlvbnMiLCJpbnZva2VkIiwiY2FsbGJhY2tIYW5kbGVyIiwid29ya3NwYWNlU2VydmljZSIsIm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbiIsImNiIiwic2VydmljZUNvbnRhaW5lck9iamVjdCIsIklXb3Jrc3BhY2VTZXJ2aWNlIiwiX2V2ZW50IiwiZXZlbnQiLCJkaWFnbm9zZUludm9jYXRpb25Db3VudCIsInciLCJoYXNXb3Jrc3BhY2VGb2xkZXJzIiwid29ya3NwYWNlRm9sZGVycyIsInVyaSIsImRpYWdub3N0aWNTdmMiLCJjb25zdHJ1Y3RvciIsIml0ZW0iLCJvbkRpZENoYW5nZUNvbmZpZ3VyYXRpb25FeCIsImNoYW5nZVRocm90dGxlVGltZW91dCIsImFmZmVjdHNDb25maWd1cmF0aW9uIiwic2xlZXAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFDQSxJQUFJQSxTQUFTLEdBQUksVUFBUSxTQUFLQSxTQUFkLElBQTRCLFVBQVVDLE9BQVYsRUFBbUJDLFVBQW5CLEVBQStCQyxDQUEvQixFQUFrQ0MsU0FBbEMsRUFBNkM7QUFDckYsU0FBTyxLQUFLRCxDQUFDLEtBQUtBLENBQUMsR0FBR0UsT0FBVCxDQUFOLEVBQXlCLFVBQVVDLE9BQVYsRUFBbUJDLE1BQW5CLEVBQTJCO0FBQ3ZELGFBQVNDLFNBQVQsQ0FBbUJDLEtBQW5CLEVBQTBCO0FBQUUsVUFBSTtBQUFFQyxRQUFBQSxJQUFJLENBQUNOLFNBQVMsQ0FBQ08sSUFBVixDQUFlRixLQUFmLENBQUQsQ0FBSjtBQUE4QixPQUFwQyxDQUFxQyxPQUFPRyxDQUFQLEVBQVU7QUFBRUwsUUFBQUEsTUFBTSxDQUFDSyxDQUFELENBQU47QUFBWTtBQUFFOztBQUMzRixhQUFTQyxRQUFULENBQWtCSixLQUFsQixFQUF5QjtBQUFFLFVBQUk7QUFBRUMsUUFBQUEsSUFBSSxDQUFDTixTQUFTLENBQUMsT0FBRCxDQUFULENBQW1CSyxLQUFuQixDQUFELENBQUo7QUFBa0MsT0FBeEMsQ0FBeUMsT0FBT0csQ0FBUCxFQUFVO0FBQUVMLFFBQUFBLE1BQU0sQ0FBQ0ssQ0FBRCxDQUFOO0FBQVk7QUFBRTs7QUFDOUYsYUFBU0YsSUFBVCxDQUFjSSxNQUFkLEVBQXNCO0FBQUVBLE1BQUFBLE1BQU0sQ0FBQ0MsSUFBUCxHQUFjVCxPQUFPLENBQUNRLE1B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Z2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gdHNsaW50OmRpc2FibGU6bWF4LWZ1bmMtYm9keS1sZW5ndGggbm8tYW55IG1heC1jbGFzc2VzLXBlci1maWxlXHJcbmNvbnN0IGNoYWlfMSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xyXG5jb25zdCB0eXBlbW9xID0gcmVxdWlyZShcInR5cGVtb3FcIik7XHJcbmNvbnN0IHB5dGhvbkludGVycHJldGVyXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vY2xpZW50L2FwcGxpY2F0aW9uL2RpYWdub3N0aWNzL2NoZWNrcy9weXRob25JbnRlcnByZXRlclwiKTtcclxuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jbGllbnQvYXBwbGljYXRpb24vZGlhZ25vc3RpY3MvY29tbWFuZHMvdHlwZXNcIik7XHJcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2NsaWVudC9hcHBsaWNhdGlvbi9kaWFnbm9zdGljcy9jb25zdGFudHNcIik7XHJcbmNvbnN0IHByb21wdEhhbmRsZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jbGllbnQvYXBwbGljYXRpb24vZGlhZ25vc3RpY3MvcHJvbXB0SGFuZGxlclwiKTtcclxuY29uc3QgdHlwZXNfMiA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jbGllbnQvYXBwbGljYXRpb24vZGlhZ25vc3RpY3MvdHlwZXNcIik7XHJcbmNvbnN0IHR5cGVzXzMgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vY2xpZW50L2NvbW1vbi9hcHBsaWNhdGlvbi90eXBlc1wiKTtcclxuY29uc3QgdHlwZXNfNCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jbGllbnQvY29tbW9uL3BsYXRmb3JtL3R5cGVzXCIpO1xyXG5jb25zdCB0eXBlc181ID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2NsaWVudC9jb21tb24vdHlwZXNcIik7XHJcbmNvbnN0IG1pc2NfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jbGllbnQvY29tbW9uL3V0aWxzL21pc2NcIik7XHJcbmNvbnN0IGNvbnRyYWN0c18xID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2NsaWVudC9pbnRlcnByZXRlci9jb250cmFjdHNcIik7XHJcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb3JlXCIpO1xyXG5zdWl0ZSgnQXBwbGljYXRpb24gRGlhZ25vc3RpY3MgLSBDaGVja3MgUHl0aG9uIEludGVycHJldGVyJywgKCkgPT4ge1xyXG4gICAgbGV0IGRpYWdub3N0aWNTZXJ2aWNlO1xyXG4gICAgbGV0IG1lc3NhZ2VIYW5kbGVyO1xyXG4gICAgbGV0IGNvbW1hbmRGYWN0b3J5O1xyXG4gICAgbGV0IHNldHRpbmdzO1xyXG4gICAgbGV0IGludGVycHJldGVyU2VydmljZTtcclxuICAgIGxldCBwbGF0Zm9ybVNlcnZpY2U7XHJcbiAgICBsZXQgaGVscGVyO1xyXG4gICAgY29uc3QgcHl0aG9uUGF0aCA9ICdNeSBQeXRob24gUGF0aCBpbiBTZXR0aW5ncyc7XHJcbiAgICBsZXQgc2VydmljZUNvbnRhaW5lcjtcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRhaW5lcigpIHtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMi5JRGlhZ25vc3RpY0hhbmRsZXJTZXJ2aWNlKSwgdHlwZW1vcS5JdC5pc1ZhbHVlKHByb21wdEhhbmRsZXJfMS5EaWFnbm9zdGljQ29tbWFuZFByb21wdEhhbmRsZXJTZXJ2aWNlSWQpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gbWVzc2FnZUhhbmRsZXIub2JqZWN0KTtcclxuICAgICAgICBjb21tYW5kRmFjdG9yeSA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKHMgPT4gcy5nZXQodHlwZW1vcS5JdC5pc1ZhbHVlKHR5cGVzXzEuSURpYWdub3N0aWNzQ29tbWFuZEZhY3RvcnkpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gY29tbWFuZEZhY3Rvcnkub2JqZWN0KTtcclxuICAgICAgICBzZXR0aW5ncyA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBzZXR0aW5ncy5zZXR1cChzID0+IHMucHl0aG9uUGF0aCkucmV0dXJucygoKSA9PiBweXRob25QYXRoKTtcclxuICAgICAgICBjb25zdCBjb25maWdTZXJ2aWNlID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgIGNvbmZpZ1NlcnZpY2Uuc2V0dXAoYyA9PiBjLmdldFNldHRpbmdzKHR5cGVtb3EuSXQuaXNBbnkoKSkpLnJldHVybnMoKCkgPT4gc2V0dGluZ3Mub2JqZWN0KTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKHMgPT4gcy5nZXQodHlwZW1vcS5JdC5pc1ZhbHVlKHR5cGVzXzUuSUNvbmZpZ3VyYXRpb25TZXJ2aWNlKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGNvbmZpZ1NlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBpbnRlcnByZXRlclNlcnZpY2UgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJTZXJ2aWNlKSkpXHJcbiAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGludGVycHJldGVyU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgIHBsYXRmb3JtU2VydmljZSA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICBzZXJ2aWNlQ29udGFpbmVyLnNldHVwKHMgPT4gcy5nZXQodHlwZW1vcS5JdC5pc1ZhbHVlKHR5cGVzXzQuSVBsYXRmb3JtU2VydmljZSkpKVxyXG4gICAgICAgICAgICAucmV0dXJucygoKSA9PiBwbGF0Zm9ybVNlcnZpY2Uub2JqZWN0KTtcclxuICAgICAgICBoZWxwZXIgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZShjb250cmFjdHNfMS5JSW50ZXJwcmV0ZXJIZWxwZXIpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gaGVscGVyLm9iamVjdCk7XHJcbiAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZSh0eXBlc181LklEaXNwb3NhYmxlUmVnaXN0cnkpKSlcclxuICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gW10pO1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlQ29udGFpbmVyLm9iamVjdDtcclxuICAgIH1cclxuICAgIHN1aXRlKCdEaWFnbm9zdGljcycsICgpID0+IHtcclxuICAgICAgICBzZXR1cCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRpYWdub3N0aWNTZXJ2aWNlID0gbmV3IGNsYXNzIGV4dGVuZHMgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJTZXJ2aWNlIHtcclxuICAgICAgICAgICAgICAgIGFkZFB5dGhvblBhdGhDaGFuZ2VkSGFuZGxlcigpIHsgbWlzY18xLm5vb3AoKTsgfVxyXG4gICAgICAgICAgICB9KGNyZWF0ZUNvbnRhaW5lcigpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXN0KCdDYW4gaGFuZGxlIEludmFsaWRQeXRob25QYXRoSW50ZXJwcmV0ZXIgZGlhZ25vc3RpY3MnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiBbXHJcbiAgICAgICAgICAgICAgICBjb25zdGFudHNfMS5EaWFnbm9zdGljQ29kZXMuTm9QeXRob25JbnRlcnByZXRlcnNEaWFnbm9zdGljLFxyXG4gICAgICAgICAgICAgICAgY29uc3RhbnRzXzEuRGlhZ25vc3RpY0NvZGVzLk1hY0ludGVycHJldGVyU2VsZWN0ZWRBbmRIYXZlT3RoZXJJbnRlcnByZXRlcnNEaWFnbm9zdGljLFxyXG4gICAgICAgICAgICAgICAgY29uc3RhbnRzXzEuRGlhZ25vc3RpY0NvZGVzLk1hY0ludGVycHJldGVyU2VsZWN0ZWRBbmROb090aGVySW50ZXJwcmV0ZXJzRGlhZ25vc3RpY1xyXG4gICAgICAgICAgICBdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ25vc3RpYy5zZXR1cChkID0+IGQuY29kZSlcclxuICAgICAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBjb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5IYW5kbGUgPSB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5jYW5IYW5kbGUoZGlhZ25vc3RpYy5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChjYW5IYW5kbGUpLnRvLmJlLmVxdWFsKHRydWUsIGBTaG91bGQgYmUgYWJsZSB0byBoYW5kbGUgJHtjb2RlfWApO1xyXG4gICAgICAgICAgICAgICAgZGlhZ25vc3RpYy52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0ZXN0KCdDYW4gbm90IGhhbmRsZSBub24tSW52YWxpZFB5dGhvblBhdGhJbnRlcnByZXRlciBkaWFnbm9zdGljcycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpYyA9IHR5cGVtb3EuTW9jay5vZlR5cGUoKTtcclxuICAgICAgICAgICAgZGlhZ25vc3RpYy5zZXR1cChkID0+IGQuY29kZSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+ICdTb21ldGhpbmcgRWxzZScpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLmF0TGVhc3RPbmNlKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5IYW5kbGUgPSB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5jYW5IYW5kbGUoZGlhZ25vc3RpYy5vYmplY3QpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGNhbkhhbmRsZSkudG8uYmUuZXF1YWwoZmFsc2UsICdJbnZhbGlkIHZhbHVlJyk7XHJcbiAgICAgICAgICAgIGRpYWdub3N0aWMudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ1Nob3VsZCByZXR1cm4gZW1wdHkgZGlhZ25vc3RpY3MgaWYgaW5zdGFsbGVyIGNoZWNrIGlzIGRpc2FibGVkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgLnNldHVwKHMgPT4gcy5kaXNhYmxlSW5zdGFsbGF0aW9uQ2hlY2tzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpY3MgPSB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5kaWFnbm9zZSgpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGRpYWdub3N0aWNzKS50by5iZS5kZWVwLmVxdWFsKFtdKTtcclxuICAgICAgICAgICAgc2V0dGluZ3MudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ1Nob3VsZCByZXR1cm4gZGlhZ25vc3RpY3MgaWYgdGhlcmUgYXJlIG5vIGludGVycHJldGVycycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIC5zZXR1cChzID0+IHMuZGlzYWJsZUluc3RhbGxhdGlvbkNoZWNrcylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBpbnRlcnByZXRlclNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cChpID0+IGkuZ2V0SW50ZXJwcmV0ZXJzKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljcyA9IHlpZWxkIGRpYWdub3N0aWNTZXJ2aWNlLmRpYWdub3NlKCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZGlhZ25vc3RpY3MpLnRvLmJlLmRlZXAuZXF1YWwoW25ldyBweXRob25JbnRlcnByZXRlcl8xLkludmFsaWRQeXRob25JbnRlcnByZXRlckRpYWdub3N0aWMoY29uc3RhbnRzXzEuRGlhZ25vc3RpY0NvZGVzLk5vUHl0aG9uSW50ZXJwcmV0ZXJzRGlhZ25vc3RpYyldKTtcclxuICAgICAgICAgICAgc2V0dGluZ3MudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnU2hvdWxkIHJldHVybiBlbXB0eSBkaWFnbm9zdGljcyBpZiB0aGVyZSBhcmUgaW50ZXJwcmV0ZXJzIGFuZCBwbGF0Zm9ybSBpcyBub3QgbWFjJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgLnNldHVwKHMgPT4gcy5kaXNhYmxlSW5zdGFsbGF0aW9uQ2hlY2tzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5nZXRJbnRlcnByZXRlcnModHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShbe31dKSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgcGxhdGZvcm1TZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoaSA9PiBpLmlzTWFjKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWNzID0geWllbGQgZGlhZ25vc3RpY1NlcnZpY2UuZGlhZ25vc2UoKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChkaWFnbm9zdGljcykudG8uYmUuZGVlcC5lcXVhbChbXSk7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBpbnRlcnByZXRlclNlcnZpY2UudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIHBsYXRmb3JtU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnU2hvdWxkIHJldHVybiBlbXB0eSBkaWFnbm9zdGljcyBpZiB0aGVyZSBhcmUgaW50ZXJwcmV0ZXJzLCBwbGF0Zm9ybSBpcyBtYWMgYW5kIHNlbGVjdGVkIGludGVycHJldGVyIGlzIG5vdCBkZWZhdWx0IG1hYyBpbnRlcnByZXRlcicsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIC5zZXR1cChzID0+IHMuZGlzYWJsZUluc3RhbGxhdGlvbkNoZWNrcylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBpbnRlcnByZXRlclNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cChpID0+IGkuZ2V0SW50ZXJwcmV0ZXJzKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoW3t9XSkpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHBsYXRmb3JtU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5pc01hYylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5pc01hY0RlZmF1bHRQeXRob25QYXRoKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBmYWxzZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpY3MgPSB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5kaWFnbm9zZSgpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGRpYWdub3N0aWNzKS50by5iZS5kZWVwLmVxdWFsKFtdKTtcclxuICAgICAgICAgICAgc2V0dGluZ3MudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgcGxhdGZvcm1TZXJ2aWNlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBoZWxwZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ1Nob3VsZCByZXR1cm4gZGlhZ25vc3RpYyBpZiB0aGVyZSBhcmUgbm8gb3RoZXIgaW50ZXJwcmV0ZXJzLCBwbGF0Zm9ybSBpcyBtYWMgYW5kIHNlbGVjdGVkIGludGVycHJldGVyIGlzIGRlZmF1bHQgbWFjIGludGVycHJldGVyJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgLnNldHVwKHMgPT4gcy5kaXNhYmxlSW5zdGFsbGF0aW9uQ2hlY2tzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5nZXRJbnRlcnByZXRlcnModHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICB7IHBhdGg6IHB5dGhvblBhdGggfSxcclxuICAgICAgICAgICAgICAgIHsgcGF0aDogcHl0aG9uUGF0aCB9XHJcbiAgICAgICAgICAgIF0pKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBwbGF0Zm9ybVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cChpID0+IGkuaXNNYWMpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBoZWxwZXJcclxuICAgICAgICAgICAgICAgIC5zZXR1cChpID0+IGkuaXNNYWNEZWZhdWx0UHl0aG9uUGF0aCh0eXBlbW9xLkl0LmlzVmFsdWUocHl0aG9uUGF0aCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5nZXRBY3RpdmVJbnRlcnByZXRlcih0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4geyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgdHlwZTogY29udHJhY3RzXzEuSW50ZXJwcmV0ZXJUeXBlLlVua25vd24gfSk7IH0pXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWNzID0geWllbGQgZGlhZ25vc3RpY1NlcnZpY2UuZGlhZ25vc2UoKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChkaWFnbm9zdGljcykudG8uYmUuZGVlcC5lcXVhbChbbmV3IHB5dGhvbkludGVycHJldGVyXzEuSW52YWxpZFB5dGhvbkludGVycHJldGVyRGlhZ25vc3RpYyhjb25zdGFudHNfMS5EaWFnbm9zdGljQ29kZXMuTWFjSW50ZXJwcmV0ZXJTZWxlY3RlZEFuZE5vT3RoZXJJbnRlcnByZXRlcnNEaWFnbm9zdGljKV0pO1xyXG4gICAgICAgICAgICBzZXR0aW5ncy52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJTZXJ2aWNlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBwbGF0Zm9ybVNlcnZpY2UudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGhlbHBlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnU2hvdWxkIHJldHVybiBkaWFnbm9zdGljIGlmIHRoZXJlIGFyZSBvdGhlciBpbnRlcnByZXRlcnMsIHBsYXRmb3JtIGlzIG1hYyBhbmQgc2VsZWN0ZWQgaW50ZXJwcmV0ZXIgaXMgZGVmYXVsdCBtYWMgaW50ZXJwcmV0ZXInLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vbk1hY1N0YW5kYXJkSW50ZXJwcmV0ZXIgPSAnTm9uIE1hYyBTdGQgSW50ZXJwcmV0ZXInO1xyXG4gICAgICAgICAgICBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgLnNldHVwKHMgPT4gcy5kaXNhYmxlSW5zdGFsbGF0aW9uQ2hlY2tzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5nZXRJbnRlcnByZXRlcnModHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICB7IHBhdGg6IHB5dGhvblBhdGggfSxcclxuICAgICAgICAgICAgICAgIHsgcGF0aDogcHl0aG9uUGF0aCB9LFxyXG4gICAgICAgICAgICAgICAgeyBwYXRoOiBub25NYWNTdGFuZGFyZEludGVycHJldGVyIH1cclxuICAgICAgICAgICAgXSkpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHBsYXRmb3JtU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5pc01hYylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5pc01hY0RlZmF1bHRQeXRob25QYXRoKHR5cGVtb3EuSXQuaXNWYWx1ZShweXRob25QYXRoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoaSA9PiBpLmlzTWFjRGVmYXVsdFB5dGhvblBhdGgodHlwZW1vcS5JdC5pc1ZhbHVlKG5vbk1hY1N0YW5kYXJkSW50ZXJwcmV0ZXIpKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5hdExlYXN0T25jZSgpKTtcclxuICAgICAgICAgICAgaW50ZXJwcmV0ZXJTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoaSA9PiBpLmdldEFjdGl2ZUludGVycHJldGVyKHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB0eXBlOiBjb250cmFjdHNfMS5JbnRlcnByZXRlclR5cGUuVW5rbm93biB9KTsgfSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpY3MgPSB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5kaWFnbm9zZSgpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGRpYWdub3N0aWNzKS50by5iZS5kZWVwLmVxdWFsKFtuZXcgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJEaWFnbm9zdGljKGNvbnN0YW50c18xLkRpYWdub3N0aWNDb2Rlcy5NYWNJbnRlcnByZXRlclNlbGVjdGVkQW5kSGF2ZU90aGVySW50ZXJwcmV0ZXJzRGlhZ25vc3RpYyldKTtcclxuICAgICAgICAgICAgc2V0dGluZ3MudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGludGVycHJldGVyU2VydmljZS52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgcGxhdGZvcm1TZXJ2aWNlLnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBoZWxwZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ0hhbmRsaW5nIG5vIGludGVycHJldGVycyBkaWFnbm9zdGlzYyBzaG91bGQgcmV0dXJuIGRvd25sb2FkIGxpbmsnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWMgPSBuZXcgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJEaWFnbm9zdGljKGNvbnN0YW50c18xLkRpYWdub3N0aWNDb2Rlcy5Ob1B5dGhvbkludGVycHJldGVyc0RpYWdub3N0aWMpO1xyXG4gICAgICAgICAgICBjb25zdCBjbWQgPSB7fTtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2VQcm9tcHQ7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VIYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoaSA9PiBpLmhhbmRsZSh0eXBlbW9xLkl0LmlzVmFsdWUoZGlhZ25vc3RpYyksIHR5cGVtb3EuSXQuaXNBbnkoKSkpXHJcbiAgICAgICAgICAgICAgICAuY2FsbGJhY2soKGQsIHApID0+IG1lc3NhZ2VQcm9tcHQgPSBwKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIGNvbW1hbmRGYWN0b3J5LnNldHVwKGYgPT4gZi5jcmVhdGVDb21tYW5kKHR5cGVtb3EuSXQuaXNBbnkoKSwgdHlwZW1vcS5JdC5pc09iamVjdFdpdGgoeyB0eXBlOiAnbGF1bmNoJyB9KSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBjbWQpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGRpYWdub3N0aWNTZXJ2aWNlLmhhbmRsZShbZGlhZ25vc3RpY10pO1xyXG4gICAgICAgICAgICBtZXNzYWdlSGFuZGxlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY29tbWFuZEZhY3RvcnkudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QobWVzc2FnZVByb21wdCkubm90LmJlLmVxdWFsKHVuZGVmaW5lZCwgJ01lc3NhZ2UgcHJvbXB0IG5vdCBzZXQnKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChtZXNzYWdlUHJvbXB0LmNvbW1hbmRQcm9tcHRzKS50by5iZS5kZWVwLmVxdWFsKFt7IHByb21wdDogJ0Rvd25sb2FkJywgY29tbWFuZDogY21kIH1dKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnSGFuZGxpbmcgbm8gaW50ZXJwcmV0ZXJzIGRpYWdub3N0aXNjIHNob3VsZCByZXR1cm4gc2VsZWN0IGludGVycHJldGVyIGNtZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpYyA9IG5ldyBweXRob25JbnRlcnByZXRlcl8xLkludmFsaWRQeXRob25JbnRlcnByZXRlckRpYWdub3N0aWMoY29uc3RhbnRzXzEuRGlhZ25vc3RpY0NvZGVzLk1hY0ludGVycHJldGVyU2VsZWN0ZWRBbmRIYXZlT3RoZXJJbnRlcnByZXRlcnNEaWFnbm9zdGljKTtcclxuICAgICAgICAgICAgY29uc3QgY21kID0ge307XHJcbiAgICAgICAgICAgIGxldCBtZXNzYWdlUHJvbXB0O1xyXG4gICAgICAgICAgICBtZXNzYWdlSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgLnNldHVwKGkgPT4gaS5oYW5kbGUodHlwZW1vcS5JdC5pc1ZhbHVlKGRpYWdub3N0aWMpLCB0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLmNhbGxiYWNrKChkLCBwKSA9PiBtZXNzYWdlUHJvbXB0ID0gcClcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICBjb21tYW5kRmFjdG9yeS5zZXR1cChmID0+IGYuY3JlYXRlQ29tbWFuZCh0eXBlbW9xLkl0LmlzQW55KCksIHR5cGVtb3EuSXQuaXNPYmplY3RXaXRoKHsgdHlwZTogJ2V4ZWN1dGVWU0NDb21tYW5kJyB9KSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBjbWQpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGRpYWdub3N0aWNTZXJ2aWNlLmhhbmRsZShbZGlhZ25vc3RpY10pO1xyXG4gICAgICAgICAgICBtZXNzYWdlSGFuZGxlci52ZXJpZnlBbGwoKTtcclxuICAgICAgICAgICAgY29tbWFuZEZhY3RvcnkudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QobWVzc2FnZVByb21wdCkubm90LmJlLmVxdWFsKHVuZGVmaW5lZCwgJ01lc3NhZ2UgcHJvbXB0IG5vdCBzZXQnKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChtZXNzYWdlUHJvbXB0LmNvbW1hbmRQcm9tcHRzKS50by5iZS5kZWVwLmVxdWFsKFt7IHByb21wdDogJ1NlbGVjdCBQeXRob24gSW50ZXJwcmV0ZXInLCBjb21tYW5kOiBjbWQgfV0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0ZXN0KCdIYW5kbGluZyBubyBpbnRlcnByZXRlcnMgZGlhZ25vc3Rpc2Mgc2hvdWxkIHJldHVybiBkb3dubG9hZCBhbmQgbGVhcm4gbGlua3MnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWMgPSBuZXcgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJEaWFnbm9zdGljKGNvbnN0YW50c18xLkRpYWdub3N0aWNDb2Rlcy5NYWNJbnRlcnByZXRlclNlbGVjdGVkQW5kTm9PdGhlckludGVycHJldGVyc0RpYWdub3N0aWMpO1xyXG4gICAgICAgICAgICBjb25zdCBjbWREb3dubG9hZCA9IHt9O1xyXG4gICAgICAgICAgICBjb25zdCBjbWRMZWFybiA9IHt9O1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZVByb21wdDtcclxuICAgICAgICAgICAgbWVzc2FnZUhhbmRsZXJcclxuICAgICAgICAgICAgICAgIC5zZXR1cChpID0+IGkuaGFuZGxlKHR5cGVtb3EuSXQuaXNWYWx1ZShkaWFnbm9zdGljKSwgdHlwZW1vcS5JdC5pc0FueSgpKSlcclxuICAgICAgICAgICAgICAgIC5jYWxsYmFjaygoZCwgcCkgPT4gbWVzc2FnZVByb21wdCA9IHApXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBQcm9taXNlLnJlc29sdmUoKSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29tbWFuZEZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZUNvbW1hbmQodHlwZW1vcS5JdC5pc0FueSgpLCB0eXBlbW9xLkl0LmlzT2JqZWN0V2l0aCh7IHR5cGU6ICdsYXVuY2gnLCBvcHRpb25zOiAnaHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20vZG9jcy9weXRob24vcHl0aG9uLXR1dG9yaWFsI19wcmVyZXF1aXNpdGVzJyB9KSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiBjbWRMZWFybilcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgY29tbWFuZEZhY3Rvcnkuc2V0dXAoZiA9PiBmLmNyZWF0ZUNvbW1hbmQodHlwZW1vcS5JdC5pc0FueSgpLCB0eXBlbW9xLkl0LmlzT2JqZWN0V2l0aCh7IHR5cGU6ICdsYXVuY2gnLCBvcHRpb25zOiAnaHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMnIH0pKSlcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IGNtZERvd25sb2FkKVxyXG4gICAgICAgICAgICAgICAgLnZlcmlmaWFibGUodHlwZW1vcS5UaW1lcy5vbmNlKCkpO1xyXG4gICAgICAgICAgICB5aWVsZCBkaWFnbm9zdGljU2VydmljZS5oYW5kbGUoW2RpYWdub3N0aWNdKTtcclxuICAgICAgICAgICAgbWVzc2FnZUhhbmRsZXIudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGNvbW1hbmRGYWN0b3J5LnZlcmlmeUFsbCgpO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KG1lc3NhZ2VQcm9tcHQpLm5vdC5iZS5lcXVhbCh1bmRlZmluZWQsICdNZXNzYWdlIHByb21wdCBub3Qgc2V0Jyk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QobWVzc2FnZVByb21wdC5jb21tYW5kUHJvbXB0cykudG8uYmUuZGVlcC5lcXVhbChbeyBwcm9tcHQ6ICdMZWFybiBtb3JlJywgY29tbWFuZDogY21kTGVhcm4gfSwgeyBwcm9tcHQ6ICdEb3dubG9hZCcsIGNvbW1hbmQ6IGNtZERvd25sb2FkIH1dKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9KTtcclxuICAgIHN1aXRlKCdDaGFuZ2UgSGFuZGxlcnMuJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ0FkZCBQeXRob25QYXRoIGhhbmRsZXIgaXMgaW52b2tlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgbGV0IGludm9rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZGlhZ25vc3RpY1NlcnZpY2UgPSBuZXcgY2xhc3MgZXh0ZW5kcyBweXRob25JbnRlcnByZXRlcl8xLkludmFsaWRQeXRob25JbnRlcnByZXRlclNlcnZpY2Uge1xyXG4gICAgICAgICAgICAgICAgYWRkUHl0aG9uUGF0aENoYW5nZWRIYW5kbGVyKCkgeyBpbnZva2VkID0gdHJ1ZTsgfVxyXG4gICAgICAgICAgICB9KGNyZWF0ZUNvbnRhaW5lcigpKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChpbnZva2VkKS50by5iZS5lcXVhbCh0cnVlLCAnTm90IGludm9rZWQnKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnRXZlbnQgSGFuZGxlciBpcyByZWdpc3RlcmVkIGFuZCBpbnZva2VkJywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBsZXQgaW52b2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgY2FsbGJhY2tIYW5kbGVyO1xyXG4gICAgICAgICAgICBjb25zdCB3b3Jrc3BhY2VTZXJ2aWNlID0geyBvbkRpZENoYW5nZUNvbmZpZ3VyYXRpb246IGNiID0+IGNhbGxiYWNrSGFuZGxlciA9IGNiIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VDb250YWluZXJPYmplY3QgPSBjcmVhdGVDb250YWluZXIoKTtcclxuICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZSh0eXBlc18zLklXb3Jrc3BhY2VTZXJ2aWNlKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VTZXJ2aWNlKTtcclxuICAgICAgICAgICAgZGlhZ25vc3RpY1NlcnZpY2UgPSBuZXcgY2xhc3MgZXh0ZW5kcyBweXRob25JbnRlcnByZXRlcl8xLkludmFsaWRQeXRob25JbnRlcnByZXRlclNlcnZpY2Uge1xyXG4gICAgICAgICAgICAgICAgb25EaWRDaGFuZ2VDb25maWd1cmF0aW9uKF9ldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IGludm9rZWQgPSB0cnVlOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfShzZXJ2aWNlQ29udGFpbmVyT2JqZWN0KTtcclxuICAgICAgICAgICAgeWllbGQgY2FsbGJhY2tIYW5kbGVyKHt9KTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChpbnZva2VkKS50by5iZS5lcXVhbCh0cnVlLCAnTm90IGludm9rZWQnKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGVzdCgnRXZlbnQgSGFuZGxlciBpcyByZWdpc3RlcmVkIGFuZCBub3QgaW52b2tlZCcsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgbGV0IGludm9rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlU2VydmljZSA9IHsgb25EaWRDaGFuZ2VDb25maWd1cmF0aW9uOiBtaXNjXzEubm9vcCB9O1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlQ29udGFpbmVyT2JqZWN0ID0gY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMy5JV29ya3NwYWNlU2VydmljZSkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gd29ya3NwYWNlU2VydmljZSk7XHJcbiAgICAgICAgICAgIGRpYWdub3N0aWNTZXJ2aWNlID0gbmV3IGNsYXNzIGV4dGVuZHMgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJTZXJ2aWNlIHtcclxuICAgICAgICAgICAgICAgIG9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihfZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyBpbnZva2VkID0gdHJ1ZTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0oc2VydmljZUNvbnRhaW5lck9iamVjdCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoaW52b2tlZCkudG8uYmUuZXF1YWwoZmFsc2UsICdOb3QgaW52b2tlZCcpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0ZXN0KCdEaWFnbm9zdGljcyBhcmUgY2hlY2tlZCB3aGVuIHBhdGggY2hhbmdlcycsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmtzcGFjZVNlcnZpY2UgPSB0eXBlbW9xLk1vY2sub2ZUeXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VDb250YWluZXJPYmplY3QgPSBjcmVhdGVDb250YWluZXIoKTtcclxuICAgICAgICAgICAgbGV0IGRpYWdub3NlSW52b2NhdGlvbkNvdW50ID0gMDtcclxuICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy5oYXNXb3Jrc3BhY2VGb2xkZXJzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgd29ya3NwYWNlU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLnNldHVwKHcgPT4gdy53b3Jrc3BhY2VGb2xkZXJzKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gW3sgdXJpOiAnJyB9XSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMub25jZSgpKTtcclxuICAgICAgICAgICAgc2VydmljZUNvbnRhaW5lci5zZXR1cChzID0+IHMuZ2V0KHR5cGVtb3EuSXQuaXNWYWx1ZSh0eXBlc18zLklXb3Jrc3BhY2VTZXJ2aWNlKSkpXHJcbiAgICAgICAgICAgICAgICAucmV0dXJucygoKSA9PiB3b3Jrc3BhY2VTZXJ2aWNlLm9iamVjdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWNTdmMgPSBuZXcgY2xhc3MgZXh0ZW5kcyBweXRob25JbnRlcnByZXRlcl8xLkludmFsaWRQeXRob25JbnRlcnByZXRlclNlcnZpY2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uRXggPSBlID0+IHN1cGVyLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRocm90dGxlVGltZW91dCA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkaWFnbm9zZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFnbm9zZUludm9jYXRpb25Db3VudCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfShzZXJ2aWNlQ29udGFpbmVyT2JqZWN0KTtcclxuICAgICAgICAgICAgZXZlbnRcclxuICAgICAgICAgICAgICAgIC5zZXR1cChlID0+IGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24odHlwZW1vcS5JdC5pc1ZhbHVlKCdweXRob24ucHl0aG9uUGF0aCcpLCB0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGRpYWdub3N0aWNTdmMub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uRXgoZXZlbnQub2JqZWN0KTtcclxuICAgICAgICAgICAgZXZlbnQudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIHlpZWxkIGNvcmVfMS5zbGVlcCgxMDApO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGRpYWdub3NlSW52b2NhdGlvbkNvdW50KS50by5iZS5lcXVhbCgxLCAnTm90IGludm9rZWQnKTtcclxuICAgICAgICAgICAgeWllbGQgZGlhZ25vc3RpY1N2Yy5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb25FeChldmVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICB5aWVsZCBjb3JlXzEuc2xlZXAoMTAwKTtcclxuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChkaWFnbm9zZUludm9jYXRpb25Db3VudCkudG8uYmUuZXF1YWwoMiwgJ05vdCBpbnZva2VkJyk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRlc3QoJ0RpYWdub3N0aWNzIGFyZSBjaGVja2VkIGFuZCB0aHJvdHRsZWQgd2hlbiBwYXRoIGNoYW5nZXMnLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3Jrc3BhY2VTZXJ2aWNlID0gdHlwZW1vcS5Nb2NrLm9mVHlwZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlQ29udGFpbmVyT2JqZWN0ID0gY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIGxldCBkaWFnbm9zZUludm9jYXRpb25Db3VudCA9IDA7XHJcbiAgICAgICAgICAgIHdvcmtzcGFjZVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh3ID0+IHcuaGFzV29ya3NwYWNlRm9sZGVycylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHdvcmtzcGFjZVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zZXR1cCh3ID0+IHcud29ya3NwYWNlRm9sZGVycylcclxuICAgICAgICAgICAgICAgIC5yZXR1cm5zKCgpID0+IFt7IHVyaTogJycgfV0pXHJcbiAgICAgICAgICAgICAgICAudmVyaWZpYWJsZSh0eXBlbW9xLlRpbWVzLm9uY2UoKSk7XHJcbiAgICAgICAgICAgIHNlcnZpY2VDb250YWluZXIuc2V0dXAocyA9PiBzLmdldCh0eXBlbW9xLkl0LmlzVmFsdWUodHlwZXNfMy5JV29ya3NwYWNlU2VydmljZSkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gd29ya3NwYWNlU2VydmljZS5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljU3ZjID0gbmV3IGNsYXNzIGV4dGVuZHMgcHl0aG9uSW50ZXJwcmV0ZXJfMS5JbnZhbGlkUHl0aG9uSW50ZXJwcmV0ZXJTZXJ2aWNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdXBlcihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbkV4ID0gZSA9PiBzdXBlci5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24oZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VUaHJvdHRsZVRpbWVvdXQgPSAxMDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkaWFnbm9zZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFnbm9zZUludm9jYXRpb25Db3VudCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfShzZXJ2aWNlQ29udGFpbmVyT2JqZWN0KTtcclxuICAgICAgICAgICAgZXZlbnRcclxuICAgICAgICAgICAgICAgIC5zZXR1cChlID0+IGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24odHlwZW1vcS5JdC5pc1ZhbHVlKCdweXRob24ucHl0aG9uUGF0aCcpLCB0eXBlbW9xLkl0LmlzQW55KCkpKVxyXG4gICAgICAgICAgICAgICAgLnJldHVybnMoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC52ZXJpZmlhYmxlKHR5cGVtb3EuVGltZXMuYXRMZWFzdE9uY2UoKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIGRpYWdub3N0aWNTdmMub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uRXgoZXZlbnQub2JqZWN0KTtcclxuICAgICAgICAgICAgeWllbGQgZGlhZ25vc3RpY1N2Yy5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb25FeChldmVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICB5aWVsZCBkaWFnbm9zdGljU3ZjLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbkV4KGV2ZW50Lm9iamVjdCk7XHJcbiAgICAgICAgICAgIHlpZWxkIGRpYWdub3N0aWNTdmMub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uRXgoZXZlbnQub2JqZWN0KTtcclxuICAgICAgICAgICAgeWllbGQgZGlhZ25vc3RpY1N2Yy5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb25FeChldmVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICB5aWVsZCBjb3JlXzEuc2xlZXAoNTAwKTtcclxuICAgICAgICAgICAgZXZlbnQudmVyaWZ5QWxsKCk7XHJcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZGlhZ25vc2VJbnZvY2F0aW9uQ291bnQpLnRvLmJlLmVxdWFsKDEsICdOb3QgaW52b2tlZCcpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH0pO1xyXG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHl0aG9uSW50ZXJwcmV0ZXIudW5pdC50ZXN0LmpzLm1hcCJdfQ==