"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const chai_1 = require("chai");

const path = require("path");

const vscode_1 = require("vscode");

const docStringFoldingProvider_1 = require("../../client/providers/docStringFoldingProvider");

const pythonFilesPath = path.join(__dirname, '..', '..', '..', 'src', 'test', 'pythonFiles', 'folding'); // tslint:disable-next-line:max-func-body-length

suite('Provider - Folding Provider', () => {
  const docStringFileAndExpectedFoldingRanges = [{
    file: path.join(pythonFilesPath, 'attach_server.py'),
    ranges: [new vscode_1.FoldingRange(0, 14), new vscode_1.FoldingRange(44, 73, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(95, 143), new vscode_1.FoldingRange(149, 150, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(305, 313), new vscode_1.FoldingRange(320, 322)]
  }, {
    file: path.join(pythonFilesPath, 'visualstudio_ipython_repl.py'),
    ranges: [new vscode_1.FoldingRange(0, 14), new vscode_1.FoldingRange(78, 79, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(81, 82, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(92, 93, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(108, 109, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(139, 140, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(169, 170, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(275, 277, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(319, 320, vscode_1.FoldingRangeKind.Comment)]
  }, {
    file: path.join(pythonFilesPath, 'visualstudio_py_debugger.py'),
    ranges: [new vscode_1.FoldingRange(0, 15, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(22, 25, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(47, 48, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(69, 70, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(96, 97, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(105, 106, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(141, 142, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(149, 162, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(165, 166, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(207, 208, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(235, 237, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(240, 241, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(300, 301, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(334, 335, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(346, 348, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(499, 500, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(558, 559, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(602, 604, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(608, 609, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(612, 614, vscode_1.FoldingRangeKind.Comment), new vscode_1.FoldingRange(637, 638, vscode_1.FoldingRangeKind.Comment)]
  }, {
    file: path.join(pythonFilesPath, 'visualstudio_py_repl.py'),
    ranges: []
  }];
  docStringFileAndExpectedFoldingRanges.forEach(item => {
    test(`Test Docstring folding regions '${path.basename(item.file)}'`, () => __awaiter(void 0, void 0, void 0, function* () {
      const document = yield vscode_1.workspace.openTextDocument(item.file);
      const provider = new docStringFoldingProvider_1.DocStringFoldingProvider();
      const ranges = yield provider.provideFoldingRanges(document, {}, new vscode_1.CancellationTokenSource().token);
      chai_1.expect(ranges).to.be.lengthOf(item.ranges.length);
      ranges.forEach(range => {
        const index = item.ranges.findIndex(searchItem => searchItem.start === range.start && searchItem.end === range.end);
        chai_1.expect(index).to.be.greaterThan(-1, `${range.start}, ${range.end} not found`);
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvbGRpbmdQcm92aWRlci50ZXN0LmpzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjaGFpXzEiLCJyZXF1aXJlIiwicGF0aCIsInZzY29kZV8xIiwiZG9jU3RyaW5nRm9sZGluZ1Byb3ZpZGVyXzEiLCJweXRob25GaWxlc1BhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwic3VpdGUiLCJkb2NTdHJpbmdGaWxlQW5kRXhwZWN0ZWRGb2xkaW5nUmFuZ2VzIiwiZmlsZSIsInJhbmdlcyIsIkZvbGRpbmdSYW5nZSIsIkZvbGRpbmdSYW5nZUtpbmQiLCJDb21tZW50IiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZXN0IiwiYmFzZW5hbWUiLCJkb2N1bWVudCIsIndvcmtzcGFjZSIsIm9wZW5UZXh0RG9jdW1lbnQiLCJwcm92aWRlciIsIkRvY1N0cmluZ0ZvbGRpbmdQcm92aWRlciIsInByb3ZpZGVGb2xkaW5nUmFuZ2VzIiwiQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UiLCJ0b2tlbiIsImV4cGVjdCIsInRvIiwiYmUiLCJsZW5ndGhPZiIsImxlbmd0aCIsInJhbmdlIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJzZWFyY2hJdGVtIiwic3RhcnQiLCJlbmQiLCJncmVhdGVyVGhhbiJdLCJtYXBwaW5ncyI6IkFBQUEsYSxDQUNBO0FBQ0E7O0FBQ0EsSUFBSUEsU0FBUyxHQUFJLFVBQVEsU0FBS0EsU0FBZCxJQUE0QixVQUFVQyxPQUFWLEVBQW1CQyxVQUFuQixFQUErQkMsQ0FBL0IsRUFBa0NDLFNBQWxDLEVBQTZDO0FBQ3JGLFNBQU8sS0FBS0QsQ0FBQyxL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LEtBQW5GLENBQXJCO0FBQ0ExQixNQUFBQSxNQUFNLENBQUMyQixNQUFQLENBQWNoQixNQUFkLEVBQXNCaUIsRUFBdEIsQ0FBeUJDLEVBQXpCLENBQTRCQyxRQUE1QixDQUFxQ2QsSUFBSSxDQUFDTCxNQUFMLENBQVlvQixNQUFqRDtBQUNBcEIsTUFBQUEsTUFBTSxDQUFDSSxPQUFQLENBQWVpQixLQUFLLElBQUk7QUFDcEIsY0FBTUMsS0FBSyxHQUFHakIsSUFBSSxDQUFDTCxNQUFMLENBQ1R1QixTQURTLENBQ0NDLFVBQVUsSUFBSUEsVUFBVSxDQUFDQyxLQUFYLEtBQXFCSixLQUFLLENBQUNJLEtBQTNCLElBQ3pCRCxVQUFVLENBQUNFLEdBQVgsS0FBbUJMLEtBQUssQ0FBQ0ssR0FGZixDQUFkO0FBR0FyQyxRQUFBQSxNQUFNLENBQUMyQixNQUFQLENBQWNNLEtBQWQsRUFBcUJMLEVBQXJCLENBQXdCQyxFQUF4QixDQUEyQlMsV0FBM0IsQ0FBdUMsQ0FBQyxDQUF4QyxFQUE0QyxHQUFFTixLQUFLLENBQUNJLEtBQU0sS0FBSUosS0FBSyxDQUFDSyxHQUFJLFlBQXhFO0FBQ0gsT0FMRDtBQU1ILEtBWG1GLENBQWhGLENBQUo7QUFZSCxHQWJEO0FBY0gsQ0FuREksQ0FBTCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGNoYWlfMSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IHZzY29kZV8xID0gcmVxdWlyZShcInZzY29kZVwiKTtcclxuY29uc3QgZG9jU3RyaW5nRm9sZGluZ1Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L3Byb3ZpZGVycy9kb2NTdHJpbmdGb2xkaW5nUHJvdmlkZXJcIik7XHJcbmNvbnN0IHB5dGhvbkZpbGVzUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICdzcmMnLCAndGVzdCcsICdweXRob25GaWxlcycsICdmb2xkaW5nJyk7XHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtZnVuYy1ib2R5LWxlbmd0aFxyXG5zdWl0ZSgnUHJvdmlkZXIgLSBGb2xkaW5nIFByb3ZpZGVyJywgKCkgPT4ge1xyXG4gICAgY29uc3QgZG9jU3RyaW5nRmlsZUFuZEV4cGVjdGVkRm9sZGluZ1JhbmdlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGU6IHBhdGguam9pbihweXRob25GaWxlc1BhdGgsICdhdHRhY2hfc2VydmVyLnB5JyksIHJhbmdlczogW1xyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgwLCAxNCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoNDQsIDczLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg5NSwgMTQzKSwgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgxNDksIDE1MCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSxcclxuICAgICAgICAgICAgICAgIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMzA1LCAzMTMpLCBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDMyMCwgMzIyKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGU6IHBhdGguam9pbihweXRob25GaWxlc1BhdGgsICd2aXN1YWxzdHVkaW9faXB5dGhvbl9yZXBsLnB5JyksIHJhbmdlczogW1xyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgwLCAxNCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoNzgsIDc5LCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg4MSwgODIsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoOTIsIDkzLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgxMDgsIDEwOSwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSwgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgxMzksIDE0MCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSxcclxuICAgICAgICAgICAgICAgIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMTY5LCAxNzAsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMjc1LCAyNzcsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksXHJcbiAgICAgICAgICAgICAgICBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDMxOSwgMzIwLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmlsZTogcGF0aC5qb2luKHB5dGhvbkZpbGVzUGF0aCwgJ3Zpc3VhbHN0dWRpb19weV9kZWJ1Z2dlci5weScpLCByYW5nZXM6IFtcclxuICAgICAgICAgICAgICAgIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMCwgMTUsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMjIsIDI1LCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg0NywgNDgsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoNjksIDcwLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg5NiwgOTcsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMTA1LCAxMDYsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksXHJcbiAgICAgICAgICAgICAgICBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDE0MSwgMTQyLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLCBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDE0OSwgMTYyLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgxNjUsIDE2NiwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSwgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgyMDcsIDIwOCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSxcclxuICAgICAgICAgICAgICAgIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMjM1LCAyMzcsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoMjQwLCAyNDEsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksXHJcbiAgICAgICAgICAgICAgICBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDMwMCwgMzAxLCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLCBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDMzNCwgMzM1LCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSgzNDYsIDM0OCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSwgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg0OTksIDUwMCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KSxcclxuICAgICAgICAgICAgICAgIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoNTU4LCA1NTksIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksIG5ldyB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2UoNjAyLCA2MDQsIHZzY29kZV8xLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudCksXHJcbiAgICAgICAgICAgICAgICBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDYwOCwgNjA5LCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLCBuZXcgdnNjb2RlXzEuRm9sZGluZ1JhbmdlKDYxMiwgNjE0LCB2c2NvZGVfMS5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHZzY29kZV8xLkZvbGRpbmdSYW5nZSg2MzcsIDYzOCwgdnNjb2RlXzEuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGU6IHBhdGguam9pbihweXRob25GaWxlc1BhdGgsICd2aXN1YWxzdHVkaW9fcHlfcmVwbC5weScpLCByYW5nZXM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuICAgIGRvY1N0cmluZ0ZpbGVBbmRFeHBlY3RlZEZvbGRpbmdSYW5nZXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICB0ZXN0KGBUZXN0IERvY3N0cmluZyBmb2xkaW5nIHJlZ2lvbnMgJyR7cGF0aC5iYXNlbmFtZShpdGVtLmZpbGUpfSdgLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0geWllbGQgdnNjb2RlXzEud29ya3NwYWNlLm9wZW5UZXh0RG9jdW1lbnQoaXRlbS5maWxlKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZG9jU3RyaW5nRm9sZGluZ1Byb3ZpZGVyXzEuRG9jU3RyaW5nRm9sZGluZ1Byb3ZpZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlcyA9IHlpZWxkIHByb3ZpZGVyLnByb3ZpZGVGb2xkaW5nUmFuZ2VzKGRvY3VtZW50LCB7fSwgbmV3IHZzY29kZV8xLkNhbmNlbGxhdGlvblRva2VuU291cmNlKCkudG9rZW4pO1xyXG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KHJhbmdlcykudG8uYmUubGVuZ3RoT2YoaXRlbS5yYW5nZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgcmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpdGVtLnJhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kSW5kZXgoc2VhcmNoSXRlbSA9PiBzZWFyY2hJdGVtLnN0YXJ0ID09PSByYW5nZS5zdGFydCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaEl0ZW0uZW5kID09PSByYW5nZS5lbmQpO1xyXG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChpbmRleCkudG8uYmUuZ3JlYXRlclRoYW4oLTEsIGAke3JhbmdlLnN0YXJ0fSwgJHtyYW5nZS5lbmR9IG5vdCBmb3VuZGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9KTtcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvbGRpbmdQcm92aWRlci50ZXN0LmpzLm1hcCJdfQ==