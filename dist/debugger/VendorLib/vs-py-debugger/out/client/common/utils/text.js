// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

const vscode_1 = require("vscode");

const sysTypes_1 = require("./sysTypes");

function getWindowsLineEndingCount(document, offset) {
  //const eolPattern = new RegExp('\r\n', 'g');
  const eolPattern = /\r\n/g;
  const readBlock = 1024;
  let count = 0;
  let offsetDiff = offset.valueOf(); // In order to prevent the one-time loading of large files from taking up too much memory

  for (let pos = 0; pos < offset; pos += readBlock) {
    const startAt = document.positionAt(pos);
    let endAt;

    if (offsetDiff >= readBlock) {
      endAt = document.positionAt(pos + readBlock);
      offsetDiff = offsetDiff - readBlock;
    } else {
      endAt = document.positionAt(pos + offsetDiff);
    }

    const text = document.getText(new vscode_1.Range(startAt, endAt));
    const cr = text.match(eolPattern);
    count += cr ? cr.length : 0;
  }

  return count;
}

exports.getWindowsLineEndingCount = getWindowsLineEndingCount;
/**
 * Return the range represented by the given string.
 *
 * If a number is provided then it is used as both lines and the
 * character are set to 0.
 *
 * Examples:
 *  '1:5-3:5' -> Range(1, 5, 3, 5)
 *  '1-3'     -> Range(1, 0, 3, 0)
 *  '1:3-1:5' -> Range(1, 3, 1, 5)
 *  '1-1'     -> Range(1, 0, 1, 0)
 *  '1'       -> Range(1, 0, 1, 0)
 *  '1:3-'    -> Range(1, 3, 1, 0)
 *  '1:3'     -> Range(1, 3, 1, 0)
 *  ''        -> Range(0, 0, 0, 0)
 *  '3-1'     -> Range(1, 0, 3, 0)
 */

function parseRange(raw) {
  if (sysTypes_1.isNumber(raw)) {
    return new vscode_1.Range(raw, 0, raw, 0);
  }

  if (raw === '') {
    return new vscode_1.Range(0, 0, 0, 0);
  }

  const parts = raw.split('-');

  if (parts.length > 2) {
    throw new Error(`invalid range ${raw}`);
  }

  const start = parsePosition(parts[0]);
  let end = start;

  if (parts.length === 2) {
    end = parsePosition(parts[1]);
  }

  return new vscode_1.Range(start, end);
}

exports.parseRange = parseRange;
/**
 * Return the line/column represented by the given string.
 *
 * If a number is provided then it is used as the line and the character
 * is set to 0.
 *
 * Examples:
 *  '1:5' -> Position(1, 5)
 *  '1'   -> Position(1, 0)
 *  ''    -> Position(0, 0)
 */

function parsePosition(raw) {
  if (sysTypes_1.isNumber(raw)) {
    return new vscode_1.Position(raw, 0);
  }

  if (raw === '') {
    return new vscode_1.Position(0, 0);
  }

  const parts = raw.split(':');

  if (parts.length > 2) {
    throw new Error(`invalid position ${raw}`);
  }

  let line = 0;

  if (parts[0] !== '') {
    if (!/^\d+$/.test(parts[0])) {
      throw new Error(`invalid position ${raw}`);
    }

    line = +parts[0];
  }

  let col = 0;

  if (parts.length === 2 && parts[1] !== '') {
    if (!/^\d+$/.test(parts[1])) {
      throw new Error(`invalid position ${raw}`);
    }

    col = +parts[1];
  }

  return new vscode_1.Position(line, col);
}

exports.parsePosition = parsePosition;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHQuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ2c2NvZGVfMSIsInJlcXVpcmUiLCJzeXNUeXBlc18xIiwiZ2V0V2luZG93c0xpbmVFbmRpbmdDb3VudCIsImRvY3VtZW50Iiwib2Zmc2V0IiwiZW9sUGF0dGVybiIsInJlYWRCbG9jayIsImNvdW50Iiwib2Zmc2V0RGlmZiIsInZhbHVlT2YiLCJwb3MiLCJzdGFydEF0IiwicG9zaXRpb25BdCIsImVuZEF0IiwidGV4dCIsImdldFRleHQiLCJSYW5nZSIsImNyIiwibWF0Y2giLCJsZW5ndGgiLCJwYXJzZVJhbmdlIiwicmF3IiwiaXNOdW1iZXIiLCJwYXJ0cyIsInNwbGl0IiwiRXJyb3IiLCJzdGFydCIsInBhcnNlUG9zaXRpb24iLCJlbmQiLCJQb3NpdGlvbiIsImxpbmUiLCJ0ZXN0IiwiY29sIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBQ0FBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0FBQ0EsTUFBTUMsUUFBUSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUF4Qjs7QUFDQSxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxZQUFELENBQTFCOztBQUNBLFNBQVNFLHlCQUFULENBQW1DQyxRQUFuQyxFQUE2Q0MsTUFBN0MsRUFBcUQ7QUFDakQ7QUFDQSxRQUFNQyxVQUFVLEdBQUcsT0FBbkI7QUFDQSxRQUFNQyxTQUFTLEdBQUcsSUFBbEI7QUFDQSxNQUFJQyxLQUFLLEdBQUcsQ0FBWjtBQUNBLE1BQUlDLFVBQVUsR0FBR0osTUFBTSxDQUFDSyxPQUFQLEVBQWpCLENBTGlELENBTWpEOztBQUNBLE9BQUssSUFBSUMsR0FBRyxHQUFHLENBQWYsRUFBa0JBLEdBQUcsR0FBR04sTUFBeEIsRUFBZ0NNLEdBQUcsSUFBSUosU0FBdkMs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LENBQUNHLEtBQUosQ0FBVSxHQUFWLENBQWQ7O0FBQ0EsTUFBSUQsS0FBSyxDQUFDSixNQUFOLEdBQWUsQ0FBbkIsRUFBc0I7QUFDbEIsVUFBTSxJQUFJTSxLQUFKLENBQVcsb0JBQW1CSixHQUFJLEVBQWxDLENBQU47QUFDSDs7QUFDRCxNQUFJUyxJQUFJLEdBQUcsQ0FBWDs7QUFDQSxNQUFJUCxLQUFLLENBQUMsQ0FBRCxDQUFMLEtBQWEsRUFBakIsRUFBcUI7QUFDakIsUUFBSSxDQUFDLFFBQVFRLElBQVIsQ0FBYVIsS0FBSyxDQUFDLENBQUQsQ0FBbEIsQ0FBTCxFQUE2QjtBQUN6QixZQUFNLElBQUlFLEtBQUosQ0FBVyxvQkFBbUJKLEdBQUksRUFBbEMsQ0FBTjtBQUNIOztBQUNEUyxJQUFBQSxJQUFJLEdBQUcsQ0FBQ1AsS0FBSyxDQUFDLENBQUQsQ0FBYjtBQUNIOztBQUNELE1BQUlTLEdBQUcsR0FBRyxDQUFWOztBQUNBLE1BQUlULEtBQUssQ0FBQ0osTUFBTixLQUFpQixDQUFqQixJQUFzQkksS0FBSyxDQUFDLENBQUQsQ0FBTCxLQUFhLEVBQXZDLEVBQTJDO0FBQ3ZDLFFBQUksQ0FBQyxRQUFRUSxJQUFSLENBQWFSLEtBQUssQ0FBQyxDQUFELENBQWxCLENBQUwsRUFBNkI7QUFDekIsWUFBTSxJQUFJRSxLQUFKLENBQVcsb0JBQW1CSixHQUFJLEVBQWxDLENBQU47QUFDSDs7QUFDRFcsSUFBQUEsR0FBRyxHQUFHLENBQUNULEtBQUssQ0FBQyxDQUFELENBQVo7QUFDSDs7QUFDRCxTQUFPLElBQUl4QixRQUFRLENBQUM4QixRQUFiLENBQXNCQyxJQUF0QixFQUE0QkUsR0FBNUIsQ0FBUDtBQUNIOztBQUNEbkMsT0FBTyxDQUFDOEIsYUFBUixHQUF3QkEsYUFBeEIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4ndXNlIHN0cmljdCc7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgdnNjb2RlXzEgPSByZXF1aXJlKFwidnNjb2RlXCIpO1xyXG5jb25zdCBzeXNUeXBlc18xID0gcmVxdWlyZShcIi4vc3lzVHlwZXNcIik7XHJcbmZ1bmN0aW9uIGdldFdpbmRvd3NMaW5lRW5kaW5nQ291bnQoZG9jdW1lbnQsIG9mZnNldCkge1xyXG4gICAgLy9jb25zdCBlb2xQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnXFxyXFxuJywgJ2cnKTtcclxuICAgIGNvbnN0IGVvbFBhdHRlcm4gPSAvXFxyXFxuL2c7XHJcbiAgICBjb25zdCByZWFkQmxvY2sgPSAxMDI0O1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGxldCBvZmZzZXREaWZmID0gb2Zmc2V0LnZhbHVlT2YoKTtcclxuICAgIC8vIEluIG9yZGVyIHRvIHByZXZlbnQgdGhlIG9uZS10aW1lIGxvYWRpbmcgb2YgbGFyZ2UgZmlsZXMgZnJvbSB0YWtpbmcgdXAgdG9vIG11Y2ggbWVtb3J5XHJcbiAgICBmb3IgKGxldCBwb3MgPSAwOyBwb3MgPCBvZmZzZXQ7IHBvcyArPSByZWFkQmxvY2spIHtcclxuICAgICAgICBjb25zdCBzdGFydEF0ID0gZG9jdW1lbnQucG9zaXRpb25BdChwb3MpO1xyXG4gICAgICAgIGxldCBlbmRBdDtcclxuICAgICAgICBpZiAob2Zmc2V0RGlmZiA+PSByZWFkQmxvY2spIHtcclxuICAgICAgICAgICAgZW5kQXQgPSBkb2N1bWVudC5wb3NpdGlvbkF0KHBvcyArIHJlYWRCbG9jayk7XHJcbiAgICAgICAgICAgIG9mZnNldERpZmYgPSBvZmZzZXREaWZmIC0gcmVhZEJsb2NrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZW5kQXQgPSBkb2N1bWVudC5wb3NpdGlvbkF0KHBvcyArIG9mZnNldERpZmYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuZ2V0VGV4dChuZXcgdnNjb2RlXzEuUmFuZ2Uoc3RhcnRBdCwgZW5kQXQpKTtcclxuICAgICAgICBjb25zdCBjciA9IHRleHQubWF0Y2goZW9sUGF0dGVybik7XHJcbiAgICAgICAgY291bnQgKz0gY3IgPyBjci5sZW5ndGggOiAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG59XHJcbmV4cG9ydHMuZ2V0V2luZG93c0xpbmVFbmRpbmdDb3VudCA9IGdldFdpbmRvd3NMaW5lRW5kaW5nQ291bnQ7XHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIHJhbmdlIHJlcHJlc2VudGVkIGJ5IHRoZSBnaXZlbiBzdHJpbmcuXHJcbiAqXHJcbiAqIElmIGEgbnVtYmVyIGlzIHByb3ZpZGVkIHRoZW4gaXQgaXMgdXNlZCBhcyBib3RoIGxpbmVzIGFuZCB0aGVcclxuICogY2hhcmFjdGVyIGFyZSBzZXQgdG8gMC5cclxuICpcclxuICogRXhhbXBsZXM6XHJcbiAqICAnMTo1LTM6NScgLT4gUmFuZ2UoMSwgNSwgMywgNSlcclxuICogICcxLTMnICAgICAtPiBSYW5nZSgxLCAwLCAzLCAwKVxyXG4gKiAgJzE6My0xOjUnIC0+IFJhbmdlKDEsIDMsIDEsIDUpXHJcbiAqICAnMS0xJyAgICAgLT4gUmFuZ2UoMSwgMCwgMSwgMClcclxuICogICcxJyAgICAgICAtPiBSYW5nZSgxLCAwLCAxLCAwKVxyXG4gKiAgJzE6My0nICAgIC0+IFJhbmdlKDEsIDMsIDEsIDApXHJcbiAqICAnMTozJyAgICAgLT4gUmFuZ2UoMSwgMywgMSwgMClcclxuICogICcnICAgICAgICAtPiBSYW5nZSgwLCAwLCAwLCAwKVxyXG4gKiAgJzMtMScgICAgIC0+IFJhbmdlKDEsIDAsIDMsIDApXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZVJhbmdlKHJhdykge1xyXG4gICAgaWYgKHN5c1R5cGVzXzEuaXNOdW1iZXIocmF3KSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgdnNjb2RlXzEuUmFuZ2UocmF3LCAwLCByYXcsIDApO1xyXG4gICAgfVxyXG4gICAgaWYgKHJhdyA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHZzY29kZV8xLlJhbmdlKDAsIDAsIDAsIDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFydHMgPSByYXcuc3BsaXQoJy0nKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHJhbmdlICR7cmF3fWApO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RhcnQgPSBwYXJzZVBvc2l0aW9uKHBhcnRzWzBdKTtcclxuICAgIGxldCBlbmQgPSBzdGFydDtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICBlbmQgPSBwYXJzZVBvc2l0aW9uKHBhcnRzWzFdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgdnNjb2RlXzEuUmFuZ2Uoc3RhcnQsIGVuZCk7XHJcbn1cclxuZXhwb3J0cy5wYXJzZVJhbmdlID0gcGFyc2VSYW5nZTtcclxuLyoqXHJcbiAqIFJldHVybiB0aGUgbGluZS9jb2x1bW4gcmVwcmVzZW50ZWQgYnkgdGhlIGdpdmVuIHN0cmluZy5cclxuICpcclxuICogSWYgYSBudW1iZXIgaXMgcHJvdmlkZWQgdGhlbiBpdCBpcyB1c2VkIGFzIHRoZSBsaW5lIGFuZCB0aGUgY2hhcmFjdGVyXHJcbiAqIGlzIHNldCB0byAwLlxyXG4gKlxyXG4gKiBFeGFtcGxlczpcclxuICogICcxOjUnIC0+IFBvc2l0aW9uKDEsIDUpXHJcbiAqICAnMScgICAtPiBQb3NpdGlvbigxLCAwKVxyXG4gKiAgJycgICAgLT4gUG9zaXRpb24oMCwgMClcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlUG9zaXRpb24ocmF3KSB7XHJcbiAgICBpZiAoc3lzVHlwZXNfMS5pc051bWJlcihyYXcpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyB2c2NvZGVfMS5Qb3NpdGlvbihyYXcsIDApO1xyXG4gICAgfVxyXG4gICAgaWYgKHJhdyA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHZzY29kZV8xLlBvc2l0aW9uKDAsIDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFydHMgPSByYXcuc3BsaXQoJzonKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHBvc2l0aW9uICR7cmF3fWApO1xyXG4gICAgfVxyXG4gICAgbGV0IGxpbmUgPSAwO1xyXG4gICAgaWYgKHBhcnRzWzBdICE9PSAnJykge1xyXG4gICAgICAgIGlmICghL15cXGQrJC8udGVzdChwYXJ0c1swXSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHBvc2l0aW9uICR7cmF3fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaW5lID0gK3BhcnRzWzBdO1xyXG4gICAgfVxyXG4gICAgbGV0IGNvbCA9IDA7XHJcbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAyICYmIHBhcnRzWzFdICE9PSAnJykge1xyXG4gICAgICAgIGlmICghL15cXGQrJC8udGVzdChwYXJ0c1sxXSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHBvc2l0aW9uICR7cmF3fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2wgPSArcGFydHNbMV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IHZzY29kZV8xLlBvc2l0aW9uKGxpbmUsIGNvbCk7XHJcbn1cclxuZXhwb3J0cy5wYXJzZVBvc2l0aW9uID0gcGFyc2VQb3NpdGlvbjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGV4dC5qcy5tYXAiXX0=