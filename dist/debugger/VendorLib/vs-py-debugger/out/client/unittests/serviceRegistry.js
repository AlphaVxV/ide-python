"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

Object.defineProperty(exports, "__esModule", {
  value: true
});

const types_1 = require("../ioc/types");

const argumentsHelper_1 = require("./common/argumentsHelper");

const constants_1 = require("./common/constants");

const debugLauncher_1 = require("./common/debugLauncher");

const runner_1 = require("./common/runner");

const configSettingService_1 = require("./common/services/configSettingService");

const storageService_1 = require("./common/services/storageService");

const testManagerService_1 = require("./common/services/testManagerService");

const testResultsService_1 = require("./common/services/testResultsService");

const workspaceTestManagerService_1 = require("./common/services/workspaceTestManagerService");

const testUtils_1 = require("./common/testUtils");

const flatteningVisitor_1 = require("./common/testVisitors/flatteningVisitor");

const folderGenerationVisitor_1 = require("./common/testVisitors/folderGenerationVisitor");

const resultResetVisitor_1 = require("./common/testVisitors/resultResetVisitor");

const types_2 = require("./common/types");

const xUnitParser_1 = require("./common/xUnitParser");

const configuration_1 = require("./configuration");

const configurationFactory_1 = require("./configurationFactory");

const main_1 = require("./display/main");

const picker_1 = require("./display/picker");

const main_2 = require("./main");

const main_3 = require("./nosetest/main");

const runner_2 = require("./nosetest/runner");

const argsService_1 = require("./nosetest/services/argsService");

const discoveryService_1 = require("./nosetest/services/discoveryService");

const parserService_1 = require("./nosetest/services/parserService");

const main_4 = require("./pytest/main");

const runner_3 = require("./pytest/runner");

const argsService_2 = require("./pytest/services/argsService");

const discoveryService_2 = require("./pytest/services/discoveryService");

const parserService_2 = require("./pytest/services/parserService");

const types_3 = require("./types");

const helper_1 = require("./unittest/helper");

const main_5 = require("./unittest/main");

const runner_4 = require("./unittest/runner");

const argsService_3 = require("./unittest/services/argsService");

const discoveryService_3 = require("./unittest/services/discoveryService");

const parserService_3 = require("./unittest/services/parserService");

const socketServer_1 = require("./unittest/socketServer");

function registerTypes(serviceManager) {
  serviceManager.addSingleton(types_2.ITestDebugLauncher, debugLauncher_1.DebugLauncher);
  serviceManager.addSingleton(types_2.ITestCollectionStorageService, storageService_1.TestCollectionStorageService);
  serviceManager.addSingleton(types_2.IWorkspaceTestManagerService, workspaceTestManagerService_1.WorkspaceTestManagerService);
  serviceManager.add(types_2.ITestsHelper, testUtils_1.TestsHelper);
  serviceManager.add(types_2.IUnitTestSocketServer, socketServer_1.UnitTestSocketServer);
  serviceManager.add(types_2.ITestResultsService, testResultsService_1.TestResultsService);
  serviceManager.add(types_2.ITestVisitor, flatteningVisitor_1.TestFlatteningVisitor, 'TestFlatteningVisitor');
  serviceManager.add(types_2.ITestVisitor, folderGenerationVisitor_1.TestFolderGenerationVisitor, 'TestFolderGenerationVisitor');
  serviceManager.add(types_2.ITestVisitor, resultResetVisitor_1.TestResultResetVisitor, 'TestResultResetVisitor');
  serviceManager.add(types_2.ITestsParser, parserService_3.TestsParser, constants_1.UNITTEST_PROVIDER);
  serviceManager.add(types_2.ITestsParser, parserService_2.TestsParser, constants_1.PYTEST_PROVIDER);
  serviceManager.add(types_2.ITestsParser, parserService_1.TestsParser, constants_1.NOSETEST_PROVIDER);
  serviceManager.add(types_2.ITestDiscoveryService, discoveryService_3.TestDiscoveryService, constants_1.UNITTEST_PROVIDER);
  serviceManager.add(types_2.ITestDiscoveryService, discoveryService_2.TestDiscoveryService, constants_1.PYTEST_PROVIDER);
  serviceManager.add(types_2.ITestDiscoveryService, discoveryService_1.TestDiscoveryService, constants_1.NOSETEST_PROVIDER);
  serviceManager.add(types_3.IArgumentsHelper, argumentsHelper_1.ArgumentsHelper);
  serviceManager.add(types_2.ITestRunner, runner_1.TestRunner);
  serviceManager.add(types_2.IXUnitParser, xUnitParser_1.XUnitParser);
  serviceManager.add(types_3.IUnitTestHelper, helper_1.UnitTestHelper);
  serviceManager.add(types_3.IArgumentsService, argsService_2.ArgumentsService, constants_1.PYTEST_PROVIDER);
  serviceManager.add(types_3.IArgumentsService, argsService_1.ArgumentsService, constants_1.NOSETEST_PROVIDER);
  serviceManager.add(types_3.IArgumentsService, argsService_3.ArgumentsService, constants_1.UNITTEST_PROVIDER);
  serviceManager.add(types_3.ITestManagerRunner, runner_3.TestManagerRunner, constants_1.PYTEST_PROVIDER);
  serviceManager.add(types_3.ITestManagerRunner, runner_2.TestManagerRunner, constants_1.NOSETEST_PROVIDER);
  serviceManager.add(types_3.ITestManagerRunner, runner_4.TestManagerRunner, constants_1.UNITTEST_PROVIDER);
  serviceManager.addSingleton(types_3.IUnitTestConfigurationService, configuration_1.UnitTestConfigurationService);
  serviceManager.addSingleton(types_3.IUnitTestManagementService, main_2.UnitTestManagementService);
  serviceManager.addSingleton(types_3.ITestResultDisplay, main_1.TestResultDisplay);
  serviceManager.addSingleton(types_3.ITestDisplay, picker_1.TestDisplay);
  serviceManager.addSingleton(types_2.ITestConfigSettingsService, configSettingService_1.TestConfigSettingsService);
  serviceManager.addSingleton(types_3.ITestConfigurationManagerFactory, configurationFactory_1.TestConfigurationManagerFactory);
  serviceManager.addFactory(types_2.ITestManagerFactory, context => {
    return (testProvider, workspaceFolder, rootDirectory) => {
      const serviceContainer = context.container.get(types_1.IServiceContainer);

      switch (testProvider) {
        case constants_1.NOSETEST_PROVIDER:
          {
            return new main_3.TestManager(workspaceFolder, rootDirectory, serviceContainer);
          }

        case constants_1.PYTEST_PROVIDER:
          {
            return new main_4.TestManager(workspaceFolder, rootDirectory, serviceContainer);
          }

        case constants_1.UNITTEST_PROVIDER:
          {
            return new main_5.TestManager(workspaceFolder, rootDirectory, serviceContainer);
          }

        default:
          {
            throw new Error(`Unrecognized test provider '${testProvider}'`);
          }
      }
    };
  });
  serviceManager.addFactory(types_2.ITestManagerServiceFactory, context => {
    return workspaceFolder => {
      const serviceContainer = context.container.get(types_1.IServiceContainer);
      const testsHelper = context.container.get(types_2.ITestsHelper);
      return new testManagerService_1.TestManagerService(workspaceFolder, testsHelper, serviceContainer);
    };
  });
}

exports.registerTypes = registerTypes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VSZWdpc3RyeS5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInR5cGVzXzEiLCJyZXF1aXJlIiwiYXJndW1lbnRzSGVscGVyXzEiLCJjb25zdGFudHNfMSIsImRlYnVnTGF1bmNoZXJfMSIsInJ1bm5lcl8xIiwiY29uZmlnU2V0dGluZ1NlcnZpY2VfMSIsInN0b3JhZ2VTZXJ2aWNlXzEiLCJ0ZXN0TWFuYWdlclNlcnZpY2VfMSIsInRlc3RSZXN1bHRzU2VydmljZV8xIiwid29ya3NwYWNlVGVzdE1hbmFnZXJTZXJ2aWNlXzEiLCJ0ZXN0VXRpbHNfMSIsImZsYXR0ZW5pbmdWaXNpdG9yXzEiLCJmb2xkZXJHZW5lcmF0aW9uVmlzaXRvcl8xIiwicmVzdWx0UmVzZXRWaXNpdG9yXzEiLCJ0eXBlc18yIiwieFVuaXRQYXJzZXJfMSIsImNvbmZpZ3VyYXRpb25fMSIsImNvbmZpZ3VyYXRpb25GYWN0b3J5XzEiLCJtYWluXzEiLCJwaWNrZXJfMSIsIm1haW5fMiIsIm1haW5fMyIsInJ1bm5lcl8yIiwiYXJnc1NlcnZpY2VfMSIsImRpc2NvdmVyeVNlcnZpY2VfMSIsInBhcnNlclNlcnZpY2VfMSIsIm1haW5fNCIsInJ1bm5lcl8zIiwiYXJnc1NlcnZpY2VfMiIsImRpc2NvdmVyeVNlcnZpY2VfMiIsInBhcnNlclNlcnZpY2VfMiIsInR5cGVzXzMiLCJoZWxwZXJfMSIsIm1haW5fNSIsInJ1bm5lcl80IiwiYXJnc1NlcnZpY2VfMyIsImRpc2NvdmVyeVNlcnZpY2VfMyIsInBhcnNlclNlcnZpY2VfMyIsInNvY2tldFNlcnZlcl8xIiwicmVnaXN0ZXJUeXBlcyIsInNlcnZpY2VNYW5hZ2VyIiwiYWRkU2luZ2xldG9uIiwiSVRlc3REZWJ1Z0xhdW5jaGVyIiwiRGVidWdMYXVuY2hlciIsIklUZXN0Q29sbGVjdGlvblN0b3JhZ2VTZXJ2aWNlIiwiVGVzdENvbGxlY3Rpb25TdG9yYWdlU2VydmljZSIsIklXb3Jrc3BhY2VUZXN0TWFuYWdlclNlcnZpY2UiLCJXb3Jrc3BhY2VUZXN0TWFuYWdlclNlcnZpY2UiLCJhZGQiLCJJVGVzdHNIZWxwZXIiLCJUZXN0c0hlbHBlciIsIklVbml0VGVzdFNvY2tldFNlcnZlciIsIlVuaXRUZXN0U29ja2V0U2VydmVyIiwiSVRlc3RSZXN1bHRzU2VydmljZSIsIlRlc3RSZXN1bHRzU2VydmljZSIsIklUZXN0VmlzaXRvciIsIlRlc3RGbGF0dGVuaW5nVmlzaXRvciIsIlRlc3RGb2xkZXJHZW5lcmF0aW9uVmlzaXRvciIsIlRlc3RSZXN1bHRSZXNldFZpc2l0b3IiLCJJVGVzdHNQYXJzZXIiLCJUZXN0c1BhcnNlciIsIlVOSVRURVNUX1BST1ZJREVSIiwiUFlURVNUX1BST1ZJREVSIiwiTk9TRVRFU1RfUFJPVklERVIiLCJJVGVzdERpc2NvdmVyeVNlcnZpY2UiLCJUZXN0RGlzY292ZXJ5U2VydmljZSIsIklBcmd1bWVudHNIZWxwZXIiLCJBcmd1bWVudHNIZWxwZXIiLCJJVGVzdFJ1bm5lciIsIlRlc3RSdW5uZXIiLCJJWFVuaXRQYXJzZXIiLCJYVW5pdFBhcnNlciIsIklVbml0VGVzdEhlbHBlciIsIlVuaXRUZXN0SGVscGVyIiwiSUFyZ3VtZW50c1NlcnZpY2UiLCJBcmd1bWVudHNTZXJ2aWNlIiwiSVRlc3RNYW5hZ2VyUnVubmVyIiwiVGVzdE1hbmFnZXJSdW5uZXIiLCJJVW5pdFRlc3RDb25maWd1cmF0aW9uU2VydmljZSIsIlVuaXRUZXN0Q29uZmlndXJhdGlvblNlcnZpY2UiLCJJVW5pdFRlc3RNYW5hZ2VtZW50U2VydmljZSIsIlVuaXRUZXN0TWFuYWdlbWVudFNlcnZpY2UiLCJJVGVzdFJlc3VsdERpc3BsYXkiLCJUZXN0UmVzdWx0RGlzcGxheSIsIklUZXN0RGlzcGxheSIsIlRlc3REaXNwbGF5IiwiSVRlc3RDb25maWdTZXR0aW5nc1NlcnZpY2UiLCJUZXN0Q29uZmlnU2V0dGluZ3NTZXJ2aWNlIiwiSVRlc3RDb25maWd1cmF0aW9uTWFuYWdlckZhY3RvcnkiLCJUZXN0Q29uZmlndXJhdGlvbk1hbmFnZXJGYWN0b3J5IiwiYWRkRmFjdG9yeSIsIklUZXN0TWFuYWdlckZhY3RvcnkiLCJjb250ZXh0IiwidGVzdFByb3ZpZGVyIiwid29ya3NwYWNlRm9sZGVyIiwicm9vdERpcmVjdG9yeSIsInNlcnZpY2VDb250YWluZXIiLCJjb250YWluZXIiLCJnZXQiLCJJU2VydmljZUNvbnRhaW5lciIsIlRlc3RNYW5hZ2VyIiwiRXJyb3IiLCJJVGVzdE1hbmFnZXJTZXJ2aWNlRmFjdG9yeSIsInRlc3RzSGVscGVyIiwiVGVzdE1hbmFnZXJTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0E7QUFDQTs7QUFDQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUFFQyxFQUFBQSxLQUFLLEVBQUU7QUFBVCxDQUE3Qzs7QUFDQSxNQUFNQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxjQUFELENBQXZCOztBQUNBLE1BQU1DLGlCQUFpQixHQUFHRCxPQUFPLENBQUMsMEJBQUQsQ0FBakM7O0FBQ0EsTUFBTUUsV0FBVyxHQUFHRixPQUFPLENBQUMsb0JBQUQsQ0FBM0I7O0FBQ0EsTUFBTUcsZUFBZSxHQUFHSCxPQUFPLENBQUMsd0JBQUQsQ0FBL0I7O0FBQ0EsTUFBTUksUUFBUSxHQUFHSixPQUFPLENBQUMsaUJBQUQsQ0FBeEI7O0FBQ0EsTUFBTUssc0JBQXNCLEdBQUdMLE9BQU8sQ0FBQyx3Q0FBRCxDQUF0Qzs7QUFDQSxNQUFNTSxnQkFBZ0IsR0FBR04sT0FBTyxDQUFDLGtDQUFELENBQWhDOztBQUNBLE1BQU1PLG9CQUFvQixHQUFHUCxPQUFPLENBQUMsc0NBQUQsQ0FBcEM7O0FBQ0EsTUFBTVEsb0JBQW9CLEdBQUdSLE9BQU8sQ0FBQyxzQ0FBRCxDQUFwQzs7QUFDQSxNQUFNUyw2QkFBNkIsR0FBR1QsT0FBTyxDQUFDLCtDQUFELENBQTdDOztBQUNBLE1BQU1VLFdBQVcsR0FBR1YsT0FBTyxDQUFDLG9CQUFELENBQTNCOztB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OlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9pb2MvdHlwZXNcIik7XHJcbmNvbnN0IGFyZ3VtZW50c0hlbHBlcl8xID0gcmVxdWlyZShcIi4vY29tbW9uL2FyZ3VtZW50c0hlbHBlclwiKTtcclxuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb21tb24vY29uc3RhbnRzXCIpO1xyXG5jb25zdCBkZWJ1Z0xhdW5jaGVyXzEgPSByZXF1aXJlKFwiLi9jb21tb24vZGVidWdMYXVuY2hlclwiKTtcclxuY29uc3QgcnVubmVyXzEgPSByZXF1aXJlKFwiLi9jb21tb24vcnVubmVyXCIpO1xyXG5jb25zdCBjb25maWdTZXR0aW5nU2VydmljZV8xID0gcmVxdWlyZShcIi4vY29tbW9uL3NlcnZpY2VzL2NvbmZpZ1NldHRpbmdTZXJ2aWNlXCIpO1xyXG5jb25zdCBzdG9yYWdlU2VydmljZV8xID0gcmVxdWlyZShcIi4vY29tbW9uL3NlcnZpY2VzL3N0b3JhZ2VTZXJ2aWNlXCIpO1xyXG5jb25zdCB0ZXN0TWFuYWdlclNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2NvbW1vbi9zZXJ2aWNlcy90ZXN0TWFuYWdlclNlcnZpY2VcIik7XHJcbmNvbnN0IHRlc3RSZXN1bHRzU2VydmljZV8xID0gcmVxdWlyZShcIi4vY29tbW9uL3NlcnZpY2VzL3Rlc3RSZXN1bHRzU2VydmljZVwiKTtcclxuY29uc3Qgd29ya3NwYWNlVGVzdE1hbmFnZXJTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9jb21tb24vc2VydmljZXMvd29ya3NwYWNlVGVzdE1hbmFnZXJTZXJ2aWNlXCIpO1xyXG5jb25zdCB0ZXN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuL2NvbW1vbi90ZXN0VXRpbHNcIik7XHJcbmNvbnN0IGZsYXR0ZW5pbmdWaXNpdG9yXzEgPSByZXF1aXJlKFwiLi9jb21tb24vdGVzdFZpc2l0b3JzL2ZsYXR0ZW5pbmdWaXNpdG9yXCIpO1xyXG5jb25zdCBmb2xkZXJHZW5lcmF0aW9uVmlzaXRvcl8xID0gcmVxdWlyZShcIi4vY29tbW9uL3Rlc3RWaXNpdG9ycy9mb2xkZXJHZW5lcmF0aW9uVmlzaXRvclwiKTtcclxuY29uc3QgcmVzdWx0UmVzZXRWaXNpdG9yXzEgPSByZXF1aXJlKFwiLi9jb21tb24vdGVzdFZpc2l0b3JzL3Jlc3VsdFJlc2V0VmlzaXRvclwiKTtcclxuY29uc3QgdHlwZXNfMiA9IHJlcXVpcmUoXCIuL2NvbW1vbi90eXBlc1wiKTtcclxuY29uc3QgeFVuaXRQYXJzZXJfMSA9IHJlcXVpcmUoXCIuL2NvbW1vbi94VW5pdFBhcnNlclwiKTtcclxuY29uc3QgY29uZmlndXJhdGlvbl8xID0gcmVxdWlyZShcIi4vY29uZmlndXJhdGlvblwiKTtcclxuY29uc3QgY29uZmlndXJhdGlvbkZhY3RvcnlfMSA9IHJlcXVpcmUoXCIuL2NvbmZpZ3VyYXRpb25GYWN0b3J5XCIpO1xyXG5jb25zdCBtYWluXzEgPSByZXF1aXJlKFwiLi9kaXNwbGF5L21haW5cIik7XHJcbmNvbnN0IHBpY2tlcl8xID0gcmVxdWlyZShcIi4vZGlzcGxheS9waWNrZXJcIik7XHJcbmNvbnN0IG1haW5fMiA9IHJlcXVpcmUoXCIuL21haW5cIik7XHJcbmNvbnN0IG1haW5fMyA9IHJlcXVpcmUoXCIuL25vc2V0ZXN0L21haW5cIik7XHJcbmNvbnN0IHJ1bm5lcl8yID0gcmVxdWlyZShcIi4vbm9zZXRlc3QvcnVubmVyXCIpO1xyXG5jb25zdCBhcmdzU2VydmljZV8xID0gcmVxdWlyZShcIi4vbm9zZXRlc3Qvc2VydmljZXMvYXJnc1NlcnZpY2VcIik7XHJcbmNvbnN0IGRpc2NvdmVyeVNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL25vc2V0ZXN0L3NlcnZpY2VzL2Rpc2NvdmVyeVNlcnZpY2VcIik7XHJcbmNvbnN0IHBhcnNlclNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL25vc2V0ZXN0L3NlcnZpY2VzL3BhcnNlclNlcnZpY2VcIik7XHJcbmNvbnN0IG1haW5fNCA9IHJlcXVpcmUoXCIuL3B5dGVzdC9tYWluXCIpO1xyXG5jb25zdCBydW5uZXJfMyA9IHJlcXVpcmUoXCIuL3B5dGVzdC9ydW5uZXJcIik7XHJcbmNvbnN0IGFyZ3NTZXJ2aWNlXzIgPSByZXF1aXJlKFwiLi9weXRlc3Qvc2VydmljZXMvYXJnc1NlcnZpY2VcIik7XHJcbmNvbnN0IGRpc2NvdmVyeVNlcnZpY2VfMiA9IHJlcXVpcmUoXCIuL3B5dGVzdC9zZXJ2aWNlcy9kaXNjb3ZlcnlTZXJ2aWNlXCIpO1xyXG5jb25zdCBwYXJzZXJTZXJ2aWNlXzIgPSByZXF1aXJlKFwiLi9weXRlc3Qvc2VydmljZXMvcGFyc2VyU2VydmljZVwiKTtcclxuY29uc3QgdHlwZXNfMyA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xyXG5jb25zdCBoZWxwZXJfMSA9IHJlcXVpcmUoXCIuL3VuaXR0ZXN0L2hlbHBlclwiKTtcclxuY29uc3QgbWFpbl81ID0gcmVxdWlyZShcIi4vdW5pdHRlc3QvbWFpblwiKTtcclxuY29uc3QgcnVubmVyXzQgPSByZXF1aXJlKFwiLi91bml0dGVzdC9ydW5uZXJcIik7XHJcbmNvbnN0IGFyZ3NTZXJ2aWNlXzMgPSByZXF1aXJlKFwiLi91bml0dGVzdC9zZXJ2aWNlcy9hcmdzU2VydmljZVwiKTtcclxuY29uc3QgZGlzY292ZXJ5U2VydmljZV8zID0gcmVxdWlyZShcIi4vdW5pdHRlc3Qvc2VydmljZXMvZGlzY292ZXJ5U2VydmljZVwiKTtcclxuY29uc3QgcGFyc2VyU2VydmljZV8zID0gcmVxdWlyZShcIi4vdW5pdHRlc3Qvc2VydmljZXMvcGFyc2VyU2VydmljZVwiKTtcclxuY29uc3Qgc29ja2V0U2VydmVyXzEgPSByZXF1aXJlKFwiLi91bml0dGVzdC9zb2NrZXRTZXJ2ZXJcIik7XHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVHlwZXMoc2VydmljZU1hbmFnZXIpIHtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc18yLklUZXN0RGVidWdMYXVuY2hlciwgZGVidWdMYXVuY2hlcl8xLkRlYnVnTGF1bmNoZXIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzIuSVRlc3RDb2xsZWN0aW9uU3RvcmFnZVNlcnZpY2UsIHN0b3JhZ2VTZXJ2aWNlXzEuVGVzdENvbGxlY3Rpb25TdG9yYWdlU2VydmljZSk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMi5JV29ya3NwYWNlVGVzdE1hbmFnZXJTZXJ2aWNlLCB3b3Jrc3BhY2VUZXN0TWFuYWdlclNlcnZpY2VfMS5Xb3Jrc3BhY2VUZXN0TWFuYWdlclNlcnZpY2UpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzIuSVRlc3RzSGVscGVyLCB0ZXN0VXRpbHNfMS5UZXN0c0hlbHBlcik7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVW5pdFRlc3RTb2NrZXRTZXJ2ZXIsIHNvY2tldFNlcnZlcl8xLlVuaXRUZXN0U29ja2V0U2VydmVyKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZCh0eXBlc18yLklUZXN0UmVzdWx0c1NlcnZpY2UsIHRlc3RSZXN1bHRzU2VydmljZV8xLlRlc3RSZXN1bHRzU2VydmljZSk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdFZpc2l0b3IsIGZsYXR0ZW5pbmdWaXNpdG9yXzEuVGVzdEZsYXR0ZW5pbmdWaXNpdG9yLCAnVGVzdEZsYXR0ZW5pbmdWaXNpdG9yJyk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdFZpc2l0b3IsIGZvbGRlckdlbmVyYXRpb25WaXNpdG9yXzEuVGVzdEZvbGRlckdlbmVyYXRpb25WaXNpdG9yLCAnVGVzdEZvbGRlckdlbmVyYXRpb25WaXNpdG9yJyk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdFZpc2l0b3IsIHJlc3VsdFJlc2V0VmlzaXRvcl8xLlRlc3RSZXN1bHRSZXNldFZpc2l0b3IsICdUZXN0UmVzdWx0UmVzZXRWaXNpdG9yJyk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdHNQYXJzZXIsIHBhcnNlclNlcnZpY2VfMy5UZXN0c1BhcnNlciwgY29uc3RhbnRzXzEuVU5JVFRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzIuSVRlc3RzUGFyc2VyLCBwYXJzZXJTZXJ2aWNlXzIuVGVzdHNQYXJzZXIsIGNvbnN0YW50c18xLlBZVEVTVF9QUk9WSURFUik7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdHNQYXJzZXIsIHBhcnNlclNlcnZpY2VfMS5UZXN0c1BhcnNlciwgY29uc3RhbnRzXzEuTk9TRVRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzIuSVRlc3REaXNjb3ZlcnlTZXJ2aWNlLCBkaXNjb3ZlcnlTZXJ2aWNlXzMuVGVzdERpc2NvdmVyeVNlcnZpY2UsIGNvbnN0YW50c18xLlVOSVRURVNUX1BST1ZJREVSKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZCh0eXBlc18yLklUZXN0RGlzY292ZXJ5U2VydmljZSwgZGlzY292ZXJ5U2VydmljZV8yLlRlc3REaXNjb3ZlcnlTZXJ2aWNlLCBjb25zdGFudHNfMS5QWVRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzIuSVRlc3REaXNjb3ZlcnlTZXJ2aWNlLCBkaXNjb3ZlcnlTZXJ2aWNlXzEuVGVzdERpc2NvdmVyeVNlcnZpY2UsIGNvbnN0YW50c18xLk5PU0VURVNUX1BST1ZJREVSKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZCh0eXBlc18zLklBcmd1bWVudHNIZWxwZXIsIGFyZ3VtZW50c0hlbHBlcl8xLkFyZ3VtZW50c0hlbHBlcik7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JVGVzdFJ1bm5lciwgcnVubmVyXzEuVGVzdFJ1bm5lcik7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMi5JWFVuaXRQYXJzZXIsIHhVbml0UGFyc2VyXzEuWFVuaXRQYXJzZXIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzMuSVVuaXRUZXN0SGVscGVyLCBoZWxwZXJfMS5Vbml0VGVzdEhlbHBlcik7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGQodHlwZXNfMy5JQXJndW1lbnRzU2VydmljZSwgYXJnc1NlcnZpY2VfMi5Bcmd1bWVudHNTZXJ2aWNlLCBjb25zdGFudHNfMS5QWVRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzMuSUFyZ3VtZW50c1NlcnZpY2UsIGFyZ3NTZXJ2aWNlXzEuQXJndW1lbnRzU2VydmljZSwgY29uc3RhbnRzXzEuTk9TRVRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzMuSUFyZ3VtZW50c1NlcnZpY2UsIGFyZ3NTZXJ2aWNlXzMuQXJndW1lbnRzU2VydmljZSwgY29uc3RhbnRzXzEuVU5JVFRFU1RfUFJPVklERVIpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkKHR5cGVzXzMuSVRlc3RNYW5hZ2VyUnVubmVyLCBydW5uZXJfMy5UZXN0TWFuYWdlclJ1bm5lciwgY29uc3RhbnRzXzEuUFlURVNUX1BST1ZJREVSKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZCh0eXBlc18zLklUZXN0TWFuYWdlclJ1bm5lciwgcnVubmVyXzIuVGVzdE1hbmFnZXJSdW5uZXIsIGNvbnN0YW50c18xLk5PU0VURVNUX1BST1ZJREVSKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZCh0eXBlc18zLklUZXN0TWFuYWdlclJ1bm5lciwgcnVubmVyXzQuVGVzdE1hbmFnZXJSdW5uZXIsIGNvbnN0YW50c18xLlVOSVRURVNUX1BST1ZJREVSKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc18zLklVbml0VGVzdENvbmZpZ3VyYXRpb25TZXJ2aWNlLCBjb25maWd1cmF0aW9uXzEuVW5pdFRlc3RDb25maWd1cmF0aW9uU2VydmljZSk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMy5JVW5pdFRlc3RNYW5hZ2VtZW50U2VydmljZSwgbWFpbl8yLlVuaXRUZXN0TWFuYWdlbWVudFNlcnZpY2UpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzMuSVRlc3RSZXN1bHREaXNwbGF5LCBtYWluXzEuVGVzdFJlc3VsdERpc3BsYXkpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkU2luZ2xldG9uKHR5cGVzXzMuSVRlc3REaXNwbGF5LCBwaWNrZXJfMS5UZXN0RGlzcGxheSk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGRTaW5nbGV0b24odHlwZXNfMi5JVGVzdENvbmZpZ1NldHRpbmdzU2VydmljZSwgY29uZmlnU2V0dGluZ1NlcnZpY2VfMS5UZXN0Q29uZmlnU2V0dGluZ3NTZXJ2aWNlKTtcclxuICAgIHNlcnZpY2VNYW5hZ2VyLmFkZFNpbmdsZXRvbih0eXBlc18zLklUZXN0Q29uZmlndXJhdGlvbk1hbmFnZXJGYWN0b3J5LCBjb25maWd1cmF0aW9uRmFjdG9yeV8xLlRlc3RDb25maWd1cmF0aW9uTWFuYWdlckZhY3RvcnkpO1xyXG4gICAgc2VydmljZU1hbmFnZXIuYWRkRmFjdG9yeSh0eXBlc18yLklUZXN0TWFuYWdlckZhY3RvcnksIChjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICh0ZXN0UHJvdmlkZXIsIHdvcmtzcGFjZUZvbGRlciwgcm9vdERpcmVjdG9yeSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlQ29udGFpbmVyID0gY29udGV4dC5jb250YWluZXIuZ2V0KHR5cGVzXzEuSVNlcnZpY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRlc3RQcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5OT1NFVEVTVF9QUk9WSURFUjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbWFpbl8zLlRlc3RNYW5hZ2VyKHdvcmtzcGFjZUZvbGRlciwgcm9vdERpcmVjdG9yeSwgc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLlBZVEVTVF9QUk9WSURFUjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbWFpbl80LlRlc3RNYW5hZ2VyKHdvcmtzcGFjZUZvbGRlciwgcm9vdERpcmVjdG9yeSwgc2VydmljZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLlVOSVRURVNUX1BST1ZJREVSOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBtYWluXzUuVGVzdE1hbmFnZXIod29ya3NwYWNlRm9sZGVyLCByb290RGlyZWN0b3J5LCBzZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCB0ZXN0IHByb3ZpZGVyICcke3Rlc3RQcm92aWRlcn0nYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICBzZXJ2aWNlTWFuYWdlci5hZGRGYWN0b3J5KHR5cGVzXzIuSVRlc3RNYW5hZ2VyU2VydmljZUZhY3RvcnksIChjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICh3b3Jrc3BhY2VGb2xkZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VydmljZUNvbnRhaW5lciA9IGNvbnRleHQuY29udGFpbmVyLmdldCh0eXBlc18xLklTZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdHNIZWxwZXIgPSBjb250ZXh0LmNvbnRhaW5lci5nZXQodHlwZXNfMi5JVGVzdHNIZWxwZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IHRlc3RNYW5hZ2VyU2VydmljZV8xLlRlc3RNYW5hZ2VyU2VydmljZSh3b3Jrc3BhY2VGb2xkZXIsIHRlc3RzSGVscGVyLCBzZXJ2aWNlQ29udGFpbmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0cy5yZWdpc3RlclR5cGVzID0gcmVnaXN0ZXJUeXBlcztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VydmljZVJlZ2lzdHJ5LmpzLm1hcCJdfQ==