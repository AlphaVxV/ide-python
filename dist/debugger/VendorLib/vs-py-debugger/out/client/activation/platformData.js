"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : new P(function (resolve) {
        resolve(result.value);
      }).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const languageServerHashes_1 = require("./languageServer/languageServerHashes");

var PlatformName;

(function (PlatformName) {
  PlatformName["Windows32Bit"] = "win-x86";
  PlatformName["Windows64Bit"] = "win-x64";
  PlatformName["Mac64Bit"] = "osx-x64";
  PlatformName["Linux64Bit"] = "linux-x64";
})(PlatformName = exports.PlatformName || (exports.PlatformName = {}));

var PlatformLSExecutables;

(function (PlatformLSExecutables) {
  PlatformLSExecutables["Windows"] = "Microsoft.Python.LanguageServer.exe";
  PlatformLSExecutables["MacOS"] = "Microsoft.Python.LanguageServer";
  PlatformLSExecutables["Linux"] = "Microsoft.Python.LanguageServer";
})(PlatformLSExecutables = exports.PlatformLSExecutables || (exports.PlatformLSExecutables = {}));

class PlatformData {
  constructor(platform, fs) {
    this.platform = platform;
  }

  getPlatformName() {
    if (this.platform.isWindows) {
      return this.platform.is64bit ? PlatformName.Windows64Bit : PlatformName.Windows32Bit;
    }

    if (this.platform.isMac) {
      return PlatformName.Mac64Bit;
    }

    if (this.platform.isLinux) {
      if (!this.platform.is64bit) {
        throw new Error('Microsoft Python Language Server does not support 32-bit Linux.');
      }

      return PlatformName.Linux64Bit;
    }

    throw new Error('Unknown OS platform.');
  }

  getEngineDllName() {
    return 'Microsoft.Python.LanguageServer.dll';
  }

  getEngineExecutableName() {
    if (this.platform.isWindows) {
      return PlatformLSExecutables.Windows;
    } else if (this.platform.isLinux) {
      return PlatformLSExecutables.Linux;
    } else if (this.platform.isMac) {
      return PlatformLSExecutables.MacOS;
    } else {
      return 'unknown-platform';
    }
  }

  getExpectedHash() {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.platform.isWindows) {
        return this.platform.is64bit ? languageServerHashes_1.language_server_win_x64_sha512 : languageServerHashes_1.language_server_win_x86_sha512;
      }

      if (this.platform.isMac) {
        return languageServerHashes_1.language_server_osx_x64_sha512;
      }

      if (this.platform.isLinux && this.platform.is64bit) {
        return languageServerHashes_1.language_server_linux_x64_sha512;
      }

      throw new Error('Unknown platform.');
    });
  }

}

exports.PlatformData = PlatformData;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXRmb3JtRGF0YS5qcyJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwibGFuZ3VhZ2VTZXJ2ZXJIYXNoZXNfMSIsInJlcXVpcmUiLCJQbGF0Zm9ybU5hbWUiLCJQbGF0Zm9ybUxTRXhlY3V0YWJsZXMiLCJQbGF0Zm9ybURhdGEiLCJjb25zdHJ1Y3RvciIsInBsYXRmb3JtIiwiZnMiLCJnZXRQbGF0Zm9ybU5hbWUiLCJpc1dpbmRvd3MiLCJpczY0Yml0IiwiV2luZG93czY0Qml0IiwiV2luZG93czMyQml0IiwiaXNNYWMiLCJNYWM2NEJpdCIsImlzTGludXgiLCJFcnJvciIsIkxpbnV4NjRCaXQiLCJnZXRFbmdpbmVEbGxOYW1lIiwiZ2V0RW5naW5lRXhlY3V0YWJsZU5hbWUiLCJXaW5kb3dzIiwiTGludXgiLCJNYWNPUyIsImdldEV4cGVjdGVkSGFzaCIsImxhbmd1YWdlX3NlcnZlcl93aW5feDY0X3NoYTUxMiIsImxhbmd1YWdlX3NlcnZlcl93aW5feDg2X3NoYTUxMiIsImxhbmd1YWdlX3NlcnZlcl9vc3hfeDY0X3NoYTUxMiIsImxhbmd1YWdlX3NlcnZlcl9saW51eF94NjRfc2hhNTEyIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0E7QUFDQTs7QUFDQSxJQUFJQSxTQUFTLEdBQUksVUFBUSxTQUFLQSxTQUFkLElBQTRCLFVBQVVDLE9BQVYsRUFBbUJDLFVBQW5CLEVBQStCQyxDQUEvQixFQUFrQ0MsU0FBbEMsRUFBNkM7QUFDckYsU0FBTyxLQUFLRCxDQUFDLEtBQUtBLENBQUMsR0FBR0UsT0FBVCxDQUFOLEVBQXlCLFVBQVVDLE9BQVYsRUFBbUJDLE1BQW5CLEVBQTJCO0FBQ3ZELGFBQVNDLFNBQVQsQ0FBbUJDLEtBQW5CLEVBQTBCO0FBQUUsVUFBSTtBQUFFQyxRQUFBQSxJQUFJLENBQUNOLFNBQVMsQ0FBQ08sSUFBVixDQUFlRixLQUFmLENBQUQsQ0FBSjtBQUE4QixPQUFwQyxDQUFxQyxPQUFPRyxDQUFQLEVBQVU7QUFBRUwsUUFBQUEsTUFBTSxDQUFDSyxDQUFELENBQU47QUFBWTtBQUFFOztBQUMzRixhQUFTQyxRQUFULENBQWtCSixLQUFsQixFQUF5QjtBQUFFLFVBQUk7QUFBRUMsUUFBQUEsSUFBSSxDQUFDTixTQUFTLENBQUMsT0FBRCxDQUFULENBQW1CSyxLQUFuQixDQUFELENBQUo7QUFBa0MsT0FBeEMsQ0FBeUMsT0FBT0csQ0FBUCxFQUFVO0FBQUVMLFFBQUFBLE1BQU0sQ0FBQ0ssQ0FBRCxDQUFOO0FBQVk7QUFBRTs7QUFDOUYsYUFBU0YsSUFBVCxDQUFjSSxNQUFkLEVBQXNCO0FBQUVBLE1BQUFBLE1BQU0sQ0FBQ0MsSUFBUCxHQUFjVCxPQUFPLENBQUNRLE1BQU0sQ0FBQ0wsS0FBUixDQUFyQixHQUFzQyxJQUFJTixDQUFKLENBQU0sVUFBVUcsT0FBVixFQUFtQjtBQUFFQSxRQUFBQSxPQUFPLENBQUNRLE1BQU0sQ0FBQ0wsS0FBUixDQUFQO0FBQXdCLE9BQW5ELEVBQXFETyxJQUFyRCxDQUEwRFIsU0FBMUQsRUFBcUVLLFFBQXJFLENBQXRDO0FBQXVIOztBQUMvSUgsSUFBQUEsSUFBSSxDQUFDLENBQUNOLFNBQVMsR0FBR0EsU0FBUyxDQUFDYSxLQUFWLENBQWdCaEIsT0FBaEIsRUFBeUJDLFVBQVUsSUFBSSxFQUF2QyxDQUFiLEVBQXlEUyxJQUF6RCxFQUFELENBQUo7QUFDSCxHQUxNLENBQVA7QUFNSCxDQVBEOztBQVFBTyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVYLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUNBLE1BQU1ZLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsdUNBQUQsQ0FBdEM7O0FBQ0EsSUFBSUMsWUFBSjs7QUFDQSxDQUFDLFVBQVVBLFlBQVYsRUFBd0I7QUFDckJBLEVBQUFBLFlBQVksQ0FBQyxjQUFELENBQVosR0FBK0IsU0FBL0I7QUFDQUEsRUFBQUEsWUFBWSxDQUFDLGNBQUQsQ0FBWixHQUErQixTQUEvQjtBQUNBQSxFQUFBQSxZQUFZLENBQUMsVUFBRCxDQUFaLEdBQTJCLFNBQTNCO0FBQ0FBLEVBQUFBLFlBQVksQ0FBQyxZQUFELENBQVosR0FBNkIsV0FBN0I7QUFDSCxDQUxELEVBS0dBLFlBQVksR0FBR0gsT0FBTyxDQUFDRyxZQUFSLEtBQXlCSCxPQUFPLENBQUNHLFlBQVIsR0FBdUIsRUFBaEQsQ0FMbEI7O0FBTUEsSUFBSUMscUJBQUo7O0FBQ0EsQ0FBQyxVQUFVQSxxQkFBVixFQUFpQztBQUM5QkEsRUFBQUEscUJBQXFCLENBQUMsU0FBRCxDQUFyQixHQUFtQyxxQ0FBbkM7QUFDQUEsRUFBQUEscUJBQXFCLENBQUMsT0FBRCxDQUFyQixHQUFpQyxpQ0FBakM7QUFDQUEsRUFBQUEscUJBQXFCLENBQUMsT0FBRCxDQUFyQixHQUFpQyxpQ0FBakM7QUFDSCxDQUpELEVBSUdBLHFCQUFxQixHQUFHSixPQUFPLENBQUNJLHFCQUFSLEtBQWtDSixPQUFPLENBQUNJLHFCQUFSLEdBQWdDLEVBQWxFLENBSjNCOztBQUtBLE1BQU1DLFlBQU4sQ0FBbUI7QUFDZkMsRUFBQUEsV0FBVyxDQUFDQyxRQUFELEVBQVdDLEVBQVgsRUFBZTtBQUN0QixTQUFLRCxRQUFMLEdBQWdCQSxRQUFoQjtBQUNIOztBQUNERSxFQUFBQSxlQUFlLEdBQUc7QUFDZCxRQUFJLEtBQUtGLFFBQUwsQ0FBY0csU0FBbEIsRUFBNkI7QUFDekIsYUFBTyxLQUFLSCxRQUFMLENBQWNJLE9BQWQsR0FBd0JSLFlBQVksQ0FBQ1MsWUFBckMsR0FBb0RULFlBQVksQ0FBQ1UsWUFBeEU7QUFDSDs7QUFDRCxRQUFJLEtBQUtOLFFBQUwsQ0FBY08sS0FBbEIsRUFBeUI7QUFDckIsYUFBT1gsWUFBWSxDQUFDWSxRQUFwQjtBQUNIOztBQUNELFFBQUksS0FBS1IsUUFBTCxDQUFjUyxPQUFsQixFQUEyQjtBQUN2QixVQUFJLENBQUMsS0FBS1QsUUFBTCxDQUFjSSxPQUFuQixFQUE0QjtBQUN4QixjQUFNLElBQUlNLEtBQUosQ0FBVSxpRUFBVixDQUFOO0FBQ0g7O0FBQ0QsYUFBT2QsWUFBWSxDQUFDZSxVQUFwQjtBQUNIOztBQUNELFVBQU0sSUFBSUQsS0FBSixDQUFVLHNCQUFWLENBQU47QUFDSDs7QUFDREUsRUFBQUEsZ0JBQWdCLEdBQUc7QUFDZixXQUFPLHFDQUFQO0FBQ0g7O0FBQ0RDLEVBQUFBLHVCQUF1QixHQUFHO0FBQ3RCLFFBQUksS0FBS2IsUUFBTCxDQUFjRyxTQUFsQixFQUE2QjtBQUN6QixhQUFPTixxQkFBcUIsQ0FBQ2lCLE9BQTdCO0FBQ0gsS0FGRCxNQUdLLElBQUksS0FBS2QsUUFBTCxDQUFjUyxPQUFsQixFQUEyQjtBQUM1QixhQUFPWixxQkFBcUIsQ0FBQ2tCLEtBQTdCO0FBQ0gsS0FGSSxNQUdBLElBQUksS0FBS2YsUUFBTCxDQUFjTyxLQUFsQixFQUF5QjtBQUMxQixhQUFPVixxQkFBcUIsQ0FBQ21CLEtBQTdCO0FBQ0gsS0FGSSxNQUdBO0FBQ0QsYUFBTyxrQkFBUDtBQUNIO0FBQ0o7O0FBQ0RDLEVBQUFBLGVBQWUsR0FBRztBQUNkLFdBQU81QyxTQUFTLENBQUMsSUFBRCxFQUFPLEtBQUssQ0FBWixFQUFlLEtBQUssQ0FBcEIsRUFBdUIsYUFBYTtBQUNoRCxVQUFJLEtBQUsyQixRQUFMLENBQWNHLFNBQWxCLEVBQTZCO0FBQ3pCLGVBQU8sS0FBS0gsUUFBTCxDQUFjSSxPQUFkLEdBQXdCVixzQkFBc0IsQ0FBQ3dCLDhCQUEvQyxHQUFnRnhCLHNCQUFzQixDQUFDeUIsOEJBQTlHO0FBQ0g7O0FBQ0QsVUFBSSxLQUFLbkIsUUFBTCxDQUFjTyxLQUFsQixFQUF5QjtBQUNyQixlQUFPYixzQkFBc0IsQ0FBQzBCLDhCQUE5QjtBQUNIOztBQUNELFVBQUksS0FBS3BCLFFBQUwsQ0FBY1MsT0FBZCxJQUF5QixLQUFLVCxRQUFMLENBQWNJLE9BQTNDLEVBQW9EO0FBQ2hELGVBQU9WLHNCQUFzQixDQUFDMkIsZ0NBQTlCO0FBQ0g7O0FBQ0QsWUFBTSxJQUFJWCxLQUFKLENBQVUsbUJBQVYsQ0FBTjtBQUNILEtBWGUsQ0FBaEI7QUFZSDs7QUFqRGM7O0FBbURuQmpCLE9BQU8sQ0FBQ0ssWUFBUixHQUF1QkEsWUFBdkIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBsYW5ndWFnZVNlcnZlckhhc2hlc18xID0gcmVxdWlyZShcIi4vbGFuZ3VhZ2VTZXJ2ZXIvbGFuZ3VhZ2VTZXJ2ZXJIYXNoZXNcIik7XHJcbnZhciBQbGF0Zm9ybU5hbWU7XHJcbihmdW5jdGlvbiAoUGxhdGZvcm1OYW1lKSB7XHJcbiAgICBQbGF0Zm9ybU5hbWVbXCJXaW5kb3dzMzJCaXRcIl0gPSBcIndpbi14ODZcIjtcclxuICAgIFBsYXRmb3JtTmFtZVtcIldpbmRvd3M2NEJpdFwiXSA9IFwid2luLXg2NFwiO1xyXG4gICAgUGxhdGZvcm1OYW1lW1wiTWFjNjRCaXRcIl0gPSBcIm9zeC14NjRcIjtcclxuICAgIFBsYXRmb3JtTmFtZVtcIkxpbnV4NjRCaXRcIl0gPSBcImxpbnV4LXg2NFwiO1xyXG59KShQbGF0Zm9ybU5hbWUgPSBleHBvcnRzLlBsYXRmb3JtTmFtZSB8fCAoZXhwb3J0cy5QbGF0Zm9ybU5hbWUgPSB7fSkpO1xyXG52YXIgUGxhdGZvcm1MU0V4ZWN1dGFibGVzO1xyXG4oZnVuY3Rpb24gKFBsYXRmb3JtTFNFeGVjdXRhYmxlcykge1xyXG4gICAgUGxhdGZvcm1MU0V4ZWN1dGFibGVzW1wiV2luZG93c1wiXSA9IFwiTWljcm9zb2Z0LlB5dGhvbi5MYW5ndWFnZVNlcnZlci5leGVcIjtcclxuICAgIFBsYXRmb3JtTFNFeGVjdXRhYmxlc1tcIk1hY09TXCJdID0gXCJNaWNyb3NvZnQuUHl0aG9uLkxhbmd1YWdlU2VydmVyXCI7XHJcbiAgICBQbGF0Zm9ybUxTRXhlY3V0YWJsZXNbXCJMaW51eFwiXSA9IFwiTWljcm9zb2Z0LlB5dGhvbi5MYW5ndWFnZVNlcnZlclwiO1xyXG59KShQbGF0Zm9ybUxTRXhlY3V0YWJsZXMgPSBleHBvcnRzLlBsYXRmb3JtTFNFeGVjdXRhYmxlcyB8fCAoZXhwb3J0cy5QbGF0Zm9ybUxTRXhlY3V0YWJsZXMgPSB7fSkpO1xyXG5jbGFzcyBQbGF0Zm9ybURhdGEge1xyXG4gICAgY29uc3RydWN0b3IocGxhdGZvcm0sIGZzKSB7XHJcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xyXG4gICAgfVxyXG4gICAgZ2V0UGxhdGZvcm1OYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXRmb3JtLmlzV2luZG93cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF0Zm9ybS5pczY0Yml0ID8gUGxhdGZvcm1OYW1lLldpbmRvd3M2NEJpdCA6IFBsYXRmb3JtTmFtZS5XaW5kb3dzMzJCaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBsYXRmb3JtLmlzTWFjKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF0Zm9ybU5hbWUuTWFjNjRCaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBsYXRmb3JtLmlzTGludXgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBsYXRmb3JtLmlzNjRiaXQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWljcm9zb2Z0IFB5dGhvbiBMYW5ndWFnZSBTZXJ2ZXIgZG9lcyBub3Qgc3VwcG9ydCAzMi1iaXQgTGludXguJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBsYXRmb3JtTmFtZS5MaW51eDY0Qml0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gT1MgcGxhdGZvcm0uJyk7XHJcbiAgICB9XHJcbiAgICBnZXRFbmdpbmVEbGxOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiAnTWljcm9zb2Z0LlB5dGhvbi5MYW5ndWFnZVNlcnZlci5kbGwnO1xyXG4gICAgfVxyXG4gICAgZ2V0RW5naW5lRXhlY3V0YWJsZU5hbWUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0uaXNXaW5kb3dzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF0Zm9ybUxTRXhlY3V0YWJsZXMuV2luZG93cztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5wbGF0Zm9ybS5pc0xpbnV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF0Zm9ybUxTRXhlY3V0YWJsZXMuTGludXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGxhdGZvcm0uaXNNYWMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXRmb3JtTFNFeGVjdXRhYmxlcy5NYWNPUztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndW5rbm93bi1wbGF0Zm9ybSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0RXhwZWN0ZWRIYXNoKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXRmb3JtLmlzV2luZG93cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxhdGZvcm0uaXM2NGJpdCA/IGxhbmd1YWdlU2VydmVySGFzaGVzXzEubGFuZ3VhZ2Vfc2VydmVyX3dpbl94NjRfc2hhNTEyIDogbGFuZ3VhZ2VTZXJ2ZXJIYXNoZXNfMS5sYW5ndWFnZV9zZXJ2ZXJfd2luX3g4Nl9zaGE1MTI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0uaXNNYWMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZVNlcnZlckhhc2hlc18xLmxhbmd1YWdlX3NlcnZlcl9vc3hfeDY0X3NoYTUxMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF0Zm9ybS5pc0xpbnV4ICYmIHRoaXMucGxhdGZvcm0uaXM2NGJpdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhbmd1YWdlU2VydmVySGFzaGVzXzEubGFuZ3VhZ2Vfc2VydmVyX2xpbnV4X3g2NF9zaGE1MTI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHBsYXRmb3JtLicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUGxhdGZvcm1EYXRhID0gUGxhdGZvcm1EYXRhO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbGF0Zm9ybURhdGEuanMubWFwIl19