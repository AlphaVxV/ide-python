'use strict';

var __decorate = void 0 && (void 0).__decorate || function (decorators, target, key, desc) {
  var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

const vscode = require("vscode");

const telemetry_1 = require("../telemetry");

const constants_1 = require("../telemetry/constants");

const proxy = require("./jediProxy");

class PythonReferenceProvider {
  constructor(jediFactory) {
    this.jediFactory = jediFactory;
  }

  static parseData(data) {
    if (data && data.references.length > 0) {
      // tslint:disable-next-line:no-unnecessary-local-variable
      const references = data.references.filter(ref => {
        if (!ref || typeof ref.columnIndex !== 'number' || typeof ref.lineIndex !== 'number' || typeof ref.fileName !== 'string' || ref.columnIndex === -1 || ref.lineIndex === -1 || ref.fileName.length === 0) {
          return false;
        }

        return true;
      }).map(ref => {
        const definitionResource = vscode.Uri.file(ref.fileName);
        const range = new vscode.Range(ref.lineIndex, ref.columnIndex, ref.lineIndex, ref.columnIndex);
        return new vscode.Location(definitionResource, range);
      });
      return references;
    }

    return [];
  }

  provideReferences(document, position, context, token) {
    const filename = document.fileName;

    if (document.lineAt(position.line).text.match(/^\s*\/\//)) {
      return Promise.resolve(null);
    }

    if (position.character <= 0) {
      return Promise.resolve(null);
    }

    const range = document.getWordRangeAtPosition(position);
    const columnIndex = range.isEmpty ? position.character : range.end.character;
    const cmd = {
      command: proxy.CommandType.Usages,
      fileName: filename,
      columnIndex: columnIndex,
      lineIndex: position.line
    };

    if (document.isDirty) {
      cmd.source = document.getText();
    }

    return this.jediFactory.getJediProxyHandler(document.uri).sendCommand(cmd, token).then(data => {
      return PythonReferenceProvider.parseData(data);
    });
  }

}

__decorate([telemetry_1.captureTelemetry(constants_1.REFERENCE)], PythonReferenceProvider.prototype, "provideReferences", null);

exports.PythonReferenceProvider = PythonReferenceProvider;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZmVyZW5jZVByb3ZpZGVyLmpzIl0sIm5hbWVzIjpbIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZCIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInZzY29kZSIsInJlcXVpcmUiLCJ0ZWxlbWV0cnlfMSIsImNvbnN0YW50c18xIiwicHJveHkiLCJQeXRob25SZWZlcmVuY2VQcm92aWRlciIsImNvbnN0cnVjdG9yIiwiamVkaUZhY3RvcnkiLCJwYXJzZURhdGEiLCJkYXRhIiwicmVmZXJlbmNlcyIsImZpbHRlciIsInJlZiIsImNvbHVtbkluZGV4IiwibGluZUluZGV4IiwiZmlsZU5hbWUiLCJtYXAiLCJkZWZpbml0aW9uUmVzb3VyY2UiLCJVcmkiLCJmaWxlIiwicmFuZ2UiLCJSYW5nZSIsIkxvY2F0aW9uIiwicHJvdmlkZVJlZmVyZW5jZXMiLCJkb2N1bWVudCIsInBvc2l0aW9uIiwiY29udGV4dCIsInRva2VuIiwiZmlsZW5hbWUiLCJsaW5lQXQiLCJsaW5lIiwidGV4dCIsIm1hdGNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjaGFyYWN0ZXIiLCJnZXRXb3JkUmFuZ2VBdFBvc2l0aW9uIiwiaXNFbXB0eSIsImVuZCIsImNtZCIsImNvbW1hbmQiLCJDb21tYW5kVHlwZSIsIlVzYWdlcyIsImlzRGlydHkiLCJzb3VyY2UiLCJnZXRUZXh0IiwiZ2V0SmVkaVByb3h5SGFuZGxlciIsInVyaSIsInNlbmRDb21tYW5kIiwidGhlbiIsImNhcHR1cmVUZWxlbWV0cnkiLCJSRUZFUkVOQ0UiLCJwcm90b3R5cGUiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLElBQUlBLFVBQVUsR0FBSSxVQUFRLFNBQUtBLFVBQWQsSUFBNkIsVUFBVUMsVUFB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LFdBQU4sQ0FBa0JDLE1BRG5CO0FBRVIzQixNQUFBQSxRQUFRLEVBQUVhLFFBRkY7QUFHUmYsTUFBQUEsV0FBVyxFQUFFQSxXQUhMO0FBSVJDLE1BQUFBLFNBQVMsRUFBRVcsUUFBUSxDQUFDSztBQUpaLEtBQVo7O0FBTUEsUUFBSU4sUUFBUSxDQUFDbUIsT0FBYixFQUFzQjtBQUNsQkosTUFBQUEsR0FBRyxDQUFDSyxNQUFKLEdBQWFwQixRQUFRLENBQUNxQixPQUFULEVBQWI7QUFDSDs7QUFDRCxXQUFPLEtBQUt0QyxXQUFMLENBQWlCdUMsbUJBQWpCLENBQXFDdEIsUUFBUSxDQUFDdUIsR0FBOUMsRUFBbURDLFdBQW5ELENBQStEVCxHQUEvRCxFQUFvRVosS0FBcEUsRUFBMkVzQixJQUEzRSxDQUFnRnhDLElBQUksSUFBSTtBQUMzRixhQUFPSix1QkFBdUIsQ0FBQ0csU0FBeEIsQ0FBa0NDLElBQWxDLENBQVA7QUFDSCxLQUZNLENBQVA7QUFHSDs7QUE1Q3lCOztBQThDOUIzQixVQUFVLENBQUMsQ0FDUG9CLFdBQVcsQ0FBQ2dELGdCQUFaLENBQTZCL0MsV0FBVyxDQUFDZ0QsU0FBekMsQ0FETyxDQUFELEVBRVA5Qyx1QkFBdUIsQ0FBQytDLFNBRmpCLEVBRTRCLG1CQUY1QixFQUVpRCxJQUZqRCxDQUFWOztBQUdBdEQsT0FBTyxDQUFDTyx1QkFBUixHQUFrQ0EsdUJBQWxDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IHZzY29kZSA9IHJlcXVpcmUoXCJ2c2NvZGVcIik7XHJcbmNvbnN0IHRlbGVtZXRyeV8xID0gcmVxdWlyZShcIi4uL3RlbGVtZXRyeVwiKTtcclxuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vdGVsZW1ldHJ5L2NvbnN0YW50c1wiKTtcclxuY29uc3QgcHJveHkgPSByZXF1aXJlKFwiLi9qZWRpUHJveHlcIik7XHJcbmNsYXNzIFB5dGhvblJlZmVyZW5jZVByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGplZGlGYWN0b3J5KSB7XHJcbiAgICAgICAgdGhpcy5qZWRpRmFjdG9yeSA9IGplZGlGYWN0b3J5O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHBhcnNlRGF0YShkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5yZWZlcmVuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVubmVjZXNzYXJ5LWxvY2FsLXZhcmlhYmxlXHJcbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZXMgPSBkYXRhLnJlZmVyZW5jZXMuZmlsdGVyKHJlZiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlZiB8fCB0eXBlb2YgcmVmLmNvbHVtbkluZGV4ICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgcmVmLmxpbmVJbmRleCAhPT0gJ251bWJlcidcclxuICAgICAgICAgICAgICAgICAgICB8fCB0eXBlb2YgcmVmLmZpbGVOYW1lICE9PSAnc3RyaW5nJyB8fCByZWYuY29sdW1uSW5kZXggPT09IC0xIHx8IHJlZi5saW5lSW5kZXggPT09IC0xIHx8IHJlZi5maWxlTmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSkubWFwKHJlZiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uUmVzb3VyY2UgPSB2c2NvZGUuVXJpLmZpbGUocmVmLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gbmV3IHZzY29kZS5SYW5nZShyZWYubGluZUluZGV4LCByZWYuY29sdW1uSW5kZXgsIHJlZi5saW5lSW5kZXgsIHJlZi5jb2x1bW5JbmRleCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHZzY29kZS5Mb2NhdGlvbihkZWZpbml0aW9uUmVzb3VyY2UsIHJhbmdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZWZlcmVuY2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBwcm92aWRlUmVmZXJlbmNlcyhkb2N1bWVudCwgcG9zaXRpb24sIGNvbnRleHQsIHRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBkb2N1bWVudC5maWxlTmFtZTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQubGluZUF0KHBvc2l0aW9uLmxpbmUpLnRleHQubWF0Y2goL15cXHMqXFwvXFwvLykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uLmNoYXJhY3RlciA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuZ2V0V29yZFJhbmdlQXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgY29sdW1uSW5kZXggPSByYW5nZS5pc0VtcHR5ID8gcG9zaXRpb24uY2hhcmFjdGVyIDogcmFuZ2UuZW5kLmNoYXJhY3RlcjtcclxuICAgICAgICBjb25zdCBjbWQgPSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmQ6IHByb3h5LkNvbW1hbmRUeXBlLlVzYWdlcyxcclxuICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVuYW1lLFxyXG4gICAgICAgICAgICBjb2x1bW5JbmRleDogY29sdW1uSW5kZXgsXHJcbiAgICAgICAgICAgIGxpbmVJbmRleDogcG9zaXRpb24ubGluZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmlzRGlydHkpIHtcclxuICAgICAgICAgICAgY21kLnNvdXJjZSA9IGRvY3VtZW50LmdldFRleHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuamVkaUZhY3RvcnkuZ2V0SmVkaVByb3h5SGFuZGxlcihkb2N1bWVudC51cmkpLnNlbmRDb21tYW5kKGNtZCwgdG9rZW4pLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQeXRob25SZWZlcmVuY2VQcm92aWRlci5wYXJzZURhdGEoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuX19kZWNvcmF0ZShbXHJcbiAgICB0ZWxlbWV0cnlfMS5jYXB0dXJlVGVsZW1ldHJ5KGNvbnN0YW50c18xLlJFRkVSRU5DRSlcclxuXSwgUHl0aG9uUmVmZXJlbmNlUHJvdmlkZXIucHJvdG90eXBlLCBcInByb3ZpZGVSZWZlcmVuY2VzXCIsIG51bGwpO1xyXG5leHBvcnRzLlB5dGhvblJlZmVyZW5jZVByb3ZpZGVyID0gUHl0aG9uUmVmZXJlbmNlUHJvdmlkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZmVyZW5jZVByb3ZpZGVyLmpzLm1hcCJdfQ==