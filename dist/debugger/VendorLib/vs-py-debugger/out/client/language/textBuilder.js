"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

Object.defineProperty(exports, "__esModule", {
  value: true
});

const characters_1 = require("./characters"); // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.


class TextBuilder {
  constructor() {
    this.segments = [];
  }

  getText() {
    if (this.isLastWhiteSpace()) {
      this.segments.pop();
    }

    return this.segments.join('');
  }

  softAppendSpace(count = 1) {
    if (this.segments.length === 0) {
      return;
    }

    if (this.isLastWhiteSpace()) {
      count = count - 1;
    }

    for (let i = 0; i < count; i += 1) {
      this.segments.push(' ');
    }
  }

  append(text) {
    this.segments.push(text);
  }

  isLastWhiteSpace() {
    return this.segments.length > 0 && this.isWhitespace(this.segments[this.segments.length - 1]);
  }

  isWhitespace(s) {
    for (let i = 0; i < s.length; i += 1) {
      if (!characters_1.isWhiteSpace(s.charCodeAt(i))) {
        return false;
      }
    }

    return true;
  }

}

exports.TextBuilder = TextBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHRCdWlsZGVyLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY2hhcmFjdGVyc18xIiwicmVxdWlyZSIsIlRleHRCdWlsZGVyIiwiY29uc3RydWN0b3IiLCJzZWdtZW50cyIsImdldFRleHQiLCJpc0xhc3RXaGl0ZVNwYWNlIiwicG9wIiwiam9pbiIsInNvZnRBcHBlbmRTcGFjZSIsImNvdW50IiwibGVuZ3RoIiwiaSIsInB1c2giLCJhcHBlbmQiLCJ0ZXh0IiwiaXNXaGl0ZXNwYWNlIiwicyIsImlzV2hpdGVTcGFjZSIsImNoYXJDb2RlQXQiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTtBQUNBOztBQUNBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVDLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUNBLE1BQU1DLFlBQVksR0FBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBNUIsQyxDQUNBO0FBQ0E7OztBQUNBLE1BQU1DLFdBQU4sQ0FBa0I7QUFDZEMsRUFBQUEsV0FBVyxHQUFHO0FBQ1YsU0FBS0MsUUFBTCxHQUFnQixFQUFoQjtBQUNIOztBQUNEQyxFQUFBQSxPQUFPLEdBQUc7QUFDTixRQUFJLEtBQUtDLGdCQUFMLEVBQUosRUFBNkI7QUFDekIsV0FBS0YsUUFBTCxDQUFjRyxHQUFkO0FBQ0g7O0FBQ0QsV0FBTyxLQUFLSCxRQUFMLENBQWNJLElBQWQsQ0FBbUIsRUFBbkIsQ0FBUDtBQUNIOztBQUNEQyxFQUFBQSxlQUFlLENBQUNDLEtBQUssR0FBRyxDQUFULEVBQVk7QUFDdkIsUUFBSSxLQUFLTixRQUFMLENBQWNPLE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDNUI7QUFDSDs7QUFDRCxRQUFJLEtBQUtMLGdCQUFMLEVBQUosRUFBNkI7QUFDekJJLE1BQUFBLEtBQUssR0FBR0EsS0FBSyxHQUFHLENBQWhCO0FBQ0g7O0FBQ0QsU0FBSyxJQUFJRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixLQUFwQixFQUEyQkUsQ0FBQyxJQUFJLENBQWhDLEVBQW1DO0FBQy9CLFdBQUtSLFFBQUwsQ0FBY1MsSUFBZCxDQUFtQixHQUFuQjtBQUNIO0FBQ0o7O0FBQ0RDLEVBQUFBLE1BQU0sQ0FBQ0MsSUFBRCxFQUFPO0FBQ1QsU0FBS1gsUUFBTCxDQUFjUyxJQUFkLENBQW1CRSxJQUFuQjtBQUNIOztBQUNEVCxFQUFBQSxnQkFBZ0IsR0FBRztBQUNmLFdBQU8sS0FBS0YsUUFBTCxDQUFjTyxNQUFkLEdBQXVCLENBQXZCLElBQTRCLEtBQUtLLFlBQUwsQ0FBa0IsS0FBS1osUUFBTCxDQUFjLEtBQUtBLFFBQUwsQ0FBY08sTUFBZCxHQUF1QixDQUFyQyxDQUFsQixDQUFuQztBQUNIOztBQUNESyxFQUFBQSxZQUFZLENBQUNDLENBQUQsRUFBSTtBQUNaLFNBQUssSUFBSUwsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0ssQ0FBQyxDQUFDTixNQUF0QixFQUE4QkMsQ0FBQyxJQUFJLENBQW5DLEVBQXNDO0FBQ2xDLFVBQUksQ0FBQ1osWUFBWSxDQUFDa0IsWUFBYixDQUEwQkQsQ0FBQyxDQUFDRSxVQUFGLENBQWFQLENBQWIsQ0FBMUIsQ0FBTCxFQUFpRDtBQUM3QyxlQUFPLEtBQVA7QUFDSDtBQUNKOztBQUNELFdBQU8sSUFBUDtBQUNIOztBQWxDYTs7QUFvQ2xCZCxPQUFPLENBQUNJLFdBQVIsR0FBc0JBLFdBQXRCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgY2hhcmFjdGVyc18xID0gcmVxdWlyZShcIi4vY2hhcmFjdGVyc1wiKTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuY2xhc3MgVGV4dEJ1aWxkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgZ2V0VGV4dCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0xhc3RXaGl0ZVNwYWNlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWdtZW50cy5wb3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuam9pbignJyk7XHJcbiAgICB9XHJcbiAgICBzb2Z0QXBwZW5kU3BhY2UoY291bnQgPSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNMYXN0V2hpdGVTcGFjZSgpKSB7XHJcbiAgICAgICAgICAgIGNvdW50ID0gY291bnQgLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWdtZW50cy5wdXNoKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXBwZW5kKHRleHQpIHtcclxuICAgICAgICB0aGlzLnNlZ21lbnRzLnB1c2godGV4dCk7XHJcbiAgICB9XHJcbiAgICBpc0xhc3RXaGl0ZVNwYWNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy5pc1doaXRlc3BhY2UodGhpcy5zZWdtZW50c1t0aGlzLnNlZ21lbnRzLmxlbmd0aCAtIDFdKTtcclxuICAgIH1cclxuICAgIGlzV2hpdGVzcGFjZShzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmICghY2hhcmFjdGVyc18xLmlzV2hpdGVTcGFjZShzLmNoYXJDb2RlQXQoaSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UZXh0QnVpbGRlciA9IFRleHRCdWlsZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXh0QnVpbGRlci5qcy5tYXAiXX0=